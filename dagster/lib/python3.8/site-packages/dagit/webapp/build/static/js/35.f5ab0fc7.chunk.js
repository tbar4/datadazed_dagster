(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[35],{21284:function(e,n,t){"use strict";t.r(n),t.d(n,{InstanceRoot:function(){return Mo},default:function(){return $o}});var r,o,i,s=t(87067),a=t(325),l=t(27601),c=t(99500),u=t(73701),d=t(3159),p=t(30804),h=t(32030),f=t(34595),g=t(78093),m=t(39061),x=t(82348),v=t(78072),y=t(1223),j=t(95764),b=t(19065),w=t(54268),C=t(58591),S=t(7838),k=t(31269),N=t(89646),T=t(60736),I=t(60652),_=t(74549),E=t(19102),Z=t(55419),R=t(18819),O=t(64424),P=t(44198),L=t(30057),F=t(55752),D=t(5484),A=t(37099),K=t(25582),q=t(25466),U=t(12745),z=t(89279),G=t(71725),M=t(7748),$=t(33208),W=t(10922),V=t(62e3),H=t(34449),J=t(61460),B=t(7713),Q=t(922),X=t(77171),Y=t(32289),ee=function(e){var n=e.items,t=e.liveDataByNode,r=(0,l.k6)();return null===n?(0,Y.jsx)(ne,{flex:{alignItems:"center",justifyContent:"center"},children:(0,Y.jsx)(f.$,{purpose:"section"})}):(0,Y.jsx)(ne,{flex:{gap:4},padding:{horizontal:12},children:n.map((function(e){return(0,Y.jsx)(te,{onClick:function(n){n.stopPropagation(),r.push((0,X.p)(e.assetKey,{view:"definition"}))},children:(0,Y.jsx)(M.p4,{definition:e,inAssetCatalog:!0,selected:!1,liveData:t[(0,m.Wu)(e.assetKey)]})},e.id)}))})},ne=(0,Q.ZP)(h.x).withConfig({displayName:"AssetNodeList__Container",componentId:"sc-1ee72i3-0"})(["height:144px;overflow-x:auto;width:100%;white-space:nowrap;"]),te=Q.ZP.div.withConfig({displayName:"AssetNodeList__AssetNodeWrapper",componentId:"sc-1ee72i3-1"})(["cursor:pointer;width:240px;flex-shrink:0;"]),re=t(95609),oe=function(e){var n,t=e.assetNode,r=e.upstream,o=e.downstream,i=e.liveDataByNode,s=(0,re.d)([t.assetKey]),a=(0,B.U6)(t),l=a.assetMetadata,c=a.assetType,u=null===(n=t.configField)||void 0===n?void 0:n.configType,d=(0,A.k)(t.repository.name,t.repository.location.name);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(J.N,{assetKey:t.assetKey,loadedFromRepo:d,padded:!0}),(0,Y.jsxs)(h.x,{flex:{direction:"row"},style:{flex:1},children:[(0,Y.jsxs)(h.x,{style:{flex:1,minWidth:0},flex:{direction:"column"},border:{side:"right",width:1,color:S.w.KeylineGray},children:[(0,Y.jsxs)(h.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:[(0,Y.jsx)(U.pm,{children:"Description"}),(0,Y.jsx)(ie,{assetNode:t,repoAddress:d})]}),(0,Y.jsx)(h.x,{padding:{vertical:16,horizontal:24},style:{flex:1,flexBasis:"content",flexGrow:0,minHeight:120},children:(0,Y.jsx)(W.d,{description:t.description||"No description provided.",maxHeight:260})}),t.partitionDefinition&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(h.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:(0,Y.jsx)(U.pm,{children:"Partitions"})}),(0,Y.jsxs)(h.x,{padding:{top:16,horizontal:24,bottom:24},flex:{direction:"column",gap:16},children:[(0,Y.jsx)("p",{children:t.partitionDefinition}),(0,Y.jsx)(re.m,{assetKey:t.assetKey,data:s})]})]}),(0,Y.jsxs)(h.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:[(0,Y.jsxs)(U.pm,{children:["Upstream Assets",null!==r&&void 0!==r&&r.length?" (".concat(r.length,")"):""]}),(0,Y.jsx)(_.rU,{to:"?view=lineage&lineageScope=upstream",children:(0,Y.jsxs)(h.x,{flex:{gap:4,alignItems:"center"},children:["View upstream graph",(0,Y.jsx)(z.JO,{name:"open_in_new",color:S.w.Link})]})})]}),(0,Y.jsx)(ee,{items:r,liveDataByNode:i}),(0,Y.jsxs)(h.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:[(0,Y.jsxs)(U.pm,{children:["Downstream Assets",null!==o&&void 0!==o&&o.length?" (".concat(o.length,")"):""]}),(0,Y.jsx)(_.rU,{to:"?view=lineage&lineageScope=downstream",children:(0,Y.jsxs)(h.x,{flex:{gap:4,alignItems:"center"},children:["View downstream graph",(0,Y.jsx)(z.JO,{name:"open_in_new",color:S.w.Link})]})})]}),(0,Y.jsx)(ee,{items:o,liveDataByNode:i}),(0,Y.jsx)("div",{style:{flex:1}})]}),u?(0,Y.jsxs)(h.x,{border:{side:"vertical",width:1,color:S.w.KeylineGray},style:{flex:.5,minWidth:0},flex:{direction:"column"},children:[(0,Y.jsx)(h.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,Y.jsx)(U.pm,{children:"Config"})}),(0,Y.jsx)(h.x,{padding:{vertical:16,horizontal:24},children:(0,Y.jsx)(G.L,{type:u,typesInScope:u.recursiveConfigTypes})})]}):null,(0,Y.jsxs)(h.x,{style:{flex:.5,minWidth:0},flex:{direction:"column"},children:[(0,Y.jsx)(h.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,Y.jsx)(U.pm,{children:"Type"})}),c?(0,Y.jsx)($.Ot,{type:c}):(0,Y.jsx)(h.x,{padding:{vertical:16,horizontal:24},children:(0,Y.jsx)(W.d,{description:"No type data provided."})}),l.length>0&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(h.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:(0,Y.jsx)(U.pm,{children:"Metadata"})}),(0,Y.jsx)(h.x,{style:{flex:1},children:(0,Y.jsx)(B.mQ,{assetMetadata:l})})]})]})]})]})},ie=function(e){var n=e.assetNode,t=e.repoAddress;return(0,Y.jsxs)(h.x,{flex:{alignItems:"baseline",gap:16,wrap:"wrap"},style:{lineHeight:0},children:[n.jobNames.filter((function(e){return!(0,m.pv)(e)})).map((function(e){return(0,Y.jsx)(U.fv,{children:(0,Y.jsx)(V.h,{isJob:!0,showIcon:!0,pipelineName:e,pipelineHrefContext:t})},e)})),(0,Y.jsx)(se,{assetNode:n,repoAddress:t}),(0,m.mX)(n)&&(0,Y.jsx)(U.YS,{style:{lineHeight:"16px",marginTop:2},children:"Source Asset"})]})},se=function(e){var n=e.assetNode,t=e.repoAddress,r=n.assetKey,o=n.graphName,i=n.opNames,s=n.jobNames,a=i.length;if(!a)return null;if(!o){var l=i[0];if((0,m.ll)(r)===l)return null;var c=(0,K.$U)(t,"/ops/".concat(l));return(0,Y.jsxs)(h.x,{flex:{gap:4,alignItems:"center"},children:[(0,Y.jsx)(z.JO,{name:"op",size:16}),(0,Y.jsx)(U.fv,{children:(0,Y.jsx)(_.rU,{to:c,children:l})})]})}return s.length?(0,Y.jsxs)(h.x,{flex:{gap:4,alignItems:"center"},children:[(0,Y.jsx)(z.JO,{name:"schema",size:16}),(0,Y.jsxs)(U.fv,{children:[(0,Y.jsx)(_.rU,{to:(0,K.$U)(t,"/graphs/".concat(s[0],"/").concat(o,"/")),children:o})," (".concat(1===a?"1 op":"".concat(a," ops"),")")]})]}):null},ae=(0,d.Ps)(r||(r=(0,c.Z)(["\n  fragment AssetNodeDefinitionFragment on AssetNode {\n    id\n    ...AssetNodeConfigFragment\n    description\n    graphName\n    opNames\n    jobNames\n    partitionDefinition\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    ...AssetNodeFragment\n    ...AssetNodeOpMetadataFragment\n  }\n  ","\n  ","\n  ","\n"])),H.r,M.zU,B.Ws),le=t(62816),ce=t.n(le),ue=t(86476),de=t(9315),pe=t(86875),he=function(e){var n=e.assetNode,t=e.repoAddress,r=ce()(n.jobs,(function(e){return e.schedules})),o=ce()(n.jobs,(function(e){return e.sensors}));return(0,Y.jsx)(ue.I,{repoAddress:t,schedules:r,sensors:o,showSwitch:!1})},fe=(0,d.Ps)(o||(o=(0,c.Z)(["\n  fragment AssetNodeInstigatorsFragment on AssetNode {\n    id\n    jobs {\n      id\n      name\n      schedules {\n        id\n        __typename\n        ...ScheduleSwitchFragment\n      }\n      sensors {\n        id\n        __typename\n        ...SensorSwitchFragment\n      }\n    }\n  }\n  ","\n  ","\n"])),de.J,pe.U),ge=t(87011),me=t(75453),xe=t(88863),ve=t(96391),ye=t(19339),je=t(9),be=t(38376),we=t(85532),Ce=t(76867),Se=t(76314),ke="lineageGraphZoomLevel",Ne=function(e){var n=e.assetNode,t=e.assetGraphData,r=e.liveDataByNode,o=e.params,i=(0,m.Wu)(n.assetKey),s=a.useState(null),c=(0,b.Z)(s,2),u=c[0],d=c[1],p=(0,Ce.oJ)(t),g=p.layout,x=p.loading,v=a.useRef(),y=(0,l.k6)();return a.useEffect((function(){if(v.current&&g){var e=Number((0,Se.n)(ke));v.current.autocenter(!1,e),v.current.focus()}}),[v,g,i]),!g||x?(0,Y.jsx)(h.x,{style:{flex:1},flex:{alignItems:"center",justifyContent:"center"},children:(0,Y.jsx)(f.$,{purpose:"page"})}):(0,Y.jsx)(we.l,{ref:function(e){return v.current=e||void 0},interactor:we.l.Interactors.PanAndZoom,graphWidth:g.width,graphHeight:g.height,onDoubleClick:function(e){var n;null===(n=v.current)||void 0===n||n.autocenter(!0),e.stopPropagation()},maxZoom:1.2,maxAutocenterZoom:1.2,children:function(e){var n=e.scale;return(0,Y.jsxs)(Ie,{width:g.width,height:g.height,children:[v.current&&(0,Y.jsx)(Te,{scale:n}),(0,Y.jsx)(ve.B,{highlighted:u,edges:g.edges}),Object.values(g.groups).sort((function(e,n){return e.id.length-n.id.length})).map((function(e){return(0,a.createElement)("foreignObject",(0,j.Z)((0,j.Z)({},e.bounds),{},{key:e.id}),(0,Y.jsx)(je.l,{group:e,scale:n}))})),Object.values(g.nodes).map((function(e){var s=e.id,l=e.bounds,c=t.nodes[s],u=JSON.parse(s);return(0,a.createElement)("foreignObject",(0,j.Z)((0,j.Z)({},l),{},{key:s,style:{overflow:"visible"},onMouseEnter:function(){return d(s)},onMouseLeave:function(){return d(null)},onClick:function(){return e={path:u},void y.push((0,X.p)(e,(0,j.Z)((0,j.Z)({},o),{},{lineageScope:"neighbors"})));var e},onDoubleClick:function(e){var n;null===(n=v.current)||void 0===n||n.zoomToSVGBox(l,!0,1.2),e.stopPropagation()}}),c&&c.definition.opNames.length?n<ye.CZ?(0,Y.jsx)(M.t$,{definition:c.definition,selected:c.id===i}):(0,Y.jsx)(M.p4,{definition:c.definition,liveData:r[c.id],selected:c.id===i}):(0,Y.jsx)(be.e,{assetKey:{path:u}}))}))]})}})},Te=function(e){var n=e.scale;return a.useEffect((function(){try{window.localStorage.setItem(ke,JSON.stringify(n))}catch(e){}}),[n]),(0,Y.jsx)(Y.Fragment,{})},Ie=Q.ZP.svg.withConfig({displayName:"AssetNodeLineageGraph__SVGContainer",componentId:"q47dxd-0"})(["overflow:visible;border-radius:0;"]),_e=t(60445),Ee=function(e){var n=e.params,t=e.setParams,r=e.assetNode,o=e.liveDataByNode,i=e.assetGraphData,s=e.graphQueryItems,l=e.requestedDepth,c=a.useMemo((function(){return(0,R.B)(s,r.assetKey)}),[s,r]),u="upstream"===n.lineageScope?c.upstream:"downstream"===n.lineageScope?c.downstream:Math.max(c.upstream,c.downstream),d=Math.max(1,Math.min(u,l));return(0,Y.jsxs)(h.x,{style:{width:"100%",height:"100%",position:"relative"},flex:{direction:"column"},children:[(0,Y.jsxs)(h.x,{flex:{justifyContent:"space-between",alignItems:"center",gap:12},padding:{left:24,right:12,vertical:12},border:{side:"bottom",color:S.w.KeylineGray,width:1},children:[(0,Y.jsx)(ge.h,{activeItems:new Set([n.lineageScope||"neighbors"]),buttons:[{id:"neighbors",label:"Nearest Neighbors",icon:"graph_neighbors"},{id:"upstream",label:"Upstream",icon:"graph_upstream"},{id:"downstream",label:"Downstream",icon:"graph_downstream"}],onClick:function(e){return t((0,j.Z)((0,j.Z)({},n),{},{lineageScope:e,lineageDepth:void 0}))}}),(0,Y.jsx)(Re,{value:d,onChange:function(e){return t((0,j.Z)((0,j.Z)({},n),{},{lineageDepth:e}))},max:u}),(0,Y.jsx)("div",{style:{flex:1}}),Object.values(i.nodes).length>1?(0,Y.jsx)(_e.XE,{assetKeys:Object.values(i.nodes).map((function(e){return e.assetKey})),intent:"none",context:"all"}):(0,Y.jsx)(me.zx,{icon:(0,Y.jsx)(z.JO,{name:"materialization"}),disabled:!0,children:"Materialize all"})]}),d<u&&(0,Y.jsx)(Ze,{children:"Not all upstream/downstream assets shown. Increase the depth to show more."}),(0,Y.jsx)(Ne,{assetNode:r,liveDataByNode:o,assetGraphData:i,params:n})]})},Ze=Q.ZP.div.withConfig({displayName:"AssetNodeLineage__DepthHidesAssetsNotice",componentId:"sc-1kyddw2-0"})(["background:",";border-radius:8px;color:",";align-items:center;display:flex;padding:4px 8px;gap:4px;position:absolute;right:12px;top:70px;z-index:2;"],S.w.Gray100,S.w.Gray500),Re=function(e){var n=e.value,t=e.max,r=e.onChange,o=a.useState("".concat(n)),i=(0,b.Z)(o,2),s=i[0],l=i[1];a.useEffect((function(){l("".concat(n))}),[n]);var c=function(){var e=Number(s)?Math.min(t,Number(s)):n;r(e)};return(0,Y.jsxs)(h.x,{flex:{gap:8,alignItems:"center"},children:["Graph depth",(0,Y.jsxs)(me.zH,{children:[(0,Y.jsx)(me.zx,{disabled:n<=1,onClick:function(){return r(n-1)},icon:(0,Y.jsx)(z.JO,{name:"subtract"})}),(0,Y.jsx)(xe.oi,{min:1,max:t,disabled:t<=1,inputMode:"numeric",style:{width:40,marginLeft:-1,textAlign:"center",height:32,padding:6,borderRadius:0,boxShadow:"none",border:"1px solid ".concat(S.w.Gray300)},value:s,onChange:function(e){return l(e.target.value)},onKeyDown:function(e){return"Enter"===e.key||"Return"===e.key?c():void 0},onBlur:function(){return c()}},n),(0,Y.jsx)(me.zx,{disabled:n>=t,onClick:function(){return r(n+1)},icon:(0,Y.jsx)(z.JO,{name:"add"})}),(0,Y.jsx)(me.zx,{disabled:n>=t,onClick:function(){return r(t)},children:"All"})]})]})},Oe=function(e){var n,t=e.assetKey,r=(0,P.q)({}),o=(0,b.Z)(r,2),i=o[0],s=o[1],l=(0,u.a)(Me,{variables:{assetKey:{path:t.path}},notifyOnNetworkStatusChange:!0}),c=(l.data||l.previousData||{}).assetOrError,d=c&&"Asset"===c.__typename?c:null,p=null===d||void 0===d?void 0:d.assetMaterializations,g=null!==p&&void 0!==p&&p.length?p[0].timestamp:void 0,x=!i.asOf||Number(g)<=Number(i.asOf),v=null===d||void 0===d?void 0:d.definition,N=v?(0,A.k)(v.repository.name,v.repository.location.name):null,T=(0,m.Je)(t),I="neighbors"===i.lineageScope?2:5,Z=Number(i.lineageDepth)||I,U="+".repeat(Z),z=(0,R.u)("lineage"===i.view&&"upstream"===i.lineageScope?"".concat(U,'"').concat(T,'"'):"lineage"===i.view&&"downstream"===i.lineageScope?'"'.concat(T,'"').concat(U):"".concat(U,'"').concat(T,'"').concat(U),{hideEdgesToNodesOutsideQuery:!0}),G=z.assetGraphData,M=z.graphAssetKeys,$=z.graphQueryItems,W=function(e,n){var t=(0,m.Wu)(n);return a.useMemo((function(){return e?{upstream:Object.values(e.nodes).filter((function(n){var r;return null===(r=e.upstream[t])||void 0===r?void 0:r[(0,m.Wu)(n.assetKey)]})).map((function(e){return e.definition})),downstream:Object.values(e.nodes).filter((function(n){var r;return null===(r=e.downstream[t])||void 0===r?void 0:r[(0,m.Wu)(n.assetKey)]})).map((function(e){return e.definition}))}:{upstream:null,downstream:null}}),[e,t])}(G,t),V=W.upstream,H=W.downstream,J=(0,O.l)(M),B=J.liveResult,Q=J.liveDataByNode,X=(0,E.V5)((0,E.C4)(l,E.dT),(0,E.C4)(B,E.dT));(0,F.Qs)(l.refetch),(0,F.Qs)(B.refetch);var ee=void 0!==v,ne=(null===(n=Q[(0,m.Wu)(t)])||void 0===n?void 0:n.computeStatus)===D.tn.OUT_OF_DATE;return(0,Y.jsxs)(h.x,{flex:{direction:"column"},style:{height:"100%",width:"100%",overflowY:"auto"},children:[(0,Y.jsx)(y.K,{assetKey:t,tags:(0,Y.jsxs)(Y.Fragment,{children:[N?(0,Y.jsxs)(w.V,{icon:"asset",children:["Asset in ",(0,Y.jsx)(L.b,{repoAddress:N})]}):(0,Y.jsx)(w.V,{icon:"asset_non_sda",children:"Asset"}),v&&N&&(0,Y.jsx)(he,{assetNode:v,repoAddress:N}),v&&N&&v.groupName&&(0,Y.jsx)(w.V,{icon:"asset_group",children:(0,Y.jsx)(_.rU,{to:(0,K.$U)(N,"/asset-groups/".concat(v.groupName)),children:v.groupName})}),ne?(0,Y.jsx)(h.x,{onClick:function(){return s((0,j.Z)((0,j.Z)({},i),{},{view:"lineage",lineageScope:"upstream"}))},children:(0,Y.jsx)(C.m,{fillColor:S.w.Yellow50,textColor:S.w.Yellow700,label:"Upstream changed",interactive:!0})}):void 0]}),tabs:(0,Y.jsxs)(k.mQ,{size:"large",selectedTabId:i.view||"activity",children:[(0,Y.jsx)(k.OK,{id:"activity",title:"Activity",onClick:function(){return s((0,j.Z)((0,j.Z)({},i),{},{view:"activity"}))}}),(0,Y.jsx)(k.OK,{id:"definition",title:"Definition",onClick:function(){return s((0,j.Z)((0,j.Z)({},i),{},{view:"definition"}))},disabled:!v}),(0,Y.jsx)(k.OK,{id:"lineage",title:"Lineage",onClick:function(){return s((0,j.Z)((0,j.Z)({},i),{},{view:"lineage"}))},disabled:!v})]}),right:(0,Y.jsxs)(h.x,{style:{margin:"-4px 0"},flex:{gap:12,alignItems:"baseline"},children:[(0,Y.jsx)(h.x,{margin:{top:4},children:(0,Y.jsx)(E.xi,{refreshState:X})}),v&&v.jobNames.length>0&&N&&V&&(0,Y.jsx)(_e.XE,{assetKeys:[v.assetKey]})]})}),(0,Y.jsx)("div",{children:l.loading&&!l.previousData?(0,Y.jsx)(h.x,{style:{height:390},flex:{direction:"row",justifyContent:"center",alignItems:"center"},children:(0,Y.jsx)(f.$,{purpose:"page"})}):x?null:(0,Y.jsx)(h.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,Y.jsx)($e,{asOf:i.asOf,onClick:function(){return s({asOf:void 0,time:i.asOf})},hasDefinition:!!v})})}),ee&&("definition"===i.view?v?(0,Y.jsx)(oe,{assetNode:v,upstream:V,downstream:H,liveDataByNode:Q}):(0,Y.jsx)(Pe,{}):"lineage"===i.view?v?G?(0,Y.jsx)(Ee,{params:i,setParams:s,assetNode:v,liveDataByNode:Q,assetGraphData:G,requestedDepth:Z,graphQueryItems:$}):(0,Y.jsx)(h.x,{style:{flex:1},flex:{alignItems:"center",justifyContent:"center"},children:(0,Y.jsx)(f.$,{purpose:"page"})}):(0,Y.jsx)(Pe,{}):(0,Y.jsx)(q.s,{assetKey:t,assetLastMaterializedAt:g,assetHasDefinedPartitions:!(null===v||void 0===v||!v.partitionDefinition),params:i,paramsTimeWindowOnly:!!i.asOf,setParams:s,liveData:v?Q[(0,m.Wu)(v.assetKey)]:void 0}))]})},Pe=function(){return(0,Y.jsx)(h.x,{padding:{vertical:32},children:(0,Y.jsx)(N.t,{title:"No definition",description:"This asset doesn't have a software definition in any of your loaded repositories.",icon:"materialization"})})};var Le,Fe,De,Ae,Ke,qe,Ue,ze,Ge,Me=(0,d.Ps)(i||(i=(0,c.Z)(["\n  query AssetQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n\n        assetMaterializations(limit: 1) {\n          timestamp\n        }\n\n        definition {\n          id\n          groupName\n          partitionDefinition\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n\n          ...AssetNodeInstigatorsFragment\n          ...AssetNodeDefinitionFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),fe,ae),$e=function(e){var n=e.asOf,t=e.onClick,r=e.hasDefinition;return(0,Y.jsx)(T.b,{intent:"info",title:(0,Y.jsxs)("span",{children:["This is a historical view of materializations as of"," ",(0,Y.jsx)("span",{style:{fontWeight:600},children:(0,Y.jsx)(Z.E,{timestamp:{ms:Number(n)},timeFormat:{showSeconds:!0,showTimezone:!0}})}),"."]}),description:(0,Y.jsx)(I.Z,{onClick:t,underline:"always",children:r?"Show definition and latest materializations":"Show latest materializations"})})},We=t(25907),Ve=function(){var e;(0,g.Px)();var n=(0,l.UO)(),t=(0,l.k6)(),r=(n[0]||"").split("/").filter((function(e){return e})).map(decodeURIComponent),o=(0,u.a)(He,{skip:0===r.length,variables:{assetKey:{path:r}}});return(0,x.j)(r&&r.length?"Assets: ".concat((0,m.ll)({path:r})):"Assets"),o.loading?(0,Y.jsxs)(p.T,{children:[(0,Y.jsx)(y.K,{assetKey:{path:r}}),(0,Y.jsx)(h.x,{padding:64,children:(0,Y.jsx)(f.$,{purpose:"page"})})]}):0===r.length||"AssetNotFoundError"===(null===(e=o.data)||void 0===e?void 0:e.assetOrError.__typename)?(0,Y.jsxs)(p.T,{children:[(0,Y.jsx)(y.K,{assetKey:{path:r},right:(0,Y.jsxs)(h.x,{flex:{gap:12,alignItems:"center"},children:[(0,Y.jsx)(y.w,{}),(0,Y.jsx)(v.i,{label:"Reload definitions"})]})}),(0,Y.jsx)(We.f,{prefixPath:r,setPrefixPath:function(e){return t.push((0,X.p)({path:e}))}})]}):(0,Y.jsx)(Oe,{assetKey:{path:r}})},He=(0,d.Ps)(Le||(Le=(0,c.Z)(["\n  query AssetsCatalogRootQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      __typename\n      ... on Asset {\n        id\n        key {\n          path\n        }\n      }\n    }\n  }\n"]))),Je=t(31112),Be=t(77523),Qe=t(96294),Xe=t(76336),Ye="__GLOBAL__",en=function(){var e=(0,l.UO)()[0],n=a.useContext(Xe.C5),t=n.allRepos,r=n.visibleRepos,o=(0,l.k6)();(0,x.j)("Global Asset Lineage");var i=a.useCallback((function(e,n){o[n]("/instance/asset-groups".concat((0,Qe.gY)((0,j.Z)((0,j.Z)({},e),{},{pipelineName:Ye})).replace(Ye,"")))}),[o]),s=a.useCallback((function(e){o.push((0,X.p)(e.assetKey,{view:"definition"}))}),[o]),c=a.useMemo((function(){return{hideEdgesToNodesOutsideQuery:!1,hideNodesMatching:function(e){return!r.some((function(n){return n.repositoryLocation.name===e.repository.location.name&&n.repository.name===e.repository.name}))}}}),[r]);return(0,Y.jsxs)(p.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,Y.jsx)(Je.m,{title:(0,Y.jsx)(U.X6,{children:"Global Asset Lineage"}),right:(0,Y.jsx)("div",{style:{marginBottom:-8},children:(0,Y.jsx)(v.i,{label:"Reload definitions"})})}),(0,Y.jsx)(ye.OK,{fetchOptions:c,fetchOptionFilters:(0,Y.jsx)(Y.Fragment,{children:t.length>1&&(0,Y.jsx)(Be.C,{})}),options:{preferAssetRendering:!0,explodeComposites:!0},explorerPath:(0,Qe.p3)(Ye+e||"/"),onChangeExplorerPath:i,onNavigateToForeignNode:s})]})},nn=t(8546),tn=t(762),rn=t(76341),on=t(68156),sn=t(39956),an=t(59019),ln=t(17912),cn=t(14156),un=t(25496),dn=t(12436),pn=t(47072),hn=t(41302),fn=t(52848),gn=t(57994),mn=t(98907),xn=t(64428),vn=t(28463),yn=t(6466),jn=t(65502),bn=t.n(jn),wn=5242880,Cn=function(e){(0,xn.Z)(t,e);var n=(0,vn.Z)(t);function t(){var e;(0,gn.Z)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).timeout=null,e.contentContainer=a.createRef(),e.state={showScrollToTop:!1},e.hideWarning=function(){e.setState({showScrollToTop:!1}),e.timeout&&(clearTimeout(e.timeout),e.timeout=0)},e.scheduleHideWarning=function(){e.timeout=window.setTimeout(e.hideWarning,3e3)},e.cancelHideWarning=function(){e.timeout&&(clearTimeout(e.timeout),e.timeout=0)},e.onScrollUp=function(n){e.cancelHideWarning(),n?(e.setState({showScrollToTop:!0}),e.scheduleHideWarning()):e.hideWarning()},e.onScrollDown=function(n){e.hideWarning()},e.scrollToTop=function(){e.contentContainer.current&&e.contentContainer.current.scrollToTop()},e}return(0,mn.Z)(t,[{key:"renderScrollToTop",value:function(){var e=this;return this.state.showScrollToTop?(0,Y.jsx)(Dn,{children:(0,Y.jsx)(An,{onClick:function(){return e.scrollToTop()},onMouseOver:this.cancelHideWarning,onMouseOut:this.scheduleHideWarning,children:(0,Y.jsxs)(yn.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,Y.jsx)(z.JO,{name:"arrow_upward",color:S.w.White}),"Scroll to top"]})})}):null}},{key:"render",value:function(){var e=this.props,n=e.logData,t=e.isLoading,r=e.isVisible,o=e.downloadUrl,i=null===n||void 0===n?void 0:n.data,s=function(e){return!!e&&(new TextEncoder).encode(e).length>=wn}(i);if(i&&s){var a=i.indexOf("\n")+1,l=a<i.length?i.slice(a):i;i="\x1b[33m...logs truncated...\x1b[39m\n"+l}var c=s?(0,Y.jsx)(Fn,{children:(0,Y.jsxs)(yn.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,Y.jsx)(z.JO,{name:"warning",color:S.w.Yellow500}),(0,Y.jsxs)("div",{children:["This log has exceeded the 5MB limit."," ",o?(0,Y.jsx)("a",{href:o,download:!0,children:"Download the full log file"}):null,"."]})]})}):null;return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(Tn,{isVisible:r,children:[this.renderScrollToTop(),(0,Y.jsxs)(On,{children:[c,(0,Y.jsx)(Pn,{children:(0,Y.jsx)(Ln,{isSelected:!0,content:i,onScrollUp:this.onScrollUp,onScrollDown:this.onScrollDown,ref:this.contentContainer})})]}),t?(0,Y.jsx)(Kn,{children:(0,Y.jsx)(f.$,{purpose:"page"})}):null]}),(0,Y.jsx)(In,{isVisible:r,children:null===n||void 0===n?void 0:n.path})]})}}]),t}(a.Component),Sn=(0,d.Ps)(Fe||(Fe=(0,c.Z)(["\n  fragment ComputeLogContentFileFragment on ComputeLogFile {\n    path\n    cursor\n    data\n    downloadUrl\n  }\n"]))),kn=function(e){(0,xn.Z)(t,e);var n=(0,vn.Z)(t);function t(){var e;(0,gn.Z)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).container=a.createRef(),e.lastScroll=0,e.onScroll=function(){if(e.container.current&&e.props.isSelected){var n=e.props,t=n.onScrollUp,r=n.onScrollDown,o=e.container.current,i=o.scrollHeight,s=o.scrollTop/(i-o.offsetHeight);e.container.current.scrollTop<e.lastScroll?t&&t(s):r&&r(s),e.lastScroll=e.container.current.scrollTop}},e}return(0,mn.Z)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom(),this.container.current&&(this.container.current.focus(),this.container.current.addEventListener("scroll",this.onScroll))}},{key:"getSnapshotBeforeUpdate",value:function(){if(!this.container.current)return!1;var e=this.container.current,n=e.scrollHeight,t=e.scrollTop;return e.offsetHeight+t>=n}},{key:"componentDidUpdate",value:function(e,n,t){t&&this.scrollToBottom(),this.props.isSelected&&!e.isSelected&&this.container.current&&this.container.current.focus()}},{key:"focus",value:function(){var e=this.container.current;e&&e.focus()}},{key:"scrollToBottom",value:function(){var e=this.container.current;e&&(e.scrollTop=e.scrollHeight-e.offsetHeight)}},{key:"scrollToTop",value:function(){var e=this.container.current;e&&(e.scrollTop=0,e.focus())}},{key:"render",value:function(){var e=this.props,n=e.content,t=e.className;return n?(0,Y.jsx)("div",{className:t,style:{outline:"none"},ref:this.container,tabIndex:0,children:(0,Y.jsxs)(_n,{children:[(0,Y.jsx)(Nn,{content:n}),(0,Y.jsxs)(En,{children:[(0,Y.jsx)(Rn,{}),(0,Y.jsx)(bn(),{linkify:!1,useClasses:!0,children:n})]})]})}):(0,Y.jsx)("div",{className:t,ref:this.container,children:(0,Y.jsx)(_n,{style:{justifyContent:"center",alignItems:"center"},children:null==n?"No log file available":"No output"})})}}]),t}(a.Component),Nn=function(e){var n=e.content;if(!n)return null;var t=n.match(/\n/g),r=t?t.length:0;return(0,Y.jsx)(Zn,{children:Array.from(Array(r),(function(e,n){return(0,Y.jsx)("div",{children:String(n+1)},n)}))})},Tn=Q.ZP.div.withConfig({displayName:"ComputeLogContent__FileContainer",componentId:"sc-1bosmfe-0"})(["flex:1;height:100%;position:relative;&:first-child{border-right:0.5px solid #5c7080;}display:flex;flex-direction:column;",""],(function(e){return e.isVisible?null:"display: none;"})),In=Q.ZP.div.withConfig({displayName:"ComputeLogContent__FileFooter",componentId:"sc-1bosmfe-1"})(["display:flex;flex-direction:row;align-items:center;height:30px;background-color:",";border-top:0.5px solid #5c7080;color:#aaaaaa;padding:2px 5px;font-size:0.85em;",""],S.w.Gray900,(function(e){return e.isVisible?null:"display: none;"})),_n=Q.ZP.div.withConfig({displayName:"ComputeLogContent__ContentContainer",componentId:"sc-1bosmfe-2"})(["display:flex;flex-direction:row;min-height:100%;background-color:",";"],S.w.Gray900),En=Q.ZP.div.withConfig({displayName:"ComputeLogContent__Content",componentId:"sc-1bosmfe-3"})(["padding:10px;background-color:",";"],S.w.Gray900),Zn=Q.ZP.div.withConfig({displayName:"ComputeLogContent__LineNumberContainer",componentId:"sc-1bosmfe-4"})(["display:flex;flex-direction:column;align-items:flex-end;border-right:1px solid #5c7080;padding:10px 10px 10px 20px;margin-right:5px;background-color:",";opacity:0.8;color:#858585;min-height:100%;"],S.w.Gray900),Rn=(0,Q.vJ)(De||(De=(0,c.Z)(["\n  .ansi-black {\n    color: #586e75;\n  }\n  .ansi-red {\n    color: #dc322f;\n  }\n  .ansi-green {\n    color: #859900;\n  }\n  .ansi-yellow {\n    color: #b58900;\n  }\n  .ansi-blue {\n    color: #268bd2;\n  }\n  .ansi-magenta {\n    color: #d33682;\n  }\n  .ansi-cyan {\n    color: #2aa198;\n  }\n  .ansi-white {\n    color: #eee8d5;\n  }\n"]))),On=Q.ZP.div.withConfig({displayName:"ComputeLogContent__FileContent",componentId:"sc-1bosmfe-5"})(["flex:1;display:flex;flex-direction:column;"]),Pn=Q.ZP.div.withConfig({displayName:"ComputeLogContent__RelativeContainer",componentId:"sc-1bosmfe-6"})(["flex:1;position:relative;"]),Ln=(0,Q.ZP)(kn).withConfig({displayName:"ComputeLogContent__LogContent",componentId:"sc-1bosmfe-7"})(["color:#eeeeee;font-family:",";font-size:16px;white-space:pre;overflow:auto;position:absolute;top:0;bottom:0;left:0;right:0;"],nn.b.monospace),Fn=Q.ZP.div.withConfig({displayName:"ComputeLogContent__FileWarning",componentId:"sc-1bosmfe-8"})(["background-color:#fffae3;padding:10px 20px;margin:20px 70px;border-radius:5px;"]),Dn=Q.ZP.div.withConfig({displayName:"ComputeLogContent__ScrollToast",componentId:"sc-1bosmfe-9"})(["position:absolute;height:30px;top:0;left:0;right:0;display:flex;flex-direction:row;justify-content:center;align-items:flex-start;z-index:1;"]),An=Q.ZP.div.withConfig({displayName:"ComputeLogContent__ScrollToTop",componentId:"sc-1bosmfe-10"})(["background-color:black;padding:10px 20px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:white;border-bottom:0.5px solid #5c7080;border-left:0.5px solid #5c7080;border-right:0.5px solid #5c7080;cursor:pointer;"]),Kn=Q.ZP.div.withConfig({displayName:"ComputeLogContent__LoadingContainer",componentId:"sc-1bosmfe-11"})(["display:flex;justifycontent:center;alignitems:center;position:absolute;top:0;bottom:0;left:0;right:0;backgroundcolor:",";opacity:0.3;"],S.w.Gray800),qn=t(70157),Un=function(e){return e.length<wn?e:e.slice(-5242880)},zn=function(e,n){if(!n)return e;var t=null===e||void 0===e?void 0:e.data;return null!==e&&void 0!==e&&e.data&&null!==n&&void 0!==n&&n.data?t=Un(e.data+n.data):null!==n&&void 0!==n&&n.data&&(t=Un(n.data)),{__typename:n.__typename,path:n.path,downloadUrl:n.downloadUrl,data:"string"===typeof t?t:null,cursor:n.cursor}},Gn=function(e,n){switch(n.type){case"stdout":var t=n.stepKey===e.stepKey?zn(e.stdout,n.log):n.log;return(0,j.Z)((0,j.Z)({},e),{},{isLoading:!1,stdout:t});case"stderr":var r=n.stepKey===e.stepKey?zn(e.stderr,n.log):n.log;return(0,j.Z)((0,j.Z)({},e),{},{isLoading:!1,stderr:r});default:return e}},Mn={stepKey:"",stdout:null,stderr:null,isLoading:!0},$n=(0,d.Ps)(Ae||(Ae=(0,c.Z)(["\n  fragment ComputeLogsSubscriptionFragment on ComputeLogFile {\n    data\n    cursor\n    ...ComputeLogContentFileFragment\n  }\n  ","\n"])),Sn),Wn=(0,d.Ps)(Ke||(Ke=(0,c.Z)(["\n  subscription ComputeLogsSubscription(\n    $runId: ID!\n    $stepKey: String!\n    $ioType: ComputeIOType!\n    $cursor: String\n  ) {\n    computeLogs(runId: $runId, stepKey: $stepKey, ioType: $ioType, cursor: $cursor) {\n      ...ComputeLogsSubscriptionFragment\n    }\n  }\n  ","\n"])),$n),Vn=a.memo((function(e){var n=e.runId,t=e.stepKeys,r=e.computeLogKey,o=e.ioType,i=e.setComputeLogUrl,s=a.useContext(fn.I).rootServerURI,l=function(e,n){var t=a.useReducer(Gn,Mn),r=(0,b.Z)(t,2),o=r[0],i=r[1];return(0,qn.m)(Wn,{fetchPolicy:"no-cache",variables:{runId:e,stepKey:n,ioType:D.VJ.STDOUT,cursor:null},skip:!n,onSubscriptionData:function(e){var t,r=e.subscriptionData;n&&i({type:"stdout",stepKey:n,log:(null===(t=r.data)||void 0===t?void 0:t.computeLogs)||null})}}),(0,qn.m)(Wn,{fetchPolicy:"no-cache",variables:{runId:e,stepKey:n,ioType:D.VJ.STDERR,cursor:null},skip:!n,onSubscriptionData:function(e){var t,r=e.subscriptionData;n&&i({type:"stderr",stepKey:n,log:(null===(t=r.data)||void 0===t?void 0:t.computeLogs)||null})}}),o}(n,r),c=l.isLoading,u=l.stdout,d=l.stderr;if(!t.length||!r)return(0,Y.jsx)(h.x,{flex:{justifyContent:"center",alignItems:"center"},style:{flex:1,height:"100%"},children:(0,Y.jsx)(f.$,{purpose:"section"})});var p=function(e,n){var t,r=null===n||void 0===n?void 0:n.downloadUrl;return r?(t=r)&&t.startsWith("/")?e+r:r:null}(s,"stdout"===o?u:d);return(0,Y.jsxs)("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:[(0,Y.jsx)(Hn,{logData:u,isLoading:c,isVisible:"stdout"===o,downloadUrl:p,setComputeLogUrl:i}),(0,Y.jsx)(Hn,{logData:d,isLoading:c,isVisible:"stderr"===o,downloadUrl:p,setComputeLogUrl:i})]})})),Hn=function(e){var n=e.isLoading,t=e.isVisible,r=e.logData,o=e.downloadUrl,i=e.setComputeLogUrl;return a.useEffect((function(){i(o)}),[i,o]),(0,Y.jsx)(Cn,{logData:r,isLoading:n,isVisible:t,downloadUrl:o})},Jn=t(47427),Bn=t(31522),Qn=t(72844),Xn=t.n(Qn),Yn=t(99738),et=t(92497),nt=t(98834),tt={DEBUG:0,INFO:0,WARNING:0,ERROR:0,CRITICAL:0,EVENT:0},rt=function(e,n){switch(n.type){case"append":var t=n.queued.map((function(e,n){return(0,j.Z)((0,j.Z)({},e),{},{clientsideKey:"csk".concat(e.timestamp,"-").concat(n)})})),r=[].concat((0,an.Z)(e.nodes),(0,an.Z)(t)),o=(0,j.Z)({},e.counts);return t.forEach((function(e){var n=(0,nt.m)(e);o[n]++})),{nodes:r,counts:o,loading:n.hasMore,cursor:n.cursor};case"set-cursor":return(0,j.Z)((0,j.Z)({},e),{},{cursor:n.cursor});case"reset":return{nodes:[],counts:tt,cursor:null,loading:!0};default:return e}},ot={nodes:[],counts:tt,cursor:null,loading:!0},it=function(e){var n=(0,Bn.x)(),t=a.useRef([]),r=a.useReducer(rt,ot),o=(0,b.Z)(r,2),i=o[0],s=o[1],l=a.useCallback((function(t){var r=n.readFragment({fragmentName:"PipelineRunLogsSubscriptionStatusFragment",fragment:ut,id:"Run:".concat(e)});if(r){var o=(0,j.Z)((0,j.Z)({},r),{},{status:t});t!==D.VO.FAILURE&&t!==D.VO.SUCCESS&&t!==D.VO.STARTING&&t!==D.VO.CANCELING&&t!==D.VO.CANCELED||(o.canTerminate=!1),n.writeFragment({fragmentName:"PipelineRunLogsSubscriptionStatusFragment",fragment:ut,id:"Run:".concat(e),data:o})}}),[n,e]);a.useEffect((function(){t.current=[],s({type:"reset"})}),[e]);var c=a.useMemo((function(){return Xn()((function(){if(t.current.length){var e=(0,an.Z)(t.current);t.current=[];var n=e.flatMap((function(e){return e.messages})),r=e[e.length-1],o=r.hasMorePastEvents,i=r.cursor;s({type:"append",queued:n,hasMore:o,cursor:i});var a=function(e){var n,t=(0,an.Z)(e).reverse(),r=(0,Jn.Z)(t);try{for(r.s();!(n=r.n()).done;)switch(n.value.__typename){case"RunStartEvent":return D.VO.STARTED;case"RunEnqueuedEvent":return D.VO.QUEUED;case"RunStartingEvent":return D.VO.STARTING;case"RunCancelingEvent":return D.VO.CANCELING;case"RunCanceledEvent":return D.VO.CANCELED;case"RunSuccessEvent":return D.VO.SUCCESS;case"RunFailureEvent":return D.VO.FAILURE}}catch(o){r.e(o)}finally{r.f()}return null}(n);a&&!o&&l(a)}}),100)}),[l]),u=i.nodes,d=i.counts,p=i.cursor,h=i.loading;return(0,qn.m)(ct,{fetchPolicy:"no-cache",variables:{runId:e,cursor:p},onSubscriptionData:function(e){var n,r=null===(n=e.subscriptionData.data)||void 0===n?void 0:n.pipelineRunLogs;r&&"PipelineRunLogsSubscriptionFailure"!==r.__typename&&(t.current=[].concat((0,an.Z)(t.current),[r]),requestAnimationFrame(c))}}),a.useMemo((function(){return null!==u?{allNodes:u,counts:d,loading:h}:{allNodes:[],counts:d,loading:h}}),[d,h,u])},st=function(e){var n=it(e.runId);return(0,Y.jsx)(Y.Fragment,{children:e.children(n)})},at=function(e){var n=e.children,t=e.runId,r=a.useReducer(rt,ot),o=(0,b.Z)(r,2),i=o[0],s=o[1],l=i.counts,c=i.cursor,d=i.nodes,p=(0,u.a)(dt,{notifyOnNetworkStatusChange:!0,variables:{runId:t,cursor:c,limit:1e4},pollInterval:5e3,onCompleted:function(e){if(h(),"Run"===(null===e||void 0===e?void 0:e.pipelineRunOrError.__typename)&&"EventConnection"===(null===e||void 0===e?void 0:e.logsForRun.__typename)){var n=e.pipelineRunOrError,t=e.logsForRun.events,r=n.status,o=e.logsForRun.cursor,i=!!r&&r!==D.VO.FAILURE&&r!==D.VO.SUCCESS&&r!==D.VO.CANCELED;s({type:"append",queued:t,hasMore:i,cursor:o}),i&&f(5e3)}}}),h=p.stopPolling,f=p.startPolling;return(0,Y.jsx)(Y.Fragment,{children:n(null!==d&&d.length>0?{allNodes:d,counts:l,loading:!1}:{allNodes:[],counts:l,loading:!0})})},lt=function(e){var n=e.children,t=e.runId,r=a.useContext(Yn.DN),o=r.availability,i=r.disabled;return"unavailable"===o||i?(0,Y.jsx)(at,{runId:t,children:n}):"attempting-to-connect"===o?(0,Y.jsx)(Y.Fragment,{children:n({allNodes:[],counts:tt,loading:!0})}):(0,Y.jsx)(st,{runId:t,children:n})},ct=(0,d.Ps)(qe||(qe=(0,c.Z)(["\n  subscription PipelineRunLogsSubscription($runId: ID!, $cursor: String) {\n    pipelineRunLogs(runId: $runId, cursor: $cursor) {\n      __typename\n      ... on PipelineRunLogsSubscriptionSuccess {\n        messages {\n          ... on MessageEvent {\n            runId\n          }\n          ...RunDagsterRunEventFragment\n        }\n        hasMorePastEvents\n        cursor\n      }\n      ... on PipelineRunLogsSubscriptionFailure {\n        missingRunId\n        message\n      }\n    }\n  }\n\n  ","\n"])),et.O.RunDagsterRunEventFragment),ut=(0,d.Ps)(Ue||(Ue=(0,c.Z)(["\n  fragment PipelineRunLogsSubscriptionStatusFragment on Run {\n    id\n    runId\n    status\n    canTerminate\n  }\n"]))),dt=(0,d.Ps)(ze||(ze=(0,c.Z)(["\n  query RunLogsQuery($runId: ID!, $cursor: String, $limit: Int) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        runId\n        status\n        canTerminate\n      }\n    }\n    logsForRun(runId: $runId, afterCursor: $cursor, limit: $limit) {\n      ... on EventConnection {\n        events {\n          __typename\n          ... on MessageEvent {\n            runId\n          }\n          ...RunDagsterRunEventFragment\n        }\n        cursor\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n    }\n  }\n  ","\n"])),et.O.RunDagsterRunEventFragment),pt=t(12244),ht=t(16798),ft=t(42849),gt=t(8412),mt=t(11831),xt=t(50346),vt=t(9429),yt=t(36172),jt=t(13816),bt=t.n(jt)()((function(){return new Intl.NumberFormat(navigator.language,{compactDisplay:"short",notation:"compact"})})),wt=t(40355),Ct=Q.ZP.div.withConfig({displayName:"ExecutionStateDot",componentId:"sc-1e4maq3-0"})(["display:inline-block;width:11px;height:11px;border-radius:5.5px;transition:background 200ms linear;background:",";&:hover{background:",";}"],(function(e){var n,t=e.state;return(n={},(0,ht.Z)(n,wt.TN.RUNNING,S.w.Gray400),(0,ht.Z)(n,wt.TN.SUCCEEDED,S.w.Green700),(0,ht.Z)(n,wt.TN.SKIPPED,S.w.Yellow500),(0,ht.Z)(n,wt.TN.FAILED,S.w.Red500),(0,ht.Z)(n,wt.TN.PREPARING,S.w.Red500),(0,ht.Z)(n,wt.TN.RETRY_REQUESTED,S.w.Red500),(0,ht.Z)(n,wt.TN.UNKNOWN,S.w.Red500),n)[t]}),(function(e){var n,t=e.state;return(n={},(0,ht.Z)(n,wt.TN.RUNNING,S.w.Gray400),(0,ht.Z)(n,wt.TN.SUCCEEDED,S.w.Green700),(0,ht.Z)(n,wt.TN.SKIPPED,S.w.Yellow500),(0,ht.Z)(n,wt.TN.FAILED,S.w.Red200),(0,ht.Z)(n,wt.TN.PREPARING,S.w.Red500),(0,ht.Z)(n,wt.TN.RETRY_REQUESTED,S.w.Red500),(0,ht.Z)(n,wt.TN.UNKNOWN,S.w.Red500),n)[t]})),St=t(6527),kt=t(40158),Nt=t(74386),Tt=function(e,n){switch(n.type){case"show-popover":return(0,j.Z)((0,j.Z)({},e),{},{shown:!0});case"hide-popover":return(0,j.Z)((0,j.Z)({},e),{},{shown:!1});case"highlight":return(0,j.Z)((0,j.Z)({},e),{},{highlight:n.highlight});case"change-query":return(0,j.Z)((0,j.Z)({},e),{},{shown:!0,highlight:0});case"select-suggestion":return(0,j.Z)((0,j.Z)({},e),{},{highlight:0});default:return e}},It={shown:!1,highlight:0},_t={threshold:.3},Et=function(e){var n=e.value,t=e.onChange,r=e.suggestionProviders,o=a.useReducer(Tt,It),i=(0,b.Z)(o,2),s=i[0],l=i[1],c=s.shown,u=s.highlight,d=a.useRef(null),p=a.useMemo((function(){var e=r.reduce((function(e,n){var t=n.values();return n.token?(0,j.Z)((0,j.Z)({},e),{},(0,ht.Z)({},n.token,{fuse:new kt.Z(t,_t),all:t})):e}),{}),n=r.map((function(e){return e.token})).filter((function(e){return e}));return{empty:new kt.Z(n,_t),perProvider:e}}),[r]),h=p.empty,f=p.perProvider,g=a.useCallback((function(e){if(!e)return Object.keys(f);var n=e.split(":"),t=(0,b.Z)(n,2),r=t[0],o=t[1];if(r in f){var i=f[r],s=i.fuse,a=i.all,l=o?s.search(o).map((function(e){return"".concat(r,":").concat(e.item)})):a.map((function(e){return"".concat(r,":").concat(e)}));return l.map((function(e){return e.toLowerCase()})).includes(e)?[]:l}return h.search(e).map((function(e){return e.item}))}),[h,f]),m=function(e,n){var t=n.toLocaleLowerCase().trim().split(/\s+/),r=t[t.length-1]||"",o=a.useMemo((function(){return e(r)}),[e,r]),i=a.useCallback((function(e){var t=n.toLocaleLowerCase().lastIndexOf(r);if(-1!==t){var o=n.slice(0,t);return"".concat(o).concat(e)}return n}),[r,n]);return a.useMemo((function(){return{suggestions:o,onSelectSuggestion:i}}),[i,o])}(g,n),x=m.suggestions,v=m.onSelectSuggestion,y=x.length,w=x[u]||null,C=a.useCallback((function(e){l({type:"change-query"}),t(e.target.value)}),[t]),S=a.useCallback((function(e){l({type:"select-suggestion"}),t(v(e))}),[t,v]),k=a.useCallback((function(){var e;l({type:"change-query"}),t(""),null===(e=d.current)||void 0===e||e.focus()}),[t]);return(0,Y.jsx)(tn.J,{isOpen:c&&x.length>0,position:"bottom-left",content:(0,Y.jsx)(Ot,{children:x.map((function(e,n){return(0,Y.jsx)(Zt,{suggestion:e,isHighlight:u===n,onSelect:S},e)}))}),children:(0,Y.jsx)(Rt,{placeholder:"Filter\u2026",spellCheck:!1,autoCorrect:"off",value:n,ref:d,onChange:C,onFocus:function(){return l({type:"show-popover"})},onBlur:function(){return l({type:"hide-popover"})},onKeyDown:function(e){var n=e.key;if("Escape"!==n){if(y){var t=y-1;switch(n){case"ArrowUp":e.preventDefault(),l({type:"highlight",highlight:0===u?t:u-1});break;case"ArrowDown":e.preventDefault(),l({type:"highlight",highlight:u===t?0:u+1});break;case"Enter":e.preventDefault(),w&&S(w)}}}else l({type:"hide-popover"})},rightElement:(0,Y.jsx)(Nt.C,{onClick:k,children:(0,Y.jsx)(z.JO,{name:"cancel"})})})})},Zt=function(e){var n=e.suggestion,t=e.isHighlight,r=e.onSelect,o=a.useRef(null);return a.useEffect((function(){o.current&&t&&o.current.scrollIntoView({block:"nearest"})}),[t]),(0,Y.jsx)(Pt,{ref:o,isHighlight:t,onMouseDown:function(e){e.preventDefault(),r(n)},children:n})},Rt=(0,Q.ZP)(xe.oi).withConfig({displayName:"LogsFilterInput__FilterInput",componentId:"sc-3dxor8-0"})(["width:300px;"]),Ot=Q.ZP.ul.withConfig({displayName:"LogsFilterInput__Results",componentId:"sc-3dxor8-1"})(["list-style:none;margin:0;max-height:200px;max-width:800px;min-width:300px;overflow-y:auto;padding:4px 0;"]),Pt=Q.ZP.li.withConfig({displayName:"LogsFilterInput__Item",componentId:"sc-3dxor8-2"})(["align-items:center;background-color:",";color:",";cursor:pointer;display:flex;flex-direction:row;font-size:12px;list-style:none;margin:0;padding:4px 8px;white-space:nowrap;text-overflow:ellipsis;&:hover{background-color:",";}"],(function(e){return e.isHighlight?S.w.Blue500:S.w.White}),(function(e){return e.isHighlight?S.w.White:"default"}),(function(e){return e.isHighlight?S.w.Blue500:S.w.Gray100})),Lt=t(1557);!function(e){e.structured="structured",e.stdout="stdout",e.stderr="stderr"}(Ge||(Ge={}));var Ft=function(e){var n=e.steps,t=e.metadata,r=e.counts,o=e.filter,i=e.onSetFilter,s=e.logType,l=e.onSetLogType,c=e.computeLogKey,u=e.onSetComputeLogKey,d=e.computeLogUrl,p=a.useMemo((function(){return new Set([s===Ge.structured?s:Ge.stdout])}),[s]);return(0,Y.jsxs)(yt.qn,{children:[(0,Y.jsx)(ge.h,{activeItems:p,buttons:[{id:Ge.structured,icon:"list",tooltip:"Structured event logs"},{id:Ge.stdout,icon:"wysiwyg",tooltip:"Raw compute logs"}],onClick:function(e){return l(e)}}),(0,Y.jsx)(yt.KC,{}),"structured"===s?(0,Y.jsx)(qt,{counts:r,filter:o,onSetFilter:i,steps:n}):(0,Y.jsx)(At,{steps:n,metadata:t,logType:s,onSetLogType:l,computeLogKey:c,onSetComputeLogKey:u,computeLogUrl:d})]})},Dt=function(e,n){return n.stepKeys.some((function(n){return e.steps[n].state===wt.TN.RUNNING}))?wt.TN.RUNNING:n.stepKeys.some((function(n){return e.steps[n].state===wt.TN.SKIPPED}))?wt.TN.SKIPPED:n.stepKeys.every((function(n){return e.steps[n].state===wt.TN.SUCCEEDED}))?wt.TN.SUCCEEDED:wt.TN.FAILED},At=function(e){var n,t,r=e.steps,o=e.metadata,i=e.computeLogKey,s=e.onSetComputeLogKey,a=e.logType,l=e.onSetLogType,c=e.computeLogUrl,u=o.logCaptureSteps||(0,wt.co)(Object.keys(o.steps)),d=i&&u[i],p=function(e){if(!e||!u[e])return null;var n=u[e];return 1===n.stepKeys.length&&e===n.stepKeys[0]?e:n.pid?"pid: ".concat(n.pid," (").concat(n.stepKeys.length," steps)"):"".concat(e," (").concat(n.stepKeys.length," steps)")};return(0,Y.jsxs)(h.x,{flex:{justifyContent:"space-between",alignItems:"center",direction:"row"},style:{flex:1},children:[(0,Y.jsxs)(yn.Z,{direction:"row",spacing:24,alignItems:"center",children:[(0,Y.jsx)(ft.P,{disabled:!r.length,items:Object.keys(u),itemRenderer:function(e,n){return(0,Y.jsx)(gt.sN,{onClick:n.handleClick,text:p(e),active:n.modifiers.active},e)},activeItem:i,filterable:!1,onItemSelect:function(e){s(e)},children:(0,Y.jsx)(me.zx,{disabled:!r.length,rightIcon:(0,Y.jsx)(z.JO,{name:"expand_more"}),children:p(i)||"Select a step..."})}),d?(0,Y.jsxs)(k.mQ,{selectedTabId:a,onChange:l,size:"small",children:[(0,Y.jsx)(k.OK,{id:Ge.stdout,title:"stdout"}),(0,Y.jsx)(k.OK,{id:Ge.stderr,title:"stderr"})]}):null]}),d?(0,Y.jsxs)(h.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[i&&u[i]?Dt(o,u[i])===wt.TN.RUNNING?(0,Y.jsx)(f.$,{purpose:"body-text"}):(0,Y.jsx)(Ct,{state:Dt(o,u[i])}):null,c?(0,Y.jsx)(mt.u,{placement:"top-end",content:i&&1===(null===(n=u[i])||void 0===n?void 0:n.stepKeys.length)?"Download ".concat(null===(t=u[i])||void 0===t?void 0:t.stepKeys[0]," compute logs"):"Download compute logs",children:(0,Y.jsx)(Kt,{"aria-label":"Download link",href:c,download:!0,children:(0,Y.jsx)(z.JO,{name:"download_for_offline",color:S.w.Gray600})})}):null]}):null]})},Kt=Q.ZP.a.withConfig({displayName:"LogsToolbar__DownloadLink",componentId:"d9cqde-0"})(["border-radius:4px;display:block;text-decoration:none;","{transition:background-color 100ms linear;}:hover ","{background-color:",";}:active ",",:focus ","{background-color:",";}:focus{outline:none;}"],z.a1,z.a1,S.w.Gray800,z.a1,z.a1,S.w.Dark),qt=function(e){var n,t=e.filter,r=e.counts,o=e.onSetFilter,i=e.steps,s=a.useState("assignment"),l=(0,b.Z)(s,2),c=l[0],u=l[1],d=t.logQuery.map((function(e){var n=e.token,t=e.value;return n?"".concat(n,":").concat(t):t})).join(" "),p=a.useState((function(){return d})),f=(0,b.Z)(p,2),g=f[0],m=f[1],x=(0,vt.m)(),v=(null===(n=t.logQuery.find((function(e){return"step"===e.token})))||void 0===n?void 0:n.value)||null,y=t.logQuery.reduce((function(e,n){return e+n.value}),"");a.useEffect((function(){m(d)}),[d]);return a.useEffect((function(){var e;return"assignment_turned_in"===c&&(e=setTimeout((function(){u("assignment")}),2e3)),function(){e&&clearTimeout(e)}}),[c]),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Et,{value:g,suggestionProviders:(0,Lt.m)(i),onChange:function(e){var n=e.split(/\s+/).map((function(e){var n=e.split(":");return n.length>1?{token:n[0],value:n[1]}:{value:n[0]}}));o((0,j.Z)((0,j.Z)({},t),{},{logQuery:n})),m(e)}}),y?(0,Y.jsx)(Ut,{checked:t.hideNonMatches,onChange:function(e){return o((0,j.Z)((0,j.Z)({},t),{},{hideNonMatches:e.currentTarget.checked}))},label:"Hide non-matches"}):null,(0,Y.jsx)(yt.KC,{}),(0,Y.jsx)(h.x,{flex:{direction:"row",alignItems:"center",gap:8},children:Object.keys(St.i).map((function(e){var n,i=t.levels[e];return(0,Y.jsxs)(zt,{$enabled:i,children:[(0,Y.jsx)(xt.X,{format:"switch",size:"small",checked:!!i,fillColor:i?S.w.Blue500:S.w.Gray200,onChange:function(){return o((0,j.Z)((0,j.Z)({},t),{},{levels:(0,j.Z)((0,j.Z)({},t.levels),{},(0,ht.Z)({},e,!i))}))}}),(0,Y.jsx)(Gt,{$enabled:i,children:e.toLowerCase()}),(0,Y.jsx)(Mt,{$enabled:i,children:(n=r[e],bt().format(n))})]},e)}))}),v&&(0,Y.jsx)(yt.KC,{}),(0,Y.jsx)("div",{style:{minWidth:15,flex:1}}),(0,Y.jsx)(me.zx,{icon:(0,Y.jsx)(z.JO,{name:c}),onClick:function(){x(window.location.href),u("assignment_turned_in")},children:"Copy URL"})]})},Ut=(0,Q.ZP)(xt.X).withConfig({displayName:"LogsToolbar__NonMatchCheckbox",componentId:"d9cqde-1"})(["&&&{margin:0 4px 0 12px;}white-space:nowrap;"]),zt=Q.ZP.label.withConfig({displayName:"LogsToolbar__FilterLabel",componentId:"d9cqde-2"})(["background-color:",";border:none;border-radius:8px;margin:0;padding:4px 6px;overflow:hidden;cursor:pointer;display:inline-flex;flex-direction:row;align-items:center;font-size:12px;font-weight:500;gap:6px;box-shadow:transparent inset 0px 0px 0px 1px;transition:background 50ms linear;:focus{box-shadow:rgba(58,151,212,0.6) 0 0 0 3px;outline:none;}:focus:not(:focus-visible){box-shadow:transparent inset 0px 0px 0px 1px,rgba(0,0,0,0.12) 0px 2px 12px 0px;}"],(function(e){return e.$enabled?S.w.Blue50:S.w.Gray100})),Gt=Q.ZP.span.withConfig({displayName:"LogsToolbar__LogLabel",componentId:"d9cqde-3"})(["color:",";line-height:16px;transition:background 50ms linear;"],(function(e){return e.$enabled?S.w.Blue500:S.w.Gray700})),Mt=Q.ZP.span.withConfig({displayName:"LogsToolbar__LogCount",componentId:"d9cqde-4"})(["background-color:",";border-radius:6px;color:",";font-weight:600;font-family:",";line-height:16px;padding:1px 4px;transition:background 50ms linear;"],(function(e){return e.$enabled?S.w.Blue100:S.w.Gray200}),(function(e){return e.$enabled?S.w.Blue500:S.w.Gray700}),nn.b.monospace),$t=t(3148),Wt=t(3660),Vt=t(79580),Ht=t(57615),Jt="|";function Bt(e){return e.sort().map((function(e){return e.toLowerCase()})).join(Jt)}var Qt={steps:"*",logs:"",levels:Bt(St.w),hideNonMatches:"true",focusedTime:""},Xt=function(e){var n=e.logs.split(Jt),t=e.focusedTime&&!e.logs?Number(e.focusedTime):null,r="true"===e.hideNonMatches,o=(0,Lt.m)();return{sinceTime:0,focusedTime:t,hideNonMatches:r,logQuery:n.map((function(e){return(0,Ht.WD)(e,o)})),levels:e.levels.split(Jt).map((function(e){return e.toUpperCase()})).filter((function(e){return St.i.hasOwnProperty(e)})).reduce((function(e,n){return(0,j.Z)((0,j.Z)({},e),{},(0,ht.Z)({},n,!0))}),{})}};function Yt(e){var n=e.logQuery.map((function(e){return e.token?"".concat(e.token,":").concat(e.value):e.value}));return{hideNonMatches:e.hideNonMatches?"true":"false",focusedTime:e.focusedTime||"",logs:n.join(Jt),levels:Bt(Object.keys(e.levels).filter((function(n){return!!e.levels[n]})))}}var er,nr,tr,rr,or,ir,sr,ar,lr,cr,ur,dr,pr,hr,fr,gr,mr=function(e){var n,t=e.run,r=e.runId,o=(0,P.q)({encode:Yt,decode:Xt,defaults:Qt}),i=(0,b.Z)(o,2),s=i[0],l=i[1],c=(0,P.q)({queryKey:"selection",defaults:{selection:""}}),u=(0,b.Z)(c,2),d=u[0],p=u[1];n=t?function(e){switch(e){case D.VO.CANCELED:case D.VO.CANCELING:case D.VO.FAILURE:return"/favicon-run-failed.svg";case D.VO.SUCCESS:return"/favicon-run-success.svg";default:return"/favicon-run-pending.svg"}}(t.status):"/favicon.svg",a.useEffect((function(){var e=document.querySelector('link[rel="icon"][type="image/svg+xml"]');if(e){var t=e.getAttribute("href");return e.setAttribute("href",n),function(){t&&e.setAttribute("href",t)}}}),[n]),(0,x.j)(t?"".concat((0,m.pv)(t.pipelineName)?"":t.pipelineName," ").concat(r.slice(0,8)," [").concat(t.status,"]"):"Run: ".concat(r));var h=function(e,n){var t=n.find((function(n){return"ExecutionStepFailureEvent"===n.__typename&&n.stepKey===e}));t&&(0,cn._)({body:(0,Y.jsx)(dn.T9,{error:t})})},f=function(e){p(e),l((0,j.Z)((0,j.Z)({},s),{},{logQuery:"*"!==e?[{token:"query",value:e}]:[]}))};return(0,Y.jsx)(Wt.A.Provider,{value:t,children:(0,Y.jsx)(lt,{runId:r,children:function(e){return(0,Y.jsx)(wt.jp,{logs:e,children:function(n){return(0,Y.jsx)(xr,{run:t,runId:r,logs:e,logsFilter:s,metadata:n,selectionQuery:d,onSetLogsFilter:l,onSetSelectionQuery:f,onShowStateDetails:h})}})}},r)})},xr=function(e){var n=e.run,t=e.runId,r=e.logs,o=e.logsFilter,i=e.metadata,s=e.selectionQuery,l=e.onSetLogsFilter,c=e.onSetSelectionQuery,u=(0,Vt.W)(n),d=a.createRef(),p=(0,P.q)({queryKey:"logType",defaults:{logType:"structured"}}),f=(0,b.Z)(p,2),g=f[0],m=f[1],x=(0,P.q)({queryKey:"logKey"}),v=(0,b.Z)(x,2),y=v[0],j=v[1],w=function(e){switch(e){case"stdout":return Ge.stdout;case"stderr":return Ge.stderr;default:return Ge.structured}}(g),C=a.useState(null),S=(0,b.Z)(C,2),k=S[0],T=S[1],I=JSON.stringify(Object.keys(i.steps).sort()),_=a.useMemo((function(){return JSON.parse(I)}),[I]),E=(null===n||void 0===n?void 0:n.executionPlan)&&(0,hn.J)(null===n||void 0===n?void 0:n.executionPlan,i.steps),Z=a.useMemo((function(){return E&&s&&"*"!==s?(0,un.V)(E,s).all.map((function(e){return e.name})):[]}),[E,s]);a.useEffect((function(){if(null!==_&&void 0!==_&&_.length&&!y)if(i.logCaptureSteps){var e=Object.keys(i.logCaptureSteps),n=e.find((function(e){return Z.every((function(n){return i.logCaptureSteps&&i.logCaptureSteps[e].stepKeys.includes(n)}))}));j(n||e[0])}else _.includes(y)?1===Z.length&&y!==Z[0]&&j(Z[0]):j(1===Z.length?Z[0]:_[0])}),[_,y,Z,i.logCaptureSteps,j]);var R=E?o.logQuery.filter((function(e){return e.token&&"query"===e.token})).reduce((function(e,n){return[].concat((0,an.Z)(e),(0,an.Z)((0,un.V)(E,n.value).all.map((function(e){return e.name}))))}),[]):[],O=function(e,n){var t,r=Z.indexOf(e),o='"'.concat(e,'"');n.shiftKey?(t=(0,an.Z)(Z.map((function(e){return s.includes('"'.concat(e,'"'))?'"'.concat(e,'"'):e}))),-1!==r?t.splice(r,1):t.push(o)):1===Z.length&&-1!==r?t=[]:(t=[o],j(e)),c(t.join(", ")||"*")};return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(ln.OS,{ref:d,axis:"vertical",identifier:"run-gantt",firstInitialPercent:35,firstMinSize:56,first:function(e){return n?"QUEUED"===n.status?(0,Y.jsx)(pn.Fu,{run:n}):n.executionPlan&&E?(0,Y.jsx)(pn.hj,{options:{mode:pn.hS.WATERFALL_TIMED},toolbarActions:(0,Y.jsxs)(h.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,Y.jsx)(ln.jo,{axis:"vertical",container:d}),(0,Y.jsx)($t.NX,{run:n,onLaunch:u,graph:E,metadata:e,selection:{query:s,keys:Z}})]}),runId:t,graph:E,metadata:e,selection:{query:s,keys:Z},onClickStep:O,onSetSelection:c,focusedTime:o.focusedTime}):(0,Y.jsx)(N.t,{icon:"error",title:"Unable to build execution plan"}):(0,Y.jsx)(pn.ZW,{runId:t})}(i),second:(0,Y.jsxs)(vr,{children:[(0,Y.jsx)(Ft,{logType:w,onSetLogType:function(e){return m(Ge[e])},filter:o,onSetFilter:l,steps:_,metadata:i,computeLogKey:y,onSetComputeLogKey:function(e){j(e)},computeLogUrl:k,counts:r.counts}),w!==Ge.structured?(0,Y.jsx)(Vn,{runId:t,stepKeys:_,computeLogKey:y,ioType:Ge[w],setComputeLogUrl:T}):(0,Y.jsx)(pt.S,{logs:r,filter:o,filterStepKeys:R,filterKey:"".concat(JSON.stringify(o)),metadata:i})]})})})},vr=Q.ZP.div.withConfig({displayName:"Run__LogsContainer",componentId:"sc-1l2e0ac-0"})(["display:flex;flex-direction:column;height:100%;"]),yr=t(27457),jr=t(57876),br=t(37751),wr=function(){(0,g.Px)();var e=(0,l.UO)().runId,n=(0,u.a)(Sr,{fetchPolicy:"cache-and-network",partialRefetch:!0,variables:{runId:e}}),t=n.data,r=n.loading,o="Run"===(null===t||void 0===t?void 0:t.pipelineRunOrError.__typename)?t.pipelineRunOrError:null,i=null===o||void 0===o?void 0:o.pipelineSnapshotId,s=(0,sn._)(o),c=null!==s&&void 0!==s&&s.match?(0,A.k)(s.match.repository.name,s.match.repositoryLocation.name):null,d=a.useMemo((function(){return!!(o&&s&&(0,Xe.E8)(s.match,o.pipelineName))}),[o,s]);return(0,Y.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%",overflow:"hidden"},children:[(0,Y.jsx)(h.x,{flex:{direction:"row",alignItems:"flex-start"},style:{position:"relative",zIndex:1},children:(0,Y.jsx)(Je.m,{title:(0,Y.jsx)(U.X6,{style:{fontFamily:nn.b.monospace,fontSize:"20px"},children:e.slice(0,8)}),tags:o?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(br.K,{status:o.status}),(0,m.pv)(o.pipelineName)?(0,Y.jsx)(yr.k,{assetKeys:(0,F.Bo)(o),clickableTags:!0}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(w.V,{icon:"run",children:["Run of"," ",(0,Y.jsx)(V.h,{pipelineName:null===o||void 0===o?void 0:o.pipelineName,pipelineHrefContext:c||"repo-unknown",snapshotId:i,size:"small",isJob:d})]}),(0,Y.jsx)(yr.k,{assetKeys:o.assets.map((function(e){return e.key})),clickableTags:!0})]}),(0,Y.jsxs)(h.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[null!==o&&void 0!==o&&o.startTime?(0,Y.jsx)(tn.J,{interactionKind:"hover",placement:"bottom",content:(0,Y.jsx)(h.x,{padding:16,children:(0,Y.jsx)(jr.lc,{run:o,loading:r})}),children:(0,Y.jsx)(w.V,{icon:"schedule",children:(0,Y.jsx)(on.v,{timestamp:o.startTime,timeFormat:{showSeconds:!0,showTimezone:!1}})})}):o.updateTime?(0,Y.jsx)(w.V,{icon:"schedule",children:(0,Y.jsx)(on.v,{timestamp:o.updateTime,timeFormat:{showSeconds:!0,showTimezone:!1}})}):void 0,null!==o&&void 0!==o&&o.startTime&&null!==o&&void 0!==o&&o.endTime?(0,Y.jsx)(tn.J,{interactionKind:"hover",placement:"bottom",content:(0,Y.jsx)(h.x,{padding:16,children:(0,Y.jsx)(jr.lc,{run:o,loading:r})}),children:(0,Y.jsx)(w.V,{icon:"timer",children:(0,Y.jsx)("span",{style:{fontVariantNumeric:"tabular-nums"},children:null!==o&&void 0!==o&&o.startTime?(0,rn.fv)((1e3*(null===o||void 0===o?void 0:o.endTime)||Date.now())-1e3*(null===o||void 0===o?void 0:o.startTime)):"\u2013"})})}):null]})]}):null,right:o?(0,Y.jsx)(jr.Up,{run:o,isJob:d}):null})}),(0,Y.jsx)(Cr,{data:t,runId:e})]})},Cr=function(e){var n=e.data,t=e.runId;return n&&n.pipelineRunOrError?"Run"!==n.pipelineRunOrError.__typename?(0,Y.jsx)(h.x,{padding:{vertical:64},children:(0,Y.jsx)(N.t,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})}):(0,Y.jsx)(mr,{run:n.pipelineRunOrError,runId:t}):(0,Y.jsx)(mr,{run:void 0,runId:t})},Sr=(0,d.Ps)(er||(er=(0,c.Z)(["\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      __typename\n      ... on Run {\n        id\n        ...RunFragment\n      }\n    }\n  }\n\n  ","\n"])),et.O.RunFragment),kr=t(47387),Nr=t(69346),Tr=t.n(Nr),Ir=t(25171),_r=t(40515),Er=t(50741),Zr=t(62278),Rr=t(90428),Or=t.n(Rr),Pr=t(37286),Lr=t(34653),Fr=t(45302),Dr=a.memo((function(){var e,n,t=(0,Fr.oD)(),r=(0,b.Z)(t,1)[0],o=(0,Fr.VH)(r),i=(0,u.a)(Kr,{variables:{queuedFilter:(0,j.Z)((0,j.Z)({},o),{},{statuses:Array.from(Lr.sy)}),inProgressFilter:(0,j.Z)((0,j.Z)({},o),{},{statuses:Array.from(Lr.Ys)})}}).data,s=a.useMemo((function(){var e,n;return{queued:"Runs"===(null===i||void 0===i||null===(e=i.queuedCount)||void 0===e?void 0:e.__typename)?i.queuedCount.count:null,inProgress:"Runs"===(null===i||void 0===i||null===(n=i.inProgressCount)||void 0===n?void 0:n.__typename)?i.inProgressCount.count:null}}),[i]),l=Ar(r),c=function(e){var n=r.filter((function(e){return"status"!==e.token})),t=e.map((function(e){return{token:"status",value:e}}));return(0,Fr.it)([].concat((0,an.Z)(t),(0,an.Z)(n)))};return(0,Y.jsxs)(k.mQ,{selectedTabId:l,id:"run-tabs",children:[(0,Y.jsx)(Pr.f,{title:"All runs",to:c([]),id:"all"}),(0,Y.jsx)(Pr.f,{title:"Queued",count:null!==(e=s.queued)&&void 0!==e?e:"indeterminate",to:c(Array.from(Lr.sy)),id:"queued"}),(0,Y.jsx)(Pr.f,{title:"In progress",count:null!==(n=s.inProgress)&&void 0!==n?n:"indeterminate",to:c(Array.from(Lr.Ys)),id:"in-progress"}),(0,Y.jsx)(Pr.f,{title:"Done",to:c(Array.from(Lr.cv)),id:"done"}),(0,Y.jsx)(Pr.f,{title:"Scheduled",to:"/instance/runs/scheduled",id:"scheduled"})]})})),Ar=function(e){var n=(0,l.TH)().pathname;if("/instance/runs/timeline"===n)return"timeline";if("/instance/runs/scheduled"===n)return"scheduled";var t=new Set(e.filter((function(e){return"status"===e.token})).map((function(e){return e.value})));return Or()(Lr.sy,t)?"queued":Or()(Lr.Ys,t)?"in-progress":Or()(Lr.cv,t)?"done":"all"},Kr=(0,d.Ps)(nr||(nr=(0,c.Z)(["\n  query RunTabsCountQuery($queuedFilter: RunsFilter!, $inProgressFilter: RunsFilter!) {\n    queuedCount: pipelineRunsOrError(filter: $queuedFilter) {\n      ... on Runs {\n        count\n      }\n    }\n    inProgressCount: pipelineRunsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        count\n      }\n    }\n  }\n"]))),qr=t(80608),Ur=t(77892),zr=function(){(0,g.Px)(),(0,x.j)("Runs");var e=(0,Fr.oD)(),n=(0,b.Z)(e,2),t=n[0],r=n[1],o=(0,Fr.VH)(t),i=(0,_r._)(),s=(0,Ur.l)({nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[24])||void 0===n?void 0:n.runId},getResultArray:function(e){return e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]},variables:{filter:o},query:Gr,pageSize:25}),l=s.queryResult,c=s.paginationProps,u=(0,E.C4)(l,E.dT),d=Ar(t),f="all"!==d,m=Tr()(t,(function(e){return"status"===e.token})),v=(0,b.Z)(m,2),y=v[0],C=v[1],k=a.useCallback((function(e){r(f?[].concat((0,an.Z)(y),(0,an.Z)(e)):e)}),[r,f,y]),I=a.useCallback((function(e){var n=(0,Ht.HY)(e);C.some((function(e){return(0,Ht.HY)(e)===n}))||k([].concat((0,an.Z)(C),[e]))}),[C,k]),Z=a.useMemo((function(){var e=["tag","snapshotId","id","job","pipeline"];return f||e.push("status"),e}),[f]),R=a.useMemo((function(){return f?t.filter((function(e){return"status"!==e.token})):t}),[t,f]);return(0,Y.jsxs)(p.T,{children:[(0,Y.jsx)(Je.m,{title:(0,Y.jsx)(U.X6,{children:"Runs"}),tabs:(0,Y.jsxs)(h.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,Y.jsx)(Dr,{}),(0,Y.jsx)(h.x,{padding:{bottom:8},children:(0,Y.jsx)(E.xi,{refreshState:u})})]})}),"queued"===d&&i?(0,Y.jsxs)(h.x,{flex:{direction:"column",gap:8},padding:{horizontal:24,vertical:16},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:[(0,Y.jsx)(T.b,{intent:"info",title:(0,Y.jsx)(_.rU,{to:"/instance/config#run_coordinator",children:"View queue configuration"})}),(0,Y.jsx)(Mr,{})]}):null,(0,Y.jsx)(F.Lw.Provider,{value:{refetch:l.refetch},children:(0,Y.jsx)(Er.g,{queryResult:l,allowStaleData:!0,renderError:function(e){var n=!(null===e||void 0===e||!e.networkError||!("statusCode"in e.networkError)||400!==e.networkError.statusCode);return(0,Y.jsxs)(h.x,{flex:{direction:"column",gap:32},padding:{vertical:8,left:24,right:12},children:[(0,Y.jsx)(Fr.nr,{tokens:R,onChange:k,loading:l.loading,enabledFilters:Z}),(0,Y.jsx)(N.t,{icon:"warning",title:n?"Invalid run filters":"Unexpected error",description:n?"The specified run filters are not valid. Please check the filters and try again.":"An unexpected error occurred. Check the console for details."})]})},children:function(e){var n=e.pipelineRunsOrError;return"Runs"!==n.__typename?(0,Y.jsx)(h.x,{padding:{vertical:64},children:(0,Y.jsx)(N.t,{icon:"error",title:"Query Error",description:n.message})}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Zr.Y,{$top:0,children:(0,Y.jsx)(qr.A,{runs:n.results.slice(0,25),onAddTag:I,filter:o,actionBarComponents:(0,Y.jsxs)(h.x,{flex:{direction:"column",gap:8},children:["all"!==d?(0,Y.jsx)(h.x,{flex:{direction:"row",gap:8},children:t.filter((function(e){return"status"===e.token})).map((function(e){var n=e.token,t=e.value;return(0,Y.jsx)(w.V,{children:"".concat(n,":").concat(t)},n)}))}):null,(0,Y.jsx)(Fr.nr,{tokens:R,onChange:k,loading:l.loading,enabledFilters:Z})]})})}),n.results.length>0?(0,Y.jsx)("div",{style:{marginTop:"16px"},children:(0,Y.jsx)(kr.pI,(0,j.Z)({},c))}):null]})}})})]})},Gr=(0,d.Ps)(tr||(tr=(0,c.Z)(["\n  query RunsRootQuery($limit: Int, $cursor: String, $filter: RunsFilter!) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),qr.Z,dn.Bq),Mr=function(){var e=(0,u.a)($r).data,n=a.useContext(Ir.N).pageTitle,t=null===e||void 0===e?void 0:e.instance.daemonHealth.daemonStatus;return null===t||void 0===t||!t.required||null!==t&&void 0!==t&&t.healthy?null:(0,Y.jsx)(T.b,{intent:"warning",title:"The queued run coordinator is not healthy.",description:(0,Y.jsxs)("div",{children:["View ",(0,Y.jsx)(_.rU,{to:"/instance/health",children:n})," for details."]})})},$r=(0,d.Ps)(rr||(rr=(0,c.Z)(['\n  query QueueDaemonStatusQuery {\n    instance {\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "QUEUED_RUN_COORDINATOR") {\n          id\n          daemonType\n          healthy\n          required\n        }\n      }\n    }\n  }\n']))),Wr=t(78042),Vr=t(81403),Hr=t(89324),Jr=t(24375),Br=function(){(0,g.Px)(),(0,x.j)("Scheduled runs");var e=(0,u.a)(Qr,{fetchPolicy:"cache-and-network",partialRefetch:!0,notifyOnNetworkStatusChange:!0});return(0,E.C4)(e,E.dT),(0,Y.jsxs)(p.T,{children:[(0,Y.jsx)(Je.m,{title:(0,Y.jsx)(U.X6,{children:"Runs"}),tabs:(0,Y.jsx)(Dr,{})}),(0,Y.jsx)(Er.g,{queryResult:e,children:function(e){var n=e.repositoriesOrError,t=e.instance;if("PythonError"===n.__typename){var r=n.message;return(0,Y.jsx)(T.b,{intent:"warning",title:(0,Y.jsxs)(yn.Z,{direction:"row",spacing:4,children:[(0,Y.jsx)("div",{children:"Could not load scheduled ticks."}),(0,Y.jsx)(I.Z,{color:S.w.Link,underline:"always",onClick:function(){(0,cn._)({title:"Python error",body:r})},children:"View error"})]})})}return(0,Y.jsxs)(yn.Z,{direction:"column",spacing:24,children:[(0,Y.jsx)(Hr.K,{daemonHealth:t.daemonHealth}),(0,Y.jsx)(Jr.n,{repos:n.nodes})]})}})]})},Qr=(0,d.Ps)(or||(or=(0,c.Z)(["\n  query SchedulerInfoQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      ... on RepositoryConnection {\n        nodes {\n          __typename\n          id\n          ... on Repository {\n            ...RepositorySchedulesFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n  ","\n"])),Wr.O,Vr.dM,dn.Bq),Xr=t(87535),Yr=t(33247),eo=(0,d.Ps)(ir||(ir=(0,c.Z)(["\n  query SnapshotQuery($snapshotId: String!) {\n    pipelineSnapshotOrError(snapshotId: $snapshotId) {\n      ... on PipelineSnapshot {\n        id\n        parentSnapshotId\n      }\n    }\n  }\n"]))),no=function(e){var n,t=e.activeTab,r=void 0===t?"":t,o=e.explorerPath,i=o.pipelineName,s=o.snapshotId,a=void 0===s?"":s,l=(0,Qe.gY)((0,j.Z)((0,j.Z)({},o),{},{opNames:[]})),c=(0,Xe.Nc)(i),d=!(null===c||void 0===c||!c.isJob),p=null===c||void 0===c?void 0:c.pipelineSnapshotId,h=(0,u.a)(eo,{variables:{snapshotId:a}}),f=h.data,g=h.loading,m=[{text:"Definition",pathComponent:"",href:"/instance/snapshots/".concat(l)},{text:"Runs",pathComponent:"runs",href:"/instance/snapshots/".concat(l,"runs")}];return(0,Y.jsx)(Je.m,{title:(0,Y.jsx)(U.X6,{style:{fontFamily:nn.b.monospace,fontSize:"20px"},children:null===(n=o.snapshotId)||void 0===n?void 0:n.slice(0,8)}),tags:(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(w.V,{icon:"schema",children:["Snapshot of"," ",(0,Y.jsx)(_.rU,{to:(0,K.r4)(o.pipelineName,d),children:o.pipelineName})]}),function(){var e;return g?(0,Y.jsx)(w.V,{intent:"none",minimal:!0,children:"..."}):!p||p!==a&&"PipelineSnapshot"===(null===f||void 0===f?void 0:f.pipelineSnapshotOrError.__typename)&&(null===f||void 0===f||null===(e=f.pipelineSnapshotOrError)||void 0===e?void 0:e.parentSnapshotId)!==p?(0,Y.jsx)(w.V,{intent:"warning",minimal:!0,children:"Snapshot"}):(0,Y.jsx)(w.V,{intent:"success",minimal:!0,children:"Current"})}()]}),tabs:(0,Y.jsx)(k.mQ,{selectedTabId:r,children:m.map((function(e){var n=e.href,t=e.text,r=e.pathComponent;return(0,Y.jsx)(Pr.f,{id:r,title:t,to:n},t)}))})})},to=function(){var e=(0,l.UO)(),n=e.pipelinePath,t=e.tab,r=(0,Qe.p3)(n);return(0,Y.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,Y.jsx)(no,{activeTab:t,explorerPath:r}),(0,Y.jsxs)(l.rs,{children:[(0,Y.jsx)(l.AW,{path:"/instance/snapshots/:pipelinePath/runs",children:(0,Y.jsx)(Yr.G,{})}),(0,Y.jsx)(l.AW,{path:"/instance/snapshots/(/?.*)",children:(0,Y.jsx)(Xr.CY,{})})]})]})},ro=t(2789),oo=t(64480),io=function(){(0,g.Px)();var e=a.useContext(Ir.N).pageTitle,n=(0,u.a)(so),t=(0,Ur.l)({query:ao,variables:{},pageSize:10,nextCursorForResult:function(e){var n;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(n=e.partitionBackfillsOrError.results[9])||void 0===n?void 0:n.backfillId:void 0},getResultArray:function(e){return"PartitionBackfills"===(null===e||void 0===e?void 0:e.partitionBackfillsOrError.__typename)?e.partitionBackfillsOrError.results:[]}}),r=t.queryResult,o=t.paginationProps,i=(0,E.C4)(r,E.dT);return(0,x.j)("Backfills"),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Je.m,{title:(0,Y.jsx)(U.X6,{children:e}),tabs:(0,Y.jsx)(oo.Z,{tab:"backfills",refreshState:i})}),(0,Y.jsx)(Er.g,{queryResult:r,allowStaleData:!0,children:function(e){var t,i=e.partitionBackfillsOrError;if("PythonError"===i.__typename)return(0,Y.jsx)(dn.T9,{error:i});if(!i.results.length)return(0,Y.jsx)(h.x,{padding:{vertical:64},children:(0,Y.jsx)(N.t,{icon:"no-results",title:"No backfills found",description:(0,Y.jsx)("p",{children:"This instance does not have any backfill jobs."})})});var s=((null===(t=n.data)||void 0===t?void 0:t.instance.daemonHealth.allDaemonStatuses)||[]).filter((function(e){return"BACKFILL"===e.daemonType})).map((function(e){return e.required&&e.healthy})),a=s.length&&s.every((function(e){return e}));return(0,Y.jsxs)("div",{children:[a?null:(0,Y.jsx)(h.x,{padding:{horizontal:24,vertical:16},children:(0,Y.jsx)(T.b,{intent:"warning",title:"The backfill daemon is not running.",description:(0,Y.jsxs)("div",{children:["See the"," ",(0,Y.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}),(0,Y.jsx)(ro.G,{backfills:i.results.slice(0,10),refetch:r.refetch}),i.results.length>0?(0,Y.jsx)("div",{style:{marginTop:"16px"},children:(0,Y.jsx)(kr.b$,(0,j.Z)({},o))}):null]})}})]})},so=(0,d.Ps)(sr||(sr=(0,c.Z)(["\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"])),Wr.O),ao=(0,d.Ps)(ar||(ar=(0,c.Z)(["\n  query InstanceBackfillsQuery($cursor: String, $limit: Int) {\n    partitionBackfillsOrError(cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          backfillId\n          status\n          backfillStatus\n          numRequested\n          numPartitions\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),ro.b,dn.Bq),lo=(t(81452),t(24818)),co=(0,Q.vJ)(lr||(lr=(0,c.Z)(["\n  .react-codemirror2 .CodeMirror.cm-s-instance-config {\n    box-shadow: 0 1px 0 ",";\n    height: 100%;\n  }\n\n  .react-codemirror2 .CodeMirror.cm-s-instance-config {\n    .config-highlight {\n      background-color: ",";\n    }\n"])),S.w.KeylineGray,S.w.Yellow200),uo=a.memo((function(){(0,g.Px)();var e=a.useContext(Ir.N).pageTitle,n=(0,u.a)(po,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),t=(0,E.C4)(n,E.dT),r=n.data,o=null===r||void 0===r?void 0:r.instance.info;return r?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(co,{}),(0,Y.jsx)(Je.m,{title:(0,Y.jsx)(U.X6,{children:e}),tabs:(0,Y.jsx)(oo.Z,{tab:"config",refreshState:t})}),(0,Y.jsx)(h.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,Y.jsxs)(U.pm,{children:["Dagster version: ",(0,Y.jsx)(U.EK,{style:{fontSize:"16px"},children:r.version})]})}),(0,Y.jsx)(lo.NU,{editorDidMount:function(e){var n=document.location.hash;if(n){var t=new RegExp("^".concat(n.slice(1),":")),r=e.getSearchCursor(t);r.findNext()&&(e.markText(r.from(),r.to(),{className:"config-highlight"}),e.scrollIntoView(r.from()))}},value:o||"",options:{lineNumbers:!0,mode:"yaml"},theme:["instance-config"]})]}):(0,Y.jsx)(h.x,{padding:{vertical:64},children:(0,Y.jsx)(f.$,{purpose:"section"})})})),po=(0,d.Ps)(cr||(cr=(0,c.Z)(["\n  query InstanceConfigQuery {\n    version\n    instance {\n      info\n    }\n  }\n"]))),ho=t(9405),fo=function(){(0,g.Px)();var e=a.useContext(Ir.N).pageTitle,n=(0,u.a)(go,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),t=(0,E.C4)(n,E.dT),r=n.loading,o=n.data;return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Je.m,{title:(0,Y.jsx)(U.X6,{children:e}),tabs:(0,Y.jsx)(oo.Z,{tab:"health",refreshState:t})}),(0,Y.jsx)(h.x,{padding:{vertical:16,horizontal:24},children:(0,Y.jsx)(U.pm,{children:"Daemon statuses"})}),!r||null!==o&&void 0!==o&&o.instance?null!==o&&void 0!==o&&o.instance?(0,Y.jsx)(ho.W,{daemonStatuses:o.instance.daemonHealth.allDaemonStatuses}):null:(0,Y.jsx)(h.x,{padding:{horizontal:24},style:{color:S.w.Gray400},children:"Loading\u2026"})]})},go=(0,d.Ps)(ur||(ur=(0,c.Z)(["\n  query InstanceHealthQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"])),Wr.O),mo=t(23848),xo=t(2097),vo=t(40557),yo=t(29440),jo=function(e,n){return"search"===n.type?(0,j.Z)((0,j.Z)({},e),{},{searchValue:n.value}):e},bo={searchValue:""},wo=function(){(0,g.Px)();var e=a.useReducer(jo,bo),n=(0,b.Z)(e,2),t=n[0],r=n[1],o=a.useContext(Ir.N).pageTitle,i=a.useContext(Xe.C5),s=i.allRepos,l=i.visibleRepos,c=t.searchValue,d=(0,u.a)(Io,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),p=d.data,x=d.loading,v=(0,u.a)(_o,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),y=v.data,w=(0,E.V5)((0,E.C4)(v,E.dT),(0,E.C4)(d,E.dT)),C=a.useMemo((function(){var e=[],n=[],t=[],r=[],o=[],i=function(e,n){var t=e.runs[0]||null,r=n.runs[0]||null;return t.startTime?r.startTime?r.startTime-t.startTime:-1:r.startTime?-1:e.name.toLocaleLowerCase().localeCompare(n.name.toLocaleLowerCase())};if(p&&Object.keys(p).length&&"Workspace"===(null===p||void 0===p?void 0:p.workspaceOrError.__typename)){var s,a=(0,Jn.Z)(p.workspaceOrError.locationEntries);try{for(a.s();!(s=a.n()).done;){var l,c=s.value;if("WorkspaceLocationEntry"===c.__typename&&"RepositoryLocation"===(null===(l=c.locationOrLoadError)||void 0===l?void 0:l.__typename)){var u,d=(0,Jn.Z)(c.locationOrLoadError.repositories);try{for(d.s();!(u=d.n()).done;){var h,f=u.value,g=(0,Jn.Z)(f.pipelines);try{var m=function(){var i=h.value,s=i.runs,a=(f.schedules||[]).filter((function(e){return e.pipelineName===i.name})),l=(f.sensors||[]).filter((function(e){var n;return null===(n=e.targets)||void 0===n?void 0:n.map((function(e){return e.pipelineName})).includes(i.name)})),u=(0,A.k)(f.name,c.locationOrLoadError.name);if(s.length){var d=s[0].status,p={isJob:i.isJob,name:i.name,schedules:a,sensors:l,repoAddress:u,runs:s};Lr.hd.has(d)?e.push(p):Lr.Ys.has(d)?n.push(p):Lr._m.has(d)?t.push(p):Lr.sy.has(d)?r.push(p):o.push(p)}};for(g.s();!(h=g.n()).done;)m()}catch(x){g.e(x)}finally{g.f()}}}catch(x){d.e(x)}finally{d.f()}}}}catch(x){a.e(x)}finally{a.f()}}return e.sort(i),n.sort(i),r.sort(i),t.sort(i),o.sort(i),{failed:e,inProgress:n,queued:r,succeeded:t,neverRan:o}}),[p]),k=a.useMemo((function(){var e=c.toLocaleLowerCase(),n=function(n){var t=n.name,r=n.repoAddress;return l.some((function(e){return e.repository.name===r.name&&e.repositoryLocation.name===r.location}))&&t.toLocaleLowerCase().includes(e)&&!(0,m.pv)(t)},t=C.failed,r=C.inProgress,o=C.queued,i=C.succeeded,s=C.neverRan;return{failed:t.filter(n),inProgress:r.filter(n),queued:o.filter(n),succeeded:i.filter(n),neverRan:s.filter(n)}}),[C,l,c]),N=a.useMemo((function(){if(!y||0===Object.keys(y).length)return null;var e={};if("Workspace"===y.workspaceOrError.__typename){var n,t=(0,Jn.Z)(y.workspaceOrError.locationEntries);try{for(t.s();!(n=t.n()).done;){var r,o=n.value;if("WorkspaceLocationEntry"===o.__typename&&"RepositoryLocation"===(null===(r=o.locationOrLoadError)||void 0===r?void 0:r.__typename)){var i,s=(0,Jn.Z)(o.locationOrLoadError.repositories);try{for(s.s();!(i=s.n()).done;){var a,l=i.value,c=(0,Jn.Z)(l.pipelines);try{for(c.s();!(a=c.n()).done;){var u=a.value;e[(0,mo.G)((0,A.k)(l.name,o.locationOrLoadError.name),u.name)]=u.runs}}catch(d){c.e(d)}finally{c.f()}}}catch(d){s.e(d)}finally{s.f()}}}}catch(d){t.e(d)}finally{t.f()}}return e}),[y]),T=a.useMemo((function(){return Object.values(k).reduce((function(e,n){return[].concat((0,an.Z)(e),(0,an.Z)(n))}),[])}),[k]),I=a.useMemo((function(){var e=function(e){var n=e.name,t=e.repoAddress,r=(0,mo.G)(t,n),o=N&&N[r]||[];return(0,j.Z)((0,j.Z)({},e),{},{runs:(0,an.Z)(o).reverse()})},n=k.failed,t=k.inProgress,r=k.queued,o=k.succeeded,i=k.neverRan;return{failed:n.map(e),inProgress:t.map(e),queued:r.map(e),succeeded:o.map(e),neverRan:i.map(e)}}),[N,k]);if(!p||0===Object.keys(p).length)return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Je.m,{title:(0,Y.jsx)(U.X6,{children:o}),tabs:(0,Y.jsx)(oo.Z,{tab:"overview",refreshState:w})}),(0,Y.jsx)(h.x,{padding:64,children:(0,Y.jsx)(f.$,{purpose:"section"})})]});var _=I.failed,Z=I.inProgress,R=I.queued,O=I.succeeded,P=I.neverRan;return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Je.m,{title:(0,Y.jsx)(U.X6,{children:o}),tabs:(0,Y.jsx)(oo.Z,{tab:"overview",refreshState:w})}),(0,Y.jsxs)(h.x,{padding:{horizontal:24,top:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[s.length>1&&(0,Y.jsx)(Be.C,{}),(0,Y.jsx)(xe.oi,{icon:"search",value:c,onChange:function(e){return r({type:"search",value:e.target.value})},placeholder:"Filter by job name\u2026",style:{width:"340px"}})]}),(0,Y.jsx)(ko,{jobs:T,loading:x}),Z.length?(0,Y.jsx)(No,{icon:(0,Y.jsx)(z.JO,{name:"hourglass_bottom",color:S.w.Blue500,size:24}),heading:1===Z.length?"1 job in progress":"".concat(Z.length," jobs in progress"),jobs:Z}):null,_.length?(0,Y.jsx)(No,{icon:(0,Y.jsx)(z.JO,{name:"error_outline",color:S.w.Red500,size:24}),heading:1===_.length?"1 job failed":"".concat(_.length," jobs failed"),jobs:_}):null,R.length?(0,Y.jsx)(No,{icon:(0,Y.jsx)(z.JO,{name:"checklist",color:S.w.Gray500,size:24}),heading:1===R.length?"1 job queued":"".concat(R.length," jobs queued"),jobs:R}):null,O.length?(0,Y.jsx)(No,{icon:(0,Y.jsx)(z.JO,{name:"check_circle",color:S.w.Green500,size:24}),heading:1===O.length?"1 job succeeded":"".concat(O.length," jobs succeeded"),jobs:O}):null,P.length?(0,Y.jsx)(No,{icon:(0,Y.jsx)(z.JO,{name:"history_toggle_off",color:S.w.Gray900,size:24}),heading:1===P.length?"1 job never ran":"".concat(P.length," jobs never ran"),jobs:P}):null]})},Co=36e5,So=function(e){switch(e){case"1":case"6":case"12":case"24":return e;default:return"12"}},ko=function(e){var n=e.jobs,t=e.loading,r=a.useState(!0),o=(0,b.Z)(r,2),i=o[0],s=o[1],l=(0,Se.U)("dagit.run-timeline-hour-window",So),c=(0,b.Z)(l,2),u=c[0],d=c[1],p=a.useRef(Date.now());a.useEffect((function(){t||(p.current=Date.now())}),[t]);var f=Math.floor(p.current/1e3),g=a.useMemo((function(){return[1e3*f-Number(u)*Co,1e3*f+36e5]}),[u,f]),m=a.useMemo((function(){var e=(0,b.Z)(g,2),n=e[0],t=e[1];return t<n?[t,n]:[n,t]}),[g]),x=(0,b.Z)(m,2),v=x[0],y=x[1],j=n.map((function(e){return{key:(0,mo.G)(e.repoAddress,e.name),jobName:e.name,repoAddress:e.repoAddress,path:(0,K.jT)({repoName:e.repoAddress.name,repoLocation:e.repoAddress.location,pipelineName:e.name,isJob:e.isJob}),runs:[]}}));return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(h.x,{flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},margin:{top:16},padding:{bottom:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:[(0,Y.jsxs)(h.x,{flex:{alignItems:"center",gap:8},children:[(0,Y.jsx)(z.JO,{name:"waterfall_chart",color:S.w.Gray900,size:20}),(0,Y.jsx)(U.X6,{children:"Timeline"})]}),(0,Y.jsxs)(h.x,{flex:{alignItems:"center",gap:8},children:[i?(0,Y.jsx)(ge.h,{activeItems:new Set([u]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return d(e)}}):null,(0,Y.jsx)(me.zx,{icon:(0,Y.jsx)(z.JO,{name:i?"unfold_less":"unfold_more"}),onClick:function(){return s((function(e){return!e}))},children:i?"Hide":"Show"})]})]}),i?(0,Y.jsx)(mo.C,{range:[v,y],jobs:j,hourWindow:u}):null]})},No=function(e){var n=e.icon,t=e.heading,r=e.jobs;return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(h.x,{flex:{direction:"row",gap:8,alignItems:"center"},margin:{top:16},padding:{vertical:16,horizontal:24},children:[n,(0,Y.jsx)(U.X6,{children:t})]}),(0,Y.jsx)(vo.Q,{jobs:r})]})},To=(0,d.Ps)(dr||(dr=(0,c.Z)(["\n  fragment OverviewJobFragment on Pipeline {\n    id\n    name\n    isJob\n    runs(limit: 1) {\n      id\n      mode\n      runId\n      status\n      ...RunTimeFragment\n    }\n    modes {\n      id\n      name\n    }\n  }\n\n  ","\n"])),F.$X),Io=(0,d.Ps)(pr||(pr=(0,c.Z)(["\n  query InstanceOverviewInitialQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  ...OverviewJobFragment\n                }\n                ...RepositoryInfoFragment\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                  ...ScheduleSwitchFragment\n                }\n                sensors {\n                  id\n                  name\n                  targets {\n                    pipelineName\n                  }\n                  sensorState {\n                    id\n                    status\n                  }\n                  ...SensorSwitchFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),To,xo.x,yo.q,de.J,pe.U,dn.Bq),_o=(0,d.Ps)(hr||(hr=(0,c.Z)(["\n  query LastTenRunsPerJobQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                  runs(limit: 10) {\n                    id\n                    ...RunTimeFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),dn.Bq,F.$X),Eo=t(45352),Zo=t(56313),Ro=t(98191),Oo=a.memo((function(){(0,g.Px)();var e=a.useContext(Ir.N).pageTitle,n=(0,u.a)(Lo,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),t=(0,E.C4)(n,E.dT);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Je.m,{title:(0,Y.jsx)(U.X6,{children:e}),tabs:(0,Y.jsx)(oo.Z,{tab:"schedules",refreshState:t})}),(0,Y.jsx)(Er.g,{queryResult:n,allowStaleData:!0,children:function(e){return(0,Y.jsx)(Po,{data:e})}})]})})),Po=function(e){var n=e.data,t=n.instance,r=n.repositoriesOrError,o=n.unloadableInstigationStatesOrError;if("PythonError"===r.__typename)return(0,Y.jsx)(dn.T9,{error:r});if("PythonError"===o.__typename)return(0,Y.jsx)(dn.T9,{error:o});var i=o.results,s=r.nodes.filter((function(e){return e.schedules.length})),l=s.length?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(h.x,{padding:{vertical:16,horizontal:24},children:(0,Y.jsx)(Hr.K,{daemonHealth:t.daemonHealth})}),s.map((function(e){return(0,Y.jsxs)(a.Fragment,{children:[(0,Y.jsx)(h.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:S.w.KeylineGray},children:(0,Y.jsx)(U.pm,{children:"".concat((0,A.i)(e.name,e.location.name))})}),(0,Y.jsx)(h.x,{padding:{bottom:16},children:(0,Y.jsx)(Ro.P,{repoAddress:(0,A.k)(e.name,e.location.name),schedules:e.schedules})})]},e.name)}))]}):null,c=i.filter((function(e){return e.instigationType===D._5.SCHEDULE})),u=c.length?(0,Y.jsx)(Zo.Y,{scheduleStates:c}):null;return l||u?(0,Y.jsxs)(yn.Z,{direction:"column",spacing:32,children:[l,u]}):(0,Y.jsx)(h.x,{margin:{top:32},children:(0,Y.jsx)(N.t,{icon:"schedule",title:"No schedules found",description:(0,Y.jsxs)("div",{children:["This instance does not have any schedules defined. Visit the"," ",(0,Y.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules",target:"_blank",rel:"noreferrer",children:"scheduler documentation"})," ","for more information about scheduling runs in Dagster."]})})})},Lo=(0,d.Ps)(fr||(fr=(0,c.Z)(["\n  query InstanceSchedulesQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          ...RepositoryInfoFragment\n          schedules {\n            id\n            ...ScheduleFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),Wr.O,xo.x,Vr.GA,dn.Bq,Eo.ai),Fo=t(20925),Do=t(57466),Ao=t(87669),Ko=a.memo((function(){(0,g.Px)();var e=a.useContext(Ir.N).pageTitle,n=(0,u.a)(Uo,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),t=(0,E.C4)(n,E.dT);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Je.m,{title:(0,Y.jsx)(U.X6,{children:e}),tabs:(0,Y.jsx)(oo.Z,{tab:"sensors",refreshState:t})}),(0,Y.jsx)(Er.g,{queryResult:n,allowStaleData:!0,children:function(e){return(0,Y.jsx)(qo,{data:e})}})]})})),qo=function(e){var n=e.data,t=n.instance,r=n.repositoriesOrError,o=n.unloadableInstigationStatesOrError;if("PythonError"===r.__typename)return(0,Y.jsx)(dn.T9,{error:r});if("PythonError"===o.__typename)return(0,Y.jsx)(dn.T9,{error:o});var i=o.results,s=r.nodes.filter((function(e){return e.sensors.length})),l=s.length?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(h.x,{padding:{horizontal:24,vertical:16},children:(0,Y.jsx)(Do.F,{daemonHealth:t.daemonHealth})}),s.map((function(e){return e.sensors.length?(0,Y.jsxs)(a.Fragment,{children:[(0,Y.jsx)(h.x,{padding:{horizontal:24,vertical:16},border:{side:"top",width:1,color:S.w.KeylineGray},children:(0,Y.jsx)(U.pm,{children:"".concat((0,A.i)(e.name,e.location.name))})}),(0,Y.jsx)(h.x,{padding:{bottom:16},children:(0,Y.jsx)(Ao.J,{repoAddress:(0,A.k)(e.name,e.location.name),sensors:e.sensors})})]},e.name):null}))]}):null,c=i.length?(0,Y.jsx)(Zo.e,{sensorStates:i}):null;return l||c?(0,Y.jsxs)(Y.Fragment,{children:[l,c]}):(0,Y.jsx)(h.x,{padding:{vertical:64},border:{side:"top",width:1,color:S.w.KeylineGray},children:(0,Y.jsx)(N.t,{icon:"sensors",title:"No sensors found",description:(0,Y.jsxs)("p",{children:["This instance does not have any sensors defined. Visit the"," ",(0,Y.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules",target:"_blank",rel:"noreferrer",children:"sensor documentation"})," ","for more information about setting up sensors in Dagster."]})})})},Uo=(0,d.Ps)(gr||(gr=(0,c.Z)(["\n  query InstanceSensorsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          ...RepositoryInfoFragment\n          sensors {\n            id\n            ...SensorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),Wr.O,xo.x,dn.Bq,Fo.l,Eo.ai),zo=a.lazy((function(){return t.e(801).then(t.bind(t,79801))})),Go=function(){return(0,Y.jsx)(p.T,{children:(0,Y.jsxs)(l.rs,{children:[(0,Y.jsx)(l.AW,{path:"/instance/overview",children:(0,Y.jsx)(wo,{})}),(0,Y.jsx)(l.AW,{path:"/instance/health",children:(0,Y.jsx)(fo,{})}),(0,Y.jsx)(l.AW,{path:"/instance/schedules",children:(0,Y.jsx)(Oo,{})}),(0,Y.jsx)(l.AW,{path:"/instance/sensors",children:(0,Y.jsx)(Ko,{})}),(0,Y.jsx)(l.AW,{path:"/instance/backfills",children:(0,Y.jsx)(io,{})}),(0,Y.jsx)(l.AW,{path:"/instance/config",children:(0,Y.jsx)(uo,{})}),(0,Y.jsx)(l.AW,{path:"/instance/code-locations",children:(0,Y.jsx)(a.Suspense,{fallback:(0,Y.jsx)("div",{}),children:(0,Y.jsx)(zo,{})})}),(0,Y.jsx)(l.AW,{path:"*",render:function(){return(0,Y.jsx)(l.l_,{to:"/instance"})}})]})})},Mo=function(){var e=(0,l.TH)().pathname,n=a.useRef(null);return a.useEffect((function(){var e;null===(e=n.current)||void 0===e||e.scrollTo({top:0})}),[e]),(0,Y.jsx)(s.M,{ref:n,children:(0,Y.jsxs)(l.rs,{children:[(0,Y.jsx)(l.AW,{path:"/instance/asset-groups(/?.*)",children:(0,Y.jsx)(en,{})}),(0,Y.jsx)(l.AW,{path:"/instance/assets(/?.*)",children:(0,Y.jsx)(Ve,{})}),(0,Y.jsx)(l.AW,{path:"/instance/runs",exact:!0,children:(0,Y.jsx)(zr,{})}),(0,Y.jsx)(l.AW,{path:"/instance/runs/scheduled",exact:!0,children:(0,Y.jsx)(Br,{})}),(0,Y.jsx)(l.AW,{path:"/instance/runs/:runId",exact:!0,children:(0,Y.jsx)(wr,{})}),(0,Y.jsx)(l.AW,{path:"/instance/snapshots/:pipelinePath/:tab?",children:(0,Y.jsx)(to,{})}),(0,Y.jsx)(l.AW,{path:"/instance/:tab",children:(0,Y.jsx)(Go,{})}),(0,Y.jsx)(l.AW,{path:"*",render:function(){return(0,Y.jsx)(l.l_,{to:"/instance/overview"})}})]})})},$o=Mo},64480:function(e,n,t){"use strict";t.d(n,{Z:function(){return p}});var r=t(32030),o=t(31269),i=t(325),s=t(81745),a=t(19102),l=t(37286),c=t(25171),u=t(40515),d=t(32289),p=function(e){var n=e.refreshState,t=e.tab,p=i.useContext(c.N).healthTitle,h=(0,s.gV)().flagNewWorkspace,f=(0,u._)();return(0,d.jsxs)(r.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,d.jsxs)(o.mQ,{selectedTabId:t,children:[(0,d.jsx)(l.f,{id:"overview",title:"Overview",to:"/instance/overview"}),h?(0,d.jsx)(l.f,{id:"code-locations",title:"Code locations",to:"/instance/code-locations"}):null,(0,d.jsx)(l.f,{id:"health",title:p,to:"/instance/health"}),(0,d.jsx)(l.f,{id:"schedules",title:"Schedules",to:"/instance/schedules"}),(0,d.jsx)(l.f,{id:"sensors",title:"Sensors",to:"/instance/sensors"}),(0,d.jsx)(l.f,{id:"backfills",title:"Backfills",to:"/instance/backfills"}),f?(0,d.jsx)(l.f,{id:"config",title:"Configuration",to:"/instance/config"}):null]}),n?(0,d.jsx)(r.x,{padding:{bottom:8},children:(0,d.jsx)(a.xi,{refreshState:n})}):null]})}},40515:function(e,n,t){"use strict";t.d(n,{_:function(){return a}});var r,o=t(99500),i=t(73701),s=t(3159),a=function(){var e=(0,i.a)(l).data;return!(null===e||void 0===e||!e.instance.hasInfo)},l=(0,s.Ps)(r||(r=(0,o.Z)(["\n  query InstanceConfigHasInfo {\n    instance {\n      hasInfo\n    }\n  }\n"])))},60453:function(e){"use strict";var n=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var t=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0}return n(e,null,[{key:"escapeForHtml",value:function(n){return(new e).escapeForHtml(n)}},{key:"linkify",value:function(n){return(new e).linkify(n)}},{key:"ansiToHtml",value:function(n,t){return(new e).ansiToHtml(n,t)}},{key:"ansiToJson",value:function(n,t){return(new e).ansiToJson(n,t)}},{key:"ansiToText",value:function(n){return(new e).ansiToText(n)}}]),n(e,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var e=0;e<2;++e)for(var n=0;n<8;++n)this.PALETTE_COLORS.push(t[e][n].color);for(var r=[0,95,135,175,215,255],o=function(e,n,t){return r[e]+", "+r[n]+", "+r[t]},i=0;i<6;++i)for(var s=0;s<6;++s)for(var a=0;a<6;++a)this.PALETTE_COLORS.push(o(i,s,a));for(var l=8,c=0;c<24;++c,l+=10)this.PALETTE_COLORS.push(o(l,l,l))}},{key:"escapeForHtml",value:function(e){return e.replace(/[&<>]/gm,(function(e){return"&"==e?"&amp;":"<"==e?"&lt;":">"==e?"&gt;":""}))}},{key:"linkify",value:function(e){return e.replace(/(https?:\/\/[^\s]+)/gm,(function(e){return'<a href="'+e+'">'+e+"</a>"}))}},{key:"ansiToHtml",value:function(e,n){return this.process(e,n,!0)}},{key:"ansiToJson",value:function(e,n){return(n=n||{}).json=!0,n.clearLine=!1,this.process(e,n,!0)}},{key:"ansiToText",value:function(e){return this.process(e,{},!1)}},{key:"process",value:function(e,n,t){var r=this,o=e.split(/\033\[/),i=o.shift();void 0!==n&&null!==n||(n={}),n.clearLine=/\r/.test(e);var s=o.map((function(e){return r.processChunk(e,n,t)}));if(n&&n.json){var a=this.processChunkJson("");return a.content=i,a.clearLine=n.clearLine,s.unshift(a),n.remove_empty&&(s=s.filter((function(e){return!e.isEmpty()}))),s}return s.unshift(i),s.join("")}},{key:"processChunkJson",value:function(e,n,r){var o=(n="undefined"==typeof n?{}:n).use_classes="undefined"!=typeof n.use_classes&&n.use_classes,i=n.key=o?"class":"color",s={content:e,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,clearLine:n.clearLine,decoration:null,was_processed:!1,isEmpty:function(){return!s.content}},a=e.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!a)return s;s.content=a[4];var l=a[2].split(";");if(""!==a[1]||"m"!==a[3])return s;if(!r)return s;var c=this;for(c.decoration=null;l.length>0;){var u=l.shift(),d=parseInt(u);if(isNaN(d)||0===d)c.fg=c.bg=c.decoration=null;else if(1===d)c.decoration="bold";else if(2===d)c.decoration="dim";else if(3==d)c.decoration="italic";else if(4==d)c.decoration="underline";else if(5==d)c.decoration="blink";else if(7===d)c.decoration="reverse";else if(8===d)c.decoration="hidden";else if(9===d)c.decoration="strikethrough";else if(39==d)c.fg=null;else if(49==d)c.bg=null;else if(d>=30&&d<38)c.fg=t[0][d%10][i];else if(d>=90&&d<98)c.fg=t[1][d%10][i];else if(d>=40&&d<48)c.bg=t[0][d%10][i];else if(d>=100&&d<108)c.bg=t[1][d%10][i];else if(38===d||48===d){var p=38===d;if(l.length>=1){var h=l.shift();if("5"===h&&l.length>=1){var f=parseInt(l.shift());if(f>=0&&f<=255)if(o){var g=f>=16?"ansi-palette-"+f:t[f>7?1:0][f%8].class;p?c.fg=g:c.bg=g}else this.PALETTE_COLORS||c.setupPalette(),p?c.fg=this.PALETTE_COLORS[f]:c.bg=this.PALETTE_COLORS[f]}else if("2"===h&&l.length>=3){var m=parseInt(l.shift()),x=parseInt(l.shift()),v=parseInt(l.shift());if(m>=0&&m<=255&&x>=0&&x<=255&&v>=0&&v<=255){var y=m+", "+x+", "+v;o?p?(c.fg="ansi-truecolor",c.fg_truecolor=y):(c.bg="ansi-truecolor",c.bg_truecolor=y):p?c.fg=y:c.bg=y}}}}}if(null===c.fg&&null===c.bg&&null===c.decoration)return s;return s.fg=c.fg,s.bg=c.bg,s.fg_truecolor=c.fg_truecolor,s.bg_truecolor=c.bg_truecolor,s.decoration=c.decoration,s.was_processed=!0,s}},{key:"processChunk",value:function(e,n,t){var r=this;n=n||{};var o=this.processChunkJson(e,n,t);if(n.json)return o;if(o.isEmpty())return"";if(!o.was_processed)return o.content;var i=n.use_classes,s=[],a=[],l={},c=function(e){var n=[],t=void 0;for(t in e)e.hasOwnProperty(t)&&n.push("data-"+t+'="'+r.escapeForHtml(e[t])+'"');return n.length>0?" "+n.join(" "):""};return o.fg&&(i?(a.push(o.fg+"-fg"),null!==o.fg_truecolor&&(l["ansi-truecolor-fg"]=o.fg_truecolor,o.fg_truecolor=null)):s.push("color:rgb("+o.fg+")")),o.bg&&(i?(a.push(o.bg+"-bg"),null!==o.bg_truecolor&&(l["ansi-truecolor-bg"]=o.bg_truecolor,o.bg_truecolor=null)):s.push("background-color:rgb("+o.bg+")")),o.decoration&&(i?a.push("ansi-"+o.decoration):"bold"===o.decoration?s.push("font-weight:bold"):"dim"===o.decoration?s.push("opacity:0.5"):"italic"===o.decoration?s.push("font-style:italic"):"reverse"===o.decoration?s.push("filter:invert(100%)"):"hidden"===o.decoration?s.push("visibility:hidden"):"strikethrough"===o.decoration?s.push("text-decoration:line-through"):s.push("text-decoration:"+o.decoration)),i?'<span class="'+a.join(" ")+'"'+c(l)+">"+o.content+"</span>":'<span style="'+s.join(";")+'"'+c(l)+">"+o.content+"</span>"}}]),e}();e.exports=r},65502:function(e,n,t){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t(60453)),s=t(76267),a=o(t(325)),l=/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/;function c(e,n,t,r){var o=n?null:function(e){var n={};return e.bg&&(n.backgroundColor="rgb(".concat(e.bg,")")),e.fg&&(n.color="rgb(".concat(e.fg,")")),n}(t),i=n?function(e){var n="";return e.bg||e.fg?(e.bg&&(n+=e.bg+" "),e.fg&&(n+=e.fg+" "),n=n.substring(0,n.length-1)):null}(t):null;if(!e)return a.createElement("span",{style:o,key:r,className:i},t.content);var s=t.content.split(/(\s+)/).reduce((function(e,n,t){return t%2===1?(e.push(n),e):l.test(n)?(e.push(a.createElement("a",{key:t,href:n,target:"_blank"},"".concat(n))),e):(e.push(n),e)}),[]);return a.createElement("span",{style:o,key:r,className:i},s)}n.default=function(e){var n=e.className,t=e.useClasses,r=e.children,o=e.linkify;return a.createElement("code",{className:n},function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=s.escapeCarriageReturn(e),i.default.ansiToJson(e,{json:!0,remove_empty:!0,use_classes:n})}(r,!!t).map(c.bind(null,o,!!t)))}},76267:function(e){function n(e){if(!e)return"";if(!/\r/.test(e))return e;for(e=e.replace(/\r+\n/gm,"\n");/\r[^$]/.test(e);){var n=/^(.*)\r+/m.exec(e)[1],t=/\r+(.*)$/m.exec(e)[1];t+=n.slice(t.length,n.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,t)}return e}function t(e){for(var n=0,t=0;t<e.length;t++)e[n].length<=e[t].length&&(n=t);return n}function r(e){if(!/\r/.test(e))return e;for(var n=e.split("\r"),r=[];n.length>0;){var o=t(n);r.push(n[o]),n=n.slice(o+1)}return r.join("\r")}e.exports=n,e.exports.escapeCarriageReturn=n,e.exports.escapeCarriageReturnSafe=function(e){if(!e)return"";if(!/\r/.test(e))return e;if(!/\n/.test(e))return r(e);var t=(e=e.replace(/\r+\n/gm,"\n")).lastIndexOf("\n");return n(e.slice(0,t))+"\n"+r(e.slice(t+1))}},69346:function(e,n,t){var r=t(53004)((function(e,n,t){e[t?0:1].push(n)}),(function(){return[[],[]]}));e.exports=r},72844:function(e,n,t){var r=t(43615),o=t(78408);e.exports=function(e,n,t){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),r(e,n,{leading:i,maxWait:n,trailing:s})}}}]);
//# sourceMappingURL=35.f5ab0fc7.chunk.js.map