"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[886],{70457:function(e,n,r){r.d(n,{l:function(){return C}});var t=r(19065),i=r(54268),o=r(32030),s=r(60652),a=r(11831),l=r(7838),c=r(34595),d=r(89646),p=r(55113),u=r(6466),h=r(12745),x=r(325),m=r(63579),f=r(55419),j=r(86562),g=r(17235),y=r(73362),v=r(89279),S=r(32289),b=function(e){var n=e.repositoryUrl,r=function(e){try{var n,r,i,o=new URL(e);if("github.com"===o.host){var s=o.pathname.split("/",7),a=(0,t.Z)(s,5);n=a[1],r=a[2],i=a[4]}else if("gitlab.com"===o.host){var l=o.pathname.split("/",8),c=(0,t.Z)(l,6);n=c[1],r=c[2],i=c[5]}if(n&&r&&i)return"".concat(n,"/").concat(r,"@").concat(i)}catch(d){return e}return e}(n);return(0,S.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:[(0,S.jsx)(v.JO,{color:l.w.Link,name:"link",style:{display:"inline-block",verticalAlign:"middle"}})," ",r]})},w=r(76336),k={showSeconds:!0,showTimezone:!0},P=function(e){var n,r=e.location,a=e.locationOrError,l=x.useState(!1),c=(0,t.Z)(l,2),d=c[0],p=c[1],u=x.useMemo((function(){return(0,g.je)(r)}),[r]),h=(0,g.Dc)({scope:"location",reloadFn:u}),m=h.reloading,f=h.tryReload;return"LOADING"===a.loadStatus?a.locationOrLoadError?(0,S.jsx)(i.V,{minimal:!0,intent:"primary",children:"Updating..."}):(0,S.jsx)(i.V,{minimal:!0,intent:"primary",children:"Loading..."}):"PythonError"===(null===(n=a.locationOrLoadError)||void 0===n?void 0:n.__typename)?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(o.x,{flex:{alignItems:"center",gap:12},children:[(0,S.jsx)(i.V,{minimal:!0,intent:"danger",children:"Failed"}),(0,S.jsx)(s.Z,{onClick:function(){return p(!0)},children:(0,S.jsx)("span",{style:{fontSize:"14px"},children:"View error"})})]}),(0,S.jsx)(y.p,{location:r,isOpen:d,error:a.locationOrLoadError,reloading:m,onDismiss:function(){return p(!1)},onTryReload:function(){return f()}})]}):(0,S.jsx)(i.V,{minimal:!0,intent:"success",children:"Loaded"})},E=function(e){var n=e.location,r=(0,m.TE)().canReloadRepositoryLocation;return r.enabled?(0,S.jsx)(j.s,{location:n,children:function(e){var n=e.reloading,r=e.tryReload;return(0,S.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,S.jsx)(s.Z,{onClick:function(){return r()},children:"Reload"}),n?(0,S.jsx)(c.$,{purpose:"body-text"}):null]})}}):(0,S.jsx)(a.u,{content:r.disabledReason,children:(0,S.jsx)(s.Z,{color:l.w.Gray400,children:"Reload"})})},C=function(){var e=x.useContext(w.C5),n=e.locationEntries;return e.loading&&!n.length?(0,S.jsxs)(o.x,{flex:{gap:8,alignItems:"center"},padding:{horizontal:24},children:[(0,S.jsx)(c.$,{purpose:"body-text"}),(0,S.jsx)("div",{children:"Loading..."})]}):n.length?(0,S.jsxs)(p.i,{children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{children:"Repository location"}),(0,S.jsx)("th",{children:"Status"}),(0,S.jsx)("th",{colSpan:2,children:"Updated"})]})}),(0,S.jsx)("tbody",{children:n.map((function(e){return(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{maxWidth:"50%"},children:(0,S.jsxs)(u.Z,{direction:"column",spacing:4,children:[(0,S.jsx)("strong",{children:e.name}),(0,S.jsx)("div",{children:e.displayMetadata.map((function(e,n){var r="url"===e.key?"source":e.key,t="url"===e.key?(0,S.jsx)(b,{repositoryUrl:e.value}):e.value;return(0,S.jsx)("div",{children:(0,S.jsxs)(h.YS,{style:{wordBreak:"break-word"},children:["".concat(r,": "),(0,S.jsx)("span",{style:{color:l.w.Gray400},children:t})]})},n)}))})]})}),(0,S.jsx)("td",{children:(0,S.jsx)(P,{location:e.name,locationOrError:e})}),(0,S.jsx)("td",{style:{whiteSpace:"nowrap"},children:(0,S.jsx)(f.E,{timestamp:{unix:e.updatedTimestamp},timeFormat:k})}),(0,S.jsx)("td",{style:{width:"180px"},children:(0,S.jsx)(E,{location:e.name})})]},e.name)}))})]}):(0,S.jsx)(o.x,{padding:{vertical:32},children:(0,S.jsx)(d.t,{icon:"folder",title:"No repository locations",description:"When you add a repository location to this workspace, it will appear here."})})}},7861:function(e,n,r){r.r(n),r.d(n,{WorkspaceRoot:function(){return di},default:function(){return pi}});var t,i,o,s,a,l=r(32030),c=r(89646),d=r(87067),p=r(325),u=r(27601),h=r(81745),x=r(30804),m=r(31112),f=r(12745),j=r(54268),g=r(31269),y=r(78093),v=r(19339),S=r(82348),b=r(30057),w=r(96294),k=r(37286),P=r(78072),E=r(25582),C=r(1223),N=r(25907),R=r(77171),O=r(32289),_=function(e){var n=e.repoAddress,r=e.tab;(0,y.Px)();var t=(0,u.UO)(),i=t.groupName,o=t[0],s=(0,u.k6)();(0,S.j)("Asset Group: ".concat(i));var a=(0,E.$U)(n,"/asset-groups/".concat(i)),c=p.useMemo((function(){return{groupName:i,repositoryLocationName:n.location,repositoryName:n.name}}),[i,n]),d=p.useCallback((function(e,n){s[n]("".concat(a,"/").concat((0,w.gY)(e)))}),[a,s]),h=p.useCallback((function(e){e.groupName&&e.repoAddress?s.replace((0,E.$U)(e.repoAddress,"/asset-groups/".concat(e.groupName,"/lineage/").concat(e.assetKey.path.map(encodeURIComponent).join("/")))):s.push((0,R.p)(e.assetKey,{view:"definition"}))}),[s]);return(0,O.jsxs)(x.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,O.jsx)(m.m,{title:(0,O.jsx)(f.X6,{children:i}),right:(0,O.jsx)("div",{style:{marginBottom:-8},children:(0,O.jsx)(P.i,{label:"Reload definitions"})}),tags:(0,O.jsxs)(j.V,{icon:"asset_group",children:["Asset Group in ",(0,O.jsx)(b.b,{repoAddress:n})]}),tabs:(0,O.jsxs)(l.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},margin:{right:4},children:[(0,O.jsxs)(g.mQ,{selectedTabId:r,children:[(0,O.jsx)(k.f,{id:"lineage",title:"Lineage",to:"".concat(a,"/lineage")}),(0,O.jsx)(k.f,{id:"list",title:"List",to:"".concat(a,"/list")})]}),(0,O.jsx)(C.w,{})]})}),"lineage"===r?(0,O.jsx)(v.OK,{fetchOptions:{groupSelector:c},options:{preferAssetRendering:!0,explodeComposites:!0},explorerPath:(0,w.p3)(o||"lineage/"),onChangeExplorerPath:d,onNavigateToForeignNode:h}):(0,O.jsx)(N.f,{groupSelector:c,prefixPath:o.split("/").map(decodeURIComponent).filter(Boolean),setPrefixPath:function(e){return s.push("".concat(a,"/list/").concat(e.map(encodeURIComponent).join("/")))}})]})},A=r(65173),I=r(99500),F=r(19065),Z=r(73701),T=r(3159),$=r(88796),L=r(63579),U=r(12436),D=r(23196),G=r(76336),z=r(44969),H=r(6364),q=function(e){var n=e.repoAddress,r=(0,L.TE)().canLaunchPipelineExecution,t=(0,u.UO)(),i=t.repoPath,o=t.pipelinePath,s=t.runId;return r.enabled?(0,O.jsx)(J,{pipelinePath:o,repoAddress:n,runId:s}):(0,O.jsx)(u.l_,{to:"/workspace/".concat(i,"/pipeline_or_job/").concat(o)})},J=function(e){var n=e.pipelinePath,r=e.repoAddress,t=e.runId,i=(0,w.p3)(n),o=i.pipelineName,s=(0,G.Ux)(r),a=(0,G.E8)(s,o);(0,D.b)(i,a);var l=(0,$.aC)(r,o),c=(0,F.Z)(l,2),d=c[0],h=c[1],x=(0,Z.a)(W,{variables:{runId:t}}),m=x.data,f=x.loading,j=null===m||void 0===m?void 0:m.runOrError,g="Run"===(null===j||void 0===j?void 0:j.__typename)?j:null;return p.useEffect((function(){if(g){var e=g.runConfigYaml,n=g.mode,r=g.solidSelection;if(e||n||r){var t={name:"From run ".concat(g.id.slice(0,8))};"string"===typeof e&&(t.runConfigYaml=e),"string"===typeof n&&(t.mode=n),r instanceof Array&&r.length>0?t.solidSelection=r:"string"===typeof r&&r&&(t.solidSelection=[r]),h((0,$.f0)(d,t))}}}),[g,d,h]),f?(0,O.jsx)(H.m,{}):j&&"RunNotFoundError"!==j.__typename?"PythonError"===j.__typename?(0,O.jsx)(z.U,{icon:"error",title:"Python error",description:j.message}):(0,O.jsx)(u.l_,{to:{pathname:(0,E.$U)(r,"/".concat(a?"jobs":"pipelines","/").concat(o,"/playground"))}}):(0,O.jsx)(z.U,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})},W=(0,T.Ps)(t||(t=(0,I.Z)(["\n  query ConfigForRunQuery($runId: ID!) {\n    runOrError(runId: $runId) {\n      ... on Run {\n        id\n        mode\n        runConfigYaml\n        solidSelection\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ","\n"])),U.Bq),B=r(41332),K=r.n(B),Q=function(e){var n=e.repoAddress,r=(0,L.TE)().canLaunchPipelineExecution,t=(0,u.UO)(),i=t.repoPath,o=t.pipelinePath;return r.enabled?(0,O.jsx)(V,{pipelinePath:o,repoAddress:n}):(0,O.jsx)(u.l_,{to:"/workspace/".concat(i,"/pipeline_or_job/").concat(o)})},V=function(e){var n=e.pipelinePath,r=e.repoAddress,t=(0,w.p3)(n),i=t.pipelineName,o=(0,G.Ux)(r),s=(0,G.E8)(o,i);(0,D.b)(t,s);var a=(0,$.aC)(r,i),l=(0,F.Z)(a,2),c=l[0],d=l[1],h=K().parse(window.location.search,{ignoreQueryPrefix:!0});return p.useEffect((function(){if(h.config||h.mode||h.solidSelection){var e={};"string"===typeof h.config&&(e.runConfigYaml=h.config),"string"===typeof h.mode&&(e.mode=h.mode),h.solidSelection instanceof Array&&h.solidSelection.length>0?e.solidSelection=h.solidSelection:"string"===typeof h.solidSelection&&h.solidSelection&&(e.solidSelection=[h.solidSelection]),"string"===typeof h.solidSelectionQuery&&(e.solidSelectionQuery=h.solidSelectionQuery),d((0,$.f0)(c,e))}})),(0,O.jsx)(u.l_,{to:{pathname:(0,E.$U)(r,"/".concat(s?"jobs":"pipelines","/").concat(i,"/playground"))}})},M=r(95764),X=r(11831),Y=r(60652),ee=r(7838),ne=r(8358),re=r(55113),te=r(75453),ie=r(58891),oe=r.n(ie),se=r(74549),ae=r(39061),le=r(28064),ce=r(55752),de=r(9315),pe=r(86875),ue=r(33902),he=r(57753),xe=r(19102),me=r(57876),fe=r(59549),je=r(68156),ge=r(5484),ye={showSeconds:!0,showTimezone:!1},ve=function(e){var n=e.pipelineName,r=e.repoAddress,t=(0,Z.a)(Se,{variables:{runsFilter:{pipelineName:n,tags:[{key:le.H.RepositoryLabelTag,value:(0,ue.l)(r)}]}},notifyOnNetworkStatusChange:!0});(0,xe.C4)(t,xe.dT);var i=p.useMemo((function(){var e,n=null===(e=t.data)||void 0===e?void 0:e.pipelineRunsOrError;return n&&"Runs"===n.__typename&&n.results[0]||null}),[t]);if(!i)return null;var o={start:i.startTime,end:i.endTime,status:i.status};return(0,O.jsx)(j.V,{intent:function(){switch(i.status){case ge.VO.SUCCESS:return"success";case ge.VO.CANCELED:case ge.VO.CANCELING:case ge.VO.FAILURE:return"danger";default:return"none"}}(),children:(0,O.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,O.jsx)(fe.K9,{status:i.status,size:10}),"Latest run:",o?(0,O.jsx)(X.u,{placement:"bottom",content:(0,O.jsx)(he.k6,{children:(0,O.jsxs)("tbody",{children:[(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{style:{color:ee.w.Gray300},children:(0,O.jsx)(l.x,{padding:{right:16},children:"Started"})}),(0,O.jsx)("td",{children:o.start?(0,O.jsx)(je.v,{timestamp:o.start,timeFormat:ye}):(0,me.Z0)(o.status)})]}),(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{style:{color:ee.w.Gray300},children:"Ended"}),(0,O.jsx)("td",{children:o.end?(0,O.jsx)(je.v,{timestamp:o.end,timeFormat:ye}):(0,me.Z0)(o.status)})]})]})}),children:(0,O.jsx)(se.rU,{to:"/instance/runs/".concat(i.id),children:(0,O.jsx)(ce.Zr,{run:i})})}):null]})})},Se=(0,T.Ps)(i||(i=(0,I.Z)(["\n  query LatestRunTagQuery($runsFilter: RunsFilter) {\n    pipelineRunsOrError(filter: $runsFilter, limit: 1) {\n      ... on PipelineRuns {\n        results {\n          id\n          status\n          ...RunTimeFragment\n        }\n      }\n    }\n  }\n  ","\n"])),ce.$X),be=r(86476);var we=function(e){var n=e.metadata,r=e.pipelineName,t=e.repoAddress;return(0,O.jsxs)(O.Fragment,{children:[n.job?(0,O.jsx)(ke,{job:n.job,repoAddress:t}):null,(0,O.jsx)(ve,{pipelineName:r,repoAddress:t}),n.runsForAssetScan?(0,O.jsx)(Ee,{relatedAssets:Pe(n)}):null]})},ke=function(e){var n=e.job,r=e.repoAddress,t=p.useMemo((function(){return"Pipeline"===(null===n||void 0===n?void 0:n.__typename)&&n.schedules.length?n.schedules:[]}),[n]),i=p.useMemo((function(){return"Pipeline"===(null===n||void 0===n?void 0:n.__typename)&&n.sensors.length?n.sensors:[]}),[n]);return(0,O.jsx)(be.I,{schedules:t,sensors:i,repoAddress:r})};function Pe(e){return e.assetNodes?e.assetNodes.map((function(e){return(0,ae.Je)(e.assetKey)})):oe()(e.runsForAssetScan.flatMap((function(e){return e.assets.map((function(e){return(0,ae.Je)(e.key)}))})))}var Ee=function(e){var n=e.relatedAssets,r=p.useState(!1),t=(0,F.Z)(r,2),i=t[0],o=t[1];if(0===n.length)return null;if(1===n.length){var s=n[0];return(0,O.jsxs)(j.V,{icon:"asset",children:["Asset: ",(0,O.jsx)(se.rU,{to:"/instance/assets/".concat(s),children:s})]})}return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(j.V,{icon:"asset",children:(0,O.jsx)(Y.Z,{color:ee.w.Link,onClick:function(){return o(!0)},children:"View ".concat(n.length," assets")})}),(0,O.jsxs)(ne.Vq,{title:"Related assets",canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:i,onClose:function(){return o(!1)},style:{maxWidth:"80%",minWidth:"500px",width:"auto"},children:[(0,O.jsx)(l.x,{padding:{bottom:12},children:(0,O.jsx)(re.i,{children:(0,O.jsx)("tbody",{children:n.map((function(e){return(0,O.jsx)("tr",{children:(0,O.jsx)("td",{children:(0,O.jsx)(se.rU,{to:"/instance/assets/".concat(e),style:{wordBreak:"break-word"},children:e},e)})},e)}))})})}),(0,O.jsx)(ne.cN,{children:(0,O.jsx)(te.zx,{intent:"primary",onClick:function(){return o(!1)},children:"OK"})})]})]})},Ce=(0,T.Ps)(o||(o=(0,I.Z)(["\n  fragment RunMetadataFragment on PipelineRun {\n    id\n    status\n    assets {\n      id\n      key {\n        path\n      }\n    }\n    ...RunTimeFragment\n  }\n  ","\n"])),ce.$X),Ne=(0,T.Ps)(s||(s=(0,I.Z)(["\n  fragment JobMetadataFragment on Pipeline {\n    id\n    isJob\n    name\n    schedules {\n      id\n      mode\n      ...ScheduleSwitchFragment\n    }\n    sensors {\n      id\n      targets {\n        pipelineName\n        mode\n      }\n      ...SensorSwitchFragment\n    }\n  }\n  ","\n  ","\n"])),de.J,pe.U),Re=(0,T.Ps)(a||(a=(0,I.Z)(["\n  query JobMetadataQuery($params: PipelineSelector!, $runsFilter: RunsFilter!) {\n    pipelineOrError(params: $params) {\n      ... on Pipeline {\n        id\n        ...JobMetadataFragment\n      }\n    }\n    assetNodes(pipeline: $params) {\n      id\n      assetKey {\n        path\n      }\n    }\n    pipelineRunsOrError(filter: $runsFilter, limit: 5) {\n      ... on PipelineRuns {\n        results {\n          id\n          ...RunMetadataFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),Ne,Ce),Oe={overview:{title:"Overview",pathComponent:""},playground:{title:"Launchpad",pathComponent:"playground",getPermissionsResult:function(e){return e.canLaunchPipelineExecution}},runs:{title:"Runs",pathComponent:"runs"},partitions:{title:"Partitions",pathComponent:"partitions"}},_e=["overview","playground","runs","partitions"];var Ae,Ie=function(e){var n=e.repoAddress,r=(0,L.TE)(),t=(0,G.Ux)(n),i=(0,u.$B)(["/workspace/:repoPath/pipelines/:selector/:tab?","/workspace/:repoPath/jobs/:selector/:tab?","/workspace/:repoPath/pipeline_or_job/:selector/:tab?"]),o=function(e){var n=Object.keys(Oe),r=n.find((function(n){return Oe[n].pathComponent===e}))||n.find((function(e){return""===Oe[e].pathComponent}));return Oe[r]}(i.params.tab),s=(0,w.p3)(i.params.selector),a=s.pipelineName,c=s.snapshotId,d=(0,G.E8)(t,a),h=((null===t||void 0===t?void 0:t.repository.partitionSets)||[]).some((function(e){return e.pipelineName===a})),x=function(e,n){var r=(0,Z.a)(Re,{variables:{runsFilter:{pipelineName:n,tags:[{key:le.H.RepositoryLabelTag,value:(0,ue.l)(e)}]},params:{pipelineName:n,repositoryName:e.name,repositoryLocationName:e.location}}}).data;return p.useMemo((function(){return{assetNodes:(null===r||void 0===r?void 0:r.assetNodes)||null,job:null!==r&&void 0!==r&&r.pipelineOrError&&"Pipeline"===r.pipelineOrError.__typename?r.pipelineOrError:null,runsForAssetScan:null!==r&&void 0!==r&&r.pipelineRunsOrError&&"Runs"===r.pipelineRunsOrError.__typename?r.pipelineRunsOrError.results:[]}}),[r])}(n,a),y=!x.assetNodes||0===x.assetNodes.length,v=_e.filter((function(e){return(y||"playground"!==e)&&(h||"partitions"!==e)})).map(function(e,n,r){var t=(0,w.gY)((0,M.Z)((0,M.Z)({},r),{},{opNames:[]}));return function(r){var i=Oe[r];return{text:i.title,href:(0,E.$U)(e,"/".concat(n?"jobs":"pipelines","/").concat(t).concat(i.pathComponent)),getPermissionsResult:i.getPermissionsResult}}}(n,d,s));return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(m.m,{title:(0,O.jsx)(f.X6,{children:a}),tags:(0,O.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8,wrap:"wrap"},children:[(0,O.jsxs)(j.V,{icon:"job",children:[d?"Job in ":"Pipeline in ",(0,O.jsx)(b.b,{repoAddress:n})]}),c?null:(0,O.jsx)(we,{pipelineName:a,repoAddress:n,metadata:x})]}),tabs:(0,O.jsx)(g.mQ,{size:"large",selectedTabId:o.title,children:v.map((function(e){var n=e.href,t=e.text,i=e.getPermissionsResult,o=null;i&&(o=i(r));var s=!(!o||o.enabled),a=o&&s?(0,O.jsx)(X.u,{content:o.disabledReason,placement:"top",children:t}):t;return(0,O.jsx)(k.f,{id:t,title:a,disabled:s,to:n},t)}))})})})},Fe=r(50741),Ze=r(26306),Te=r(59019),$e=r(89279),Le=r(47387),Ue=r(36172),De=r(88291),Ge=r(2789),ze=r(85358),He=r(95550),qe=r.n(He),Je=r(49148),We=r(34595),Be=r(50346),Ke=r(6466),Qe=r(60736),Ve=r(14156),Me=r(13065),Xe=r(25496),Ye=r(47072),en=r(39151),nn=r(22013),rn=r(36523),tn=r(33547),on=r(27218),sn=r(2112),an=r(65164),ln=r(77221),cn=r(54920),dn="DefaultRunLauncher",pn=function(e){var n,r=e.partitionSetName,t=e.onLaunch,i=e.onCancel,o=e.onSubmit,s=e.repoAddress,a=e.partitionData,d=e.pipelineName,h=e.partitionNames,x=(0,u.k6)(),m=p.useState(Object.keys(a).filter((function(e){return!a[e]||a[e]===ge.VO.FAILURE}))),j=(0,F.Z)(m,2),g=j[0],y=j[1],v=p.useState(!1),S=(0,F.Z)(v,2),b=S[0],w=S[1],k=p.useState([]),P=(0,F.Z)(k,2),E=P[0],C=P[1],N=p.useState(""),R=(0,F.Z)(N,2),_=R[0],A=R[1],I=p.useState({reexecute:!1,fromFailure:!1}),T=(0,F.Z)(I,2),$=T[0],L=T[1],U=(0,Ze.$)(s),D=(0,Z.a)(hn,{variables:{pipelineSelector:(0,M.Z)((0,M.Z)({},U),{},{pipelineName:d})},fetchPolicy:"network-only"}).data,G=p.useRef(!0);p.useEffect((function(){return G.current=!0,function(){G.current=!1}}),[t]);if(!D)return(0,O.jsx)(l.x,{margin:{vertical:32},flex:{justifyContent:"center"},children:(0,O.jsx)(We.$,{purpose:"section"})});if("PipelineSnapshot"!==D.pipelineSnapshotOrError.__typename)return(0,O.jsx)(l.x,{margin:20,children:(0,O.jsx)(c.t,{icon:"error",title:"Could not fetch job details"})});var z=D.pipelineSnapshotOrError,H=D.instance,q=(0,on.i)(z.solidHandles).map((function(e){return e.solid})),J=(0,Xe.V)(q,_),W=(0,en.tc)({nodes:J.all,mode:Ye.hS.FLAT}).boxes.map((function(e){return{x:e.x,name:e.node.name}})),B=(null===(n=H.runLauncher)||void 0===n?void 0:n.name)===dn,K=function(e){return a[e]===ge.VO.FAILURE||a[e]===ge.VO.CANCELED||a[e]===ge.VO.CANCELING},Q=h.filter(K),V=h.filter((function(e){return!a[e]})),Y=h.filter((function(e){return a[e]===ge.VO.SUCCESS})),re=function(e){var n=new Set(e);y(h.filter((function(e){return n.has(e)}))),$.fromFailure&&e.filter((function(e){return!K(e)})).length>0&&L((0,M.Z)((0,M.Z)({},$),{},{fromFailure:!1}))};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ne.a7,{children:(0,O.jsxs)(l.x,{flex:{direction:"column",gap:32},children:[(0,O.jsxs)(Pn,{title:"Partitions",children:[(0,O.jsx)(l.x,{children:"Select the set of partitions to include in the backfill. You can specify a range using the text selector, or by dragging a range selection in the status indicator."}),(0,O.jsxs)(l.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,O.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[Y.length?(0,O.jsx)(Be.X,{style:{marginBottom:0,marginLeft:10},checked:Y.every((function(e){return g.includes(e)})),label:"Succeeded",onChange:function(e){e.target.checked?re(Array.from(new Set(g.concat(Y)))):re(g.filter((function(e){return!Y.includes(e)})))}}):null,Q.length?(0,O.jsx)(Be.X,{style:{marginBottom:0,marginLeft:10},checked:Q.every((function(e){return g.includes(e)})),label:"Failed",onChange:function(e){e.target.checked?re(Array.from(new Set(g.concat(Q)))):re(g.filter((function(e){return!Q.includes(e)})))}}):null,V.length?(0,O.jsx)(Be.X,{style:{marginBottom:0,marginLeft:10},checked:V.every((function(e){return g.includes(e)})),label:"Missing",onChange:function(e){e.target.checked?re(Array.from(new Set(g.concat(V)))):re(g.filter((function(e){return!V.includes(e)})))}}):null]}),(0,O.jsx)(te.zx,{icon:(0,O.jsx)($e.JO,{name:"close"}),disabled:!h.length,style:{marginBottom:0,marginLeft:10},small:!0,onClick:function(){re([])},children:"Clear selection"})]}),(0,O.jsx)(ln.XI,{value:g,partitionNames:h,onChange:re}),(0,O.jsx)(l.x,{margin:{top:8},children:(0,O.jsx)(cn.b,{partitionNames:h,partitionData:a,selected:g,onSelect:function(e){re(e)}})})]}),Q.length?(0,O.jsx)(Pn,{title:"Reexecution",children:(0,O.jsx)(Be.X,{checked:$.fromFailure,disabled:!g.every(K),onChange:function(){$.fromFailure||re(Q),A(""),L((0,M.Z)((0,M.Z)({},$),{},{reexecute:!$.reexecute,fromFailure:!$.fromFailure}))},label:(0,O.jsxs)(l.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,O.jsx)(l.x,{margin:{right:4},children:"Re-execute from failures"}),(0,O.jsx)(X.u,{placement:"top",content:"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed. Only applies for selections of failed partitions.",children:(0,O.jsx)($e.JO,{name:"info",color:ee.w.Gray500})})]})})}):null,(0,O.jsx)(Pn,{title:(0,O.jsxs)(l.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,O.jsx)(l.x,{margin:{right:4},children:"Step subset"}),(0,O.jsx)(X.u,{placement:"top",content:"Applies a step-selection to each run for the requested partitions.",children:(0,O.jsx)($e.JO,{name:"info",color:ee.w.Gray500})})]}),children:(0,O.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,O.jsx)(an.j,{disabled:$.fromFailure,width:520,items:q,value:_,placeholder:"Type a step subset",onChange:A,autoApplyChanges:!0}),_?(0,O.jsxs)("div",{style:{color:ee.w.Gray500},children:[W.length," step",1===W.length?"":"s"," selected"]}):null]})}),(0,O.jsxs)(Pn,{title:"Tags",children:[(0,O.jsx)(tn.U,{tagsFromSession:E,onChange:C,open:b,onRequestClose:function(){return w(!1)}}),E.length?(0,O.jsx)("div",{style:{border:"1px solid ".concat(ee.w.Gray300),borderRadius:8,padding:3},children:(0,O.jsx)(tn.x,{tagsFromSession:E,onRequestEdit:function(){return w(!0)}})}):(0,O.jsx)("div",{children:(0,O.jsx)(te.zx,{onClick:function(){return w(!0)},children:"Add tags to backfill runs"})})]}),H.daemonHealth.daemonStatus.healthy?null:(0,O.jsx)(wn,{}),B&&!H.runQueuingSupported?(0,O.jsx)(kn,{}):null]})}),(0,O.jsxs)(ne.cN,{children:[(0,O.jsx)(te.zx,{intent:"none",onClick:i,children:"Cancel"}),(0,O.jsx)(un,{partitionNames:g,partitionSetName:r,reexecutionSteps:!$.fromFailure&&J.all.length<q.length?W.map((function(e){return e.name})):void 0,fromFailure:$.fromFailure,tags:E,onSubmit:o,onSuccess:function(e){!function(e,n){Me.L.show({intent:"success",message:(0,O.jsxs)("div",{children:["Created backfill ",(0,O.jsx)(f.fv,{children:n})]}),action:{text:"View",onClick:function(){return e.push("/instance/backfills")}}})}(x,e),null===t||void 0===t||t(e,_)},onError:function(e){!function(e){Me.L.show({message:xn(e),icon:"error",intent:"danger"})}(e)},repoAddress:s})]})]})},un=function(e){var n=e.partitionSetName,r=e.partitionNames,t=e.reexecutionSteps,i=e.fromFailure,o=e.tags,s=e.onSuccess,a=e.onError,l=e.onSubmit,c=e.repoAddress,d=(0,Ze.$)(c),u=p.useRef(!0),h=(0,Je.D)(nn.f),x=(0,F.Z)(h,2),m=x[0],f=x[1].loading;p.useEffect((function(){return u.current=!0,function(){u.current=!1}}),[s]);var j=function(){var e=(0,ze.Z)(qe().mark((function e(){var c,p;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,m({variables:{backfillParams:{selector:{partitionSetName:n,repositorySelector:d},partitionNames:r,reexecutionSteps:t,fromFailure:i,tags:o}}});case 3:if(c=e.sent,p=c.data,u.current){e.next=7;break}return e.abrupt("return");case 7:p&&"LaunchBackfillSuccess"===p.launchPartitionBackfill.__typename?null===s||void 0===s||s(p.launchPartitionBackfill.backfillId):null===a||void 0===a||a(p);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=r.length,y=null===t||void 0===t?void 0:t.length,v=[f?"Submitting ".concat(g," ").concat(1===g?"run":"runs","\u2026"):g?"Submit ".concat(g," ").concat(1===g?"run":"runs"):"Select partitions to submit",!f&&y?"(".concat(y," selected ").concat(1===y?"step":"steps",")"):""].join(" ");return(0,O.jsx)(rn.C,{runCount:g,config:{title:v,icon:"open_in_new",disabled:!g||f,onClick:j}})},hn=(0,T.Ps)(Ae||(Ae=(0,I.Z)(['\n  query BackfillSelectorQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          ...GraphExplorerSolidHandleFragment\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    instance {\n      runLauncher {\n        name\n      }\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "BACKFILL") {\n          id\n          healthy\n        }\n      }\n      runQueuingSupported\n    }\n  }\n  ',"\n"])),sn.Q);function xn(e){var n=null===e||void 0===e?void 0:e.launchPartitionBackfill,r=(0,O.jsx)(O.Fragment,{});return"PythonError"===(null===n||void 0===n?void 0:n.__typename)||"PartitionSetNotFoundError"===(null===n||void 0===n?void 0:n.__typename)?r=(0,O.jsx)(U.T9,{error:n}):"InvalidStepError"===(null===n||void 0===n?void 0:n.__typename)?r=(0,O.jsx)("div",{children:"Invalid step: ".concat(n.invalidStepKey)}):"InvalidOutputError"===(null===n||void 0===n?void 0:n.__typename)?r=(0,O.jsx)("div",{children:"Invalid output: ".concat(n.invalidOutputName," for ").concat(n.stepKey)}):n&&"errors"in n&&(r=(0,O.jsx)(O.Fragment,{children:n.errors.map((function(e,n){return(0,O.jsx)(U.T9,{error:e},n)}))})),(0,O.jsxs)(Ke.Z,{direction:"column",spacing:4,children:[(0,O.jsx)("div",{children:"An unexpected error occurred. This backfill was not launched."}),r?(0,O.jsx)(Y.Z,{color:ee.w.White,underline:"always",onClick:function(){(0,Ve._)({body:r})},children:"View error"}):null]})}var mn,fn,jn,gn,yn,vn,Sn,bn,wn=function(){return(0,O.jsx)(Qe.b,{intent:"warning",title:"The backfill daemon is not running.",description:(0,O.jsxs)("div",{children:["See the"," ",(0,O.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})},kn=function(){return(0,O.jsx)(Qe.b,{intent:"warning",title:(0,O.jsxs)("div",{children:["Using the default run launcher ",(0,O.jsx)("code",{children:dn})," for launching backfills without a queued run coordinator is not advised."]}),description:(0,O.jsxs)("div",{children:["Check your instance configuration in ",(0,O.jsx)("code",{children:"dagster.yaml"})," to either configure the"," ",(0,O.jsx)("a",{href:"https://docs.dagster.io/deployment/run-coordinator",target:"_blank",rel:"noreferrer",children:"queued run coordinator"})," ","or to configure a run launcher more appropriate for launching a large number of jobs."]})})},Pn=function(e){var n=e.title,r=e.children;return(0,O.jsxs)(l.x,{flex:{direction:"column",gap:8},children:[(0,O.jsx)("strong",{style:{display:"block"},children:n}),(0,O.jsx)(l.x,{flex:{direction:"column",gap:8},padding:{top:16},border:{width:1,color:ee.w.KeylineGray,side:"top"},children:r})]})},En=r(16798),Cn=r(922),Nn=r(18694),Rn=r(76341),On=function(e){var n=e.partitionNames,r=e.jobDataByPartition,t=e.stepDataByPartition,i=e.title,o=e.yLabel,s=e.isJob,a=e.hiddenStepKeys,l=p.useState((function(){return{}})),c=(0,F.Z)(l,2),d=c[0],u=c[1],h=p.useRef(null),x=p.useCallback((function(e){var n=h.current;if(n){var r=n.scales["x-axis-0"];if(r){var t=e.offsetX,i=e.offsetY;if("click"===e.type&&t<=n.chartArea.right&&t>=n.chartArea.left&&i<=n.chartArea.bottom&&i>=n.chartArea.top&&e.shiftKey){var o=r.getValueForPixel(t),s=n.data.labels[o];u((function(e){return(0,M.Z)((0,M.Z)({},e),{},(0,En.Z)({},s,!e[s]))}))}}}}),[]),m=p.useMemo((function(){return{title:i?{display:!0,text:i}:void 0,animation:!1,scales:o?{y:{id:"y",title:{display:!0,text:o}},x:{id:"x",title:{display:!0,text:i}}}:void 0,plugins:{legend:{display:!1,onClick:function(e,n){}}},onClick:x,maintainAspectRatio:!1}}),[x,i,o]),f=function(){var e=[],i={};return n.forEach((function(n){var o=!!d[n];if(r&&e.push({x:n,y:o?void 0:r[n]}),t){var s=t[n];Object.keys(s||{}).forEach((function(e){null!==a&&void 0!==a&&a.includes(e)||!s[e]||(i[e]=[].concat((0,Te.Z)(i[e]||[]),[{x:n,y:o?void 0:s[e]}]))}))}})),Object.keys(i).forEach((function(e){i[e]=_n(n,i[e])})),{jobData:e,stepData:i}}(),j=f.jobData,g=f.stepData,y=s?"Total job":"Total pipeline",v={labels:n,datasets:[].concat((0,Te.Z)(!r||a&&a.includes(y)?[]:[{label:y,data:j,borderColor:ee.w.Gray500,backgroundColor:"rgba(0,0,0,0)"}]),(0,Te.Z)(Object.keys(g).map((function(e){return{label:e,data:g[e],borderColor:(0,Rn.kU)(e),backgroundColor:"rgba(0,0,0,0)"}}))))};return(0,O.jsx)(An,{children:(0,O.jsx)(Nn.x1,{type:"line",data:function(){return v},height:300,options:m,ref:h})})},_n=function(e,n){var r={};return n.forEach((function(e){r[e.x]=e.y})),e.map((function(e){return{x:e,y:r[e]}}))},An=Cn.ZP.div.withConfig({displayName:"PartitionGraph__PartitionGraphContainer",componentId:"sc-182vuwm-0"})(["display:flex;color:",";padding:24px 12px;text-decoration:none;"],ee.w.Gray700),In=r(97363),Fn=r(73974),Zn=[ge.VO.FAILURE,ge.VO.CANCELED,ge.VO.CANCELING],Tn=function(e){var n=e.partitionSet,r=e.repoAddress,t=(0,Ze.$)(r),i=(0,Z.a)(Dn,{variables:{partitionSetName:n.name,repositorySelector:t}});return(0,O.jsx)(Fe.g,{queryResult:i,children:function(e){var n=e.partitionSetOrError;if("PartitionSet"!==n.__typename||"Partitions"!==n.partitionsOrError.__typename)return null;var t=n.partitionsOrError.results.map((function(e){return e.name}));return(0,O.jsx)($n,{partitionNames:t,partitionSet:n,repoAddress:r})}})},$n=function(e){var n=e.partitionSet,r=e.partitionNames,t=e.repoAddress,i=p.useState(60),o=(0,F.Z)(i,2),s=o[0],a=o[1],c=p.useState(0),d=(0,F.Z)(c,2),u=d[0],h=d[1],x=p.useState(!1),m=(0,F.Z)(x,2),f=m[0],j=m[1],g=p.useState(!1),y=(0,F.Z)(g,2),v=y[0],S=y[1],b=p.useState(!1),w=(0,F.Z)(b,2),k=w[0],P=w[1],E=(0,Ze.$)(t),C=(0,L.TE)().canLaunchPartitionBackfill,N=(0,De.S)(),R=N.viewport,_=N.containerProps,A=p.useState(0),I=(0,F.Z)(A,2),Z=I[0],T=I[1],$=(0,Fn.T)(n.name,r,s,[],n.pipelineName,u,!f);p.useEffect((function(){if(R.width&&!f){var e=Math.ceil((R.width-330)/32)-3;a(e)}}),[R.width,f,a]);var U=f?r.slice(Math.max(0,r.length-1-u-s),r.length-u):r,D={},G={};$.forEach((function(e){if(e.runsLoaded&&0!==e.runs.length){var n=e.runs[e.runs.length-1];G[e.name]={},n.stepStats.forEach((function(n){G[e.name][n.stepKey]=[n.endTime&&n.startTime?n.endTime-n.startTime:void 0]}))}}));var z={};("PartitionStatuses"===n.partitionStatusesOrError.__typename?n.partitionStatusesOrError.results:[]).forEach((function(e){z[e.partitionName]=e.runStatus,U.includes(e.partitionName)&&(D[e.partitionName]=e.runDuration||void 0)}));var H=p.useCallback((function(){return P(!0)}),[]);return(0,O.jsxs)("div",{children:[(0,O.jsx)(ne.Vq,{canEscapeKeyClose:!k,canOutsideClickClose:!k,onClose:function(){return S(!1)},style:{width:800,zIndex:1e3},title:"Launch ".concat(n.pipelineName," backfill"),isOpen:v,children:v&&(0,O.jsx)(pn,{partitionSetName:n.name,partitionNames:r,partitionData:z,pipelineName:n.pipelineName,onCancel:function(){return S(!1)},onLaunch:function(e,n){T(Z+1),S(!1)},onSubmit:H,repoAddress:t})}),(0,O.jsxs)(l.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:{width:1,side:"bottom",color:ee.w.KeylineGray},padding:16,children:[(0,O.jsx)("div",{children:(0,O.jsx)("strong",{children:"Status"})}),(0,O.jsxs)(l.x,{flex:{gap:8},children:[(0,O.jsx)(te.zx,{onClick:function(){return j(!f)},active:v,children:f?"Hide per-step status":"Show per-step status"}),C.enabled?(0,O.jsx)(te.zx,{onClick:function(){return S(!v)},icon:(0,O.jsx)($e.JO,{name:"add_circle"}),active:v,children:"Launch backfill..."}):(0,O.jsx)(X.u,{content:C.disabledReason,children:(0,O.jsx)(te.zx,{icon:(0,O.jsx)($e.JO,{name:"add_circle"}),disabled:!0,children:"Launch backfill..."})})]})]}),(0,O.jsxs)(l.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:{width:1,side:"bottom",color:ee.w.KeylineGray},children:[(0,O.jsx)(Un,{count:r.length,label:"Total partitions"}),(0,O.jsx)(Un,{count:r.filter((function(e){var n=z[e];return n&&Zn.includes(n)})).length,label:"Failed partitions"}),(0,O.jsx)(Un,{count:r.filter((function(e){return!z[e]})).length,label:"Missing partitions"})]}),(0,O.jsxs)(l.x,{margin:16,children:[(0,O.jsx)("div",(0,M.Z)((0,M.Z)({},_),{},{children:(0,O.jsx)(cn.b,{partitionNames:r,partitionData:z,selected:f?U:void 0,selectionWindowSize:s,onClick:function(e){var n=r.length-1,t=r.indexOf(e),i=Math.min(n,Math.max(0,n-t-.5*s));h(i),f||j(!0)},tooltipMessage:"Click to view per-step status"})})),f?(0,O.jsx)(l.x,{margin:{top:16},children:(0,O.jsx)(In.C,{partitionNames:r,partitions:$,pipelineName:n.pipelineName,repoAddress:t,setPageSize:a,offset:u,setOffset:h})}):null]}),(0,O.jsx)(Ue.qn,{children:(0,O.jsx)("strong",{children:"Run duration"})}),(0,O.jsx)(l.x,{margin:24,children:(0,O.jsx)(On,{isJob:!0,title:"Execution Time by Partition",yLabel:"Execution time (secs)",partitionNames:f?U:r,jobDataByPartition:D})}),f?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Ue.qn,{children:(0,O.jsx)("strong",{children:"Step duration"})}),(0,O.jsx)(l.x,{margin:24,children:(0,O.jsx)(On,{isJob:!0,title:"Execution Time by Partition",yLabel:"Execution time (secs)",partitionNames:U,stepDataByPartition:G})})]}):null,(0,O.jsx)(Ue.qn,{children:(0,O.jsx)("strong",{children:"Backfill History"})}),(0,O.jsx)(l.x,{margin:16,children:(0,O.jsx)(Ln,{partitionSet:n,repositorySelector:E,partitionNames:r,refetchCounter:Z})})]})},Ln=function(e){var n=e.partitionSet,r=e.partitionNames,t=e.repositorySelector,i=e.refetchCounter,o=p.useState((function(){return[]})),s=(0,F.Z)(o,2),a=s[0],l=s[1],d=p.useState(),u=(0,F.Z)(d,2),h=u[0],x=u[1],m=(0,Z.a)(Gn,{variables:{partitionSetName:n.name,repositorySelector:t,cursor:h,limit:10},partialRefetch:!0}),f=m.refetch;return p.useEffect((function(){i&&f()}),[f,i]),(0,O.jsx)(Fe.g,{queryResult:m,children:function(e){var n=e.partitionSetOrError,t=n.backfills,i=n.pipelineName;if(!t.length)return(0,O.jsx)(c.t,{title:"No backfills for ".concat(i),icon:"no-results"});var o={hasPrevCursor:!!h,hasNextCursor:t&&10===t.length,popCursor:function(){var e=(0,Te.Z)(a);x(e.pop()),l(e)},advanceCursor:function(){h&&l((function(e){return[].concat((0,Te.Z)(e),[h])}));var e=t&&t[t.length-1].backfillId;e&&x(e)},reset:function(){l([]),x(void 0)}};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Ge.G,{backfills:t,refetch:f,showPartitionSet:!1,allPartitions:r}),(0,O.jsx)(Le.b$,(0,M.Z)({},o))]})}})},Un=function(e){var n=e.count,r=e.label;return(0,O.jsxs)("div",{style:{flex:1,borderLeft:"1px solid ".concat(ee.w.KeylineGray),padding:16},children:[(0,O.jsx)("div",{style:{fontSize:18,marginBottom:4},children:(0,O.jsx)("strong",{children:n})}),(0,O.jsx)("div",{children:r})]})},Dn=(0,T.Ps)(mn||(mn=(0,I.Z)(["\n  query PartitionsStatusQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        name\n        pipelineName\n        partitionsOrError {\n          ... on Partitions {\n            results {\n              name\n            }\n          }\n        }\n        partitionStatusesOrError {\n          __typename\n          ... on PartitionStatuses {\n            results {\n              id\n              partitionName\n              runStatus\n              runDuration\n            }\n          }\n          ...PythonErrorFragment\n        }\n      }\n    }\n  }\n\n  ","\n"])),U.Bq),Gn=(0,T.Ps)(fn||(fn=(0,I.Z)(["\n  query JobBackfillsQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n    $cursor: String\n    $limit: Int\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        pipelineName\n        backfills(cursor: $cursor, limit: $limit) {\n          ...BackfillTableFragment\n        }\n      }\n    }\n  }\n  ","\n"])),Ge.b),zn=function(e){var n=e.repoAddress,r=(0,u.UO)(),t=r.pipelinePath,i=(0,w.p3)(t),o=i.pipelineName,s=(0,G.Ux)(n),a=(0,G.E8)(s,o);(0,D.b)(i,a),(0,w.Bj)(r);var d=(0,Ze.$)(n),p=(0,Z.a)(Hn,{variables:{repositorySelector:d,pipelineName:o},fetchPolicy:"network-only"});return(0,O.jsx)(Fe.g,{queryResult:p,children:function(e){var r=e.partitionSetsOrError;return"PartitionSets"!==r.__typename?(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"error",title:"Partitions",description:r.message})}):r.results.length?(0,O.jsx)(Tn,{partitionSet:r.results[0],repoAddress:n}):(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"error",title:"Partitions",description:(0,O.jsxs)("p",{children:["There are no partition sets defined for ",a?"job":"pipeline"," ",(0,O.jsx)("code",{children:o}),"."]})})})}})},Hn=(0,T.Ps)(jn||(jn=(0,I.Z)(["\n  query PipelinePartitionsRootQuery(\n    $pipelineName: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    partitionSetsOrError(pipelineName: $pipelineName, repositorySelector: $repositorySelector) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n      ... on PartitionSets {\n        results {\n          id\n          mode\n          name\n        }\n      }\n    }\n  }\n\n  ","\n"])),U.Bq),qn=function(e){var n=e.repoAddress,r=(0,u.TH)(),t=(0,u.UO)().pipelinePath,i=(0,w.p3)(t).pipelineName,o=(0,G.Ux)(n),s=(0,G.E8)(o,i),a=r.pathname,l=r.search,c=a.replace("/pipeline_or_job/",s?"/jobs/":"/pipelines/");return(0,O.jsx)(u.l_,{to:"".concat(c).concat(l)})},Jn=r(87535),Wn=function(e){(0,y.Px)();var n=e.repoAddress,r=(0,u.k6)(),t=(0,u.TH)(),i=(0,u.UO)(),o=(0,w.p3)(i[0]),s=(0,G.Ux)(n),a=(0,G.E8)(s,o.pipelineName);(0,D.b)(o,a),(0,w.Bj)({pipelinePath:(0,w.gY)(o)});var l=p.useCallback((function(e,i){r[i]({search:t.search,pathname:(0,E.$U)(n,"/".concat(a?"jobs":"pipelines","/").concat((0,w.gY)(e)))})}),[r,t.search,n,a]),c=p.useCallback((function(e){e.jobName&&e.opNames.length&&e.repoAddress?r.replace({search:t.search,pathname:(0,E.$U)(e.repoAddress,"/jobs/".concat((0,w.gY)((0,M.Z)((0,M.Z)({},o),{},{opNames:[(0,ae.Je)(e.assetKey)],opsQuery:"",pipelineName:e.jobName}))))}):r.push((0,R.p)(e.assetKey,{view:"definition"}))}),[o,r,t.search]);return(0,O.jsx)(Jn.N9,{repoAddress:n,explorerPath:o,onChangeExplorerPath:l,onNavigateToForeignNode:c})},Bn=r(33247),Kn=function(e){var n=e.repoAddress;return(0,O.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,O.jsx)(Ie,{repoAddress:n}),(0,O.jsxs)(u.rs,{children:[(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/pipeline_or_job/:pipelinePath/(/?.*)",children:(0,O.jsx)(qn,{repoAddress:n})}),(0,O.jsx)(u.AW,{path:["/workspace/:repoPath/pipelines/:pipelinePath/playground/setup","/workspace/:repoPath/jobs/:pipelinePath/playground/setup"],children:(0,O.jsx)(Q,{repoAddress:n})}),(0,O.jsx)(u.AW,{path:["/workspace/:repoPath/pipelines/:pipelinePath/playground/setup-from-run/:runId","/workspace/:repoPath/jobs/:pipelinePath/playground/setup-from-run/:runId"],children:(0,O.jsx)(q,{repoAddress:n})}),(0,O.jsx)(u.AW,{path:["/workspace/:repoPath/pipelines/:pipelinePath/playground","/workspace/:repoPath/jobs/:pipelinePath/playground"],children:(0,O.jsx)(A.$,{repoAddress:n})}),(0,O.jsx)(u.AW,{path:["/workspace/:repoPath/pipelines/:pipelinePath/runs/:runId","/workspace/:repoPath/jobs/:pipelinePath/runs/:runId"],render:function(e){return(0,O.jsx)(u.l_,{to:"/instance/runs/".concat(e.match.params.runId)})}}),(0,O.jsx)(u.AW,{path:["/workspace/:repoPath/pipelines/:pipelinePath/runs","/workspace/:repoPath/jobs/:pipelinePath/runs"],children:(0,O.jsx)(Bn.G,{repoAddress:n})}),(0,O.jsx)(u.AW,{path:["/workspace/:repoPath/pipelines/:pipelinePath/partitions","/workspace/:repoPath/jobs/:pipelinePath/partitions"],children:(0,O.jsx)(zn,{repoAddress:n})}),(0,O.jsx)(u.AW,{path:["/workspace/:repoPath/pipelines/:pipelinePath/overview","/workspace/:repoPath/jobs/:pipelinePath/overview"],render:function(e){return(0,O.jsx)(u.l_,{to:"/workspace/".concat(e.match.url.replace(/\/overview$/i,""))})}}),(0,O.jsx)(u.AW,{path:["/workspace/:repoPath/pipelines/(/?.*)","/workspace/:repoPath/jobs/(/?.*)"],children:(0,O.jsx)(Wn,{repoAddress:n})})]})]})},Qn=r(78042),Vn=(r(45436),r(8546)),Mn=r(94067),Xn=r(44115),Yn=r(9429),er=r(44198),nr=r(77892),rr=r(62997),tr=r(45352),ir=(gn={},(0,En.Z)(gn,ge.iz.SUCCESS,ee.w.Blue500),(0,En.Z)(gn,ge.iz.FAILURE,ee.w.Red500),(0,En.Z)(gn,ge.iz.STARTED,ee.w.Gray400),(0,En.Z)(gn,ge.iz.SKIPPED,ee.w.Yellow500),gn),or=function(e){var n=e.ticks,r=e.nextTick,t=e.onHoverTick,i=e.onSelectTick,o=p.useState(Date.now()),s=(0,F.Z)(o,2),a=s[0],l=s[1],c=p.useState(Date.now()),d=(0,F.Z)(c,2),u=d[0],h=d[1],x=p.useState(!1),m=(0,F.Z)(x,2),f=m[0],j=m[1];p.useEffect((function(){var e=setInterval((function(){!f&&l(Date.now())}),100);return function(){return clearInterval(e)}})),p.useEffect((function(){f||r&&!(a<1e3*r.timestamp)||h(a)}),[f,r,a]);var g=r&&1e3*r.timestamp<=a?4+Math.sin(2*Math.PI*(a%2e3)/2e3):3,y=n.map((function(e){return{x:1e3*e.timestamp,y:0}})),v=n.map((function(e){return ir[e.status]})),S=Array(n.length).fill(3);r&&(y.push({x:1e3*r.timestamp,y:0}),v.push(ee.w.Gray200),S.push(g));var b={labels:["ticks"],datasets:[{label:"now",data:[{x:u-6e5,y:0},{x:u,y:0}],borderColor:ee.w.Gray100,borderWidth:1,pointBorderWidth:2,pointBorderColor:ee.w.Gray200,pointRadius:1,pointHoverRadius:1},{label:"ticks",data:y,borderColor:ee.w.Gray100,borderWidth:0,backgroundColor:"rgba(0,0,0,0)",pointBackgroundColor:"rgba(0,0,0,0)",pointBorderWidth:2,pointBorderColor:v,pointRadius:S,pointHoverBorderWidth:2,pointHoverRadius:5,pointHoverBorderColor:v}]},w={animation:{duration:0},scales:{y:{id:"y",display:!1,grid:{display:!1},title:{display:!1}},x:{id:"x",type:"time",title:{display:!1},grid:{display:!0},bounds:"ticks",min:u-3e5,max:u+6e4,time:{minUnit:"minute"}}},plugins:{legend:{display:!1},tooltip:{displayColors:!1,callbacks:{label:function(e){var r;if(!e.datasetIndex)return"Current time";if(void 0===e.dataIndex)return"";if(e.dataIndex===n.length)return"";var t=n[e.dataIndex],i=t.cursor?"Cursor: ".concat(t.cursor,"\n"):"";return t.status===ge.iz.SKIPPED&&t.skipReason?i?[t.skipReason,i]:t.skipReason:t.status===ge.iz.SUCCESS&&t.runIds.length?i?[].concat((0,Te.Z)(t.runIds),[i]):t.runIds:t.status===ge.iz.SUCCESS&&t.originRunIds?i?[].concat((0,Te.Z)(t.originRunIds),[i]):t.originRunIds:t.status===ge.iz.FAILURE&&null!==(r=t.error)&&void 0!==r&&r.message?i?[t.error.message,i]:t.error.message:i}}}},onClick:function(e,r){if(r.length){var t=(0,F.Z)(r,1)[0];if(void 0!==t.datasetIndex&&void 0!==t.index){var o=n[t.index];i(o)}}},onHover:function(e,r){if((null===e||void 0===e?void 0:e.target)instanceof HTMLElement&&(e.target.style.cursor=r.length?"pointer":"default"),r.length&&!f){j(!0);var i=r.filter((function(e){return 1===e.datasetIndex&&void 0!==e.index&&e.index<n.length})),o=(0,F.Z)(i,1)[0];if(!o)return;var s=n[o.index];t(s)}else!r.length&&f&&(j(!1),t(void 0))},maintainAspectRatio:!1};return(0,O.jsx)(Nn.x1,{type:"line",data:b,height:150,options:w},"100%")},sr=function(e){var n=e.timestamp,r=e.instigationSelector,t=e.onClose,i=(0,Z.a)(ar,{variables:{instigationSelector:r,timestamp:n||0},fetchPolicy:"cache-and-network",skip:!n,partialRefetch:!0}).data,o="InstigationState"===(null===i||void 0===i?void 0:i.instigationStateOrError.__typename)?null===i||void 0===i?void 0:i.instigationStateOrError.tick:void 0;return(0,O.jsxs)(ne.Vq,{isOpen:!!o,onClose:t,style:{width:o&&o.status===ge.iz.SKIPPED?"50vw":"90vw"},title:o?(0,O.jsx)(je.v,{timestamp:o.timestamp}):null,children:[o?(0,O.jsxs)(ne.a7,{children:[o.status===ge.iz.SUCCESS?o.runIds.length?(0,O.jsx)(rr.i0,{runIds:o.runIds}):(0,O.jsx)(rr.lB,{originRunIds:o.originRunIds}):null,o.status===ge.iz.SKIPPED?(0,O.jsxs)(Ke.Z,{direction:"row",spacing:16,children:[(0,O.jsx)(rr.TW,{tick:o}),(0,O.jsx)("span",{children:o.skipReason||"No skip reason provided"})]}):o.status===ge.iz.FAILURE&&o.error?(0,O.jsx)(U.T9,{error:o.error}):void 0]}):null,(0,O.jsxs)(ne.cN,{children:[(0,O.jsx)(te.zx,{icon:(0,O.jsx)($e.JO,{name:"copy_to_clipboard"}),onClick:function(e){return(0,Me.g)(e,window.location.href)},children:"Copy Link"}),(0,O.jsx)(te.zx,{intent:"primary",onClick:t,children:"OK"})]})]})},ar=(0,T.Ps)(yn||(yn=(0,I.Z)(["\n  query SelectedTickQuery($instigationSelector: InstigationSelector!, $timestamp: Float!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      __typename\n      ... on InstigationState {\n        id\n        tick(timestamp: $timestamp) {\n          id\n          status\n          timestamp\n          skipReason\n          runIds\n          originRunIds\n          error {\n            ...PythonErrorFragment\n          }\n          ...TickTagFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),U.Bq,rr.dY);Mn.kL.register(Xn.ZP);var lr,cr,dr,pr,ur,hr,xr,mr,fr,jr,gr,yr=(vn={},(0,En.Z)(vn,ge.iz.SUCCESS,!0),(0,En.Z)(vn,ge.iz.FAILURE,!0),(0,En.Z)(vn,ge.iz.STARTED,!0),(0,En.Z)(vn,ge.iz.SKIPPED,!1),vn),vr=(Sn={},(0,En.Z)(Sn,ge.iz.SUCCESS,"Requested"),(0,En.Z)(Sn,ge.iz.FAILURE,"Failed"),(0,En.Z)(Sn,ge.iz.STARTED,"Started"),(0,En.Z)(Sn,ge.iz.SKIPPED,"Skipped"),Sn),Sr=function(e){var n=e.name,r=e.repoAddress,t=e.tabs,i=(0,er.q)({encode:function(e){var n={};return Object.keys(e).map((function(r){n[r.toLowerCase()]=String(e[r])})),n},decode:function(e){var n=(0,M.Z)({},yr);return Object.keys(yr).forEach((function(r){r.toLowerCase()in e&&(n[r]=!("false"===e[r.toLowerCase()]))})),n}}),o=(0,F.Z)(i,2),s=o[0],a=o[1],d=(0,Yn.m)(),p=(0,M.Z)((0,M.Z)({},(0,Ze.$)(r)),{},{name:n}),u=Object.keys(s).filter((function(e){return s[e]})).map((function(e){return e})),h=(0,nr.l)({nextCursorForResult:function(e){var n;if("InstigationState"===e.instigationStateOrError.__typename)return null===(n=e.instigationStateOrError.ticks[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[]},variables:{instigationSelector:p,statuses:u},query:wr,pageSize:25}),x=h.queryResult,m=h.paginationProps,f=x.data;if(!f)return null;if("PythonError"===f.instigationStateOrError.__typename)return(0,O.jsx)(U.T9,{error:f.instigationStateOrError});if("InstigationStateNotFoundError"===f.instigationStateOrError.__typename)return(0,O.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,O.jsx)(c.t,{icon:"no-results",title:"No ticks to display"})});var j=f.instigationStateOrError,g=j.ticks,y=j.instigationType;if(!g.length&&u.length===Object.keys(yr).length)return null;var v=function(e){var n=e.status;return(0,O.jsx)(Be.X,{label:vr[n],checked:s[n],onChange:function(e){a((0,M.Z)((0,M.Z)({},s),{},(0,En.Z)({},n,e.target.checked)))}})};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(l.x,{margin:{vertical:8,horizontal:24},children:(0,O.jsxs)(l.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[t,(0,O.jsxs)(l.x,{flex:{direction:"row",gap:16},children:[(0,O.jsx)(v,{status:ge.iz.STARTED}),(0,O.jsx)(v,{status:ge.iz.SUCCESS}),(0,O.jsx)(v,{status:ge.iz.FAILURE}),(0,O.jsx)(v,{status:ge.iz.SKIPPED})]})]})}),g.length?(0,O.jsxs)(re.i,{children:[(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,O.jsx)("th",{style:{width:90},children:"Status"}),y===ge._5.SENSOR?(0,O.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,O.jsx)("th",{style:{width:180},children:"Runs"})]})}),(0,O.jsx)("tbody",{children:g.map((function(e){return(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:(0,O.jsx)(je.v,{timestamp:e.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,O.jsx)("td",{children:(0,O.jsx)(rr.TW,{tick:e})}),y===ge._5.SENSOR?(0,O.jsx)("td",{style:{width:120},children:e.cursor?(0,O.jsxs)(l.x,{flex:{direction:"row",alignItems:"center"},children:[(0,O.jsx)(l.x,{style:{fontFamily:Vn.b.monospace,marginRight:10},children:(0,O.jsx)(O.Fragment,{children:(n=e.cursor||"",n.length>100?"".concat(n.slice(0,95),"\u2026"):n)})}),(0,O.jsx)(kr,{onClick:function(){d(e.cursor||""),Me.L.show({message:(0,O.jsx)("div",{children:"Copied value"}),intent:"success"})},children:(0,O.jsx)($e.JO,{name:"assignment"})})]}):(0,O.jsx)(O.Fragment,{children:"\u2014"})}):null,(0,O.jsx)("td",{children:e.runIds.length?e.runs.map((function(e){return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(tr.RX,{run:e},e.id)})})):(0,O.jsx)(O.Fragment,{children:"\u2014"})})]},e.id);var n}))})]}):(0,O.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,O.jsx)(c.t,{icon:"no-results",title:"No ticks to display"})}),g.length>0?(0,O.jsx)("div",{style:{marginTop:"16px"},children:(0,O.jsx)(Le.pI,(0,M.Z)({},m))}):null]})},br=function(e){var n=e.name,r=e.repoAddress,t=e.onHighlightRunIds,i=(0,er.q)({encode:function(e){return{time:e}},decode:function(e){return e.time?Number(e.time):void 0}}),o=(0,F.Z)(i,2),s=o[0],a=o[1],c=p.useState(!1),d=(0,F.Z)(c,2),u=d[0],h=d[1],x=(0,M.Z)((0,M.Z)({},(0,Ze.$)(r)),{},{name:n}),m=(0,Z.a)(wr,{variables:{instigationSelector:x,limit:15},fetchPolicy:"cache-and-network",partialRefetch:!0,notifyOnNetworkStatusChange:!0});(0,xe.C4)(m,u?xe.hy:1e3);var j=m.data;if(!j)return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(l.x,{padding:{top:16,horizontal:24},border:{side:"bottom",width:1,color:ee.w.KeylineGray},children:(0,O.jsx)(f.pm,{children:"Recent ticks"})}),(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(We.$,{purpose:"section"})})]});if("PythonError"===j.instigationStateOrError.__typename)return(0,O.jsx)(U.T9,{error:j.instigationStateOrError});if("InstigationStateNotFoundError"===j.instigationStateOrError.__typename)return null;var g=j.instigationStateOrError,y=g.ticks,v=g.nextTick,S=function(e){a(e?e.timestamp:void 0)};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(sr,{timestamp:s,instigationSelector:x,onClose:function(){return S(void 0)}}),(0,O.jsx)(l.x,{padding:{vertical:16,horizontal:24},children:(0,O.jsx)(f.pm,{children:"Recent ticks"})}),(0,O.jsx)(l.x,{border:{side:"top",width:1,color:ee.w.KeylineGray},children:(0,O.jsx)(or,{ticks:y,nextTick:v,onHoverTick:function(e){e||h(!1),null!==e&&void 0!==e&&e.runIds&&(t&&t(e.runIds),h(!0))},onSelectTick:S})})]})},wr=(0,T.Ps)(bn||(bn=(0,I.Z)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      __typename\n      ... on InstigationState {\n        id\n        instigationType\n        nextTick {\n          timestamp\n        }\n        ticks(dayRange: $dayRange, limit: $limit, cursor: $cursor, statuses: $statuses) {\n          id\n          status\n          timestamp\n          cursor\n          skipReason\n          runIds\n          runs {\n            id\n            status\n            ...RunStatusFragment\n          }\n          originRunIds\n          error {\n            ...PythonErrorFragment\n          }\n          ...TickTagFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n  ","\n"])),U.Bq,rr.dY,tr.S9),kr=Cn.ZP.button.withConfig({displayName:"TickHistory__CopyButton",componentId:"sc-1qfczm2-0"})(["background:transparent;border:0;cursor:pointer;padding:8px;margin:-6px;outline:none;","{background-color:",";transition:background-color 100ms;}:hover ","{background-color:",";}:focus ","{background-color:",";}"],$e.a1,ee.w.Gray600,$e.a1,ee.w.Gray800,$e.a1,ee.w.Link),Pr=r(80608),Er=r(62e3),Cr=r(3656),Nr=r(36243),Rr={showSeconds:!1,showTimezone:!0},Or=function(e){var n=e.repoAddress,r=e.schedule,t=e.refreshState,i=r.cronSchedule,o=r.executionTimezone,s=r.futureTicks,a=r.name,c=r.partitionSet,d=r.pipelineName,u=(0,Yn.m)(),h=(0,G.Ux)(n),x=(0,G.E8)(h,d),g=p.useState("Click to copy"),y=(0,F.Z)(g,2),v=y[0],S=y[1];p.useEffect((function(){var e;return"Copied!"===v&&(e=setTimeout((function(){S("Click to copy")}),2e3)),function(){e&&clearTimeout(e)}}),[v]);var w=r.scheduleState,k=w.status,P=w.id,E=w.ticks,C=E.length>0?E[0]:null,N=k===ge.yn.RUNNING;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(m.m,{title:(0,O.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,O.jsx)(f.X6,{children:a}),(0,O.jsx)(de.M,{repoAddress:n,schedule:r})]}),tags:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(j.V,{icon:"schedule",children:["Schedule in ",(0,O.jsx)(b.b,{repoAddress:n})]}),s.results.length&&N?(0,O.jsxs)(j.V,{icon:"timer",children:["Next tick:"," ",(0,O.jsx)(je.v,{timestamp:s.results[0].timestamp,timezone:o,timeFormat:Rr})]}):null,(0,O.jsx)(l.x,{flex:{display:"inline-flex"},margin:{top:2},children:(0,O.jsx)(X.u,{content:v,children:(0,O.jsx)(Y.Z,{color:{link:ee.w.Gray400,hover:ee.w.Gray600},onClick:function(){u(P),S("Copied!")},children:(0,O.jsx)(f.fv,{children:"id: ".concat(P.slice(0,8))})})})})]}),right:(0,O.jsx)(xe.xi,{refreshState:t})}),(0,O.jsx)(he.fJ,{children:(0,O.jsxs)("tbody",{children:[r.description?(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:"Description"}),(0,O.jsx)("td",{children:r.description})]}):null,(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:"Latest tick"}),(0,O.jsx)("td",{children:C?(0,O.jsxs)(Ke.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,O.jsx)(je.v,{timestamp:C.timestamp,timezone:o,timeFormat:Rr}),(0,O.jsx)(rr.TW,{tick:C,instigationType:ge._5.SCHEDULE})]}):"Schedule has never run"})]}),(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:x?"Job":"Pipeline"}),(0,O.jsx)("td",{children:(0,O.jsx)(Er.h,{pipelineName:d,pipelineHrefContext:n,isJob:x})})]}),(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:"Partition set"}),(0,O.jsx)("td",{children:c?(0,O.jsx)(Cr.b,{schedule:r,repoAddress:n}):"None"})]}),(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:"Schedule"}),(0,O.jsx)("td",{children:i?(0,O.jsxs)(Ke.Z,{direction:"row",spacing:8,children:[(0,O.jsx)("span",{children:(0,Nr.A)(i,o||"UTC")}),(0,O.jsxs)(f.EK,{children:["(",i,")"]})]}):(0,O.jsx)("div",{children:"\u2014"})})]}),o?(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:"Execution timezone"}),(0,O.jsx)("td",{children:o})]}):null]})})]})},_r=r(81403),Ar=r(89324),Ir=function(e){(0,y.Px)();var n=e.repoAddress,r=(0,u.UO)().scheduleName;(0,S.j)("Schedule: ".concat(r));var t=(0,M.Z)((0,M.Z)({},(0,Ze.$)(n)),{},{scheduleName:r}),i=p.useState("ticks"),o=(0,F.Z)(i,2),s=o[0],a=o[1],c=(0,Z.a)(Zr,{variables:{scheduleSelector:t},fetchPolicy:"cache-and-network",partialRefetch:!0,notifyOnNetworkStatusChange:!0}),d=(0,xe.C4)(c,xe.dT),h=(0,O.jsxs)(g.mQ,{selectedTabId:s,onChange:a,children:[(0,O.jsx)(g.OK,{id:"ticks",title:"Tick history"}),(0,O.jsx)(g.OK,{id:"runs",title:"Run history"})]});return(0,O.jsx)(Fe.g,{queryResult:c,allowStaleData:!0,children:function(e){var r=e.scheduleOrError,t=e.instance;if("Schedule"!==r.__typename)return null;var i=!t.daemonHealth.daemonStatus.healthy;return(0,O.jsxs)(x.T,{children:[(0,O.jsx)(Or,{repoAddress:n,schedule:r,refreshState:d}),i?(0,O.jsx)(l.x,{padding:{vertical:16,horizontal:24},children:(0,O.jsx)(Ar.K,{daemonHealth:t.daemonHealth})}):null,"ticks"===s?(0,O.jsx)(Sr,{tabs:h,repoAddress:n,name:r.name}):(0,O.jsx)(Fr,{repoAddress:n,schedule:r,tabs:h})]})}})},Fr=function(e){var n=e.schedule,r=e.highlightedIds,t=e.tabs,i=(0,Z.a)(Tr,{fetchPolicy:"cache-and-network",variables:{limit:20,filter:{pipelineName:n.pipelineName,tags:[{key:le.H.ScheduleName,value:n.name}]}},partialRefetch:!0,notifyOnNetworkStatusChange:!0});(0,xe.C4)(i,xe.dT);var o=i.data;if(!o)return null;if("Runs"!==o.pipelineRunsOrError.__typename)return(0,O.jsx)(c.t,{icon:"error",title:"Query Error",description:o.pipelineRunsOrError.message});var s=null===o||void 0===o?void 0:o.pipelineRunsOrError.results;return(0,O.jsx)(Pr.A,{actionBarComponents:t,runs:s,highlightedIds:r})},Zr=(0,T.Ps)(lr||(lr=(0,I.Z)(['\n  query ScheduleRootQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...ScheduleFragment\n      }\n      ... on ScheduleNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      ...InstanceHealthFragment\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SCHEDULER") {\n          id\n          healthy\n        }\n      }\n    }\n  }\n\n  ',"\n  ","\n  ","\n"])),_r.GA,Qn.O,U.Bq),Tr=(0,T.Ps)(cr||(cr=(0,I.Z)(["\n  query PreviousRunsForScheduleQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      __typename\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"])),Pr.Z),$r=r(26304),Lr=r(20925),Ur=r(57466),Dr=function(e){var n,r=e.sensor,t=e.highlightedIds,i=e.tabs,o=(0,Z.a)(Gr,{fetchPolicy:"cache-and-network",variables:{limit:20,filter:{pipelineName:1===(null===(n=r.targets)||void 0===n?void 0:n.length)?r.targets[0].pipelineName:void 0,tags:[{key:le.H.SensorName,value:r.name}]}}}).data;if(!o||"Runs"!==o.pipelineRunsOrError.__typename)return null;var s=null===o||void 0===o?void 0:o.pipelineRunsOrError.results;return(0,O.jsx)(Pr.A,{actionBarComponents:i,runs:s,highlightedIds:t})},Gr=(0,T.Ps)(dr||(dr=(0,I.Z)(["\n  query PreviousRunsForSensorQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      __typename\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),Pr.Z),zr=function(e){var n=e.repoAddress;(0,y.Px)();var r=(0,u.UO)().sensorName;(0,S.j)("Sensor: ".concat(r));var t=(0,M.Z)((0,M.Z)({},(0,Ze.$)(n)),{},{sensorName:r}),i=p.useState("ticks"),o=(0,F.Z)(i,2),s=o[0],a=o[1],d=(0,Z.a)(Hr,{variables:{sensorSelector:t},fetchPolicy:"cache-and-network",partialRefetch:!0,notifyOnNetworkStatusChange:!0}),h=(0,xe.C4)(d,xe.dT),m=(0,O.jsxs)(g.mQ,{selectedTabId:s,onChange:a,children:[(0,O.jsx)(g.OK,{id:"ticks",title:"Tick history"}),(0,O.jsx)(g.OK,{id:"runs",title:"Run history"})]});return(0,O.jsx)(Fe.g,{queryResult:d,allowStaleData:!0,children:function(e){var t=e.sensorOrError,i=e.instance;if("SensorNotFoundError"===t.__typename)return(0,O.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,O.jsx)(c.t,{icon:"error",title:"Could not find sensor `".concat(r,"` in repository `").concat(n.name,"`")})});if("PythonError"===t.__typename)return(0,O.jsx)(U.T9,{error:t});if("Sensor"!==t.__typename)return null;var o=!i.daemonHealth.daemonStatus.healthy;return(0,O.jsxs)(x.T,{children:[(0,O.jsx)($r.e,{repoAddress:n,sensor:t,daemonHealth:i.daemonHealth.daemonStatus.healthy,refreshState:h}),o?(0,O.jsx)(l.x,{padding:{vertical:16,horizontal:24},children:(0,O.jsx)(Ur.F,{daemonHealth:i.daemonHealth})}):null,(0,O.jsx)(br,{repoAddress:n,name:t.name}),"ticks"===s?(0,O.jsx)(Sr,{tabs:m,repoAddress:n,name:t.name}):(0,O.jsx)(Dr,{repoAddress:n,sensor:t,tabs:m})]})}})},Hr=(0,T.Ps)(pr||(pr=(0,I.Z)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      __typename\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      ...InstanceHealthFragment\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n        }\n      }\n    }\n  }\n  ',"\n  ","\n  ","\n"])),U.Bq,Lr.l,Qn.O),qr=function(e){(0,y.Px)();var n=e.repoAddress,r=(0,u.UO)(),t=(0,w.p3)(r[0]),i=t.opNames.length>1?t.opNames[t.opNames.length-2]:t.pipelineName;return(0,S.j)("Graph: ".concat(i)),(0,O.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,O.jsx)(m.m,{title:(0,O.jsx)(f.X6,{children:i}),tags:(0,O.jsxs)(j.V,{icon:"schema",children:["Graph in ",(0,O.jsx)(b.b,{repoAddress:n})]})}),(0,O.jsx)(l.x,{border:{side:"top",width:1,color:ee.w.KeylineGray},style:{minHeight:0,flex:1,display:"flex"},children:(0,O.jsx)(Jr,{repoAddress:n})})]})},Jr=function(e){var n=e.repoAddress,r=(0,u.UO)(),t=(0,w.p3)(r[0]),i=(0,u.k6)(),o=p.useState({explodeComposites:!1,preferAssetRendering:!0}),s=(0,F.Z)(o,2),a=s[0],l=s[1],d=t.opNames.slice(0,t.opNames.length-1),h=(0,Z.a)(Wr,{variables:{graphSelector:{repositoryName:(null===n||void 0===n?void 0:n.name)||"",repositoryLocationName:(null===n||void 0===n?void 0:n.location)||"",graphName:t.pipelineName},rootHandleID:d.join("."),requestScopeHandleID:a.explodeComposites?void 0:d.join(".")}});return(0,O.jsx)(Fe.g,{queryResult:h,children:function(r){var o=r.graphOrError;if("GraphNotFoundError"===o.__typename)return(0,O.jsx)(c.t,{icon:"error",title:"Graph not found",description:o.message});if("PythonError"===o.__typename)return(0,O.jsx)(c.t,{icon:"error",title:"Query Error",description:o.message});var s=o.solidHandle,d=a.explodeComposites?(0,on.i)(o.solidHandles):o.solidHandles;return(0,O.jsx)(sn.m0,{options:a,setOptions:l,explorerPath:t,onChangeExplorerPath:function(n,r){var t=(0,E.$U)(e.repoAddress,"/graphs/".concat((0,w.gY)(n)));"push"===r?i.push(t):i.replace(t)},container:o,repoAddress:n,handles:d,parentHandle:s||void 0,isGraph:!0,getInvocations:function(e){return d.filter((function(n){return n.solid.definition.name===e})).map((function(e){return{handleID:e.handleID}}))}})}})},Wr=(0,T.Ps)(ur||(ur=(0,I.Z)(["\n  query GraphExplorerRootQuery(\n    $graphSelector: GraphSelector\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    graphOrError(selector: $graphSelector) {\n      ... on Graph {\n        id\n        name\n        ...GraphExplorerFragment\n\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n      ... on GraphNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n  ","\n"])),sn.Sm,sn.Q,U.Bq),Br=r(88863),Kr=r(40557),Qr=r(29440),Vr=r(77523),Mr=r(23848),Xr=r(35815),Yr=r(71824),et=r(2097),nt=function(e){var n=e.refreshState,r=e.tab;return(0,O.jsxs)(l.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,O.jsx)(g.mQ,{selectedTabId:r,children:(0,O.jsx)(k.f,{id:"jobs",title:"Jobs",to:"/workspace/jobs"})}),n?(0,O.jsx)(l.x,{padding:{bottom:8},children:(0,O.jsx)(xe.xi,{refreshState:n})}):null]})},rt=r(37099),tt=function(){(0,y.Px)();var e=p.useState(""),n=(0,F.Z)(e,2),r=n[0],t=n[1],i=(0,Yr.N)("jobs-page-expansion-state"),o=i.expandedKeys,s=i.onToggle,a=p.useContext(G.C5),d=a.allRepos,u=a.loading,h=(0,Z.a)(lt,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}).data,g=(0,Z.a)(ct,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}).data,v=ot(g),S=it(h),b=st(d,v,S),w=r.trim().toLocaleLowerCase(),k=w.length>0,P=p.useMemo((function(){var e=w.toLocaleLowerCase();return b.map((function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter((function(n){return n.name.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.jobs.length>0}))}),[b,w]);return(0,O.jsxs)(x.T,{children:[(0,O.jsx)(m.m,{title:(0,O.jsx)(f.X6,{children:"Workspace"}),tabs:(0,O.jsx)(nt,{tab:"jobs"})}),u&&!d.length?(0,O.jsx)(l.x,{padding:64,children:(0,O.jsx)(We.$,{purpose:"page"})}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(l.x,{padding:{horizontal:24,top:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[d.length>1?(0,O.jsx)(Vr.C,{}):null,(0,O.jsx)(Br.oi,{icon:"search",value:r,onChange:function(e){return t(e.target.value)},placeholder:"Filter by job name\u2026",style:{width:"340px"}})]}),(0,O.jsx)(l.x,{padding:{top:20},children:P.length?P.map((function(e){var n=e.repoAddress,r=e.jobs,t=(0,ue.l)(n),i=k||o.includes(t),a=r.length;return(0,O.jsxs)("div",{style:{width:"100%"},children:[(0,O.jsx)(Xr.L,{repoName:n.name,repoLocation:n.location,expanded:i,onClick:function(){k||s(n)},showLocation:!1,rightElement:(0,O.jsx)(X.u,{content:(0,O.jsx)("span",{style:{whiteSpace:"nowrap"},children:k?1===a?"1 matching job":"".concat(a," matching jobs"):1===a?"1 job":"".concat(a," jobs")}),placement:"top",children:(0,O.jsx)(j.V,{intent:"primary",children:a})})}),i?(0,O.jsx)(Kr.Q,{jobs:r}):null]},t)})):k?(0,O.jsx)(l.x,{padding:{top:20},children:(0,O.jsx)(c.t,{icon:"search",title:"No matching jobs",description:(0,O.jsxs)("div",{children:["No jobs matching ",(0,O.jsx)("strong",{children:r})," were found in this workspace"]})})}):(0,O.jsx)(l.x,{padding:{top:20},children:(0,O.jsx)(c.t,{icon:"search",title:"No jobs",description:"No jobs were found in this workspace"})})})]})]})},it=function(e){return p.useMemo((function(){if(!e||"Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return{};var n={};return e.workspaceOrError.locationEntries.forEach((function(e){var r;if("RepositoryLocation"===(null===(r=e.locationOrLoadError)||void 0===r?void 0:r.__typename)){var t=e.locationOrLoadError;e.locationOrLoadError.repositories.forEach((function(e){var r=(0,rt.k)(e.name,t.name);e.schedules.forEach((function(e){var t=(0,Mr.G)(r,e.pipelineName),i=(0,M.Z)({},n[t]||{schedules:[],sensors:[]});i.schedules.push(e),n[t]=i})),e.sensors.forEach((function(e){((null===e||void 0===e?void 0:e.targets)||[]).forEach((function(t){var i=(0,Mr.G)(r,t.pipelineName),o=(0,M.Z)({},n[i]||{schedules:[],sensors:[]});o.sensors.push(e),n[i]=o}))}))}))}})),n}),[e])},ot=function(e){return p.useMemo((function(){if(!e||"Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return{};var n={};return e.workspaceOrError.locationEntries.forEach((function(e){var r;if("RepositoryLocation"===(null===(r=e.locationOrLoadError)||void 0===r?void 0:r.__typename)){var t=e.locationOrLoadError;e.locationOrLoadError.repositories.forEach((function(e){var r=(0,rt.k)(e.name,t.name);e.pipelines.forEach((function(e){var t=(0,Mr.G)(r,e.name);n[t]=e.runs}))}))}})),n}),[e])},st=function(e,n,r){return p.useMemo((function(){return(0,Te.Z)(e).sort((function(e,n){return e.repository.name.toLocaleLowerCase().localeCompare(n.repository.name.toLocaleLowerCase())})).map((function(e){var t=e.repository,i=t.name,o=t.pipelines,s=(0,rt.k)(i,e.repositoryLocation.name);return{repoAddress:s,jobs:o.filter((function(e){var n=e.name;return!(0,ae.pv)(n)})).map((function(e){var t=(0,Mr.G)(s,e.name),i=r[t];return{isJob:e.isJob,name:e.name,repoAddress:s,schedules:(null===i||void 0===i?void 0:i.schedules)||[],sensors:(null===i||void 0===i?void 0:i.sensors)||[],runs:n[t]||[]}}))}})).filter((function(e){return e.jobs.length>0}))}),[e,n,r])},at=(0,T.Ps)(hr||(hr=(0,I.Z)(["\n  fragment WorkspaceJobFragment on Pipeline {\n    id\n    name\n    isJob\n    modes {\n      id\n      name\n    }\n  }\n"]))),lt=(0,T.Ps)(xr||(xr=(0,I.Z)(["\n  query WorkspaceJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  ...WorkspaceJobFragment\n                }\n                ...RepositoryInfoFragment\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                  ...ScheduleSwitchFragment\n                }\n                sensors {\n                  id\n                  name\n                  targets {\n                    pipelineName\n                  }\n                  sensorState {\n                    id\n                    status\n                  }\n                  ...SensorSwitchFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),at,et.x,Qr.q,de.J,pe.U,U.Bq),ct=(0,T.Ps)(mr||(mr=(0,I.Z)(["\n  query RecentRunsPerJobQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                  runs(limit: 5) {\n                    id\n                    ...RunTimeFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),U.Bq,ce.$X),dt=r(70457),pt=function(){(0,y.Px)();var e=(0,h.gV)().flagNewWorkspace,n=(0,G.vl)(),r=n.loading,t=n.error,i=n.options;if(e)return(0,O.jsx)(u.l_,{to:"/workspace/jobs"});return(0,O.jsxs)(x.T,{children:[(0,O.jsx)(m.m,{title:(0,O.jsx)(f.X6,{children:"Workspace"})}),e?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(l.x,{padding:{vertical:16,horizontal:24},children:(0,O.jsxs)(Ke.Z,{direction:"row",spacing:12,alignItems:"center",children:[(0,O.jsx)(f.pm,{id:"repository-locations",children:"Locations"}),(0,O.jsx)(P.i,{})]})}),(0,O.jsx)(l.x,{padding:{bottom:24},children:(0,O.jsx)(dt.l,{})})]}),(0,O.jsx)(l.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:ee.w.KeylineGray},children:(0,O.jsx)(f.pm,{id:"repository-locations",children:"Repositories"})}),function(){if(r)return(0,O.jsx)(Fe.T,{purpose:"page"});if(t)return(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"error",title:"Error loading repositories",description:"Could not load repositories in this workspace."})});if(!i.length)return(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"folder",title:"No repositories",description:"When you add a repository to this workspace, it will appear here."})});var e=i.some((function(e){return e.repository.pipelines.some((function(e){return!e.isJob}))}));return(0,O.jsxs)(re.i,{children:[(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("th",{children:"Repository"}),(0,O.jsx)("th",{children:"Assets"}),(0,O.jsx)("th",{children:"Jobs"}),e?(0,O.jsx)("th",{children:"Pipelines"}):null,(0,O.jsx)("th",{children:"Graphs"}),(0,O.jsx)("th",{children:"Ops"}),(0,O.jsx)("th",{children:"Schedules"}),(0,O.jsx)("th",{children:"Sensors"})]})}),(0,O.jsx)("tbody",{children:i.map((function(n){var r=n.repository,t=r.name,i=r.pipelines,o=n.repositoryLocation.name,s=(0,rt.i)(t,o),a=i.some((function(e){return!e.isJob}));return(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{style:{width:"40%"},children:s}),(0,O.jsx)("td",{children:(0,O.jsx)(se.rU,{to:(0,E.rO)(t,o,"/assets"),children:"Assets"})}),(0,O.jsx)("td",{children:(0,O.jsx)(se.rU,{to:(0,E.rO)(t,o,"/jobs"),children:"Jobs"})}),e?(0,O.jsx)("td",{children:a?(0,O.jsx)(se.rU,{to:(0,E.rO)(t,o,"/pipelines"),children:"Pipelines"}):(0,O.jsx)("span",{style:{color:ee.w.Gray400},children:"None"})}):null,(0,O.jsx)("td",{children:(0,O.jsx)(se.rU,{to:(0,E.rO)(t,o,"/graphs"),children:"Graphs"})}),(0,O.jsx)("td",{children:(0,O.jsx)(se.rU,{to:(0,E.rO)(t,o,"/ops"),children:"Ops"})}),(0,O.jsx)("td",{children:(0,O.jsx)(se.rU,{to:(0,E.rO)(t,o,"/schedules"),children:"Schedules"})}),(0,O.jsx)("td",{children:(0,O.jsx)(se.rU,{to:(0,E.rO)(t,o,"/sensors"),children:"Sensors"})})]},s)}))})]})}()]})},ut=r(48953),ht=function(){(0,y.Px)();var e=(0,u.UO)().pipelinePath,n=(0,u.$B)(["/workspace/pipelines/(/?.*)","/workspace/jobs/(/?.*)"]),r=(0,u.TH)(),t=n.params[0],i=r.search,o=(0,w.p3)(e).pipelineName,s=(0,G.vl)(),a=s.loading,d=s.options;if(a)return(0,O.jsx)(Fe.T,{purpose:"page"});var p=(0,ut.k)(d,o);if(0===p.length)return(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"no-results",title:"No matching jobs",description:(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{children:(0,O.jsx)("strong",{children:o})}),"was not found in any repositories in this workspace."]})})});if(1===p.length){var h=p[0],j=(0,G.Zj)(h),g=(0,G.E8)(h,o),v=(0,E.$U)(j,"/".concat(g?"jobs":"pipelines","/").concat(t).concat(i));return(0,O.jsx)(u.l_,{to:v})}var S=p.some((function(e){return!(0,G.E8)(e,o)}));return(0,O.jsxs)(x.T,{children:[(0,O.jsx)(m.m,{title:(0,O.jsx)(f.X6,{children:o}),icon:"job",description:S?"Job / pipeline in multiple repositories":"Job in multiple repositories"}),(0,O.jsx)(l.x,{padding:{vertical:16,horizontal:24},children:(0,O.jsx)(Qe.b,{intent:"info",title:(0,O.jsx)("div",{children:S?(0,O.jsxs)(O.Fragment,{children:["Jobs or pipelines named ",(0,O.jsx)("strong",{children:o})," were found in multiple repositories."]}):(0,O.jsxs)(O.Fragment,{children:["Jobs named ",(0,O.jsx)("strong",{children:o})," were found in multiple repositories."]})})})}),(0,O.jsxs)(re.i,{children:[(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("th",{children:"Repository name and location"}),(0,O.jsx)("th",{children:S?"Job / Pipeline":"Job"})]})}),(0,O.jsx)("tbody",{children:p.map((function(e){var n=e.repository.name,r=e.repositoryLocation.name,t=(0,rt.i)(n,r);return(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{style:{width:"40%"},children:t}),(0,O.jsx)("td",{children:(0,O.jsx)(se.rU,{to:(0,E.rO)(n,r,"/".concat((0,G.E8)(e,o)?"jobs":"pipelines","/").concat(o)),children:o})})]},t)}))})]})]})},xt=r(47427),mt=r(57615),ft=r(17912),jt=r(95806),gt=r(23496),yt=r(79447),vt=r(76867),St=function(e){var n=e.definition,r=n.name,t=n.inputDefinitions,i=n.outputDefinitions,o=(0,vt.og)({name:r,inputs:t.map((function(e){return{definition:e,dependsOn:[]}})),outputs:i.map((function(e){return{definition:e,dependedBy:[]}})),definition:{description:null,assetNodes:[]}},{x:0,y:0});return(0,O.jsx)(l.x,{padding:24,children:(0,O.jsx)(wt,{style:{height:o.bounds.height},children:(0,O.jsx)(yt.Un,{invocation:void 0,definition:e.definition,minified:!1,onClick:function(){},onDoubleClick:function(){},onEnterComposite:function(){},onHighlightEdges:function(){},layout:o,selected:!1,focused:!1,highlightedEdges:[],dim:!1})})})},bt=(0,T.Ps)(fr||(fr=(0,I.Z)(["\n  fragment OpCardSolidDefinitionFragment on ISolidDefinition {\n    ...OpNodeDefinitionFragment\n    __typename\n    name\n    description\n    metadata {\n      key\n      value\n    }\n    inputDefinitions {\n      name\n    }\n    outputDefinitions {\n      name\n    }\n  }\n\n  ","\n"])),yt.WH),wt=Cn.ZP.div.withConfig({displayName:"OpCard__OpCardContainer",componentId:"yeb4tc-0"})(["flex:1;max-width:450px;position:relative;"]),kt=function(e){var n=e.name,r=e.onClickInvocation,t=e.repoAddress,i=(0,Ze.$)(t),o=(0,Z.a)(Pt,{variables:{name:n,repositorySelector:i}});return(0,O.jsx)(Fe.g,{queryResult:o,children:function(e){var n=e.repositoryOrError;if("Repository"!==(null===n||void 0===n?void 0:n.__typename)||!n.usedSolid)return null;var t=n.usedSolid;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(St,{definition:t.definition}),(0,O.jsx)(gt.I,{definition:t.definition,showingSubgraph:!1,onClickInvocation:r,getInvocations:function(){return t.invocations.map((function(e){return{handleID:e.solidHandle.handleID,pipelineName:e.pipeline.name}}))}})]})}})},Pt=(0,T.Ps)(jr||(jr=(0,I.Z)(["\n  query UsedSolidDetailsQuery($name: String!, $repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolid(name: $name) {\n          __typename\n          definition {\n            ...OpCardSolidDefinitionFragment\n            ...SidebarOpDefinitionFragment\n          }\n          invocations {\n            __typename\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"])),bt,gt.u),Et=Cn.ZP.div.withConfig({displayName:"OpDetailsRoot__OpDetailScrollContainer",componentId:"sc-1p6pya6-0"})(["overflow:scroll;flex:1;"]),Ct=r(66941);function Nt(e){var n,r={},t=(0,xt.Z)(e);try{for(t.s();!(n=t.n()).done;){var i,o=n.value,s=(0,xt.Z)(o);try{for(s.s();!(i=s.n()).done;){r[i.value]=!0}}catch(a){s.e(a)}finally{s.f()}}}catch(a){t.e(a)}finally{t.f()}return Object.keys(r).sort((function(e,n){return e.localeCompare(n)}))}var Rt,Ot,_t,At,It,Ft=function(e){(0,y.Px)(),(0,S.j)("Ops");var n=(0,u.UO)().name,r=e.repoAddress,t=(0,Ze.$)(r),i=(0,Z.a)(Lt,{variables:{repositorySelector:t}});return(0,O.jsx)("div",{style:{height:"100%"},children:(0,O.jsx)(Fe.g,{queryResult:i,children:function(t){var i=t.repositoryOrError;return"Repository"===(null===i||void 0===i?void 0:i.__typename)&&i.usedSolids?(0,O.jsx)(Zt,(0,M.Z)((0,M.Z)({},e),{},{name:n,repoAddress:r,usedSolids:i.usedSolids})):null}})})},Zt=function(e){var n,r=e.name,t=e.repoAddress,i=e.usedSolids,o=(0,u.k6)(),s=(0,u.TH)(),a=K().parse(s.search,{ignoreQueryPrefix:!0}),d=a.q,h=a.typeExplorer,x=(n=i,[{token:"name",values:function(){return n.map((function(e){return e.definition.name}))}},{token:"job",values:function(){return Nt(n.map((function(e){return e.invocations.filter((function(e){return!e.pipeline.isJob})).map((function(e){return e.pipeline.name}))})))}},{token:"pipeline",values:function(){return Nt(n.map((function(e){return e.invocations.filter((function(e){return e.pipeline.isJob})).map((function(e){return e.pipeline.name}))})))}},{token:"input",values:function(){return Nt(n.map((function(e){return e.definition.inputDefinitions.map((function(e){return e.type.displayName}))})))}},{token:"output",values:function(){return Nt(n.map((function(e){return e.definition.outputDefinitions.map((function(e){return e.type.displayName}))})))}}]),m=(0,mt.HE)(d||"",x),f=function(e,n){return e.filter((function(e){var r,t=(0,xt.Z)(n);try{var i=function(){var n=r.value;return("name"!==n.token&&void 0!==n.token||e.definition.name.startsWith(n.value))&&("pipeline"!==n.token&&"job"!==n.token||e.invocations.some((function(e){return e.pipeline.name===n.value})))&&("input"!==n.token||e.definition.inputDefinitions.some((function(e){return e.type.displayName.startsWith(n.value)})))&&("output"!==n.token||e.definition.outputDefinitions.some((function(e){return e.type.displayName.startsWith(n.value)})))?void 0:{v:!1}};for(t.s();!(r=t.n()).done;){var o=i();if("object"===typeof o)return o.v}}catch(s){t.e(s)}finally{t.f()}return!0}))}(i,m),j=i.find((function(e){return e.definition.name===r})),g=function(e){o.replace({search:"?".concat(K().stringify({q:(0,mt.jP)(e)}))})},y=function(e){o.replace((0,E.$U)(t,"/ops/".concat(e,"?").concat(K().stringify({q:d}))))};p.useEffect((function(){1!==f.length||j&&f[0]===j||y(f[0].definition.name),"string"===typeof h&&g([].concat((0,Te.Z)(m),[{token:"input",value:h}]))}));var v=p.useCallback((function(e){var n=e.pipelineName,r=e.handleID;o.push((0,E.$U)(t,"/pipeline_or_job/".concat(n,"/").concat(r.split(".").join("/"))))}),[o,t]);return(0,O.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,O.jsx)(ft.OS,{identifier:"ops",firstInitialPercent:40,firstMinSize:420,first:(0,O.jsxs)(Gt,{children:[(0,O.jsx)(l.x,{padding:{vertical:12,horizontal:24},border:{side:"bottom",width:1,color:ee.w.KeylineGray},children:(0,O.jsx)(mt.Gf,{values:m,onChange:function(e){return g(e)},suggestionProviders:x,placeholder:"Filter by name or input/output type..."})}),(0,O.jsx)("div",{style:{flex:1},children:(0,O.jsx)(jt.qj,{nonce:window.__webpack_nonce__,children:function(e){var n=e.height,r=e.width;return(0,O.jsx)(Tt,{height:n,width:r,selected:j,onClickOp:y,items:f.sort((function(e,n){return e.definition.name.localeCompare(n.definition.name)}))})}})})]}),second:j?(0,O.jsx)(Et,{children:(0,O.jsx)(kt,{name:j.definition.name,onClickInvocation:v,repoAddress:t})}):(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"no-results",title:"No op selected",description:"Select an op to see its definition and invocations"})})})})},Tt=function(e){var n=e.items,r=e.selected,t=p.useRef(new jt.t1({defaultHeight:60,fixedWidth:!0})),i=p.useRef(e.width);e.width!==i.current&&(t.current.clearAll(),i.current=e.width);var o=r?n.findIndex((function(e){return e===r})):void 0;return(0,O.jsx)($t,{children:(0,O.jsx)(jt.aV,{width:e.width,height:e.height,rowCount:e.items.length,rowHeight:t.current.rowHeight,scrollToIndex:o,className:"solids-list",rowRenderer:function(n){var r=n.parent,i=n.index,o=n.key,s=n.style,a=e.items[i];return(0,O.jsx)(jt.Z8,{cache:t.current,index:i,parent:r,children:(0,O.jsxs)(Ut,{style:s,selected:a===e.selected,onClick:function(){return e.onClickOp(a.definition.name)},children:[(0,O.jsx)(Dt,{children:a.definition.name}),(0,O.jsx)(Ct.z,{definition:a.definition})]})},o)},overscanRowCount:10})})},$t=Cn.ZP.div.withConfig({displayName:"OpsRoot__Container",componentId:"sc-1mzv72b-0"})([".solids-list:focus{outline:none;}"]),Lt=(0,T.Ps)(gr||(gr=(0,I.Z)(["\n  query OpsRootQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolids {\n          __typename\n          definition {\n            name\n            ...OpTypeSignatureFragment\n          }\n          invocations {\n            __typename\n            pipeline {\n              id\n              isJob\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),Ct.C),Ut=Cn.ZP.div.withConfig({displayName:"OpsRoot__OpListItem",componentId:"sc-1mzv72b-1"})(["background:",";box-shadow:"," 4px 0 0 inset,"," 0 -1px 0 inset;color:",";cursor:pointer;font-size:14px;display:flex;flex-direction:column;padding:12px 24px;user-select:none;& > code.bp3-code{color:",";background:transparent;font-family:",";padding:5px 0 0 0;}"],(function(e){return e.selected?ee.w.Gray100:ee.w.White}),(function(e){return e.selected?ee.w.HighlightGreen:"transparent"}),ee.w.KeylineGray,ee.w.Gray800,ee.w.Gray800,Vn.b.monospace),Dt=Cn.ZP.div.withConfig({displayName:"OpsRoot__OpName",componentId:"sc-1mzv72b-2"})(["flex:1;font-weight:600;"]),Gt=Cn.ZP.div.withConfig({displayName:"OpsRoot__OpListColumnContainer",componentId:"sc-1mzv72b-3"})(["display:flex;flex-direction:column;height:100%;"]),zt=r(56313),Ht=r(24375),qt=r(98191),Jt=function(e){var n=e.repoAddress;(0,y.Px)(),(0,S.j)("Schedules");var r=(0,Ze.$)(n),t=(0,Z.a)(_r.tj,{variables:{repositorySelector:r,instigationType:ge._5.SCHEDULE},fetchPolicy:"cache-and-network",partialRefetch:!0,notifyOnNetworkStatusChange:!0});return(0,xe.C4)(t,5e4),(0,O.jsx)(Fe.g,{queryResult:t,allowStaleData:!0,children:function(e){var r=e.repositoryOrError,t=e.unloadableInstigationStatesOrError,i=e.instance,o=null;return o="PythonError"===r.__typename?(0,O.jsx)(U.T9,{error:r}):"RepositoryNotFoundError"===r.__typename?(0,O.jsx)(c.t,{icon:"error",title:"Repository not found",description:"Could not load this repository."}):r.schedules.length?r.schedules.length>0&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(qt.P,{schedules:r.schedules,repoAddress:n}),(0,O.jsx)(l.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:ee.w.Gray100},children:(0,O.jsx)(f.pm,{children:"Scheduled ticks"})}),(0,O.jsx)(Ht.n,{repos:[r]})]}):(0,O.jsx)(c.t,{icon:"schedule",title:"No schedules found",description:(0,O.jsxs)("p",{children:["This repository does not have any schedules defined. Visit the"," ",(0,O.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules",children:"scheduler documentation"})," ","for more information about scheduling runs in Dagster."]})}),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(l.x,{padding:{horizontal:24,vertical:16},children:(0,O.jsx)(Ar.K,{daemonHealth:i.daemonHealth})}),o,"PythonError"===t.__typename?(0,O.jsx)(U.T9,{error:t}):(0,O.jsx)(zt.Y,{scheduleStates:t.results})]})}})},Wt=r(87669),Bt=function(e){(0,y.Px)(),(0,S.j)("Sensors");var n=e.repoAddress,r=(0,Ze.$)(n),t=(0,Z.a)(Kt,{variables:{repositorySelector:r,instigationType:ge._5.SENSOR},fetchPolicy:"cache-and-network",partialRefetch:!0,notifyOnNetworkStatusChange:!0});return(0,xe.C4)(t,5e4),(0,O.jsx)(Fe.g,{queryResult:t,allowStaleData:!0,children:function(e){var r=e.sensorsOrError,t=e.unloadableInstigationStatesOrError,i=e.instance;return(0,O.jsx)("div",{children:"PythonError"===r.__typename?(0,O.jsx)(U.T9,{error:r}):"PythonError"===t.__typename?(0,O.jsx)(U.T9,{error:t}):"RepositoryNotFoundError"===r.__typename?(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"error",title:"Repository not found",description:"Could not load this repository."})}):r.results.length?(0,O.jsxs)(O.Fragment,{children:[r.results.length>0&&(0,O.jsx)(l.x,{padding:{horizontal:24,vertical:16},children:(0,O.jsx)(Ur.F,{daemonHealth:i.daemonHealth})}),(0,O.jsx)(Wt.J,{repoAddress:n,sensors:r.results}),(0,O.jsx)(zt.e,{sensorStates:t.results})]}):(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"sensors",title:"No Sensors Found",description:(0,O.jsxs)("p",{children:["This repository does not have any sensors defined. Visit the"," ",(0,O.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors",target:"_blank",rel:"noopener noreferrer",children:"sensors documentation"})," ","for more information about creating sensors in Dagster."]})})})})}})},Kt=(0,T.Ps)(Rt||(Rt=(0,I.Z)(["\n  query SensorsRootQuery(\n    $repositorySelector: RepositorySelector!\n    $instigationType: InstigationType!\n  ) {\n    sensorsOrError(repositorySelector: $repositorySelector) {\n      __typename\n      ...PythonErrorFragment\n      ... on Sensors {\n        results {\n          id\n          ...SensorFragment\n        }\n      }\n    }\n    unloadableInstigationStatesOrError(instigationType: $instigationType) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"])),U.Bq,tr.ai,Lr.l,Qn.O),Qt=(0,T.Ps)(Ot||(Ot=(0,I.Z)(["\n  query RepositoryAssetsListQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      __typename\n      ... on Repository {\n        id\n        assetNodes {\n          id\n          assetKey {\n            path\n          }\n          opNames\n          description\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n      ... on RepositoryNotFoundError {\n        message\n      }\n    }\n  }\n"]))),Vt=function(e){(0,y.Px)();var n=e.repoAddress,r=(0,Ze.$)(n),t=(0,Z.a)(Qt,{fetchPolicy:"cache-and-network",variables:{repositorySelector:r}}),i=t.data,o=t.error,s=t.loading,a=null===i||void 0===i?void 0:i.repositoryOrError,d=p.useMemo((function(){return("Repository"===(null===a||void 0===a?void 0:a.__typename)?(0,Te.Z)(a.assetNodes):[]).sort((function(e,n){return(0,ae.ll)(e.assetKey).localeCompare((0,ae.ll)(n.assetKey))}))}),[a]);return s?null:o||!d?(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"error",title:"Unable to load graphs",description:"Could not load graphs for ".concat((0,ue.l)(n))})}):d.length?(0,O.jsxs)(re.i,{children:[(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("th",{children:"Asset Key"}),(0,O.jsx)("th",{children:"Defined In"})]})}),(0,O.jsx)("tbody",{children:d.map((function(e){return(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:(0,O.jsxs)(l.x,{flex:{direction:"column",gap:4},children:[(0,O.jsx)(se.rU,{to:(0,R.p)(e.assetKey),children:(0,ae.ll)(e.assetKey)}),(0,O.jsx)(Mt,{children:e.description})]})}),(0,O.jsx)("td",{children:(0,O.jsx)(l.x,{flex:{direction:"column"},children:(0,O.jsx)(b.b,{repoAddress:{name:e.repository.name,location:e.repository.location.name}})})})]},e.id)}))})]}):(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"error",title:"No assets found",description:"No @asset definitions for ".concat((0,ue.l)(n))})})},Mt=Cn.ZP.div.withConfig({displayName:"RepositoryAssetsList__Description",componentId:"sc-16at50e-0"})(["color:",";font-size:12px;"],ee.w.Gray400),Xt=(0,T.Ps)(_t||(_t=(0,I.Z)(["\n  query RepositoryGraphsListQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      __typename\n      ... on Repository {\n        id\n        usedSolids {\n          definition {\n            __typename\n            ... on CompositeSolidDefinition {\n              id\n              name\n              description\n            }\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n        pipelines {\n          id\n          description\n          name\n          isJob\n          graphName\n        }\n      }\n      ... on RepositoryNotFoundError {\n        message\n      }\n    }\n  }\n"]))),Yt=function(e){(0,y.Px)();var n=e.repoAddress,r=(0,Ze.$)(n),t=(0,Z.a)(Xt,{fetchPolicy:"cache-and-network",variables:{repositorySelector:r}}),i=t.data,o=t.error,s=t.loading,a=null===i||void 0===i?void 0:i.repositoryOrError,d=p.useMemo((function(){if(!a||"Repository"!==a.__typename)return null;var e=new Set(a.pipelines.filter((function(e){return e.isJob&&!(0,ae.pv)(e.name)})).map((function(e){return e.graphName}))),r=Array.from(e).map((function(e){return{name:e,path:"/graphs/".concat(e),description:null,repoAddress:n}}));return a.usedSolids.forEach((function(e){"CompositeSolidDefinition"===e.definition.__typename&&r.push({name:e.definition.name,path:"/graphs/".concat(e.invocations[0].pipeline.name,"/").concat(e.invocations[0].solidHandle.handleID,"/"),description:e.definition.description,repoAddress:n})})),r.sort((function(e,n){return e.name.localeCompare(n.name)}))}),[a,n]);return s?null:o||!d?(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"error",title:"Unable to load graphs",description:"Could not load graphs for ".concat((0,ue.l)(n))})}):d.length?(0,O.jsxs)(re.i,{children:[(0,O.jsx)("thead",{children:(0,O.jsx)("tr",{children:(0,O.jsx)("th",{children:"Graph"})})}),(0,O.jsx)("tbody",{children:d.map((function(e){var n=e.name,r=e.description,t=e.path,i=e.repoAddress;return(0,O.jsx)("tr",{children:(0,O.jsx)("td",{children:(0,O.jsxs)(Ke.Z,{direction:"column",spacing:4,children:[(0,O.jsx)(se.rU,{to:(0,E.rO)(i.name,i.location,t),children:n}),(0,O.jsx)(ei,{children:r})]})})},"".concat(n,"-").concat((0,ue.l)(i)))}))})]}):(0,O.jsx)(l.x,{padding:64,children:(0,O.jsx)(c.t,{icon:"schema",title:"No graphs found",description:(0,O.jsx)("div",{children:"This repository does not have any graphs defined."})})})},ei=Cn.ZP.div.withConfig({displayName:"RepositoryGraphsList__Description",componentId:"sc-1wcflj3-0"})(["color:",";font-size:12px;"],ee.w.Gray400),ni=function(e){var n=e.pipelinesOrJobs,r=e.showRepo,t=n.some((function(e){return!e.pipelineOrJob.isJob}));return(0,O.jsxs)(re.i,{children:[(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("th",{style:{width:"50%",minWidth:"400px"},children:t?"Job or Pipeline":"Job"}),(0,O.jsx)("th",{children:"Schedules"}),(0,O.jsx)("th",{children:"Sensors"}),(0,O.jsx)("th",{style:{whiteSpace:"nowrap"},children:"Recent runs"})]})}),(0,O.jsx)("tbody",{children:n.map((function(e){var n,t,i=e.pipelineOrJob,o=e.repoAddress;return(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:(0,O.jsxs)(Ke.Z,{direction:"column",spacing:4,children:[(0,O.jsx)(Er.h,{isJob:i.isJob,pipelineName:i.name,pipelineHrefContext:o,truncationThreshold:80}),r?(0,O.jsx)(f.YS,{children:(0,ue.l)(o)}):null,(0,O.jsx)(ri,{children:i.description})]})}),(0,O.jsx)("td",{children:null!==(n=i.schedules)&&void 0!==n&&n.length?(0,O.jsx)(Ke.Z,{direction:"column",spacing:2,children:i.schedules.map((function(e){return(0,O.jsx)(se.rU,{to:(0,E.$U)(o,"/schedules/".concat(e.name)),children:e.name},e.name)}))}):(0,O.jsx)("div",{style:{color:ee.w.Gray200},children:"None"})}),(0,O.jsx)("td",{children:null!==(t=i.sensors)&&void 0!==t&&t.length?(0,O.jsx)(Ke.Z,{direction:"column",spacing:2,children:i.sensors.map((function(e){return(0,O.jsx)(se.rU,{to:(0,E.$U)(o,"/sensors/".concat(e.name)),children:e.name},e.name)}))}):(0,O.jsx)("div",{style:{color:ee.w.Gray200},children:"None"})}),(0,O.jsx)("td",{children:(0,O.jsx)(Ke.Z,{direction:"row",spacing:4,alignItems:"center",children:i.runs.map((function(e){return(0,O.jsx)(fe.hk,{runId:e.runId,status:e.status,size:12},e.id)}))})})]},"".concat(i.name,"-").concat((0,ue.l)(o)))}))})]})},ri=Cn.ZP.div.withConfig({displayName:"PipelineTable__Description",componentId:"sc-3aofwj-0"})(["color:",";font-size:12px;"],ee.w.Gray400),ti=(0,T.Ps)(At||(At=(0,I.Z)(["\n  fragment PipelineTableFragment on Pipeline {\n    id\n    description\n    isJob\n    name\n    modes {\n      id\n      name\n    }\n    runs(limit: 5) {\n      id\n      mode\n      runId\n      status\n    }\n    schedules {\n      id\n      name\n      mode\n    }\n    sensors {\n      id\n      name\n      targets {\n        mode\n        pipelineName\n      }\n    }\n  }\n"]))),ii=(0,T.Ps)(It||(It=(0,I.Z)(["\n  query RepositoryPipelinesListQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      __typename\n      ... on Repository {\n        id\n        pipelines {\n          id\n          ...PipelineTableFragment\n        }\n      }\n      ... on RepositoryNotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"])),ti),oi=function(e){(0,y.Px)();var n=e.display,r=e.repoAddress,t=(0,Ze.$)(r),i=(0,Z.a)(ii,{fetchPolicy:"cache-and-network",variables:{repositorySelector:t}}),o=i.data,s=i.error,a=i.loading,d=null===o||void 0===o?void 0:o.repositoryOrError,u=p.useMemo((function(){return d&&"Repository"===d.__typename?d.pipelines.filter((function(e){return!(0,ae.pv)(e.name)})).map((function(e){return{pipelineOrJob:e,repoAddress:r}})).filter((function(e){var r=e.pipelineOrJob;return"jobs"===n?r.isJob:!r.isJob})):null}),[n,d,r]);return a?null:s||!u?(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"error",title:"Unable to load pipelines",description:"Could not load pipelines for ".concat((0,ue.l)(r))})}):u.length?(0,O.jsx)(ni,{pipelinesOrJobs:u,showRepo:!1}):(0,O.jsx)(l.x,{padding:64,children:(0,O.jsx)(c.t,{icon:"job",title:"jobs"===n?"No jobs found":"No pipelines found",description:(0,O.jsx)("div",{children:"jobs"===n?"This repository does not have any jobs defined.":"This repository does not have any pipelines defined."})})})},si=function(e){var n=e.repoAddress,r=(0,u.UO)().tab,t=(0,ue.l)(n),i=(0,G.Ux)(n),o=p.useMemo((function(){return null===i||void 0===i?void 0:i.repository.pipelines.some((function(e){return!e.isJob}))}),[i]),s=p.useMemo((function(){return[{text:"Assets",href:(0,E.$U)(n,"/assets")},{text:"Jobs",href:(0,E.$U)(n,"/jobs")},o?{text:"Pipelines",href:(0,E.$U)(n,"/pipelines")}:null,{text:"Graphs",href:(0,E.$U)(n,"/graphs")},{text:"Ops",href:(0,E.$U)(n,"/ops")},{text:"Schedules",href:(0,E.$U)(n,"/schedules")},{text:"Sensors",href:(0,E.$U)(n,"/sensors")}].filter(Boolean)}),[o,n]);return(0,O.jsxs)(l.x,{flex:{direction:"column"},style:{height:"100%"},children:[(0,O.jsx)(m.m,{title:(0,O.jsx)(f.X6,{children:t}),tags:(0,O.jsx)(j.V,{icon:"folder",children:"Repository"}),tabs:(0,O.jsx)(g.mQ,{size:"small",selectedTabId:function(){switch(r){case"schedules":return"Schedules";case"sensors":return"Sensors";case"solids":return"Solids";case"ops":return"Ops";case"graphs":return"Graphs";case"jobs":default:return"Jobs";case"pipelines":return"Pipelines";case"assets":return"Assets"}}(),children:s.map((function(e){var n=e.href,r=e.text;return(0,O.jsx)(k.f,{id:r,title:r,to:n},r)}))})}),(0,O.jsx)(ai,{children:(0,O.jsxs)(u.rs,{children:[(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/schedules",children:(0,O.jsx)(Jt,{repoAddress:n})}),(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/sensors",children:(0,O.jsx)(Bt,{repoAddress:n})}),(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/assets(/?.*)",children:(0,O.jsx)(Vt,{repoAddress:n})}),(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/ops/:name?",children:(0,O.jsx)(Ft,{repoAddress:n})}),(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/solids/:name?",render:function(e){return(0,O.jsx)(u.l_,{to:e.match.url.replace(/\/solids\/?/,"/ops/")})}}),(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/pipelines",children:(0,O.jsx)(oi,{display:"pipelines",repoAddress:n})}),(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/jobs",children:(0,O.jsx)(oi,{display:"jobs",repoAddress:n})}),(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/graphs",exact:!0,children:(0,O.jsx)(Yt,{repoAddress:n})}),(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/(.*)?",render:function(){return(0,O.jsx)(u.l_,{to:s[0].href})}})]})})]})},ai=Cn.ZP.div.withConfig({displayName:"WorkspaceRepoRoot__Container",componentId:"sc-1buojnr-0"})(["flex:1;flex-grow:1;min-height:0;"]),li=r(36114),ci=function(){var e=(0,u.UO)().repoPath,n=p.useContext(G.C5),r=(0,li.g)(e);return r?n.loading?(0,O.jsx)("div",{}):n.allRepos.find((function(e){return e.repository.name===r.name&&e.repositoryLocation.name===r.location}))?(0,O.jsxs)(u.rs,{children:[(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/graphs/(/?.*)",children:(0,O.jsx)(qr,{repoAddress:r})}),(0,O.jsx)(u.AW,{path:["/workspace/:repoPath/pipelines/(/?.*)","/workspace/:repoPath/jobs/(/?.*)","/workspace/:repoPath/pipeline_or_job/(/?.*)"],children:(0,O.jsx)(Kn,{repoAddress:r})}),(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/schedules/:scheduleName/:runTab?",children:(0,O.jsx)(Ir,{repoAddress:r})}),(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/sensors/:sensorName",children:(0,O.jsx)(zr,{repoAddress:r})}),(0,O.jsx)(u.AW,{path:["/workspace/:repoPath/asset-groups/:groupName/list(/?.*)"],children:(0,O.jsx)(_,{repoAddress:r,tab:"list"})}),(0,O.jsx)(u.AW,{path:["/workspace/:repoPath/asset-groups/:groupName/(/?.*)","/workspace/:repoPath/asset-groups/:groupName"],children:(0,O.jsx)(_,{repoAddress:r,tab:"lineage"})}),(0,O.jsx)(u.AW,{path:"/workspace/:repoPath/:tab?",children:(0,O.jsx)(si,{repoAddress:r})})]}):(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"error",title:"Unknown repository",description:(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{children:(0,O.jsx)("strong",{children:e})}),"  is not loaded in the current workspace."]})})}):(0,O.jsx)(l.x,{padding:{vertical:64},children:(0,O.jsx)(c.t,{icon:"error",title:"Invalid repository",description:(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{children:(0,O.jsx)("strong",{children:e})}),"  is not a valid repository path."]})})})},di=function(){var e=(0,h.gV)().flagNewWorkspace;return(0,O.jsx)(d.M,{children:(0,O.jsxs)(u.rs,{children:[(0,O.jsx)(u.AW,{path:"/workspace",exact:!0,children:(0,O.jsx)(pt,{})}),e?(0,O.jsx)(u.AW,{path:"/workspace/jobs",exact:!0,children:(0,O.jsx)(tt,{})}):null,(0,O.jsx)(u.AW,{path:["/workspace/pipelines/:pipelinePath","/workspace/jobs/:pipelinePath"],children:(0,O.jsx)(ht,{})}),(0,O.jsx)(u.AW,{path:"/workspace/:repoPath",children:(0,O.jsx)(ci,{})})]})})},pi=di}}]);
//# sourceMappingURL=886.9878b439.chunk.js.map