{"version":3,"file":"static/js/107.ea56275e.chunk.js","mappings":"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","sources":["../../core/src/app/GraphQueryImpl.ts","../../core/src/app/browser.tsx","../../core/src/app/titleOfIO.ts","../../core/src/asset-graph/AssetEdges.tsx","../../core/src/asset-graph/AssetGraphJobSidebar.tsx","../../core/src/asset-graph/SidebarAssetInfo.tsx","../../core/src/asset-graph/useFindAssetLocation.tsx","../../core/src/asset-graph/AssetGraphExplorer.tsx","../../core/src/asset-graph/AssetGroupNode.tsx","../../core/src/asset-graph/AssetNode.tsx","../../core/src/asset-graph/ForeignNode.tsx","../../core/src/asset-graph/layout.ts","../../core/src/asset-graph/useAssetGraphData.tsx","../../core/src/asset-graph/useLiveDataForAssetKeys.tsx","../../core/src/assets/AssetConfig.tsx","../../core/src/assets/AssetDefinedInMultipleReposNotice.tsx","../../core/src/assets/AssetLineageElements.tsx","../../core/src/assets/AssetEventsTable.tsx","../../core/src/assets/AssetMaterializationGraphs.tsx","../../core/src/assets/CurrentRunsBanner.tsx","../../ui/src/components/Warning.tsx","../../core/src/assets/FailedRunsSinceMaterializationBanner.tsx","../../core/src/assets/LastMaterializationMetadata.tsx","../../core/src/assets/groupByPartition.tsx","../../core/src/assets/AssetEvents.tsx","../../core/src/assets/AssetLink.tsx","../../core/src/assets/AssetMetadata.tsx","../../core/src/assets/AssetPageHeader.tsx","../../core/src/assets/AssetValueGraph.tsx","../../core/src/assets/AssetWipeDialog.tsx","../../core/src/assets/AssetTable.tsx","../../core/src/assets/AssetsEmptyState.tsx","../../core/src/assets/useAssetView.tsx","../../core/src/assets/AssetsCatalogTable.tsx","../../core/src/partitions/PartitionsBackfill.tsx","../../core/src/assets/RunningBackfillsNotice.tsx","../../core/src/assets/LaunchAssetChoosePartitionsDialog.tsx","../../core/src/assets/LaunchAssetExecutionButton.tsx","../../core/src/assets/PartitionHealthSummary.tsx","../../core/src/dagstertype/DagsterType.tsx","../../core/src/gantt/Constants.ts","../../core/src/gantt/DynamicStepSupport.tsx","../../core/src/gantt/GanttChart.tsx","../../core/src/gantt/GanttChartModeControl.tsx","../../core/src/gantt/GanttChartTimescale.tsx","../../core/src/gantt/ZoomSlider.tsx","../../core/src/gantt/useGanttChartMode.tsx","../../core/src/gantt/GanttChartLayout.ts","../../core/src/gantt/RunGroupPanel.tsx","../../core/src/gantt/GanttStatusPanel.tsx","../../core/src/gantt/VizComponents.tsx","../../core/src/gantt/toGraphQueryItems.tsx","../../core/src/gantt/useViewport.tsx","../../core/src/graph/OpIOBox.tsx","../../core/src/graph/OpNode.tsx","../../core/src/graph/OpTags.tsx","../../core/src/graph/makeSVGPortable.tsx","../../core/src/graph/SVGViewport.tsx","../../core/src/graph/layout.ts","../../core/src/graph/asyncGraphLayout.ts","../../core/src/graph/common.ts","../../core/src/hooks/useDocumentTitle.tsx","../../core/src/hooks/useQueryPersistedState.tsx","../../core/src/hooks/useSelectionReducer.ts","../../core/src/instance/BackfillPartitionsRequestedDialog.tsx","../../core/src/instance/BackfillStepStatusDialog.tsx","../../core/src/instance/BackfillTerminationDialog.tsx","../../core/src/instance/BackfillTable.tsx","../../core/src/instance/BackfillUtils.tsx","../../core/src/runs/RunStatusPez.tsx","../../core/src/instance/JobMenu.tsx","../../core/src/instance/JobTable.tsx","../../core/src/instance/StepSummaryForRun.tsx","../../core/src/instance/LastRunSummary.tsx","../../core/src/instance/NextTick.tsx","../../core/src/instance/RepoFilterButton.tsx","../../core/src/instigation/InstigationTick.tsx","../../core/src/instigation/InstigationUtils.tsx","../../core/src/instigation/Unloadable.tsx","../../core/src/launchpad/ConfigEditorConfigPicker.tsx","../../core/src/launchpad/LaunchButton.tsx","../../core/src/launchpad/LaunchRootExecutionButton.tsx","../../core/src/launchpad/LaunchpadTransientSessionContainer.tsx","../../core/src/launchpad/LaunchpadRoot.tsx","../../ui/src/components/configeditor/codemirror-yaml/lint.js","../../ui/src/components/configeditor/codemirror-yaml/mode.tsx","../../ui/src/components/ConfigEditor.tsx","../../ui/src/components/configeditor/isHelpContextEqual.ts","../../ui/src/components/configeditor/ConfigEditorHelp.tsx","../../core/src/configeditor/ConfigEditorUtils.tsx","../../core/src/launchpad/ConfigEditorModePicker.tsx","../../core/src/launchpad/OpSelector.tsx","../../core/src/launchpad/RunPreview.tsx","../../core/src/launchpad/scaffoldType.ts","../../core/src/launchpad/LaunchpadSession.tsx","../../core/src/launchpad/LaunchpadSessionError.tsx","../../core/src/launchpad/LaunchpadSessionLoading.tsx","../../core/src/launchpad/LoadingOverlay.tsx","../../core/src/launchpad/SessionSettingsBar.tsx","../../core/src/launchpad/TagEditor.tsx","../../core/src/launchpad/showLaunchError.tsx","../../core/src/nav/RepositoryLink.tsx","../../core/src/nav/ScheduleOrSensorTag.tsx","../../core/src/ops/OpTypeSignature.tsx","../../core/src/partitions/PartitionRangeInput.tsx","../../core/src/partitions/PartitionStatus.tsx","../../core/src/partitions/PartitionRunListForStep.tsx","../../core/src/partitions/PartitionStepStatus.tsx","../../core/src/partitions/RunMatrixUtils.tsx","../../core/src/partitions/useMatrixData.tsx","../../core/src/partitions/usePartitionStepQuery.tsx","../../core/src/pipelines/CompositeSupport.ts","../../core/src/pipelines/Description.tsx","../../core/src/graph/OpEdges.tsx","../../core/src/graph/SVGComponents.tsx","../../core/src/graph/ExternalConnectionNode.tsx","../../core/src/graph/MappingLine.tsx","../../core/src/graph/ParentOpNode.tsx","../../core/src/graph/OpGraph.tsx","../../core/src/typeexplorer/TypeExplorer.tsx","../../core/src/typeexplorer/TypeExplorerContainer.tsx","../../core/src/typeexplorer/TypeList.tsx","../../core/src/typeexplorer/TypeListContainer.tsx","../../core/src/pipelines/SidebarOpExecutionGraphs.tsx","../../core/src/pipelines/SidebarOpInvocation.tsx","../../core/src/pipelines/SidebarOp.tsx","../../core/src/pipelines/SidebarRoot.tsx","../../core/src/pipelines/GraphExplorer.tsx","../../core/src/pipelines/GraphNotices.tsx","../../core/src/pipelines/NonIdealPipelineQueryResult.tsx","../../core/src/pipelines/PipelineExplorerRoot.tsx","../../core/src/pipelines/PipelineReference.tsx","../../core/src/pipelines/PipelineRunsRoot.tsx","../../core/src/pipelines/SidebarComponents.tsx","../../core/src/pipelines/SidebarResourcesSection.tsx","../../core/src/pipelines/SidebarContainerOverview.tsx","../../core/src/pipelines/SidebarOpDefinition.tsx","../../core/src/pipelines/SidebarOpHelpers.tsx","../../core/src/pipelines/useJobTitle.tsx","../../core/src/plugins/generic.tsx","../../core/src/plugins/ipynb.tsx","../../core/src/plugins/sql.tsx","../../core/src/plugins/index.ts","../../core/src/runs/LogLevel.ts","../../core/src/runs/LogsRowComponents.tsx","../../core/src/runs/CellTruncationProvider.tsx","../../core/src/runs/LogsRowStructuredContent.tsx","../../core/src/runs/LogsRow.tsx","../../core/src/runs/LogsScrollingTable.tsx","../../core/src/runs/LogsScrollingTableHeader.tsx","../../core/src/runs/NavitationBlock.tsx","../../core/src/hooks/useOnBeforeUnload.tsx","../../core/src/runs/batchRunsForTimeline.tsx","../../core/src/runs/RunTimeline.tsx","../../core/src/ui/findDuplicateRepoNames.tsx","../../core/src/runs/QueryfulRunTimeline.tsx","../../core/src/runs/RepoSectionHeader.tsx","../../core/src/runs/RunActionButtons.tsx","../../core/src/runs/RunAssetKeyTags.tsx","../../core/src/runs/RunContext.tsx","../../core/src/runs/RunDetails.tsx","../../core/src/runs/RunFragments.tsx","../../core/src/runs/RunMetadataProvider.tsx","../../core/src/runs/RunStats.tsx","../../core/src/runs/RunStatusDots.tsx","../../core/src/runs/RunStatusTag.tsx","../../core/src/runs/RunStatuses.tsx","../../core/src/runs/DeletionDialog.tsx","../../core/src/runs/ReexecutionDialog.tsx","../../core/src/runs/RunActionsMenu.tsx","../../core/src/runs/RunTable.tsx","../../core/src/runs/RunTag.tsx","../../core/src/runs/RunTags.tsx","../../core/src/runs/RunUtils.tsx","../../core/src/runs/RunsFilterInput.tsx","../../core/src/runs/TerminationDialog.tsx","../../core/src/runs/TimeElapsed.tsx","../../core/src/runs/getRunFilterProviders.ts","../../core/src/runs/logNodeLevel.tsx","../../core/src/runs/useCursorPaginatedQuery.tsx","../../core/src/runs/useJobReExecution.tsx","../../core/src/schedules/SchedulePartitionStatus.tsx","../../core/src/schedules/ScheduleUtils.tsx","../../core/src/schedules/SchedulerInfo.tsx","../../core/src/schedules/SchedulesNextTicks.tsx","../../core/src/schedules/SchedulesTable.tsx","../../core/src/schedules/TimestampDisplay.tsx","../../core/src/sensors/EditCursorDialog.tsx","../../core/src/sensors/SensorDetails.tsx","../../core/src/sensors/SensorFragment.tsx","../../core/src/sensors/SensorInfo.tsx","../../core/src/sensors/SensorsTable.tsx","../../core/src/typeexplorer/ConfigTypeSchema.tsx","../../core/src/typeexplorer/TypeWithTooltip.tsx","../../core/src/ui/AnchorButton.tsx","../../core/src/ui/ClearButton.tsx","../../core/src/ui/GraphQueryInput.tsx","../../core/src/ui/Loading.tsx","../../core/src/ui/MenuLink.tsx","../../core/src/ui/StickyTableContainer.tsx","../../core/src/ui/TabLink.tsx","../../core/src/ui/markdownToPlaintext.ts","../../core/src/ui/useRepoExpansionState.tsx","../../core/src/workspace/ReloadAllButton.tsx","../../core/src/workspace/useRepositoryForRun.ts","../../ui/src/components/Alert.tsx","../../ui/src/components/ButtonGroup.tsx","../../ui/src/components/CodeMirror.tsx","../../ui/src/components/ConfigTypeSchema.tsx","../../ui/src/components/CursorControls.tsx","../../ui/src/components/MainContent.tsx","../../ui/src/components/Menu.tsx","../../ui/src/components/MetadataTable.tsx","../../ui/src/components/NonIdealState.tsx","../../ui/src/components/Page.tsx","../../ui/src/components/PageHeader.tsx","../../ui/src/components/Select.tsx","../../ui/src/components/Slider.tsx","../../ui/src/components/SplitPanelContainer.tsx","../../ui/src/components/Tabs.tsx","../../ui/src/components/TokenizingField.tsx"],"sourcesContent":["import {isPlannedDynamicStep, dynamicKeyWithoutIndex} from '../gantt/DynamicStepSupport';\n\nconst MAX_RENDERED_FOR_EMPTY_QUERY = 100;\n\nexport interface GraphQueryItem {\n  name: string;\n  inputs: {\n    dependsOn: {\n      solid: {\n        name: string;\n      };\n    }[];\n  }[];\n  outputs: {\n    dependedBy: {\n      solid: {\n        name: string;\n      };\n    }[];\n  }[];\n}\n\ntype TraverseStepFunction<T> = (item: T, callback: (nextItem: T) => void) => void;\n\nclass GraphTraverser<T extends GraphQueryItem> {\n  itemNameMap: {[name: string]: T} = {};\n\n  // TODO: One reason doing DFS on the client side is sub optimal.\n  // javascript is tail end recursive tho so we could go for ever without worrying about\n  // stack overflow problems?\n\n  constructor(items: T[]) {\n    items.forEach((item) => (this.itemNameMap[item.name] = item));\n  }\n\n  itemNamed(name: string): T | undefined {\n    return this.itemNameMap[name];\n  }\n\n  traverse(\n    item: T,\n    step: TraverseStepFunction<T>,\n    depth: number,\n    results: {[key: string]: T} = {},\n  ) {\n    results[item.name] = item;\n\n    if (depth > 0) {\n      step(item, (next) => {\n        if (!(next.name in results)) {\n          this.traverse(next, step, depth - 1, results);\n        }\n      });\n    }\n    return Object.values(results);\n  }\n\n  fetchUpstream(item: T, depth: number) {\n    const step: TraverseStepFunction<T> = (item, callback) =>\n      item.inputs.forEach((input) =>\n        input.dependsOn.forEach((d) => {\n          const item = this.itemNamed(d.solid.name);\n          item && callback(item);\n        }),\n      );\n\n    return this.traverse(item, step, depth);\n  }\n\n  fetchDownstream(item: T, depth: number) {\n    const step: TraverseStepFunction<T> = (item, callback) =>\n      item.outputs.forEach((output) =>\n        output.dependedBy.forEach((d) => {\n          const item = this.itemNamed(d.solid.name);\n          item && callback(item);\n        }),\n      );\n\n    return this.traverse(item, step, depth);\n  }\n}\n\nfunction expansionDepthForClause(clause: string) {\n  return clause.includes('*') ? Number.MAX_SAFE_INTEGER : clause.length;\n}\n\nexport function filterByQuery<T extends GraphQueryItem>(items: T[], query: string) {\n  if (query === '*') {\n    return {all: items, applyingEmptyDefault: false, focus: []};\n  }\n  if (query === '') {\n    return {\n      all: items.length >= MAX_RENDERED_FOR_EMPTY_QUERY ? [] : items,\n      applyingEmptyDefault: items.length >= MAX_RENDERED_FOR_EMPTY_QUERY,\n      focus: [],\n    };\n  }\n\n  const traverser = new GraphTraverser<T>(items);\n  const results = new Set<T>();\n  const clauses = query.split(/(,| AND | and | )/g);\n  const focus = new Set<T>();\n\n  for (const clause of clauses) {\n    const parts = /(\\*?\\+*)([.\\w\\d>\\[\\?\\]\\\"_\\/-]+)(\\+*\\*?)/.exec(clause.trim());\n    if (!parts) {\n      continue;\n    }\n    const [, parentsClause, itemName, descendentsClause] = parts;\n\n    const itemsMatching = items.filter((s) => {\n      if (isPlannedDynamicStep(itemName.replace(/\\\"/g, ''))) {\n        // When unresolved dynamic step (i.e ends with `[?]`) is selected, match all dynamic steps\n        return s.name.startsWith(dynamicKeyWithoutIndex(itemName.replace(/\\\"/g, '')));\n      } else {\n        return /\\\".*\\\"/.test(itemName)\n          ? s.name === itemName.replace(/\\\"/g, '')\n          : s.name.includes(itemName);\n      }\n    });\n\n    for (const item of itemsMatching) {\n      const upDepth = expansionDepthForClause(parentsClause);\n      const downDepth = expansionDepthForClause(descendentsClause);\n\n      focus.add(item);\n      results.add(item);\n      traverser.fetchUpstream(item, upDepth).forEach((other) => results.add(other));\n      traverser.fetchDownstream(item, downDepth).forEach((other) => results.add(other));\n    }\n  }\n\n  return {\n    all: Array.from(results),\n    focus: Array.from(focus),\n    applyingEmptyDefault: false,\n  };\n}\n","import * as React from 'react';\n\n/**\n * A hook that provides a mechanism for copying a string, triggered by user\n * behavior. If the Clipboard API is available, use it directly.\n *\n * The Clipboard can be undefined in an insecure context\n * (https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API), so we\n * also provide a fallback that uses an offscreen input and `execCommand` to\n * copy the contents. This is less ideal because it steals focus and is a DOM\n * hack, but it should still be effective enough for our needs.\n */\nexport const useCopyToClipboard = () => {\n  const clipboardAPI = navigator.clipboard;\n  const node = React.useRef<HTMLInputElement | null>(null);\n\n  React.useEffect(() => {\n    if (!clipboardAPI) {\n      node.current = document.createElement('input');\n      node.current.style.position = 'fixed';\n      node.current.style.top = '-10000px';\n      document.body.appendChild(node.current);\n    }\n\n    return () => {\n      node.current && document.body.removeChild(node.current);\n    };\n  }, [clipboardAPI]);\n\n  return React.useCallback(\n    (text: string) => {\n      if (clipboardAPI) {\n        clipboardAPI.writeText(text);\n      } else if (node.current) {\n        node.current.value = text;\n        node.current.select();\n        document.execCommand('copy');\n      }\n    },\n    [clipboardAPI],\n  );\n};\n","export const DEFAULT_RESULT_NAME = 'result';\n\nexport const titleOfIO = (i: {solid: {name: string}; definition: {name: string}}) => {\n  return i.solid.name !== DEFAULT_RESULT_NAME\n    ? `${i.solid.name}:${i.definition.name}`\n    : i.solid.name;\n};\n","import {Colors} from '@dagster-io/ui';\nimport React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {buildSVGPath} from './Utils';\nimport {AssetLayoutEdge} from './layout';\n\nexport const AssetConnectedEdges: React.FC<{\n  edges: AssetLayoutEdge[];\n  highlighted: string | null;\n}> = ({edges, highlighted}) => {\n  // Note: we render the highlighted edges twice, but it's so that the first item with\n  // all the edges in it can remain memoized.\n  return (\n    <React.Fragment>\n      <AssetEdges color={Colors.KeylineGray} edges={edges} />\n      <AssetEdges\n        color={Colors.Blue500}\n        edges={edges.filter(({fromId, toId}) => highlighted === fromId || highlighted === toId)}\n      />\n    </React.Fragment>\n  );\n};\n\nexport const AssetEdges: React.FC<{edges: AssetLayoutEdge[]; color: string}> = React.memo(\n  ({edges, color}) => (\n    <>\n      <defs>\n        <marker\n          id={`arrow${btoa(color)}`}\n          viewBox=\"0 0 8 10\"\n          refX=\"1\"\n          refY=\"5\"\n          markerUnits=\"strokeWidth\"\n          markerWidth=\"4\"\n          orient=\"auto\"\n        >\n          <path d=\"M 0 0 L 8 5 L 0 10 z\" fill={color} />\n        </marker>\n      </defs>\n      {edges.map((edge, idx) => (\n        <StyledPath\n          key={idx}\n          d={buildSVGPath({source: edge.from, target: edge.to})}\n          stroke={color}\n          markerEnd={`url(#arrow${btoa(color)})`}\n        />\n      ))}\n    </>\n  ),\n);\n\nconst StyledPath = styled('path')`\n  stroke-width: 4;\n  fill: none;\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport * as React from 'react';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {NonIdealPipelineQueryResult} from '../pipelines/NonIdealPipelineQueryResult';\nimport {\n  SidebarContainerOverview,\n  SIDEBAR_ROOT_CONTAINER_FRAGMENT,\n} from '../pipelines/SidebarContainerOverview';\nimport {PipelineSelector} from '../types/globalTypes';\nimport {Loading} from '../ui/Loading';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\n\nimport {\n  AssetGraphSidebarQuery,\n  AssetGraphSidebarQueryVariables,\n} from './types/AssetGraphSidebarQuery';\n\nexport const AssetGraphJobSidebar: React.FC<{\n  pipelineSelector: PipelineSelector;\n}> = ({pipelineSelector}) => {\n  const queryResult = useQuery<AssetGraphSidebarQuery, AssetGraphSidebarQueryVariables>(\n    ASSET_GRAPH_JOB_SIDEBAR,\n    {\n      fetchPolicy: 'cache-and-network',\n      partialRefetch: true,\n      variables: {pipelineSelector},\n    },\n  );\n\n  const {repositoryName, repositoryLocationName} = pipelineSelector;\n  const repoAddress = buildRepoAddress(repositoryName, repositoryLocationName);\n\n  return (\n    <Loading queryResult={queryResult}>\n      {({pipelineSnapshotOrError}) => {\n        if (pipelineSnapshotOrError.__typename !== 'PipelineSnapshot') {\n          return <NonIdealPipelineQueryResult isGraph result={pipelineSnapshotOrError} />;\n        }\n        return (\n          <SidebarContainerOverview container={pipelineSnapshotOrError} repoAddress={repoAddress} />\n        );\n      }}\n    </Loading>\n  );\n};\n\nconst ASSET_GRAPH_JOB_SIDEBAR = gql`\n  query AssetGraphSidebarQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        ...SidebarRootContainerFragment\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ${SIDEBAR_ROOT_CONTAINER_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, ConfigTypeSchema, Icon, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {ASSET_NODE_CONFIG_FRAGMENT} from '../assets/AssetConfig';\nimport {AssetDefinedInMultipleReposNotice} from '../assets/AssetDefinedInMultipleReposNotice';\nimport {AssetEvents} from '../assets/AssetEvents';\nimport {\n  AssetMetadataTable,\n  ASSET_NODE_OP_METADATA_FRAGMENT,\n  metadataForAssetNode,\n} from '../assets/AssetMetadata';\nimport {PartitionHealthSummary, usePartitionHealthData} from '../assets/PartitionHealthSummary';\nimport {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';\nimport {AssetKey} from '../assets/types';\nimport {DagsterTypeSummary} from '../dagstertype/DagsterType';\nimport {DagsterTypeFragment} from '../dagstertype/types/DagsterTypeFragment';\nimport {METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {Description} from '../pipelines/Description';\nimport {SidebarSection, SidebarTitle} from '../pipelines/SidebarComponents';\nimport {pluginForMetadata} from '../plugins';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\n\nimport {LiveDataForNode, displayNameForAssetKey} from './Utils';\nimport {SidebarAssetQuery, SidebarAssetQueryVariables} from './types/SidebarAssetQuery';\n\nexport const SidebarAssetInfo: React.FC<{\n  assetKey: AssetKey;\n  liveData: LiveDataForNode;\n}> = ({assetKey, liveData}) => {\n  const partitionHealthData = usePartitionHealthData([assetKey]);\n  const {data} = useQuery<SidebarAssetQuery, SidebarAssetQueryVariables>(SIDEBAR_ASSET_QUERY, {\n    variables: {assetKey: {path: assetKey.path}},\n    fetchPolicy: 'cache-and-network',\n  });\n\n  const {lastMaterialization} = liveData || {};\n  const asset = data?.assetNodeOrError.__typename === 'AssetNode' ? data.assetNodeOrError : null;\n  if (!asset) {\n    return (\n      <>\n        <Header assetKey={assetKey} />\n        <Box padding={{vertical: 64}}>\n          <Spinner purpose=\"section\" />\n        </Box>\n      </>\n    );\n  }\n\n  const repoAddress = buildRepoAddress(asset.repository.name, asset.repository.location.name);\n  const {assetMetadata, assetType} = metadataForAssetNode(asset);\n  const hasAssetMetadata = assetType || assetMetadata.length > 0;\n  const assetConfigSchema = asset.configField?.configType;\n\n  const OpMetadataPlugin = asset.op?.metadata && pluginForMetadata(asset.op.metadata);\n\n  return (\n    <>\n      <Header assetKey={assetKey} opName={asset.op?.name} />\n\n      <AssetDefinedInMultipleReposNotice\n        assetKey={assetKey}\n        loadedFromRepo={repoAddress}\n        padded={false}\n      />\n\n      <AssetEvents\n        assetKey={assetKey}\n        assetLastMaterializedAt={lastMaterialization?.timestamp}\n        assetHasDefinedPartitions={!!asset.partitionDefinition}\n        asSidebarSection\n        liveData={liveData}\n        paramsTimeWindowOnly={false}\n        params={{}}\n        setParams={() => {}}\n      />\n\n      <div style={{borderBottom: `2px solid ${Colors.Gray300}`}} />\n\n      {(asset.description || OpMetadataPlugin?.SidebarComponent || !hasAssetMetadata) && (\n        <SidebarSection title=\"Description\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <Description description={asset.description || 'No description provided.'} />\n          </Box>\n          {asset.op && OpMetadataPlugin?.SidebarComponent && (\n            <OpMetadataPlugin.SidebarComponent definition={asset.op} repoAddress={repoAddress} />\n          )}\n        </SidebarSection>\n      )}\n\n      {assetConfigSchema && (\n        <SidebarSection title=\"Config\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <ConfigTypeSchema\n              type={assetConfigSchema}\n              typesInScope={assetConfigSchema.recursiveConfigTypes}\n            />\n          </Box>\n        </SidebarSection>\n      )}\n\n      {assetMetadata.length > 0 && (\n        <SidebarSection title=\"Metadata\">\n          <AssetMetadataTable assetMetadata={assetMetadata} />\n        </SidebarSection>\n      )}\n\n      {assetType && <TypeSidebarSection assetType={assetType} />}\n\n      {asset.partitionDefinition && (\n        <SidebarSection title=\"Partitions\">\n          <Box padding={{vertical: 16, horizontal: 24}} flex={{direction: 'column', gap: 16}}>\n            <p>{asset.partitionDefinition}</p>\n            <PartitionHealthSummary assetKey={asset.assetKey} data={partitionHealthData} />\n          </Box>\n        </SidebarSection>\n      )}\n    </>\n  );\n};\n\nconst TypeSidebarSection: React.FC<{\n  assetType: DagsterTypeFragment;\n}> = ({assetType}) => {\n  return (\n    <SidebarSection title=\"Type\">\n      <DagsterTypeSummary type={assetType} />\n    </SidebarSection>\n  );\n};\n\nconst Header: React.FC<{assetKey: AssetKey; opName?: string}> = ({assetKey, opName}) => {\n  const displayName = displayNameForAssetKey(assetKey);\n\n  return (\n    <Box flex={{gap: 4, direction: 'column'}} margin={{left: 24, right: 12, vertical: 16}}>\n      <SidebarTitle\n        style={{\n          marginBottom: 0,\n          display: 'flex',\n          justifyContent: 'space-between',\n          flexWrap: 'wrap',\n        }}\n      >\n        <Box>{displayName}</Box>\n        {displayName !== opName ? (\n          <Box style={{opacity: 0.5}} flex={{gap: 6, alignItems: 'center'}}>\n            <Icon name=\"op\" size={16} />\n            {opName}\n          </Box>\n        ) : undefined}\n      </SidebarTitle>\n      <AssetCatalogLink to={assetDetailsPathForKey(assetKey)}>\n        {'View in Asset Catalog '}\n        <Icon name=\"open_in_new\" color={Colors.Link} />\n      </AssetCatalogLink>\n    </Box>\n  );\n};\nconst AssetCatalogLink = styled(Link)`\n  display: flex;\n  gap: 5px;\n  padding: 6px;\n  margin: -6px;\n  align-items: center;\n  white-space: nowrap;\n`;\n\nexport const SIDEBAR_ASSET_FRAGMENT = gql`\n  fragment SidebarAssetFragment on AssetNode {\n    id\n    description\n    ...AssetNodeConfigFragment\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    partitionDefinition\n    assetKey {\n      path\n    }\n    op {\n      name\n      description\n      metadata {\n        key\n        value\n      }\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n\n    ...AssetNodeOpMetadataFragment\n  }\n  ${ASSET_NODE_CONFIG_FRAGMENT}\n  ${ASSET_NODE_OP_METADATA_FRAGMENT}\n  ${METADATA_ENTRY_FRAGMENT}\n`;\n\nconst SIDEBAR_ASSET_QUERY = gql`\n  query SidebarAssetQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      __typename\n      ... on AssetNode {\n        id\n        ...SidebarAssetFragment\n      }\n    }\n  }\n  ${SIDEBAR_ASSET_FRAGMENT}\n`;\n","import {gql, useApolloClient} from '@apollo/client';\nimport React from 'react';\n\nimport {AssetKey} from '../assets/types';\nimport {AssetKeyInput} from '../types/globalTypes';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {RepoAddress} from '../workspace/types';\n\nimport {isHiddenAssetGroupJob} from './Utils';\nimport {\n  AssetForNavigationQuery,\n  AssetForNavigationQueryVariables,\n} from './types/AssetForNavigationQuery';\n\nexport interface AssetLocation {\n  assetKey: AssetKey;\n  opNames: string[];\n  jobName: string | null;\n  groupName: string | null;\n  repoAddress: RepoAddress | null;\n}\n\nexport function useFindAssetLocation() {\n  const apollo = useApolloClient();\n\n  return React.useCallback(\n    async (key: AssetKeyInput): Promise<AssetLocation> => {\n      const {data} = await apollo.query<AssetForNavigationQuery, AssetForNavigationQueryVariables>({\n        query: ASSET_FOR_NAVIGATION_QUERY,\n        variables: {key},\n      });\n      if (data?.assetOrError.__typename === 'Asset' && data?.assetOrError.definition) {\n        const def = data.assetOrError.definition;\n        return {\n          assetKey: key,\n          opNames: def.opNames,\n          jobName: def.jobNames.find((jobName) => !isHiddenAssetGroupJob(jobName)) || null,\n          groupName: def.groupName,\n          repoAddress: def.repository\n            ? buildRepoAddress(def.repository.name, def.repository.location.name)\n            : null,\n        };\n      }\n      return {assetKey: key, opNames: [], jobName: null, groupName: null, repoAddress: null};\n    },\n    [apollo],\n  );\n}\n\nconst ASSET_FOR_NAVIGATION_QUERY = gql`\n  query AssetForNavigationQuery($key: AssetKeyInput!) {\n    assetOrError(assetKey: $key) {\n      __typename\n      ... on Asset {\n        id\n        definition {\n          id\n          opNames\n          jobNames\n          groupName\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n","import {Box, Checkbox, NonIdealState, SplitPanelContainer} from '@dagster-io/ui';\nimport pickBy from 'lodash/pickBy';\nimport uniq from 'lodash/uniq';\nimport without from 'lodash/without';\nimport React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {GraphQueryItem} from '../app/GraphQueryImpl';\nimport {\n  FIFTEEN_SECONDS,\n  QueryRefreshCountdown,\n  QueryRefreshState,\n  useQueryRefreshAtInterval,\n} from '../app/QueryRefresh';\nimport {LaunchAssetExecutionButton} from '../assets/LaunchAssetExecutionButton';\nimport {AssetKey} from '../assets/types';\nimport {SVGViewport} from '../graph/SVGViewport';\nimport {useAssetLayout} from '../graph/asyncGraphLayout';\nimport {closestNodeInDirection} from '../graph/common';\nimport {\n  GraphExplorerOptions,\n  OptionsOverlay,\n  QueryOverlay,\n  RightInfoPanel,\n  RightInfoPanelContent,\n} from '../pipelines/GraphExplorer';\nimport {\n  EmptyDAGNotice,\n  EntirelyFilteredDAGNotice,\n  LargeDAGNotice,\n  LoadingNotice,\n} from '../pipelines/GraphNotices';\nimport {ExplorerPath} from '../pipelines/PipelinePathUtils';\nimport {useDidLaunchEvent} from '../runs/RunUtils';\nimport {GraphQueryInput} from '../ui/GraphQueryInput';\nimport {Loading} from '../ui/Loading';\n\nimport {AssetConnectedEdges} from './AssetEdges';\nimport {AssetGraphJobSidebar} from './AssetGraphJobSidebar';\nimport {AssetGroupNode} from './AssetGroupNode';\nimport {AssetNode, AssetNodeMinimal} from './AssetNode';\nimport {ForeignNode} from './ForeignNode';\nimport {SidebarAssetInfo} from './SidebarAssetInfo';\nimport {\n  GraphData,\n  graphHasCycles,\n  LiveData,\n  GraphNode,\n  isSourceAsset,\n  tokenForAssetKey,\n} from './Utils';\nimport {AssetGraphLayout} from './layout';\nimport {AssetGraphQuery_assetNodes} from './types/AssetGraphQuery';\nimport {AssetGraphFetchScope, useAssetGraphData} from './useAssetGraphData';\nimport {AssetLocation, useFindAssetLocation} from './useFindAssetLocation';\nimport {useLiveDataForAssetKeys} from './useLiveDataForAssetKeys';\n\ntype AssetNode = AssetGraphQuery_assetNodes;\n\ninterface Props {\n  options: GraphExplorerOptions;\n  setOptions?: (options: GraphExplorerOptions) => void;\n\n  fetchOptions: AssetGraphFetchScope;\n  fetchOptionFilters?: React.ReactNode;\n\n  explorerPath: ExplorerPath;\n  onChangeExplorerPath: (path: ExplorerPath, mode: 'replace' | 'push') => void;\n  onNavigateToForeignNode: (node: AssetLocation) => void;\n}\n\nexport const MINIMAL_SCALE = 0.5;\n\nexport const AssetGraphExplorer: React.FC<Props> = (props) => {\n  const {\n    fetchResult,\n    assetGraphData,\n    graphQueryItems,\n    graphAssetKeys,\n    allAssetKeys,\n    applyingEmptyDefault,\n  } = useAssetGraphData(props.explorerPath.opsQuery, props.fetchOptions);\n\n  const {liveResult, liveDataByNode} = useLiveDataForAssetKeys(graphAssetKeys);\n  const liveDataRefreshState = useQueryRefreshAtInterval(liveResult, FIFTEEN_SECONDS);\n\n  useDidLaunchEvent(liveResult.refetch);\n\n  return (\n    <Loading allowStaleData queryResult={fetchResult}>\n      {() => {\n        if (!assetGraphData || !allAssetKeys) {\n          return <NonIdealState icon=\"error\" title=\"Query Error\" />;\n        }\n\n        const hasCycles = graphHasCycles(assetGraphData);\n\n        if (hasCycles) {\n          return (\n            <NonIdealState\n              icon=\"error\"\n              title=\"Cycle detected\"\n              description=\"Assets dependencies form a cycle\"\n            />\n          );\n        }\n        return (\n          <AssetGraphExplorerWithData\n            key={props.explorerPath.pipelineName}\n            assetGraphData={assetGraphData}\n            allAssetKeys={allAssetKeys}\n            graphQueryItems={graphQueryItems}\n            applyingEmptyDefault={applyingEmptyDefault}\n            liveDataRefreshState={liveDataRefreshState}\n            liveDataByNode={liveDataByNode}\n            {...props}\n          />\n        );\n      }}\n    </Loading>\n  );\n};\n\nexport const AssetGraphExplorerWithData: React.FC<\n  {\n    allAssetKeys: AssetKey[];\n    assetGraphData: GraphData;\n    graphQueryItems: GraphQueryItem[];\n    liveDataByNode: LiveData;\n    liveDataRefreshState: QueryRefreshState;\n    applyingEmptyDefault: boolean;\n  } & Props\n> = (props) => {\n  const {\n    options,\n    setOptions,\n    explorerPath,\n    onChangeExplorerPath,\n    onNavigateToForeignNode,\n    liveDataRefreshState,\n    liveDataByNode,\n    assetGraphData,\n    graphQueryItems,\n    applyingEmptyDefault,\n    fetchOptions,\n  } = props;\n\n  const findAssetLocation = useFindAssetLocation();\n\n  const [highlighted, setHighlighted] = React.useState<string | null>(null);\n\n  const selectedAssetValues = explorerPath.opNames[explorerPath.opNames.length - 1].split(',');\n  const selectedGraphNodes = Object.values(assetGraphData.nodes).filter((node) =>\n    selectedAssetValues.includes(tokenForAssetKey(node.definition.assetKey)),\n  );\n  const lastSelectedNode = selectedGraphNodes[selectedGraphNodes.length - 1];\n\n  const {layout, loading, async} = useAssetLayout(assetGraphData);\n\n  const viewportEl = React.useRef<SVGViewport>();\n\n  const onSelectNode = React.useCallback(\n    async (\n      e: React.MouseEvent<any> | React.KeyboardEvent<any>,\n      assetKey: {path: string[]},\n      node: GraphNode | null,\n    ) => {\n      e.stopPropagation();\n\n      const token = tokenForAssetKey(assetKey);\n      const nodeIsInDisplayedGraph = node?.definition;\n\n      if (!nodeIsInDisplayedGraph) {\n        // The asset's definition was not provided in our query for job.assetNodes. It's either\n        // in another job or asset group, or is a source asset not defined in any repository.\n        return onNavigateToForeignNode(await findAssetLocation(assetKey));\n      }\n\n      // This asset is in a job and we can stay in the job graph explorer!\n      // If it's in our current job, allow shift / meta multi-selection.\n      let nextOpsNameSelection = token;\n\n      if (e.shiftKey || e.metaKey) {\n        let tokensToAdd = [token];\n        if (e.shiftKey && lastSelectedNode && node) {\n          const tokensInRange = opsInRange({\n            graph: assetGraphData,\n            from: lastSelectedNode,\n            to: node,\n          });\n          if (tokensInRange.length) {\n            tokensToAdd = tokensInRange;\n          }\n        }\n\n        const existing = explorerPath.opNames[0].split(',');\n        nextOpsNameSelection = (existing.includes(token)\n          ? without(existing, token)\n          : uniq([...existing, ...tokensToAdd])\n        ).join(',');\n      }\n\n      const nextCenter = layout?.nodes[nextOpsNameSelection[nextOpsNameSelection.length - 1]];\n      if (nextCenter) {\n        viewportEl.current?.zoomToSVGCoords(nextCenter.bounds.x, nextCenter.bounds.y, true);\n      }\n\n      onChangeExplorerPath(\n        {\n          ...explorerPath,\n          opNames: [nextOpsNameSelection],\n          opsQuery: nodeIsInDisplayedGraph\n            ? explorerPath.opsQuery\n            : `${explorerPath.opsQuery},++\"${token}\"++`,\n          pipelineName: explorerPath.pipelineName,\n        },\n        'replace',\n      );\n    },\n    [\n      explorerPath,\n      onChangeExplorerPath,\n      onNavigateToForeignNode,\n      findAssetLocation,\n      lastSelectedNode,\n      assetGraphData,\n      layout,\n    ],\n  );\n\n  const [lastRenderedLayout, setLastRenderedLayout] = React.useState<AssetGraphLayout | null>(null);\n  const renderingNewLayout = lastRenderedLayout !== layout;\n\n  React.useEffect(() => {\n    if (!renderingNewLayout || !layout || !viewportEl.current) {\n      return;\n    }\n    // The first render where we have our layout and viewport, autocenter or\n    // focus on the selected node. (If selection was specified in the URL).\n    // Don't animate this change.\n    if (lastSelectedNode) {\n      viewportEl.current.zoomToSVGBox(layout.nodes[lastSelectedNode.id].bounds, false);\n      viewportEl.current.focus();\n    } else {\n      viewportEl.current.autocenter(false);\n    }\n    setLastRenderedLayout(layout);\n  }, [renderingNewLayout, lastSelectedNode, layout, viewportEl]);\n\n  const onClickBackground = () =>\n    onChangeExplorerPath(\n      {...explorerPath, pipelineName: explorerPath.pipelineName, opNames: []},\n      'replace',\n    );\n\n  const onArrowKeyDown = (e: React.KeyboardEvent<any>, dir: string) => {\n    if (!layout) {\n      return;\n    }\n    const hasDefinition = (node: {id: string}) => !!assetGraphData.nodes[node.id]?.definition;\n    const layoutWithoutExternalLinks = {...layout, nodes: pickBy(layout.nodes, hasDefinition)};\n\n    const nextId = closestNodeInDirection(layoutWithoutExternalLinks, lastSelectedNode.id, dir);\n    const node = nextId && assetGraphData.nodes[nextId];\n    if (node && viewportEl.current) {\n      onSelectNode(e, node.assetKey, node);\n      viewportEl.current.zoomToSVGBox(layout.nodes[nextId].bounds, true);\n    }\n  };\n\n  return (\n    <SplitPanelContainer\n      identifier=\"explorer\"\n      firstInitialPercent={70}\n      firstMinSize={400}\n      first={\n        <>\n          {graphQueryItems.length === 0 ? (\n            <EmptyDAGNotice nodeType=\"asset\" isGraph />\n          ) : applyingEmptyDefault ? (\n            <LargeDAGNotice nodeType=\"asset\" />\n          ) : Object.keys(assetGraphData.nodes).length === 0 ? (\n            <EntirelyFilteredDAGNotice nodeType=\"asset\" />\n          ) : undefined}\n          {loading || !layout ? (\n            <LoadingNotice async={async} nodeType=\"asset\" />\n          ) : (\n            <SVGViewport\n              ref={(r) => (viewportEl.current = r || undefined)}\n              interactor={SVGViewport.Interactors.PanAndZoom}\n              graphWidth={layout.width}\n              graphHeight={layout.height}\n              onClick={onClickBackground}\n              onArrowKeyDown={onArrowKeyDown}\n              onDoubleClick={(e) => {\n                viewportEl.current?.autocenter(true);\n                e.stopPropagation();\n              }}\n              maxZoom={1.2}\n              maxAutocenterZoom={1.0}\n            >\n              {({scale: _scale}) => (\n                <SVGContainer width={layout.width} height={layout.height}>\n                  <AssetConnectedEdges highlighted={highlighted} edges={layout.edges} />\n\n                  {Object.values(layout.groups)\n                    .sort((a, b) => a.id.length - b.id.length)\n                    .map((group) => (\n                      <foreignObject key={group.id} {...group.bounds}>\n                        <AssetGroupNode group={group} scale={_scale} />\n                      </foreignObject>\n                    ))}\n\n                  {Object.values(layout.nodes).map(({id, bounds}) => {\n                    const graphNode = assetGraphData.nodes[id];\n                    const path = JSON.parse(id);\n\n                    return (\n                      <foreignObject\n                        {...bounds}\n                        key={id}\n                        onMouseEnter={() => setHighlighted(id)}\n                        onMouseLeave={() => setHighlighted(null)}\n                        onClick={(e) => onSelectNode(e, {path}, graphNode)}\n                        onDoubleClick={(e) => {\n                          viewportEl.current?.zoomToSVGBox(bounds, true, 1.2);\n                          e.stopPropagation();\n                        }}\n                        style={{overflow: 'visible'}}\n                      >\n                        {!graphNode || !graphNode.definition.opNames.length ? (\n                          <ForeignNode assetKey={{path}} />\n                        ) : _scale < MINIMAL_SCALE ? (\n                          <AssetNodeMinimal\n                            definition={graphNode.definition}\n                            selected={selectedGraphNodes.includes(graphNode)}\n                          />\n                        ) : (\n                          <AssetNode\n                            definition={graphNode.definition}\n                            liveData={liveDataByNode[graphNode.id]}\n                            selected={selectedGraphNodes.includes(graphNode)}\n                          />\n                        )}\n                      </foreignObject>\n                    );\n                  })}\n                </SVGContainer>\n              )}\n            </SVGViewport>\n          )}\n          {setOptions && (\n            <OptionsOverlay>\n              <Checkbox\n                format=\"switch\"\n                label=\"View as Asset Graph\"\n                checked={options.preferAssetRendering}\n                onChange={() => {\n                  onChangeExplorerPath(\n                    {\n                      ...explorerPath,\n                      opNames:\n                        selectedGraphNodes.length && selectedGraphNodes[0].definition.opNames.length\n                          ? selectedGraphNodes[0].definition.opNames\n                          : [],\n                    },\n                    'replace',\n                  );\n                  setOptions({\n                    ...options,\n                    preferAssetRendering: !options.preferAssetRendering,\n                  });\n                }}\n              />\n            </OptionsOverlay>\n          )}\n\n          <Box\n            flex={{direction: 'column', alignItems: 'flex-end', gap: 8}}\n            style={{position: 'absolute', right: 12, top: 8}}\n          >\n            <Box flex={{alignItems: 'center', gap: 12}}>\n              <QueryRefreshCountdown\n                refreshState={liveDataRefreshState}\n                dataDescription=\"materializations\"\n              />\n\n              <LaunchAssetExecutionButton\n                context={selectedGraphNodes.length ? 'selected' : 'all'}\n                assetKeys={(selectedGraphNodes.length\n                  ? selectedGraphNodes\n                  : Object.values(assetGraphData.nodes).filter((a) => !isSourceAsset(a.definition))\n                ).map((n) => n.assetKey)}\n                preferredJobName={explorerPath.pipelineName}\n              />\n            </Box>\n          </Box>\n          <QueryOverlay>\n            {props.fetchOptionFilters}\n\n            <GraphQueryInput\n              items={graphQueryItems}\n              value={explorerPath.opsQuery}\n              placeholder=\"Type an asset subset\"\n              onChange={(opsQuery) => onChangeExplorerPath({...explorerPath, opsQuery}, 'replace')}\n              popoverPosition=\"bottom-left\"\n            />\n          </QueryOverlay>\n        </>\n      }\n      second={\n        selectedGraphNodes.length === 1 && selectedGraphNodes[0] ? (\n          <RightInfoPanel>\n            <RightInfoPanelContent>\n              <SidebarAssetInfo\n                assetKey={selectedGraphNodes[0].assetKey}\n                liveData={liveDataByNode[selectedGraphNodes[0].id]}\n              />\n            </RightInfoPanelContent>\n          </RightInfoPanel>\n        ) : fetchOptions.pipelineSelector ? (\n          <RightInfoPanel>\n            <RightInfoPanelContent>\n              <AssetGraphJobSidebar pipelineSelector={fetchOptions.pipelineSelector} />\n            </RightInfoPanelContent>\n          </RightInfoPanel>\n        ) : null\n      }\n    />\n  );\n};\n\nconst SVGContainer = styled.svg`\n  overflow: visible;\n  border-radius: 0;\n`;\n\n// Helpers\n\nconst graphDirectionOf = ({\n  graph,\n  from,\n  to,\n}: {\n  graph: GraphData;\n  from: GraphNode;\n  to: GraphNode;\n}) => {\n  const stack = [from];\n  while (stack.length) {\n    const node = stack.pop()!;\n\n    const downstream = [...Object.keys(graph.downstream[node.id] || {})]\n      .map((n) => graph.nodes[n])\n      .filter(Boolean);\n    if (downstream.some((d) => d.id === to.id)) {\n      return 'downstream';\n    }\n    stack.push(...downstream);\n  }\n  return 'upstream';\n};\n\nconst opsInRange = (\n  {graph, from, to}: {graph: GraphData; from: GraphNode; to: GraphNode},\n  seen: string[] = [],\n) => {\n  if (!from) {\n    return [];\n  }\n  if (from.id === to.id) {\n    return [...to.definition.opNames];\n  }\n\n  if (seen.length === 0 && graphDirectionOf({graph, from, to}) === 'upstream') {\n    [from, to] = [to, from];\n  }\n\n  const downstream = [...Object.keys(graph.downstream[from.id] || {})]\n    .map((n) => graph.nodes[n])\n    .filter(Boolean);\n\n  const ledToTarget: string[] = [];\n\n  for (const node of downstream) {\n    if (seen.includes(node.id)) {\n      continue;\n    }\n    const result: string[] = opsInRange({graph, from: node, to}, [...seen, from.id]);\n    if (result.length) {\n      ledToTarget.push(...from.definition.opNames, ...result);\n    }\n  }\n  return uniq(ledToTarget);\n};\n","import {Box, Colors, Icon, Mono} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {withMiddleTruncation} from '../app/Util';\nimport {buildRepoPath} from '../workspace/buildRepoAddress';\nimport {workspacePath} from '../workspace/workspacePath';\n\nimport {MINIMAL_SCALE} from './AssetGraphExplorer';\nimport {GroupLayout} from './layout';\n\nexport const AssetGroupNode: React.FC<{group: GroupLayout; scale: number}> = ({group, scale}) => {\n  const {\n    repositoryLocationName,\n    repositoryDisambiguationRequired,\n    repositoryName,\n    groupName,\n  } = group;\n\n  return (\n    <>\n      <Mono\n        style={{\n          opacity: scale > MINIMAL_SCALE ? (scale - MINIMAL_SCALE) / 0.2 : 0,\n          fontWeight: 600,\n          display: 'flex',\n          gap: 6,\n        }}\n      >\n        <Icon name=\"asset_group\" size={20} />\n        <Box flex={{direction: 'column'}}>\n          <Link\n            style={{color: Colors.Gray900}}\n            onClick={(e) => e.stopPropagation()}\n            to={workspacePath(repositoryName, repositoryLocationName, `/asset-groups/${groupName}`)}\n          >\n            {groupName}\n          </Link>\n          {repositoryDisambiguationRequired && (\n            <GroupRepoName>\n              {withMiddleTruncation(buildRepoPath(repositoryName, repositoryLocationName), {\n                maxLength: 45,\n              })}\n            </GroupRepoName>\n          )}\n        </Box>\n      </Mono>\n\n      <GroupOutline\n        style={{\n          marginTop: 6,\n          height: group.bounds.height - (repositoryDisambiguationRequired ? 24 + 18 : 24) - 3,\n          border: `${Math.max(2, 2 / scale)}px dashed ${Colors.Gray300}`,\n          background: `rgba(223, 223, 223, ${0.4 - Math.max(0, scale - MINIMAL_SCALE) * 0.3})`,\n        }}\n      />\n    </>\n  );\n};\n\nconst GroupOutline = styled.div`\n  width: 100%;\n  border-radius: 10px;\n  pointer-events: none;\n`;\n\nconst GroupRepoName = styled.div`\n  font-size: 0.8rem;\n  line-height: 0.7rem;\n  white-space: nowrap;\n  margin-bottom: 4px;\n`;\n","import {gql} from '@apollo/client';\nimport {Colors, Icon, Tooltip, FontFamily, Box, CaptionMono, Spinner} from '@dagster-io/ui';\nimport isEqual from 'lodash/isEqual';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {withMiddleTruncation} from '../app/Util';\nimport {NodeHighlightColors} from '../graph/OpNode';\nimport {OpTags} from '../graph/OpTags';\nimport {linkToRunEvent, titleForRun} from '../runs/RunUtils';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {AssetComputeStatus} from '../types/globalTypes';\nimport {markdownToPlaintext} from '../ui/markdownToPlaintext';\n\nimport {LiveDataForNode} from './Utils';\nimport {ASSET_NODE_ANNOTATIONS_MAX_WIDTH, ASSET_NODE_NAME_MAX_LENGTH} from './layout';\nimport {AssetNodeFragment} from './types/AssetNodeFragment';\n\nconst MISSING_LIVE_DATA = {\n  unstartedRunIds: [],\n  inProgressRunIds: [],\n  runWhichFailedToMaterialize: null,\n  lastMaterialization: null,\n  computeStatus: AssetComputeStatus.NONE,\n  stepKey: '',\n};\n\nexport const AssetNode: React.FC<{\n  definition: AssetNodeFragment;\n  liveData?: LiveDataForNode;\n  selected: boolean;\n  inAssetCatalog?: boolean;\n}> = React.memo(({definition, selected, liveData, inAssetCatalog}) => {\n  const firstOp = definition.opNames.length ? definition.opNames[0] : null;\n  const computeName = definition.graphName || definition.opNames[0] || null;\n\n  // Used for linking to the run with this step highlighted. We only support highlighting\n  // a single step, so just use the first one.\n  const stepKey = firstOp || '';\n\n  const displayName = definition.assetKey.path[definition.assetKey.path.length - 1];\n\n  const {lastMaterialization, computeStatus} = liveData || MISSING_LIVE_DATA;\n\n  return (\n    <AssetInsetForHoverEffect>\n      <AssetNodeContainer $selected={selected}>\n        <AssetNodeBox $selected={selected}>\n          <Name>\n            <span style={{marginTop: 1}}>\n              <Icon name=\"asset\" />\n            </span>\n            <div style={{overflow: 'hidden', textOverflow: 'ellipsis', marginTop: -1}}>\n              {withMiddleTruncation(displayName, {\n                maxLength: ASSET_NODE_NAME_MAX_LENGTH,\n              })}\n            </div>\n            <div style={{flex: 1}} />\n            <div style={{maxWidth: ASSET_NODE_ANNOTATIONS_MAX_WIDTH}}>\n              <ComputeStatusNotice computeStatus={computeStatus} />\n            </div>\n          </Name>\n          {definition.description && !inAssetCatalog && (\n            <Description>{markdownToPlaintext(definition.description).split('\\n')[0]}</Description>\n          )}\n          {computeName && displayName !== computeName && (\n            <Description>\n              <Box\n                flex={{gap: 4, alignItems: 'flex-end'}}\n                style={{marginLeft: -2, overflow: 'hidden'}}\n              >\n                <Icon name={definition.graphName ? 'job' : 'op'} size={16} />\n                <div style={{minWidth: 0, overflow: 'hidden', textOverflow: 'ellipsis'}}>\n                  {computeName}\n                </div>\n              </Box>\n            </Description>\n          )}\n\n          <Stats>\n            {lastMaterialization ? (\n              <StatsRow>\n                <span>Materialized</span>\n                <CaptionMono style={{textAlign: 'right'}}>\n                  <AssetRunLink\n                    runId={lastMaterialization.runId}\n                    event={{stepKey, timestamp: lastMaterialization.timestamp}}\n                  >\n                    <TimestampDisplay\n                      timestamp={Number(lastMaterialization.timestamp) / 1000}\n                      timeFormat={{showSeconds: false, showTimezone: false}}\n                    />\n                  </AssetRunLink>\n                </CaptionMono>\n              </StatsRow>\n            ) : (\n              <>\n                <StatsRow>\n                  <span>Materialized</span>\n                  <span></span>\n                </StatsRow>\n              </>\n            )}\n            <StatsRow>\n              <span>Latest&nbsp;Run</span>\n              <CaptionMono style={{textAlign: 'right'}}>\n                <AssetLatestRunWithNotices liveData={liveData} />\n              </CaptionMono>\n            </StatsRow>\n          </Stats>\n          {definition.computeKind && (\n            <OpTags\n              minified={false}\n              style={{right: -2, paddingTop: 5}}\n              tags={[\n                {\n                  label: definition.computeKind,\n                  onClick: () => {\n                    window.requestAnimationFrame(() =>\n                      document.dispatchEvent(new Event('show-kind-info')),\n                    );\n                  },\n                },\n              ]}\n            />\n          )}\n        </AssetNodeBox>\n      </AssetNodeContainer>\n    </AssetInsetForHoverEffect>\n  );\n}, isEqual);\n\nexport const AssetNodeMinimal: React.FC<{\n  selected: boolean;\n  definition: AssetNodeFragment;\n}> = ({selected, definition}) => {\n  const displayName = definition.assetKey.path[definition.assetKey.path.length - 1];\n\n  return (\n    <AssetInsetForHoverEffect>\n      <MinimalAssetNodeContainer $selected={selected}>\n        <MinimalAssetNodeBox $selected={selected}>\n          <MinimalName style={{fontSize: 28}}>\n            {withMiddleTruncation(displayName, {maxLength: 17})}\n          </MinimalName>\n        </MinimalAssetNodeBox>\n      </MinimalAssetNodeContainer>\n    </AssetInsetForHoverEffect>\n  );\n};\n\nexport const AssetRunLink: React.FC<{\n  runId: string;\n  event?: Parameters<typeof linkToRunEvent>[1];\n}> = ({runId, children, event}) => (\n  <Link\n    to={event ? linkToRunEvent({runId}, event) : `/instance/runs/${runId}`}\n    target=\"_blank\"\n    rel=\"noreferrer\"\n  >\n    {children || titleForRun({runId})}\n  </Link>\n);\n\nexport const ASSET_NODE_LIVE_FRAGMENT = gql`\n  fragment AssetNodeLiveFragment on AssetNode {\n    id\n    opNames\n    repository {\n      id\n    }\n    assetKey {\n      path\n    }\n    assetMaterializations(limit: 1) {\n      timestamp\n      runId\n    }\n  }\n`;\n\n// Note: This fragment should only contain fields that are needed for\n// useAssetGraphData and the Asset DAG. Some pages of Dagit request this\n// fragment for every AssetNode on the instance. Add fields with care!\n//\nexport const ASSET_NODE_FRAGMENT = gql`\n  fragment AssetNodeFragment on AssetNode {\n    id\n    graphName\n    jobNames\n    opNames\n    description\n    computeKind\n    assetKey {\n      path\n    }\n  }\n`;\n\nconst BoxColors = {\n  Divider: 'rgba(219, 219, 244, 1)',\n  Description: 'rgba(245, 245, 250, 1)',\n  Stats: 'rgba(236, 236, 248, 1)',\n};\n\nconst AssetInsetForHoverEffect = styled.div`\n  padding: 10px 4px 2px 4px;\n  height: 100%;\n`;\n\nconst AssetNodeContainer = styled.div<{$selected: boolean}>`\n  outline: ${(p) => (p.$selected ? `2px dashed ${NodeHighlightColors.Border}` : 'none')};\n  border-radius: 6px;\n  outline-offset: -1px;\n  background: ${(p) => (p.$selected ? NodeHighlightColors.Background : 'white')};\n  padding: 4px;\n`;\n\nconst AssetNodeBox = styled.div<{$selected: boolean}>`\n  border: 2px solid ${(p) => (p.$selected ? Colors.Blue500 : Colors.Blue200)};\n  background: ${BoxColors.Stats};\n  border-radius: 5px;\n  position: relative;\n  &:hover {\n    box-shadow: ${Colors.Blue200} inset 0px 0px 0px 1px, rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;\n  }\n`;\n\nconst Name = styled.div`\n  /** Keep in sync with DISPLAY_NAME_PX_PER_CHAR */\n  display: flex;\n  padding: 4px 6px;\n  background: ${Colors.White};\n  font-family: ${FontFamily.monospace};\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n  font-weight: 600;\n  gap: 4px;\n`;\n\nconst MinimalAssetNodeContainer = styled(AssetNodeContainer)`\n  border-radius: 12px;\n  outline-offset: 2px;\n  outline-width: 4px;\n  height: 100%;\n`;\n\nconst MinimalAssetNodeBox = styled(AssetNodeBox)`\n  background: ${Colors.White};\n  border: 4px solid ${Colors.Blue200};\n  border-radius: 10px;\n  position: relative;\n  padding: 4px;\n  height: 100%;\n`;\n\nconst MinimalName = styled(Name)`\n  font-weight: 600;\n  white-space: nowrap;\n  position: absolute;\n  background: none;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst Description = styled.div`\n  background: ${BoxColors.Description};\n  padding: 4px 8px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  border-top: 1px solid ${BoxColors.Divider};\n  font-size: 12px;\n`;\n\nconst Stats = styled.div`\n  background: ${BoxColors.Stats};\n  padding: 4px 8px;\n  border-top: 1px solid ${BoxColors.Divider};\n  font-size: 12px;\n  line-height: 20px;\n`;\n\nconst StatsRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  min-height: 18px;\n  & > span {\n    color: ${Colors.Gray600};\n  }\n`;\n\nconst UpstreamNotice = styled.div`\n  background: ${Colors.Yellow200};\n  color: ${Colors.Yellow700};\n  line-height: 10px;\n  font-size: 11px;\n  text-align: right;\n  margin-top: -4px;\n  margin-bottom: -4px;\n  padding: 2.5px 5px;\n  margin-right: -6px;\n  border-top-right-radius: 3px;\n`;\n\nexport const ComputeStatusNotice: React.FC<{computeStatus: AssetComputeStatus}> = ({\n  computeStatus,\n}) =>\n  computeStatus === AssetComputeStatus.OUT_OF_DATE ? (\n    <UpstreamNotice>\n      upstream\n      <br />\n      changed\n    </UpstreamNotice>\n  ) : null;\n\nexport const AssetLatestRunWithNotices: React.FC<{\n  liveData?: LiveDataForNode;\n}> = ({liveData}) => {\n  const {\n    lastMaterialization,\n    unstartedRunIds,\n    inProgressRunIds,\n    runWhichFailedToMaterialize,\n    stepKey,\n  } = liveData || MISSING_LIVE_DATA;\n\n  return inProgressRunIds?.length > 0 ? (\n    <Box flex={{gap: 4, alignItems: 'center'}}>\n      <Tooltip content=\"A run is currently rematerializing this asset.\">\n        <Spinner purpose=\"body-text\" />\n      </Tooltip>\n      <AssetRunLink runId={inProgressRunIds[0]} />\n    </Box>\n  ) : unstartedRunIds?.length > 0 ? (\n    <Box flex={{gap: 4, alignItems: 'center'}}>\n      <Tooltip content=\"A run has started that will rematerialize this asset soon.\">\n        <Spinner purpose=\"body-text\" stopped />\n      </Tooltip>\n      <AssetRunLink runId={unstartedRunIds[0]} />\n    </Box>\n  ) : runWhichFailedToMaterialize?.__typename === 'Run' ? (\n    <Box flex={{gap: 4, alignItems: 'center'}}>\n      <Tooltip\n        content={`Run ${titleForRun({\n          runId: runWhichFailedToMaterialize.id,\n        })} failed to materialize this asset`}\n      >\n        <Icon name=\"warning\" color={Colors.Red500} />\n      </Tooltip>\n      <AssetRunLink runId={runWhichFailedToMaterialize.id} />\n    </Box>\n  ) : lastMaterialization ? (\n    <AssetRunLink\n      runId={lastMaterialization.runId}\n      event={{stepKey, timestamp: lastMaterialization.timestamp}}\n    />\n  ) : (\n    <span></span>\n  );\n};\n","import {Colors, Icon, FontFamily} from '@dagster-io/ui';\nimport React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {displayNameForAssetKey} from './Utils';\n\nexport const ForeignNode: React.FC<{\n  assetKey: {path: string[]};\n  backgroundColor?: string;\n}> = React.memo(({assetKey, backgroundColor}) => (\n  <ForeignNodeLink style={{backgroundColor}}>\n    <span className=\"label\">{displayNameForAssetKey(assetKey)}</span>\n    <Icon name=\"open_in_new\" color={Colors.Gray500} />\n  </ForeignNodeLink>\n));\n\nconst ForeignNodeLink = styled.div`\n  display: flex;\n  padding: 4px 8px 6px;\n  line-height: 30px;\n  font-family: ${FontFamily.monospace};\n  color: ${Colors.Gray500};\n  align-items: center;\n  font-weight: 600;\n  gap: 4px;\n  &:hover .label {\n    color: ${Colors.Link};\n    text-decoration: underline;\n  }\n`;\n","import * as dagre from 'dagre';\nimport groupBy from 'lodash/groupBy';\n\nimport {IBounds, IPoint} from '../graph/common';\n\nimport {GraphData, GraphNode, GraphId, displayNameForAssetKey} from './Utils';\n\nexport interface AssetLayout {\n  id: GraphId;\n  bounds: IBounds; // Overall frame of the box relative to 0,0 on the graph\n}\n\nexport interface GroupLayout {\n  id: GraphId;\n  groupName: string;\n  repositoryName: string;\n  repositoryLocationName: string;\n  repositoryDisambiguationRequired: boolean;\n  bounds: IBounds; // Overall frame of the box relative to 0,0 on the graph\n}\nexport type AssetLayoutEdge = {\n  from: IPoint;\n  fromId: string;\n  to: IPoint;\n  toId: string;\n};\n\nexport type AssetGraphLayout = {\n  width: number;\n  height: number;\n  edges: AssetLayoutEdge[];\n  nodes: {[id: string]: AssetLayout};\n  groups: {[name: string]: GroupLayout};\n};\n\nconst opts: {margin: number; mini: boolean} = {\n  margin: 100,\n  mini: false,\n};\n\n// Prefix group nodes in the Dagre layout so that an asset and an asset\n// group cannot have the same name.\nconst GROUP_NODE_PREFIX = 'group__';\n\nexport const layoutAssetGraph = (graphData: GraphData): AssetGraphLayout => {\n  const g = new dagre.graphlib.Graph({compound: true});\n\n  g.setGraph({\n    rankdir: 'TB',\n    marginx: opts.margin,\n    marginy: opts.margin,\n    nodesep: opts.mini ? 20 : 50,\n    edgesep: opts.mini ? 10 : 10,\n    ranksep: opts.mini ? 20 : 50,\n  });\n  g.setDefaultEdgeLabel(() => ({}));\n\n  const parentNodeIdForNode = (node: GraphNode) =>\n    [\n      GROUP_NODE_PREFIX,\n      node.definition.repository.location.name,\n      node.definition.repository.name,\n      node.definition.groupName,\n    ].join('__');\n\n  const shouldRender = (node?: GraphNode) => node && node.definition.opNames.length > 0;\n  const renderedNodes = Object.values(graphData.nodes).filter(shouldRender);\n\n  const groups: {[id: string]: GroupLayout} = {};\n  for (const node of renderedNodes) {\n    if (node.definition.groupName) {\n      const id = parentNodeIdForNode(node);\n      groups[id] = {\n        id,\n        groupName: node.definition.groupName,\n        repositoryName: node.definition.repository.name,\n        repositoryLocationName: node.definition.repository.location.name,\n        repositoryDisambiguationRequired: false,\n        bounds: {x: 0, y: 0, width: 0, height: 0},\n      };\n    }\n  }\n\n  // Add all the group boxes to the graph\n  const showGroups = Object.keys(groups).length > 1;\n  if (showGroups) {\n    Object.keys(groups).forEach((groupId) => g.setNode(groupId, {}));\n  }\n\n  // Add all the nodes to the graph\n  renderedNodes.forEach((node) => {\n    const {width, height} = getAssetNodeDimensions(node.definition);\n    g.setNode(node.id, {width: opts.mini ? 230 : width, height});\n    if (showGroups && node.definition.groupName) {\n      g.setParent(node.id, parentNodeIdForNode(node));\n    }\n  });\n\n  const foreignNodes = {};\n\n  // Add the edges to the graph, and accumulate a set of \"foreign nodes\" (for which\n  // we have an inbound/outbound edge, but we don't have the `node` in the graphData).\n  Object.keys(graphData.downstream).forEach((upstreamId) => {\n    const downstreamIds = Object.keys(graphData.downstream[upstreamId]);\n    downstreamIds.forEach((downstreamId) => {\n      if (\n        !shouldRender(graphData.nodes[downstreamId]) &&\n        !shouldRender(graphData.nodes[upstreamId])\n      ) {\n        return;\n      }\n\n      g.setEdge({v: upstreamId, w: downstreamId}, {weight: 1});\n\n      if (!shouldRender(graphData.nodes[downstreamId])) {\n        foreignNodes[downstreamId] = true;\n      } else if (!shouldRender(graphData.nodes[upstreamId])) {\n        foreignNodes[upstreamId] = true;\n      }\n    });\n  });\n\n  // Add all the foreign nodes to the graph\n  Object.keys(foreignNodes).forEach((id) => {\n    g.setNode(id, getForeignNodeDimensions(id));\n  });\n\n  dagre.layout(g);\n\n  let maxWidth = 0;\n  let maxHeight = 0;\n\n  const nodes: {[id: string]: AssetLayout} = {};\n\n  g.nodes().forEach((id) => {\n    const dagreNode = g.node(id);\n    if (!dagreNode) {\n      return;\n    }\n    const bounds = {\n      x: dagreNode.x - dagreNode.width / 2,\n      y: dagreNode.y - dagreNode.height / 2,\n      width: dagreNode.width,\n      height: dagreNode.height,\n    };\n    if (!id.startsWith(GROUP_NODE_PREFIX)) {\n      nodes[id] = {id, bounds};\n    }\n\n    maxWidth = Math.max(maxWidth, dagreNode.x + dagreNode.width / 2);\n    maxHeight = Math.max(maxHeight, dagreNode.y + dagreNode.height / 2);\n  });\n\n  // Apply bounds to the groups based on the nodes inside them\n  if (showGroups) {\n    for (const node of renderedNodes) {\n      if (node.definition.groupName) {\n        const groupId = parentNodeIdForNode(node);\n        groups[groupId].bounds =\n          groups[groupId].bounds.width === 0\n            ? nodes[node.id].bounds\n            : extendBounds(groups[groupId].bounds, nodes[node.id].bounds);\n      }\n    }\n    for (const group of Object.values(groups)) {\n      group.bounds = padBounds(group.bounds, {x: 15, top: 30, bottom: 15});\n    }\n  }\n\n  // Annotate groups that require disambiguation (same group name appears twice)\n  Object.values(groupBy(Object.values(groups), (g) => g.groupName))\n    .filter((set) => set.length > 1)\n    .flat()\n    .forEach((group) => {\n      group.bounds.y -= 18;\n      group.bounds.height += 18;\n      group.repositoryDisambiguationRequired = true;\n    });\n\n  const edges: AssetLayoutEdge[] = [];\n\n  g.edges().forEach((e) => {\n    const points = g.edge(e).points;\n    edges.push({\n      from: points[0],\n      fromId: e.v,\n      to: points[points.length - 1],\n      toId: e.w,\n    });\n  });\n\n  return {\n    nodes,\n    edges,\n    width: maxWidth + opts.margin,\n    height: maxHeight + opts.margin,\n    groups: showGroups ? groups : {},\n  };\n};\n\nexport const getForeignNodeDimensions = (id: string) => {\n  const path = JSON.parse(id);\n  return {width: displayNameForAssetKey({path}).length * 8 + 30, height: 30};\n};\n\nexport const padBounds = (a: IBounds, padding: {x: number; top: number; bottom: number}) => {\n  return {\n    x: a.x - padding.x,\n    y: a.y - padding.top,\n    width: a.width + padding.x * 2,\n    height: a.height + padding.top + padding.bottom,\n  };\n};\n\nexport const extendBounds = (a: IBounds, b: IBounds) => {\n  const xmin = Math.min(a.x, b.x);\n  const ymin = Math.min(a.y, b.y);\n  const xmax = Math.max(a.x + a.width, b.x + b.width);\n  const ymax = Math.max(a.y + a.height, b.y + b.height);\n  return {x: xmin, y: ymin, width: xmax - xmin, height: ymax - ymin};\n};\n\nexport const ASSET_NODE_ICON_WIDTH = 20;\nexport const ASSET_NODE_ANNOTATIONS_MAX_WIDTH = 65;\nexport const ASSET_NODE_NAME_MAX_LENGTH = 32;\nconst DISPLAY_NAME_PX_PER_CHAR = 8.0;\n\nexport const assetNameMaxlengthForWidth = (width: number) => {\n  return (\n    (width - ASSET_NODE_ANNOTATIONS_MAX_WIDTH - ASSET_NODE_ICON_WIDTH) / DISPLAY_NAME_PX_PER_CHAR\n  );\n};\n\nexport const getAssetNodeDimensions = (def: {\n  assetKey: {path: string[]};\n  opNames: string[];\n  graphName: string | null;\n  description?: string | null;\n}) => {\n  let height = 100;\n  if (def.description) {\n    height += 25;\n  }\n  const computeName = def.graphName || def.opNames[0] || null;\n  const displayName = def.assetKey.path[def.assetKey.path.length - 1];\n\n  if (computeName && displayName !== computeName) {\n    height += 25;\n  }\n  return {\n    width:\n      Math.max(\n        200,\n        Math.min(ASSET_NODE_NAME_MAX_LENGTH, displayName.length) * DISPLAY_NAME_PX_PER_CHAR,\n      ) +\n      ASSET_NODE_ICON_WIDTH +\n      ASSET_NODE_ANNOTATIONS_MAX_WIDTH,\n    height,\n  };\n};\n","import {gql, useQuery} from '@apollo/client';\nimport groupBy from 'lodash/groupBy';\nimport keyBy from 'lodash/keyBy';\nimport reject from 'lodash/reject';\nimport React from 'react';\n\nimport {filterByQuery, GraphQueryItem} from '../app/GraphQueryImpl';\nimport {AssetKey} from '../assets/types';\nimport {AssetGroupSelector, PipelineSelector} from '../types/globalTypes';\n\nimport {ASSET_NODE_FRAGMENT} from './AssetNode';\nimport {buildGraphData, GraphData, toGraphId, tokenForAssetKey} from './Utils';\nimport {\n  AssetGraphQuery,\n  AssetGraphQueryVariables,\n  AssetGraphQuery_assetNodes,\n} from './types/AssetGraphQuery';\n\nexport interface AssetGraphFetchScope {\n  hideEdgesToNodesOutsideQuery?: boolean;\n  hideNodesMatching?: (node: AssetGraphQuery_assetNodes) => boolean;\n  pipelineSelector?: PipelineSelector;\n  groupSelector?: AssetGroupSelector;\n}\n\nexport type AssetGraphQueryItem = GraphQueryItem & {\n  node: AssetNode;\n};\n\n/** Fetches data for rendering an asset graph:\n *\n * @param pipelineSelector: Optionally scope to an asset job, or pass null for the global graph\n *\n * @param opsQuery: filter the returned graph using selector syntax string (eg: asset_name++)\n *\n * @param filterNodes: filter the returned graph using the provided function. The global graph\n * uses this option to implement the \"3 of 4 repositories\" picker.\n */\nexport function useAssetGraphData(opsQuery: string, options: AssetGraphFetchScope) {\n  const fetchResult = useQuery<AssetGraphQuery, AssetGraphQueryVariables>(ASSET_GRAPH_QUERY, {\n    notifyOnNetworkStatusChange: true,\n    variables: {\n      pipelineSelector: options.pipelineSelector,\n      groupSelector: options.groupSelector,\n    },\n  });\n\n  const nodes = fetchResult.data?.assetNodes;\n\n  const {\n    assetGraphData,\n    graphQueryItems,\n    graphAssetKeys,\n    allAssetKeys,\n    applyingEmptyDefault,\n  } = React.useMemo(() => {\n    if (nodes === undefined) {\n      return {\n        graphAssetKeys: [],\n        graphQueryItems: [],\n        assetGraphData: null,\n        applyingEmptyDefault: false,\n      };\n    }\n\n    // Apply any filters provided by the caller. This is where we do repo filtering\n    let matching = nodes;\n    if (options.hideNodesMatching) {\n      matching = reject(matching, options.hideNodesMatching);\n    }\n\n    // Filter the set of all AssetNodes down to those matching the `opsQuery`.\n    // In the future it might be ideal to move this server-side, but we currently\n    // get to leverage the useQuery cache almost 100% of the time above, making this\n    // super fast after the first load vs a network fetch on every page view.\n    const graphQueryItems = buildGraphQueryItems(matching);\n    const {all, applyingEmptyDefault} = filterByQuery(graphQueryItems, opsQuery);\n\n    // Assemble the response into the data structure used for layout, traversal, etc.\n    const assetGraphData = buildGraphData(all.map((n) => n.node));\n    if (options.hideEdgesToNodesOutsideQuery) {\n      removeEdgesToHiddenAssets(assetGraphData, nodes);\n    }\n\n    return {\n      allAssetKeys: matching.map((n) => n.assetKey),\n      graphAssetKeys: all.map((n) => ({path: n.node.assetKey.path})),\n      assetGraphData,\n      graphQueryItems,\n      applyingEmptyDefault,\n    };\n  }, [nodes, opsQuery, options.hideEdgesToNodesOutsideQuery, options.hideNodesMatching]);\n\n  return {\n    fetchResult,\n    assetGraphData,\n    graphQueryItems,\n    graphAssetKeys,\n    allAssetKeys,\n    applyingEmptyDefault,\n  };\n}\n\ntype AssetNode = AssetGraphQuery_assetNodes;\n\nconst buildGraphQueryItems = (nodes: AssetNode[]) => {\n  const items: {[name: string]: AssetGraphQueryItem} = {};\n\n  for (const node of nodes) {\n    const name = tokenForAssetKey(node.assetKey);\n    items[name] = {\n      node,\n      name,\n      inputs: node.dependencyKeys.map((key) => ({\n        dependsOn: [{solid: {name: tokenForAssetKey(key)}}],\n      })),\n      outputs: node.dependedByKeys.map((key) => ({\n        dependedBy: [{solid: {name: tokenForAssetKey(key)}}],\n      })),\n    };\n  }\n  return Object.values(items);\n};\n\nconst removeEdgesToHiddenAssets = (graphData: GraphData, allNodes: AssetNode[]) => {\n  const allNodesById = groupBy(allNodes, (n) => toGraphId(n.assetKey));\n  const notSourceAsset = (id: string) => !!allNodesById[id];\n\n  for (const node of Object.keys(graphData.upstream)) {\n    for (const edge of Object.keys(graphData.upstream[node])) {\n      if (!graphData.nodes[edge] && notSourceAsset(node)) {\n        delete graphData.upstream[node][edge];\n        delete graphData.downstream[edge][node];\n      }\n    }\n  }\n\n  for (const node of Object.keys(graphData.downstream)) {\n    for (const edge of Object.keys(graphData.downstream[node])) {\n      if (!graphData.nodes[edge] && notSourceAsset(node)) {\n        delete graphData.upstream[edge][node];\n        delete graphData.downstream[node][edge];\n      }\n    }\n  }\n};\n\nexport const calculateGraphDistances = (items: GraphQueryItem[], assetKey: AssetKey) => {\n  const map = keyBy(items, (g) => g.name);\n  const start = map[tokenForAssetKey(assetKey)];\n  if (!start) {\n    return {upstream: 0, downstream: 0};\n  }\n\n  const bfsUpstream = (ins: GraphQueryItem['inputs'], depth: number): number => {\n    const next = ins\n      .flatMap((i) => i.dependsOn.map((d) => d.solid.name))\n      .map((name) => map[name].inputs);\n\n    return Math.max(depth, ...next.map((nextIns) => bfsUpstream(nextIns, depth + 1)));\n  };\n  const bfsDownstream = (outs: GraphQueryItem['outputs'], depth: number): number => {\n    const next = outs\n      .flatMap((i) => i.dependedBy.map((d) => d.solid.name))\n      .map((name) => map[name].outputs);\n\n    return Math.max(depth, ...next.map((nextOuts) => bfsDownstream(nextOuts, depth + 1)));\n  };\n\n  return {\n    upstream: bfsUpstream(start.inputs, 0),\n    downstream: bfsDownstream(start.outputs, 0),\n  };\n};\n\nconst ASSET_GRAPH_QUERY = gql`\n  query AssetGraphQuery($pipelineSelector: PipelineSelector, $groupSelector: AssetGroupSelector) {\n    assetNodes(pipeline: $pipelineSelector, group: $groupSelector) {\n      id\n      groupName\n      repository {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n      dependencyKeys {\n        path\n      }\n      dependedByKeys {\n        path\n      }\n      ...AssetNodeFragment\n    }\n  }\n  ${ASSET_NODE_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport React from 'react';\n\nimport {AssetKeyInput} from '../types/globalTypes';\n\nimport {ASSET_NODE_LIVE_FRAGMENT} from './AssetNode';\nimport {buildLiveData} from './Utils';\nimport {AssetGraphLiveQuery, AssetGraphLiveQueryVariables} from './types/AssetGraphLiveQuery';\n\n/** Fetches the last materialization, \"upstream changed\", and other live state\n * for the assets in the given pipeline or in the given set of asset keys (or both).\n *\n * Note: The \"upstream changed\" flag cascades, so it may not appear if the upstream\n * node that has changed is not in scope.\n */\nexport function useLiveDataForAssetKeys(assetKeys: AssetKeyInput[]) {\n  const liveResult = useQuery<AssetGraphLiveQuery, AssetGraphLiveQueryVariables>(\n    ASSETS_GRAPH_LIVE_QUERY,\n    {\n      skip: assetKeys.length === 0,\n      variables: {assetKeys},\n      notifyOnNetworkStatusChange: true,\n    },\n  );\n\n  const liveDataByNode = React.useMemo(() => {\n    return liveResult.data ? buildLiveData(liveResult.data) : {};\n  }, [liveResult.data]);\n\n  return {\n    liveResult,\n    liveDataByNode,\n    assetKeys,\n  };\n}\n\nconst ASSETS_GRAPH_LIVE_QUERY = gql`\n  query AssetGraphLiveQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys, loadMaterializations: true) {\n      id\n      ...AssetNodeLiveFragment\n    }\n    assetsLatestInfo(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      computeStatus\n      unstartedRunIds\n      inProgressRunIds\n      latestRun {\n        status\n        id\n      }\n    }\n  }\n  ${ASSET_NODE_LIVE_FRAGMENT}\n`;\n","import {gql} from '@apollo/client';\n\nimport {CONFIG_TYPE_SCHEMA_FRAGMENT} from '../typeexplorer/ConfigTypeSchema';\n\nexport const ASSET_NODE_CONFIG_FRAGMENT = gql`\n  fragment AssetNodeConfigFragment on AssetNode {\n    id\n    configField {\n      name\n      isRequired\n      configType {\n        ...ConfigTypeSchemaFragment\n        recursiveConfigTypes {\n          ...ConfigTypeSchemaFragment\n        }\n      }\n    }\n  }\n  ${CONFIG_TYPE_SCHEMA_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Alert, Box, ButtonLink, Colors} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {displayNameForAssetKey} from '../asset-graph/Utils';\nimport {buildRepoPath} from '../workspace/buildRepoAddress';\nimport {repoAddressAsString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\nimport {AssetKey} from './types';\nimport {\n  AssetDefinitionCollisionQuery,\n  AssetDefinitionCollisionQueryVariables,\n} from './types/AssetDefinitionCollisionQuery';\n\nexport const MULTIPLE_DEFINITIONS_WARNING = 'Multiple asset definitions found';\n\nexport const AssetDefinedInMultipleReposNotice: React.FC<{\n  assetKey: AssetKey;\n  loadedFromRepo: RepoAddress;\n  padded?: boolean;\n}> = ({assetKey, loadedFromRepo, padded}) => {\n  const {data} = useQuery<AssetDefinitionCollisionQuery, AssetDefinitionCollisionQueryVariables>(\n    ASSET_DEFINITION_COLLISION_QUERY,\n    {variables: {assetKeys: [{path: assetKey.path}]}},\n  );\n\n  const collision = data?.assetNodeDefinitionCollisions[0];\n  if (!collision) {\n    return <span />;\n  }\n\n  const allReposWithAsset = collision.repositories.map((r) =>\n    repoAddressAsString({name: r.name, location: r.location.name}),\n  );\n\n  return (\n    <Box\n      padding={padded ? {vertical: 16, left: 24, right: 12} : {}}\n      border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n    >\n      <Alert\n        intent=\"warning\"\n        title={MULTIPLE_DEFINITIONS_WARNING}\n        description={\n          <>\n            This asset was loaded from {buildRepoPath(loadedFromRepo.name, loadedFromRepo.location)}\n            , but duplicate definitions were found in{' '}\n            <ButtonLink\n              underline=\"always\"\n              color={Colors.Yellow700}\n              onClick={() =>\n                showCustomAlert({\n                  title: MULTIPLE_DEFINITIONS_WARNING,\n                  body: (\n                    <>\n                      Repositories containing an asset definition for{' '}\n                      <strong>{displayNameForAssetKey(assetKey)}</strong>:\n                      <ul>\n                        {allReposWithAsset.map((addr) => (\n                          <li key={addr}>{addr}</li>\n                        ))}\n                      </ul>\n                    </>\n                  ),\n                })\n              }\n            >\n              {allReposWithAsset.length - 1} other repo{allReposWithAsset.length === 2 ? '' : 's'}\n            </ButtonLink>\n            . You should rename these assets to avoid collisions.\n          </>\n        }\n      />\n    </Box>\n  );\n};\n\nconst ASSET_DEFINITION_COLLISION_QUERY = gql`\n  query AssetDefinitionCollisionQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodeDefinitionCollisions(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      repositories {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n","import {gql} from '@apollo/client';\nimport {Box, ButtonLink, Tooltip} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {Timestamp} from '../app/time/Timestamp';\n\nimport {assetDetailsPathForKey} from './assetDetailsPathForKey';\nimport {AssetLineageFragment} from './types/AssetLineageFragment';\n\nconst AssetLineageInfoElement: React.FC<{\n  lineage_info: AssetLineageFragment;\n  timestamp: string;\n}> = ({lineage_info, timestamp}) => {\n  const partition_list_label = lineage_info.partitions.length === 1 ? 'Partition' : 'Partitions';\n  const partition_list_str = lineage_info.partitions\n    .map((partition) => `\"${partition}\"`)\n    .join(', ');\n  const to = assetDetailsPathForKey(lineage_info.assetKey, {asOf: timestamp});\n\n  return (\n    <Box margin={{bottom: 4}}>\n      {lineage_info.partitions.length > 0\n        ? `${partition_list_label} ${partition_list_str} of `\n        : ''}\n      <Tooltip\n        content={\n          <>\n            View snapshot as of{' '}\n            <Timestamp\n              timestamp={{ms: Number(timestamp)}}\n              timeFormat={{showSeconds: true, showTimezone: true}}\n            />\n          </>\n        }\n        modifiers={{offset: {enabled: true, options: {offset: [0, 16]}}}}\n        placement=\"right\"\n      >\n        <Link to={to}>\n          <Box flex={{display: 'inline-flex', alignItems: 'center'}}>\n            {lineage_info.assetKey.path\n              .map((p, i) => <span key={i}>{p}</span>)\n              .reduce(\n                (accum, curr, ii) => [\n                  ...accum,\n                  ii > 0 ? (\n                    <React.Fragment key={`${ii}-space`}>&nbsp;{'>'}&nbsp;</React.Fragment>\n                  ) : null,\n                  curr,\n                ],\n                [] as React.ReactNode[],\n              )}\n          </Box>\n        </Link>\n      </Tooltip>\n    </Box>\n  );\n};\n\nconst MAX_COLLAPSED = 5;\n\nexport const AssetLineageElements: React.FC<{\n  elements: AssetLineageFragment[];\n  timestamp: string;\n}> = ({elements, timestamp}) => {\n  const [collapsed, setCollapsed] = React.useState(true);\n\n  return (\n    <div>\n      {elements.length > MAX_COLLAPSED && (\n        <ButtonLink onClick={() => setCollapsed(!collapsed)}>\n          {collapsed ? 'Show More' : 'Show Less'}\n        </ButtonLink>\n      )}\n      {(collapsed ? elements.slice(elements.length - MAX_COLLAPSED) : elements).map((info, idx) => (\n        <AssetLineageInfoElement key={idx} lineage_info={info} timestamp={timestamp} />\n      ))}\n    </div>\n  );\n};\n\nexport const ASSET_LINEAGE_FRAGMENT = gql`\n  fragment AssetLineageFragment on AssetLineageInfo {\n    assetKey {\n      path\n    }\n    partitions\n  }\n`;\n","import {\n  Box,\n  Button,\n  ButtonLink,\n  Colors,\n  DialogFooter,\n  Dialog,\n  Group,\n  Icon,\n  IconWrapper,\n  Table,\n  Mono,\n} from '@dagster-io/ui';\nimport moment from 'moment';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {Timestamp} from '../app/time/Timestamp';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {MetadataEntry} from '../metadata/MetadataEntry';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {RunStatusWithStats} from '../runs/RunStatusDots';\nimport {linkToRunEvent, titleForRun} from '../runs/RunUtils';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\n\nimport {AssetLineageElements} from './AssetLineageElements';\nimport {AssetEventGroup} from './groupByPartition';\nimport {AssetMaterializationFragment} from './types/AssetMaterializationFragment';\nimport {AssetObservationFragment} from './types/AssetObservationFragment';\n\nexport const AssetEventsTable: React.FC<{\n  hasPartitions: boolean;\n  hasLineage: boolean;\n  groups: AssetEventGroup[];\n  focused?: AssetEventGroup;\n  setFocused?: (timestamp: AssetEventGroup) => void;\n}> = ({hasPartitions, hasLineage, groups, focused, setFocused}) => {\n  return (\n    <Table>\n      <thead>\n        <tr>\n          {hasPartitions && <th style={{minWidth: 100}}>Partition</th>}\n          <th style={{minWidth: 150}}>Timestamp</th>\n          <th style={{minWidth: 150}}>Job</th>\n          <th style={{width: 100}}>Run</th>\n        </tr>\n      </thead>\n      <tbody>\n        {groups.map((group) => (\n          <React.Fragment key={group.timestamp || group.partition}>\n            <HoverableRow\n              onClick={(e) => {\n                // If you're interacting with something in the row, don't trigger a focus change.\n                // Since focus is stored in the URL bar this overwrites any link click navigation.\n                // We could alternatively e.preventDefault() on every link but it's easy to forget.\n                if (e.target instanceof HTMLElement && e.target.closest('a')) {\n                  return;\n                }\n                setFocused?.(group);\n              }}\n            >\n              <EventGroupRow\n                group={group}\n                hasPartitions={hasPartitions}\n                hasLineage={hasLineage}\n                isFocused={focused === group}\n              />\n            </HoverableRow>\n            {focused === group ? (\n              <MetadataEntriesRow hasLineage={hasLineage} group={group} />\n            ) : undefined}\n          </React.Fragment>\n        ))}\n      </tbody>\n    </Table>\n  );\n};\n\nconst NoneSpan = () => <span style={{color: Colors.Gray400}}>None</span>;\n\nconst MetadataEntriesRow: React.FC<{\n  group: AssetEventGroup;\n  hasLineage: boolean;\n}> = React.memo(({group, hasLineage}) => {\n  const {latest, timestamp} = group;\n  if (!latest) {\n    return <tr></tr>;\n  }\n  const assetLineage = latest.__typename === 'MaterializationEvent' ? latest.assetLineage : [];\n\n  const observationsAboutLatest =\n    latest.__typename === 'MaterializationEvent'\n      ? group.all.filter(\n          (e) =>\n            e.__typename === 'ObservationEvent' && Number(e.timestamp) > Number(latest.timestamp),\n        )\n      : [];\n\n  return (\n    <tr style={{background: Colors.Gray50}}>\n      <td colSpan={6} style={{fontSize: 14, padding: 0}}>\n        {latest.description && (\n          <Box padding={{horizontal: 24, vertical: 12}}>{latest.description}</Box>\n        )}\n        {latest.metadataEntries.length || hasLineage ? (\n          <DetailsTable>\n            <tbody>\n              {latest.metadataEntries.map((entry) => (\n                <tr key={`metadata-${entry.label}`}>\n                  <td style={{maxWidth: 300}}>{entry.label}</td>\n                  <td>\n                    <MetadataEntry entry={entry} expandSmallValues={true} />\n                  </td>\n                  <td style={{opacity: 0.7}}>{entry.description}</td>\n                </tr>\n              ))}\n              {observationsAboutLatest.map((obs) => (\n                <React.Fragment key={obs.timestamp}>\n                  {obs.metadataEntries.map((entry) => (\n                    <tr key={`metadata-${obs.timestamp}-${entry.label}`}>\n                      <td>{entry.label}</td>\n                      <td>\n                        <MetadataEntry entry={entry} expandSmallValues={true} />\n                      </td>\n                      <td style={{opacity: 0.7}}>\n                        <Box flex={{gap: 8, alignItems: 'center'}}>\n                          <Icon name=\"observation\" size={16} />\n                          <span>\n                            {`${obs.stepKey} in `}\n                            <Link to={`/instance/runs/${obs.runId}?timestamp=${obs.timestamp}`}>\n                              <Mono>{titleForRun({runId: obs.runId})}</Mono>\n                            </Link>\n                            {` (${moment(Number(obs.timestamp)).from(\n                              Number(timestamp),\n                              true,\n                            )} later)`}\n                          </span>\n                        </Box>\n                        {entry.description}\n                      </td>\n                    </tr>\n                  ))}\n                </React.Fragment>\n              ))}\n\n              {hasLineage && (\n                <tr>\n                  <td>Parent Materializations</td>\n                  <td>\n                    <AssetLineageElements elements={assetLineage} timestamp={timestamp} />\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </DetailsTable>\n        ) : (\n          <Box padding={{horizontal: 24, vertical: 12}}>No materialization event metadata</Box>\n        )}\n      </td>\n    </tr>\n  );\n});\n\nconst EventGroupRow: React.FC<{\n  group: AssetEventGroup;\n  hasPartitions: boolean;\n  hasLineage: boolean;\n  isFocused: boolean;\n}> = React.memo(({group, hasPartitions, hasLineage, isFocused}) => {\n  const {latest, partition, timestamp, all} = group;\n\n  const focusCss = isFocused\n    ? {paddingLeft: 4, borderLeft: `4px solid ${Colors.HighlightGreen}`}\n    : {paddingLeft: 8};\n\n  const run = latest?.runOrError.__typename === 'Run' ? latest.runOrError : undefined;\n  const repositoryOrigin = run?.repositoryOrigin;\n  const repoAddress = repositoryOrigin\n    ? buildRepoAddress(repositoryOrigin.repositoryName, repositoryOrigin.repositoryLocationName)\n    : null;\n  const repo = useRepository(repoAddress);\n\n  if (!latest) {\n    return (\n      <>\n        <td style={{whiteSpace: 'nowrap', paddingLeft: 24}}>{partition || <NoneSpan />}</td>\n        <td colSpan={3} />\n      </>\n    );\n  }\n\n  if (!run) {\n    return <span />;\n  }\n\n  return (\n    <>\n      {hasPartitions && (\n        <td style={{whiteSpace: 'nowrap', ...focusCss}}>\n          <Group direction=\"row\" spacing={2}>\n            <DisclosureTriangle open={isFocused} />\n            {partition || <NoneSpan />}\n          </Group>\n        </td>\n      )}\n      <td style={hasPartitions ? {} : focusCss}>\n        <Group direction=\"row\" spacing={4}>\n          {!hasPartitions && <DisclosureTriangle open={isFocused} />}\n          <Group direction=\"column\" spacing={4}>\n            <Timestamp timestamp={{ms: Number(timestamp)}} />\n            {all?.length > 1 ? (\n              <AllIndividualEventsLink\n                hasPartitions={hasPartitions}\n                hasLineage={hasLineage}\n                events={all}\n              />\n            ) : latest.__typename === 'MaterializationEvent' ? (\n              <Box flex={{gap: 8, alignItems: 'center'}} style={{color: Colors.Gray600}}>\n                <Icon name=\"materialization\" size={16} color={Colors.Gray600} />\n                Materialization\n              </Box>\n            ) : (\n              <Box flex={{gap: 8, alignItems: 'center'}} style={{color: Colors.Gray600}}>\n                <Icon name=\"observation\" size={16} color={Colors.Gray600} /> Observation\n              </Box>\n            )}\n          </Group>\n        </Group>\n      </td>\n      <td>\n        {!isHiddenAssetGroupJob(run.pipelineName) && (\n          <Box margin={{bottom: 4}}>\n            <Box padding={{left: 8}}>\n              <PipelineReference\n                showIcon\n                pipelineName={run.pipelineName}\n                pipelineHrefContext={repoAddress || 'repo-unknown'}\n                snapshotId={run.pipelineSnapshotId}\n                isJob={isThisThingAJob(repo, run.pipelineName)}\n              />\n            </Box>\n            <Group direction=\"row\" padding={{left: 8}} spacing={8} alignItems=\"center\">\n              <Icon name=\"linear_scale\" color={Colors.Gray400} />\n              <Link to={linkToRunEvent(run, latest)}>{latest.stepKey}</Link>\n            </Group>\n          </Box>\n        )}\n      </td>\n      <td>\n        <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n          <RunStatusWithStats runId={run.runId} status={run.status} />\n          <Link to={`/instance/runs/${run.runId}?timestamp=${timestamp}`}>\n            <Mono>{titleForRun(run)}</Mono>\n          </Link>\n        </Box>\n      </td>\n    </>\n  );\n});\n\nconst HoverableRow = styled.tr`\n  &:hover {\n    background: ${Colors.Gray10};\n  }\n`;\n\nconst DetailsTable = styled.table`\n  width: 100%;\n  margin: -2px -2px -3px;\n  tr td {\n    font-size: 14px;\n  }\n`;\n\ninterface PredecessorDialogProps {\n  hasLineage: boolean;\n  hasPartitions: boolean;\n  events: (AssetMaterializationFragment | AssetObservationFragment)[];\n}\n\nexport const AllIndividualEventsLink: React.FC<PredecessorDialogProps> = ({\n  hasLineage,\n  hasPartitions,\n  events,\n}) => {\n  const [open, setOpen] = React.useState(false);\n  const [focused, setFocused] = React.useState<AssetEventGroup | undefined>();\n  const groups = React.useMemo(\n    () =>\n      events.map((p) => ({\n        latest: p,\n        partition: p.partition || undefined,\n        timestamp: p.timestamp,\n        all: [],\n      })),\n    [events],\n  );\n  const count = events.length;\n  const title = () => {\n    if (hasPartitions) {\n      const partition = events[0].partition;\n      if (partition) {\n        return `Materialization and observation events for ${partition}`;\n      }\n    }\n    return `Materialization and observation events`;\n  };\n\n  return (\n    <>\n      <ButtonLink onClick={() => setOpen(true)}>{`View ${count} events`}</ButtonLink>\n      <Dialog\n        isOpen={open}\n        canEscapeKeyClose\n        canOutsideClickClose\n        onClose={() => setOpen(false)}\n        style={{width: '80%', minWidth: '800px'}}\n        title={title()}\n      >\n        {open && (\n          <Box padding={{bottom: 8}} onClick={(e) => e.stopPropagation()}>\n            <AssetEventsTable\n              hasLineage={hasLineage}\n              hasPartitions={hasPartitions}\n              focused={focused}\n              setFocused={setFocused}\n              groups={groups}\n            />\n          </Box>\n        )}\n        <DialogFooter>\n          <Button intent=\"primary\" onClick={() => setOpen(false)}>\n            OK\n          </Button>\n        </DialogFooter>\n      </Dialog>\n    </>\n  );\n};\n\nconst DisclosureTriangle: React.FC<{open: boolean; onClick?: () => void}> = ({open, onClick}) => (\n  <DisclosureTriangleButton onClick={onClick} $open={open}>\n    <Icon name=\"arrow_drop_down\" size={24} />\n  </DisclosureTriangleButton>\n);\n\nconst DisclosureTriangleButton = styled.button<{$open: boolean}>`\n  padding: 4px;\n  margin: -4px;\n  cursor: pointer;\n  border: 0;\n  background: transparent;\n  outline: none;\n\n  ${IconWrapper} {\n    margin: -2px -5px;\n    transform: ${({$open}) => ($open ? 'rotate(0deg)' : 'rotate(-90deg)')};\n    opacity: 0.25;\n  }\n\n  :focus {\n    outline: none;\n\n    ${IconWrapper} {\n      background: ${Colors.Dark};\n      opacity: 0.5;\n    }\n  }\n`;\n","import {Box, Colors, NonIdealState, Caption, Subheading, Checkbox} from '@dagster-io/ui';\nimport flatMap from 'lodash/flatMap';\nimport uniq from 'lodash/uniq';\nimport * as React from 'react';\n\nimport {useStateWithStorage} from '../hooks/useStateWithStorage';\n\nimport {AssetValueGraph, AssetValueGraphData} from './AssetValueGraph';\nimport {AssetEventGroup} from './groupByPartition';\n\nexport const AssetMaterializationGraphs: React.FC<{\n  groups: AssetEventGroup[];\n  xAxis: 'partition' | 'time';\n  asSidebarSection?: boolean;\n}> = (props) => {\n  const [xHover, setXHover] = React.useState<string | number | null>(null);\n\n  const reversed = React.useMemo(() => {\n    return [...props.groups].reverse();\n  }, [props.groups]);\n\n  const graphDataByMetadataLabel = extractNumericData(reversed, props.xAxis);\n  const graphLabels = Object.keys(graphDataByMetadataLabel).slice(0, 20).sort();\n\n  const [collapsedLabels, setCollapsedLabels] = useStateWithStorage(\n    'hidden-graphs',\n    validateHiddenGraphsState,\n  );\n\n  const toggleCollapsed = React.useCallback(\n    (label: string) => {\n      setCollapsedLabels((current = []) =>\n        current.includes(label) ? current.filter((c) => c !== label) : [...current, label],\n      );\n    },\n    [setCollapsedLabels],\n  );\n\n  return (\n    <>\n      <div\n        style={{\n          display: 'flex',\n          flexWrap: 'wrap',\n          justifyContent: 'stretch',\n          flexDirection: 'column',\n        }}\n      >\n        {graphLabels.map((label) => (\n          <Box\n            key={label}\n            style={{width: '100%'}}\n            border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n          >\n            {props.asSidebarSection ? (\n              <Box padding={{horizontal: 24, top: 8}} flex={{justifyContent: 'space-between'}}>\n                <Caption style={{fontWeight: 700}}>{label}</Caption>\n                <Checkbox\n                  format=\"switch\"\n                  checked={!collapsedLabels.includes(label)}\n                  onChange={() => toggleCollapsed(label)}\n                  size=\"small\"\n                />\n              </Box>\n            ) : (\n              <Box\n                padding={{horizontal: 24, vertical: 16}}\n                border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n                flex={{justifyContent: 'space-between'}}\n              >\n                <Subheading>{label}</Subheading>\n                <Checkbox\n                  format=\"switch\"\n                  checked={!collapsedLabels.includes(label)}\n                  onChange={() => toggleCollapsed(label)}\n                  size=\"small\"\n                />\n              </Box>\n            )}\n            {!collapsedLabels.includes(label) ? (\n              <Box padding={{horizontal: 24, vertical: 16}}>\n                <AssetValueGraph\n                  label={label}\n                  width=\"100%\"\n                  data={graphDataByMetadataLabel[label]}\n                  xHover={xHover}\n                  onHoverX={(x) => x !== xHover && setXHover(x)}\n                />\n              </Box>\n            ) : undefined}\n          </Box>\n        ))}\n      </div>\n      {graphLabels.length === 0 ? (\n        props.asSidebarSection ? (\n          <Box\n            margin={{horizontal: 24, vertical: 12}}\n            style={{color: Colors.Gray500, fontSize: '0.8rem'}}\n          >\n            No numeric metadata entries available to be graphed.\n          </Box>\n        ) : (\n          <Box padding={{horizontal: 24, top: 64}}>\n            <NonIdealState\n              shrinkable\n              icon=\"linear_scale\"\n              title=\"No numeric metadata\"\n              description={`Include numeric metadata entries in your materializations and observations to see data graphed by ${props.xAxis}.`}\n            />\n          </Box>\n        )\n      ) : (\n        props.xAxis === 'partition' && (\n          <Box padding={{vertical: 16, horizontal: 24}} style={{color: Colors.Gray400}}>\n            When graphing values by partition, the highest data point for each materialized event\n            label is displayed.\n          </Box>\n        )\n      )}\n    </>\n  );\n};\n\nconst validateHiddenGraphsState = (json: string[]) => (Array.isArray(json) ? json : []);\n\n/**\n * Helper function that iterates over the asset materializations and assembles time series data\n * and stats for all numeric metadata entries. This function makes the following guaruntees:\n *\n * - If a metadata entry is sparsely emitted, points are still included for missing x values\n *   with y = NaN. (For compatiblity with react-chartjs-2)\n * - If a metadata entry is generated many times for the same partition, and xAxis = partition,\n *   the MAX value emitted is used as the data point.\n *\n * Assumes that the data is pre-sorted in ascending partition order if using xAxis = partition.\n */\nconst extractNumericData = (datapoints: AssetEventGroup[], xAxis: 'time' | 'partition') => {\n  const series: {\n    [metadataEntryLabel: string]: AssetValueGraphData;\n  } = {};\n\n  // Build a set of the numeric metadata entry labels (note they may be sparsely emitted)\n  const numericMetadataLabels = uniq(\n    flatMap(datapoints, (e) =>\n      (e.latest?.metadataEntries || [])\n        .filter((k) => ['IntMetadataEntry', 'FloatMetadataEntry'].includes(k.__typename))\n        .map((k) => k.label),\n    ),\n  );\n\n  const append = (label: string, {x, y}: {x: number | string; y: number}) => {\n    series[label] = series[label] || {minX: 0, maxX: 0, minY: 0, maxY: 0, values: [], xAxis};\n\n    if (xAxis === 'partition') {\n      // If the xAxis is partition keys, the graph may only contain one value for each partition.\n      // If the existing sample for the partition was null, replace it. Otherwise take the\n      // most recent value.\n      const existingForPartition = series[label].values.find((v) => v.x === x);\n      if (existingForPartition) {\n        if (!isNaN(y)) {\n          existingForPartition.y = y;\n        }\n        return;\n      }\n    }\n    series[label].values.push({\n      xNumeric: typeof x === 'number' ? x : series[label].values.length,\n      x,\n      y,\n    });\n  };\n\n  for (const {partition, latest} of datapoints) {\n    const x = (xAxis === 'partition' ? partition : Number(latest?.timestamp)) || null;\n\n    if (x === null) {\n      // exclude materializations where partition = null from partitioned graphs\n      continue;\n    }\n\n    // Add an entry for every numeric metadata label\n    for (const label of numericMetadataLabels) {\n      const entry = latest?.metadataEntries.find((l) => l.label === label);\n      if (!entry) {\n        append(label, {x, y: NaN});\n        continue;\n      }\n\n      let y = NaN;\n      if (entry.__typename === 'IntMetadataEntry') {\n        if (entry.intValue !== null) {\n          y = entry.intValue;\n        } else {\n          // will incur precision loss here\n          y = parseInt(entry.intRepr);\n        }\n      }\n      if (entry.__typename === 'FloatMetadataEntry' && entry.floatValue !== null) {\n        y = entry.floatValue;\n      }\n\n      append(label, {x, y});\n    }\n  }\n\n  for (const serie of Object.values(series)) {\n    const xs = serie.values.map((v) => v.xNumeric);\n    const ys = serie.values.map((v) => v.y).filter((v) => !isNaN(v));\n    serie.minXNumeric = Math.min(...xs);\n    serie.maxXNumeric = Math.max(...xs);\n    serie.minY = Math.min(...ys);\n    serie.maxY = Math.max(...ys);\n  }\n  return series;\n};\n","import {BaseTag, Box, Colors, Spinner} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {LiveDataForNode} from '../asset-graph/Utils';\n\nexport const CurrentRunsBanner: React.FC<{liveData?: LiveDataForNode}> = ({liveData}) => {\n  const {inProgressRunIds = [], unstartedRunIds = []} = liveData || {};\n\n  if (inProgressRunIds.length === 0 && unstartedRunIds.length === 0) {\n    return null;\n  }\n  return (\n    <Box\n      background={Colors.Blue50}\n      flex={{direction: 'column', gap: 4}}\n      border={{side: 'bottom', width: 1, color: Colors.Blue100}}\n      padding={{vertical: 12, left: 24, right: 12}}\n      style={{color: Colors.Blue700, fontSize: 12, fontWeight: 700}}\n    >\n      {inProgressRunIds.length > 0 && (\n        <Box flex={{gap: 4, alignItems: 'center', wrap: 'wrap'}}>\n          {inProgressRunIds.map((runId) => (\n            <RunIDTag key={runId} runId={runId} />\n          ))}\n          <span>\n            {' '}\n            {inProgressRunIds.length === 1 ? 'is' : 'are'} currently refreshing this asset.\n          </span>\n        </Box>\n      )}\n      {unstartedRunIds.length > 0 && (\n        <Box flex={{gap: 4, alignItems: 'center', wrap: 'wrap'}}>\n          {unstartedRunIds.map((runId) => (\n            <RunIDTag key={runId} runId={runId} />\n          ))}\n          <span>\n            {' '}\n            {unstartedRunIds.length === 1 ? 'has' : 'have'} started and will refresh this asset.\n          </span>\n        </Box>\n      )}\n    </Box>\n  );\n};\n\nconst RunIDTag: React.FC<{runId: string}> = ({runId}) => (\n  <BaseTag\n    key={runId}\n    textColor={Colors.Blue700}\n    fillColor={Colors.Blue50}\n    label={\n      <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n        <Spinner purpose=\"caption-text\" />\n        <Link to={`/instance/runs/${runId}`}>{`Run: ${runId.slice(0, 8)}`}</Link>\n      </Box>\n    }\n  />\n);\n","import * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Colors} from './Colors';\nimport {Icon} from './Icon';\n\nexport const Warning: React.FC<{errorBackground?: boolean}> = ({errorBackground, children}) => {\n  return (\n    <ErrorContainer errorBackground={errorBackground}>\n      <Icon name=\"warning\" size={16} color={Colors.Gray700} style={{marginRight: 8}} />\n      {children}\n    </ErrorContainer>\n  );\n};\n\nconst ErrorContainer = styled.div<{errorBackground?: boolean}>`\n  border-top: 1px solid ${Colors.KeylineGray};\n  background: ${({errorBackground}) => (errorBackground ? Colors.Red100 : Colors.Gray50)};\n  padding: 8px 24px 8px 24px;\n  display: flex;\n  align-items: center;\n  font-size: 12px;\n`;\n","import {Warning} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {LiveDataForNode} from '../asset-graph/Utils';\nimport {titleForRun} from '../runs/RunUtils';\n\nexport const FailedRunsSinceMaterializationBanner: React.FC<{liveData?: LiveDataForNode}> = ({\n  liveData,\n}) => {\n  const {runWhichFailedToMaterialize} = liveData || {};\n\n  if (runWhichFailedToMaterialize) {\n    return (\n      <Warning errorBackground>\n        <span>\n          Run{' '}\n          <Link to={`/instance/runs/${runWhichFailedToMaterialize.id}`}>\n            {titleForRun({runId: runWhichFailedToMaterialize.id})}\n          </Link>{' '}\n          failed to materialize this asset\n        </span>\n      </Warning>\n    );\n  }\n  return null;\n};\n","import {gql} from '@apollo/client';\nimport {Box, Colors, Group, Icon, Mono, NonIdealState, Table} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {Timestamp} from '../app/time/Timestamp';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {MetadataEntry, METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {linkToRunEvent, titleForRun} from '../runs/RunUtils';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\n\nimport {AssetLineageElements} from './AssetLineageElements';\nimport {LatestMaterializationMetadataFragment} from './types/LatestMaterializationMetadataFragment';\n\nexport const LatestMaterializationMetadata: React.FC<{\n  latest: LatestMaterializationMetadataFragment | undefined;\n}> = ({latest}) => {\n  const latestRun = latest?.runOrError.__typename === 'Run' ? latest?.runOrError : null;\n  const repositoryOrigin = latestRun?.repositoryOrigin;\n  const repoAddress = repositoryOrigin\n    ? buildRepoAddress(repositoryOrigin.repositoryName, repositoryOrigin.repositoryLocationName)\n    : null;\n  const repo = useRepository(repoAddress);\n\n  if (!latest) {\n    return (\n      <Box padding={{top: 16, bottom: 32}}>\n        <NonIdealState\n          icon=\"materialization\"\n          title=\"No materializations\"\n          description=\"No materializations were found for this asset.\"\n        />\n      </Box>\n    );\n  }\n\n  const latestEvent = latest;\n  const latestAssetLineage = latestEvent?.assetLineage;\n\n  return (\n    <MetadataTable>\n      <tbody>\n        <tr>\n          <td>Run</td>\n          <td>\n            {latestRun ? (\n              <div>\n                <Box>\n                  {'Run '}\n                  <Link\n                    to={`/instance/runs/${latestEvent.runId}?timestamp=${latestEvent.timestamp}`}\n                  >\n                    <Mono>{titleForRun({runId: latestEvent.runId})}</Mono>\n                  </Link>\n                </Box>\n                {!isHiddenAssetGroupJob(latestRun.pipelineName) && (\n                  <>\n                    <Box padding={{left: 8, top: 4}}>\n                      <PipelineReference\n                        showIcon\n                        pipelineName={latestRun.pipelineName}\n                        pipelineHrefContext={repoAddress || 'repo-unknown'}\n                        snapshotId={latestRun.pipelineSnapshotId}\n                        isJob={isThisThingAJob(repo, latestRun.pipelineName)}\n                      />\n                    </Box>\n                    <Group direction=\"row\" padding={{left: 8}} spacing={8} alignItems=\"center\">\n                      <Icon name=\"linear_scale\" color={Colors.Gray400} />\n                      <Link to={linkToRunEvent(latestRun, latestEvent)}>{latestEvent.stepKey}</Link>\n                    </Group>\n                  </>\n                )}\n              </div>\n            ) : (\n              'No materialization events'\n            )}\n          </td>\n        </tr>\n        {latest?.partition ? (\n          <tr>\n            <td>Latest partition</td>\n            <td>{latest ? latest.partition : 'No materialization events'}</td>\n          </tr>\n        ) : null}\n        <tr>\n          <td>Timestamp</td>\n          <td>\n            {latestEvent ? (\n              <Timestamp timestamp={{ms: Number(latestEvent.timestamp)}} />\n            ) : (\n              'No materialization events'\n            )}\n          </td>\n        </tr>\n        {latestAssetLineage?.length ? (\n          <tr>\n            <td>Parent assets</td>\n            <td>\n              <AssetLineageElements\n                elements={latestAssetLineage}\n                timestamp={latestEvent.timestamp}\n              />\n            </td>\n          </tr>\n        ) : null}\n        {latestEvent?.metadataEntries.map((entry) => (\n          <tr key={`metadata-${entry.label}`}>\n            <td>{entry.label}</td>\n            <td>\n              <MetadataEntry entry={entry} expandSmallValues={true} />\n            </td>\n            <td>{entry.description}</td>\n          </tr>\n        ))}\n      </tbody>\n    </MetadataTable>\n  );\n};\n\nconst MetadataTable = styled(Table)`\n  td:first-child {\n    white-space: nowrap;\n    width: 1px;\n    max-width: 400px;\n    word-break: break-word;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n`;\n\nexport const LATEST_MATERIALIZATION_METADATA_FRAGMENT = gql`\n  fragment LatestMaterializationMetadataFragment on MaterializationEvent {\n    partition\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        pipelineName\n        pipelineSnapshotId\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    assetLineage {\n      assetKey {\n        path\n      }\n      partitions\n    }\n  }\n  ${METADATA_ENTRY_FRAGMENT}\n`;\n","import groupBy from 'lodash/groupBy';\n\nimport {AssetMaterializationFragment} from './types/AssetMaterializationFragment';\nimport {AssetObservationFragment} from './types/AssetObservationFragment';\n\nconst NO_PARTITION_KEY = '__NO_PARTITION__';\n\ntype Event = AssetMaterializationFragment | AssetObservationFragment;\n\nexport type AssetEventGroup = {\n  latest: Event | null;\n  all: Event[];\n  timestamp: string;\n  partition?: string;\n};\n\nconst sortByEventTimestamp = (a: Event, b: Event) => Number(b?.timestamp) - Number(a?.timestamp);\n\n/**\n * A hook that can bucket a list of materializations by partition, if any, with the `latest`\n * materialization separated from predecessor materializations.\n */\nexport const groupByPartition = (\n  events: Event[],\n  definedPartitionKeys: string[],\n): AssetEventGroup[] => {\n  const grouped = groupBy(events, (m) => m.partition || NO_PARTITION_KEY);\n  const orderedPartitionKeys = [...definedPartitionKeys].reverse();\n\n  if (NO_PARTITION_KEY in grouped) {\n    orderedPartitionKeys.push(NO_PARTITION_KEY);\n  }\n\n  return orderedPartitionKeys\n    .filter((key) => key !== NO_PARTITION_KEY)\n    .map((key) => {\n      const sorted = [...(grouped[key] || [])].sort(sortByEventTimestamp);\n      const latestMaterialization = sorted.find((a) => a.__typename === 'MaterializationEvent');\n      const latest = latestMaterialization || sorted[0] || null;\n\n      return {\n        all: sorted,\n        latest,\n        timestamp: latest?.timestamp,\n        partition: key,\n      };\n    });\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, ButtonGroup, Colors, NonIdealState, Spinner, Subheading} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {LiveDataForNode} from '../asset-graph/Utils';\nimport {METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {SidebarSection} from '../pipelines/SidebarComponents';\nimport {RepositorySelector} from '../types/globalTypes';\n\nimport {AssetEventsTable} from './AssetEventsTable';\nimport {ASSET_LINEAGE_FRAGMENT} from './AssetLineageElements';\nimport {AssetMaterializationGraphs} from './AssetMaterializationGraphs';\nimport {AssetViewParams} from './AssetView';\nimport {CurrentRunsBanner} from './CurrentRunsBanner';\nimport {FailedRunsSinceMaterializationBanner} from './FailedRunsSinceMaterializationBanner';\nimport {LatestMaterializationMetadata} from './LastMaterializationMetadata';\nimport {AssetEventGroup, groupByPartition} from './groupByPartition';\nimport {AssetKey} from './types';\nimport {AssetEventsQuery, AssetEventsQueryVariables} from './types/AssetEventsQuery';\n\ninterface Props {\n  assetKey: AssetKey;\n  asSidebarSection?: boolean;\n  liveData?: LiveDataForNode;\n  params: AssetViewParams;\n  paramsTimeWindowOnly: boolean;\n  setParams: (params: AssetViewParams) => void;\n\n  // This timestamp is a \"hint\", when it changes this component will refetch\n  // to retrieve new data. Just don't want to poll the entire table query.\n  assetLastMaterializedAt: string | undefined;\n\n  // This is passed in because we need to know whether to default to partition\n  // grouping /before/ loading all the data.\n  assetHasDefinedPartitions: boolean;\n  repository?: RepositorySelector;\n  opName?: string | null;\n}\n\n/**\n * If the asset has a defined partition space, we load all materializations in the\n * last 100 partitions. This ensures that if you run a huge backfill of old partitions,\n * you still see accurate info for the last 100 partitions in the UI. A count-based\n * limit could cause random partitions to disappear if materializations were out of order.\n */\nfunction useRecentAssetEvents(\n  assetKey: AssetKey,\n  assetHasDefinedPartitions: boolean,\n  xAxis: 'partition' | 'time',\n  before?: string,\n) {\n  const loadUsingPartitionKeys = assetHasDefinedPartitions && xAxis === 'partition';\n\n  const {data, loading, refetch} = useQuery<AssetEventsQuery, AssetEventsQueryVariables>(\n    ASSET_EVENTS_QUERY,\n    {\n      variables: loadUsingPartitionKeys\n        ? {\n            assetKey: {path: assetKey.path},\n            before,\n            partitionInLast: 120,\n          }\n        : {\n            assetKey: {path: assetKey.path},\n            before,\n            limit: 100,\n          },\n    },\n  );\n\n  return React.useMemo(() => {\n    const asset = data?.assetOrError.__typename === 'Asset' ? data?.assetOrError : null;\n    const materializations = asset?.assetMaterializations || [];\n    const observations = asset?.assetObservations || [];\n\n    const allPartitionKeys = asset?.definition?.partitionKeys;\n    const loadedPartitionKeys =\n      loadUsingPartitionKeys && allPartitionKeys\n        ? allPartitionKeys.slice(allPartitionKeys.length - 120)\n        : undefined;\n\n    return {asset, loadedPartitionKeys, materializations, observations, loading, refetch};\n  }, [data, loading, refetch, loadUsingPartitionKeys]);\n}\n\nexport const AssetEvents: React.FC<Props> = ({\n  assetKey,\n  assetLastMaterializedAt,\n  assetHasDefinedPartitions,\n  asSidebarSection,\n  params,\n  setParams,\n  liveData,\n}) => {\n  const before = params.asOf ? `${Number(params.asOf) + 1}` : undefined;\n  const xAxisDefault = assetHasDefinedPartitions ? 'partition' : 'time';\n  const xAxis =\n    assetHasDefinedPartitions && params.partition !== undefined\n      ? 'partition'\n      : params.time !== undefined || before\n      ? 'time'\n      : xAxisDefault;\n\n  const {\n    materializations,\n    observations,\n    loadedPartitionKeys,\n    loading,\n    refetch,\n  } = useRecentAssetEvents(assetKey, assetHasDefinedPartitions, xAxis, before);\n\n  React.useEffect(() => {\n    if (params.asOf) {\n      return;\n    }\n    refetch();\n  }, [params.asOf, assetLastMaterializedAt, refetch]);\n\n  const grouped = React.useMemo<AssetEventGroup[]>(() => {\n    const events = [...materializations, ...observations].sort(\n      (b, a) => Number(a.timestamp) - Number(b.timestamp),\n    );\n    if (xAxis === 'partition' && loadedPartitionKeys) {\n      return groupByPartition(events, loadedPartitionKeys);\n    } else {\n      // return a group for every materialization to achieve un-grouped rendering\n      return events.map((event) => ({\n        latest: event,\n        partition: event.partition || undefined,\n        timestamp: event.timestamp,\n        all: [],\n      }));\n    }\n  }, [loadedPartitionKeys, materializations, observations, xAxis]);\n\n  const activeItems = React.useMemo(() => new Set([xAxis]), [xAxis]);\n\n  const onSetFocused = (group: AssetEventGroup) => {\n    const updates: Partial<AssetViewParams> =\n      xAxis === 'time'\n        ? {time: group.timestamp !== params.time ? group.timestamp : ''}\n        : {partition: group.partition !== params.partition ? group.partition : ''};\n    setParams({...params, ...updates});\n  };\n\n  if (process.env.NODE_ENV === 'test') {\n    return <span />; // chartjs and our useViewport hook don't play nicely with jest\n  }\n\n  if (asSidebarSection) {\n    const latest = materializations[0];\n\n    if (loading) {\n      return (\n        <Box padding={{vertical: 20}}>\n          <Spinner purpose=\"section\" />\n        </Box>\n      );\n    }\n    return (\n      <>\n        <FailedRunsSinceMaterializationBanner liveData={liveData} />\n        <CurrentRunsBanner liveData={liveData} />\n        <SidebarSection title=\"Materialization in Last Run\">\n          {latest ? (\n            <div style={{margin: -1, maxWidth: '100%', overflowX: 'auto'}}>\n              <LatestMaterializationMetadata latest={latest} />\n            </div>\n          ) : (\n            <Box\n              margin={{horizontal: 24, vertical: 12}}\n              style={{color: Colors.Gray500, fontSize: '0.8rem'}}\n            >\n              No materializations found\n            </Box>\n          )}\n        </SidebarSection>\n        <SidebarSection title=\"Metadata Plots\">\n          <AssetMaterializationGraphs xAxis={xAxis} asSidebarSection groups={grouped} />\n        </SidebarSection>\n      </>\n    );\n  }\n\n  const focused =\n    grouped.find((b) =>\n      params.time\n        ? Number(b.timestamp) <= Number(params.time)\n        : params.partition\n        ? b.partition === params.partition\n        : false,\n    ) ||\n    grouped[0] ||\n    null;\n\n  if (loading) {\n    return (\n      <Box style={{display: 'flex'}}>\n        <Box style={{flex: 1}}>\n          <Box\n            flex={{justifyContent: 'space-between', alignItems: 'center'}}\n            padding={{vertical: 16, horizontal: 24}}\n            style={{marginBottom: -1}}\n          >\n            <Subheading>Asset Events</Subheading>\n          </Box>\n          <Box padding={{vertical: 20}}>\n            <Spinner purpose=\"section\" />\n          </Box>\n        </Box>\n        <Box style={{width: '40%'}} border={{side: 'left', color: Colors.KeylineGray, width: 1}} />\n      </Box>\n    );\n  }\n\n  return (\n    <Box style={{display: 'flex', flex: 1}}>\n      <Box style={{flex: 1}}>\n        <Box\n          flex={{justifyContent: 'space-between', alignItems: 'center'}}\n          padding={{vertical: 16, horizontal: 24}}\n          style={{marginBottom: -1}}\n        >\n          <Subheading>Asset Events</Subheading>\n          {assetHasDefinedPartitions ? (\n            <div style={{margin: '-6px 0 '}}>\n              <ButtonGroup\n                activeItems={activeItems}\n                buttons={[\n                  {id: 'partition', label: 'By partition'},\n                  {id: 'time', label: 'By timestamp'},\n                ]}\n                onClick={(id: string) =>\n                  setParams(\n                    id === 'time'\n                      ? {...params, partition: undefined, time: focused.timestamp || ''}\n                      : {...params, partition: focused.partition || '', time: undefined},\n                  )\n                }\n              />\n            </div>\n          ) : null}\n        </Box>\n        <FailedRunsSinceMaterializationBanner liveData={liveData} />\n        <CurrentRunsBanner liveData={liveData} />\n        {grouped.length > 0 ? (\n          <AssetEventsTable\n            hasPartitions={assetHasDefinedPartitions}\n            hasLineage={materializations.some((m) => m.assetLineage.length > 0)}\n            groups={grouped}\n            focused={focused}\n            setFocused={onSetFocused}\n          />\n        ) : (\n          <Box padding={{vertical: 20}} border={{side: 'top', color: Colors.KeylineGray, width: 1}}>\n            <NonIdealState\n              icon=\"materialization\"\n              title=\"No materializations\"\n              description=\"No materializations were found for this asset.\"\n            />\n          </Box>\n        )}\n        {loadedPartitionKeys && (\n          <Box padding={{vertical: 16, horizontal: 24}} style={{color: Colors.Gray400}}>\n            Showing materializations for the last {loadedPartitionKeys.length} partitions.\n          </Box>\n        )}\n        {/** Ensures the line between the left and right columns goes to the bottom of the page */}\n        <div style={{flex: 1}} />\n      </Box>\n      <Box style={{width: '40%'}} border={{side: 'left', color: Colors.KeylineGray, width: 1}}>\n        <AssetMaterializationGraphs\n          xAxis={xAxis}\n          asSidebarSection={asSidebarSection}\n          groups={grouped}\n        />\n      </Box>\n    </Box>\n  );\n};\n\nconst ASSET_EVENTS_QUERY = gql`\n  query AssetEventsQuery(\n    $assetKey: AssetKeyInput!\n    $limit: Int\n    $before: String\n    $partitionInLast: Int\n  ) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n        assetObservations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetObservationFragment\n        }\n        assetMaterializations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetMaterializationFragment\n        }\n\n        definition {\n          id\n          partitionKeys\n        }\n      }\n    }\n  }\n  fragment AssetMaterializationFragment on MaterializationEvent {\n    partition\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    assetLineage {\n      ...AssetLineageFragment\n    }\n  }\n  fragment AssetObservationFragment on ObservationEvent {\n    partition\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n  }\n  ${METADATA_ENTRY_FRAGMENT}\n  ${ASSET_LINEAGE_FRAGMENT}\n`;\n","import {Box, Colors, Icon} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {assetDetailsPathForKey} from './assetDetailsPathForKey';\n\nexport const AssetLink: React.FC<{\n  path: string[];\n  icon?: 'asset' | 'asset_non_sda' | 'folder';\n  url?: string;\n  isGroup?: boolean;\n}> = ({path, icon, url, isGroup}) => {\n  const linkUrl = url ? url : assetDetailsPathForKey({path});\n\n  return (\n    <Box flex={{direction: 'row', alignItems: 'center', display: 'inline-flex'}}>\n      {icon ? (\n        <Box margin={{right: 8}}>\n          <Icon name={icon} color={Colors.Gray400} />\n        </Box>\n      ) : null}\n      <Link to={linkUrl}>\n        <span style={{wordBreak: 'break-word'}}>\n          {path\n            .map((p, i) => <span key={i}>{p}</span>)\n            .reduce(\n              (accum, curr, ii) => [\n                ...accum,\n                ii > 0 ? <React.Fragment key={`${ii}-space`}>&nbsp;/&nbsp;</React.Fragment> : null,\n                curr,\n              ],\n              [] as React.ReactNode[],\n            )}\n          {isGroup ? '/' : null}\n        </span>\n      </Link>\n    </Box>\n  );\n};\n","import {gql} from '@apollo/client';\nimport {Box, MetadataTable} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {DAGSTER_TYPE_FRAGMENT} from '../dagstertype/DagsterType';\nimport {DagsterTypeFragment} from '../dagstertype/types/DagsterTypeFragment';\nimport {MetadataEntry, METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {MetadataEntryFragment} from '../metadata/types/MetadataEntryFragment';\n\nimport {AssetNodeOpMetadataFragment} from './types/AssetNodeOpMetadataFragment';\n\nexport const metadataForAssetNode = (\n  assetNode: AssetNodeOpMetadataFragment,\n): {assetType?: DagsterTypeFragment; assetMetadata: MetadataEntryFragment[]} => {\n  const assetType = assetNode.type ? assetNode.type : undefined;\n  const assetMetadata = assetNode.metadataEntries || [];\n  return {assetType, assetMetadata};\n};\n\nexport const AssetMetadataTable: React.FC<{\n  assetMetadata: MetadataEntryFragment[];\n}> = ({assetMetadata}) => {\n  const rows = assetMetadata.map((entry) => {\n    return {\n      key: entry.label,\n      value: <MetadataEntry entry={entry} />,\n    };\n  });\n  return (\n    <Box padding={{vertical: 16, horizontal: 24}}>\n      <MetadataTable rows={rows} />\n    </Box>\n  );\n};\n\nexport const ASSET_NODE_OP_METADATA_FRAGMENT = gql`\n  fragment AssetNodeOpMetadataFragment on AssetNode {\n    id\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    type {\n      ...DagsterTypeFragment\n    }\n  }\n  ${METADATA_ENTRY_FRAGMENT}\n  ${DAGSTER_TYPE_FRAGMENT}\n`;\n","// eslint-disable-next-line no-restricted-imports\nimport {BreadcrumbProps, Breadcrumbs} from '@blueprintjs/core';\nimport {Box, Colors, PageHeader, Heading, Icon} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\ntype Props = {assetKey: {path: string[]}} & Partial<React.ComponentProps<typeof PageHeader>>;\n\nexport const AssetPageHeader: React.FC<Props> = ({assetKey, ...extra}) => {\n  const breadcrumbs = React.useMemo(() => {\n    const list: BreadcrumbProps[] = [{text: 'Assets', href: '/instance/assets'}];\n\n    assetKey.path.reduce((accum: string, elem: string) => {\n      const href = `${accum}/${encodeURIComponent(elem)}`;\n      list.push({text: elem, href});\n      return href;\n    }, '/instance/assets');\n\n    return list;\n  }, [assetKey.path]);\n\n  return (\n    <PageHeader\n      title={\n        <Box\n          flex={{alignItems: 'center', gap: 4}}\n          style={{maxWidth: '600px', overflow: 'hidden', marginBottom: 4}}\n        >\n          <BreadcrumbsWithSlashes\n            items={breadcrumbs}\n            currentBreadcrumbRenderer={({text}) => <Heading>{text}</Heading>}\n            breadcrumbRenderer={({text, href}) => (\n              <Heading>\n                <BreadcrumbLink to={href || '#'}>{text}</BreadcrumbLink>\n              </Heading>\n            )}\n          />\n        </Box>\n      }\n      {...extra}\n    />\n  );\n};\n\nexport const AssetGlobalLineageLink = () => (\n  <Link to=\"/instance/asset-groups\">\n    <Box flex={{gap: 4}}>\n      <Icon color={Colors.Link} name=\"schema\" />\n      View global asset lineage\n    </Box>\n  </Link>\n);\n\nconst BreadcrumbsWithSlashes = styled(Breadcrumbs)`\n  & li:not(:first-child)::after {\n    background: none;\n    font-size: 20px;\n    font-weight: bold;\n    color: #5c7080;\n    content: '/';\n    width: 8px;\n    line-height: 16px;\n  }\n`;\n\nconst BreadcrumbLink = styled(Link)`\n  color: ${Colors.Gray800};\n\n  :hover,\n  :active {\n    color: ${Colors.Gray800};\n  }\n`;\n","import {Colors} from '@dagster-io/ui';\nimport {ActiveElement} from 'chart.js';\nimport 'chartjs-adapter-date-fns';\nimport * as React from 'react';\nimport {Line} from 'react-chartjs-2';\n\nexport interface AssetValueGraphData {\n  minY: number;\n  maxY: number;\n  minXNumeric: number;\n  maxXNumeric: number;\n  xAxis: 'time' | 'partition';\n  values: {\n    x: number | string; // time or partition\n    xNumeric: number; // time or partition index\n    y: number;\n  }[];\n}\n\nexport const AssetValueGraph: React.FC<{\n  label: string;\n  width: string;\n  yAxisLabel?: string;\n  data: AssetValueGraphData;\n  xHover: string | number | null;\n  onHoverX: (value: string | number | null) => void;\n}> = (props) => {\n  // Note: To get partitions on the X axis, we pass the partition names in as the `labels`,\n  // and pass the partition index as the x value. This prevents ChartJS from auto-coercing\n  // ISO date partition names to dates and then re-formatting the labels away from 2020-01-01.\n  //\n  if (!props.data) {\n    return <span />;\n  }\n\n  let labels: React.ReactText[] | undefined = undefined;\n  let xHover = props.xHover;\n  if (props.data.xAxis === 'partition') {\n    labels = props.data.values.map((v) => v.x);\n    xHover = xHover ? labels.indexOf(xHover) : null;\n  }\n\n  const graphData = {\n    labels,\n    datasets: [\n      {\n        label: props.label,\n        lineTension: 0,\n        data: props.data.values.map((v) => ({x: v.xNumeric, y: v.y})),\n        borderColor: Colors.Blue500,\n        backgroundColor: 'rgba(0,0,0,0)',\n        pointBorderWidth: 2,\n        pointHoverBorderWidth: 2,\n        pointHoverRadius: 13,\n        pointHoverBorderColor: Colors.Blue500,\n      },\n    ],\n  };\n\n  const options = {\n    animation: {\n      duration: 0,\n    },\n    elements: {\n      point: {\n        radius: ((context: any) =>\n          context.dataset.data[context.dataIndex]?.x === xHover ? 13 : 2) as any,\n      },\n    },\n    scales: {\n      x: {\n        id: 'x',\n        display: true,\n        ...(props.data.xAxis === 'time'\n          ? {\n              type: 'time',\n              title: {\n                display: true,\n                text: 'Timestamp',\n              },\n            }\n          : {\n              type: 'category',\n              title: {\n                display: true,\n                text: 'Partition',\n              },\n            }),\n      },\n      y: {id: 'y', display: true, title: {display: true, text: props.yAxisLabel || 'Value'}},\n    },\n    plugins: {\n      legend: {\n        display: false,\n      },\n    },\n    onHover(_: MouseEvent, activeElements: ActiveElement[]) {\n      if (activeElements.length === 0) {\n        props.onHoverX(null);\n        return;\n      }\n      const itemIdx = (activeElements[0] as any).index;\n      if (itemIdx === 0) {\n        // ChartJS errantly selects the first item when you're moving the mouse off the line\n        props.onHoverX(null);\n        return;\n      }\n      props.onHoverX(props.data.values[itemIdx].x);\n    },\n  };\n\n  return <Line type=\"line\" data={graphData} height={100} options={options} key={props.width} />;\n};\n","import {gql, RefetchQueriesFunction, useMutation} from '@apollo/client';\nimport {Button, DialogBody, DialogFooter, Dialog, Group} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {displayNameForAssetKey} from '../asset-graph/Utils';\n\nimport {AssetWipeMutation, AssetWipeMutationVariables} from './types/AssetWipeMutation';\n\ninterface AssetKey {\n  path: string[];\n}\n\nexport const AssetWipeDialog: React.FC<{\n  assetKeys: AssetKey[];\n  isOpen: boolean;\n  onClose: () => void;\n  onComplete: (assetKeys: AssetKey[]) => void;\n  requery?: RefetchQueriesFunction;\n}> = ({assetKeys, isOpen, onClose, onComplete, requery}) => {\n  const [requestWipe] = useMutation<AssetWipeMutation, AssetWipeMutationVariables>(\n    ASSET_WIPE_MUTATION,\n    {\n      variables: {assetKeys: assetKeys.map((key) => ({path: key.path || []}))},\n      refetchQueries: requery,\n    },\n  );\n\n  const wipe = async () => {\n    if (!assetKeys.length) {\n      return;\n    }\n    await requestWipe();\n    onComplete(assetKeys);\n  };\n\n  return (\n    <Dialog isOpen={isOpen} title=\"Wipe materializations\" onClose={onClose} style={{width: 600}}>\n      <DialogBody>\n        <Group direction=\"column\" spacing={16}>\n          <div>Are you sure you want to wipe materializations for these assets?</div>\n          <ul style={{paddingLeft: 32, margin: 0}}>\n            {assetKeys.map((assetKey) => {\n              const name = displayNameForAssetKey(assetKey);\n              return (\n                <li style={{marginBottom: 4}} key={name}>\n                  {name}\n                </li>\n              );\n            })}\n          </ul>\n          <div>\n            Assets defined only by their historical materializations will disappear from the Asset\n            Catalog. Software-defined assets will remain unless their definition is also deleted\n            from the repository.\n          </div>\n          <strong>This action cannot be undone.</strong>\n        </Group>\n      </DialogBody>\n      <DialogFooter topBorder>\n        <Button intent=\"none\" onClick={onClose}>\n          Cancel\n        </Button>\n        <Button intent=\"danger\" onClick={wipe}>\n          Wipe\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n};\n\nconst ASSET_WIPE_MUTATION = gql`\n  mutation AssetWipeMutation($assetKeys: [AssetKeyInput!]!) {\n    wipeAssets(assetKeys: $assetKeys) {\n      ... on AssetWipeSuccess {\n        assetKeys {\n          path\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {gql, RefetchQueriesFunction} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  Checkbox,\n  Colors,\n  Icon,\n  MenuItem,\n  Menu,\n  Popover,\n  Table,\n  Mono,\n  Tooltip,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {usePermissions} from '../app/Permissions';\nimport {QueryRefreshCountdown, QueryRefreshState} from '../app/QueryRefresh';\nimport {\n  AssetLatestRunWithNotices,\n  AssetRunLink,\n  ComputeStatusNotice,\n} from '../asset-graph/AssetNode';\nimport {LiveData, toGraphId} from '../asset-graph/Utils';\nimport {useSelectionReducer} from '../hooks/useSelectionReducer';\nimport {RepositoryLink} from '../nav/RepositoryLink';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {AnchorButton} from '../ui/AnchorButton';\nimport {MenuLink} from '../ui/MenuLink';\nimport {markdownToPlaintext} from '../ui/markdownToPlaintext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {workspacePathFromAddress} from '../workspace/workspacePath';\n\nimport {AssetLink} from './AssetLink';\nimport {AssetWipeDialog} from './AssetWipeDialog';\nimport {LaunchAssetExecutionButton} from './LaunchAssetExecutionButton';\nimport {assetDetailsPathForKey} from './assetDetailsPathForKey';\nimport {AssetTableFragment as Asset} from './types/AssetTableFragment';\nimport {AssetViewType} from './useAssetView';\n\ntype AssetKey = {path: string[]};\n\nexport const AssetTable = ({\n  view,\n  assets,\n  actionBarComponents,\n  refreshState,\n  liveDataByNode,\n  prefixPath,\n  displayPathForAsset,\n  maxDisplayCount,\n  requery,\n}: {\n  view: AssetViewType;\n  assets: Asset[];\n  refreshState: QueryRefreshState;\n  actionBarComponents: React.ReactNode;\n  liveDataByNode: LiveData;\n  prefixPath: string[];\n  displayPathForAsset: (asset: Asset) => string[];\n  maxDisplayCount?: number;\n  requery?: RefetchQueriesFunction;\n}) => {\n  const [toWipe, setToWipe] = React.useState<AssetKey[] | undefined>();\n  const {canWipeAssets} = usePermissions();\n\n  const groupedByFirstComponent: {[pathComponent: string]: Asset[]} = {};\n\n  assets.forEach((asset) => {\n    const displayPathKey = JSON.stringify(displayPathForAsset(asset));\n    groupedByFirstComponent[displayPathKey] = [\n      ...(groupedByFirstComponent[displayPathKey] || []),\n      asset,\n    ];\n  });\n\n  const [{checkedIds: checkedPaths}, {onToggleFactory, onToggleAll}] = useSelectionReducer(\n    Object.keys(groupedByFirstComponent),\n  );\n\n  const checkedAssets: Asset[] = [];\n  const checkedPathsOnscreen: string[] = [];\n\n  const pageDisplayPathKeys = Object.keys(groupedByFirstComponent).sort().slice(0, maxDisplayCount);\n  pageDisplayPathKeys.forEach((pathKey) => {\n    if (checkedPaths.has(pathKey)) {\n      checkedPathsOnscreen.push(pathKey);\n      checkedAssets.push(...(groupedByFirstComponent[pathKey] || []));\n    }\n  });\n\n  return (\n    <Box flex={{direction: 'column'}}>\n      <Box flex={{alignItems: 'center', gap: 12}} padding={{vertical: 8, left: 24, right: 12}}>\n        {actionBarComponents}\n        <div style={{flex: 1}} />\n        <QueryRefreshCountdown refreshState={refreshState} />\n\n        <Box flex={{alignItems: 'center', gap: 8}}>\n          {checkedAssets.some((c) => !c.definition) ? (\n            <Tooltip content=\"One or more selected assets are not software-defined and cannot be launched directly.\">\n              <Button intent=\"primary\" icon={<Icon name=\"materialization\" />} disabled>\n                {checkedAssets.length > 1 ? `Materialize (${checkedAssets.length})` : 'Materialize'}\n              </Button>\n            </Tooltip>\n          ) : (\n            <LaunchAssetExecutionButton assetKeys={checkedAssets.map((c) => c.key)} />\n          )}\n          <MoreActionsDropdown selected={checkedAssets} clearSelection={() => onToggleAll(false)} />\n        </Box>\n      </Box>\n      <Table>\n        <thead>\n          <tr>\n            <th style={{width: 42, paddingTop: 0, paddingBottom: 0}}>\n              <Checkbox\n                indeterminate={\n                  checkedPathsOnscreen.length > 0 &&\n                  checkedPathsOnscreen.length !== pageDisplayPathKeys.length\n                }\n                checked={\n                  checkedPathsOnscreen.length > 0 &&\n                  checkedPathsOnscreen.length === pageDisplayPathKeys.length\n                }\n                onChange={(e) => {\n                  if (e.target instanceof HTMLInputElement) {\n                    onToggleAll(checkedPathsOnscreen.length !== pageDisplayPathKeys.length);\n                  }\n                }}\n              />\n            </th>\n            <th>{view === 'directory' ? 'Asset Key Prefix' : 'Asset Key'}</th>\n            <th style={{width: 340}}>Defined in</th>\n            <th style={{width: 265}}>Materialized</th>\n            <th style={{width: 115}}>Latest run</th>\n            <th style={{width: 80}}>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {pageDisplayPathKeys.length ? (\n            pageDisplayPathKeys.map((pathStr, idx) => {\n              return (\n                <AssetEntryRow\n                  key={idx}\n                  prefixPath={prefixPath}\n                  path={JSON.parse(pathStr)}\n                  assets={groupedByFirstComponent[pathStr] || []}\n                  liveDataByNode={liveDataByNode}\n                  isSelected={checkedPaths.has(pathStr)}\n                  onToggleChecked={onToggleFactory(pathStr)}\n                  onWipe={(assets: Asset[]) => setToWipe(assets.map((asset) => asset.key))}\n                  canWipe={canWipeAssets.enabled}\n                />\n              );\n            })\n          ) : (\n            <AssetEmptyRow />\n          )}\n        </tbody>\n      </Table>\n      <AssetWipeDialog\n        assetKeys={toWipe || []}\n        isOpen={!!toWipe}\n        onClose={() => setToWipe(undefined)}\n        onComplete={() => setToWipe(undefined)}\n        requery={requery}\n      />\n    </Box>\n  );\n};\n\nconst AssetEmptyRow = () => {\n  return (\n    <tr>\n      <td colSpan={6}>\n        <Box flex={{justifyContent: 'center', alignItems: 'center'}}>\n          <Box margin={{left: 8}}>No assets to display</Box>\n        </Box>\n      </td>\n    </tr>\n  );\n};\n\nconst AssetEntryRow: React.FC<{\n  prefixPath: string[];\n  path: string[];\n  isSelected: boolean;\n  onToggleChecked: (values: {checked: boolean; shiftKey: boolean}) => void;\n  assets: Asset[];\n  liveDataByNode: LiveData;\n  onWipe: (assets: Asset[]) => void;\n  canWipe?: boolean;\n}> = React.memo(\n  ({prefixPath, path, assets, isSelected, onToggleChecked, onWipe, canWipe, liveDataByNode}) => {\n    const fullPath = [...prefixPath, ...path];\n    const linkUrl = assetDetailsPathForKey({path: fullPath});\n\n    const isGroup = assets.length > 1 || fullPath.join('/') !== assets[0].key.path.join('/');\n    const asset = !isGroup ? assets[0] : null;\n\n    const onChange = (e: React.FormEvent<HTMLInputElement>) => {\n      if (e.target instanceof HTMLInputElement) {\n        const {checked} = e.target;\n        const shiftKey =\n          e.nativeEvent instanceof MouseEvent && e.nativeEvent.getModifierState('Shift');\n        onToggleChecked({checked, shiftKey});\n      }\n    };\n\n    const liveData = asset && liveDataByNode[toGraphId(asset.key)];\n    const repoAddress = asset?.definition\n      ? buildRepoAddress(\n          asset.definition.repository.name,\n          asset.definition.repository.location.name,\n        )\n      : null;\n\n    return (\n      <tr>\n        <td style={{paddingRight: 8}}>\n          <Checkbox checked={isSelected} onChange={onChange} />\n        </td>\n        <td>\n          <AssetLink\n            path={path}\n            url={linkUrl}\n            isGroup={isGroup}\n            icon={isGroup ? 'folder' : asset?.definition ? 'asset' : 'asset_non_sda'}\n          />\n          <Description>\n            {asset?.definition &&\n              asset.definition.description &&\n              markdownToPlaintext(asset.definition.description).split('\\n')[0]}\n          </Description>\n        </td>\n        <td>\n          {repoAddress && (\n            <Box flex={{direction: 'column', gap: 4}}>\n              <RepositoryLink showIcon showRefresh={false} repoAddress={repoAddress} />\n              {asset?.definition && asset?.definition.groupName ? (\n                <Link\n                  to={workspacePathFromAddress(\n                    repoAddress,\n                    `/asset-groups/${asset.definition.groupName}`,\n                  )}\n                >\n                  <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n                    <Icon color={Colors.Gray400} name=\"asset_group\" /> {asset.definition.groupName}\n                  </Box>\n                </Link>\n              ) : undefined}\n            </Box>\n          )}\n        </td>\n        <td>\n          {liveData ? (\n            <Box flex={{gap: 8, alignItems: 'center'}}>\n              {liveData.lastMaterialization ? (\n                <Mono style={{flex: 1}}>\n                  <AssetRunLink\n                    runId={liveData.lastMaterialization.runId}\n                    event={{\n                      stepKey: liveData.stepKey,\n                      timestamp: liveData.lastMaterialization.timestamp,\n                    }}\n                  >\n                    <TimestampDisplay\n                      timestamp={Number(liveData.lastMaterialization.timestamp) / 1000}\n                      timeFormat={{showSeconds: false, showTimezone: false}}\n                    />\n                  </AssetRunLink>\n                </Mono>\n              ) : (\n                <span></span>\n              )}\n              <ComputeStatusNotice computeStatus={liveData?.computeStatus} />\n            </Box>\n          ) : undefined}\n        </td>\n        <td>\n          {liveData && (\n            <Mono>\n              <AssetLatestRunWithNotices liveData={liveData} />\n            </Mono>\n          )}\n        </td>\n        <td>\n          {asset ? (\n            <Box flex={{gap: 8, alignItems: 'center'}}>\n              <AnchorButton to={assetDetailsPathForKey({path})}>View details</AnchorButton>\n              <Popover\n                position=\"bottom-right\"\n                content={\n                  <Menu>\n                    <MenuLink\n                      text=\"Show in group\"\n                      to={\n                        repoAddress && asset.definition?.groupName\n                          ? workspacePathFromAddress(\n                              repoAddress,\n                              `/asset-groups/${asset.definition.groupName}`,\n                            )\n                          : ''\n                      }\n                      disabled={!asset?.definition}\n                      icon=\"asset_group\"\n                    />\n                    <MenuLink\n                      text=\"View neighbors\"\n                      to={assetDetailsPathForKey(\n                        {path},\n                        {view: 'lineage', lineageScope: 'neighbors'},\n                      )}\n                      disabled={!asset?.definition}\n                      icon=\"graph_neighbors\"\n                    />\n                    <MenuLink\n                      text=\"View upstream assets\"\n                      to={assetDetailsPathForKey(\n                        {path},\n                        {view: 'lineage', lineageScope: 'upstream'},\n                      )}\n                      disabled={!asset?.definition}\n                      icon=\"graph_upstream\"\n                    />\n                    <MenuLink\n                      text=\"View downstream assets\"\n                      to={assetDetailsPathForKey(\n                        {path},\n                        {view: 'lineage', lineageScope: 'downstream'},\n                      )}\n                      disabled={!asset?.definition}\n                      icon=\"graph_downstream\"\n                    />\n                    <MenuItem\n                      text=\"Wipe materializations\"\n                      icon=\"delete\"\n                      disabled={!canWipe}\n                      intent=\"danger\"\n                      onClick={() => canWipe && onWipe(assets)}\n                    />\n                  </Menu>\n                }\n              >\n                <Button icon={<Icon name=\"expand_more\" />} />\n              </Popover>\n            </Box>\n          ) : (\n            <span />\n          )}\n        </td>\n      </tr>\n    );\n  },\n);\n\nconst MoreActionsDropdown: React.FC<{\n  selected: Asset[];\n  clearSelection: () => void;\n  requery?: RefetchQueriesFunction;\n}> = React.memo(({selected, clearSelection, requery}) => {\n  const [showBulkWipeDialog, setShowBulkWipeDialog] = React.useState<boolean>(false);\n  const {canWipeAssets} = usePermissions();\n\n  if (!canWipeAssets.enabled) {\n    return null;\n  }\n\n  const disabled = selected.length === 0;\n\n  return (\n    <>\n      <Popover\n        position=\"bottom-right\"\n        content={\n          <Menu>\n            <MenuItem\n              text=\"Wipe materializations\"\n              onClick={() => setShowBulkWipeDialog(true)}\n              icon={<Icon name=\"delete\" color={disabled ? Colors.Gray600 : Colors.Red500} />}\n              disabled={disabled}\n              intent=\"danger\"\n            />\n          </Menu>\n        }\n      >\n        <Button icon={<Icon name=\"expand_more\" />} />\n      </Popover>\n      <AssetWipeDialog\n        assetKeys={selected.map((asset) => asset.key)}\n        isOpen={showBulkWipeDialog}\n        onClose={() => setShowBulkWipeDialog(false)}\n        onComplete={() => {\n          setShowBulkWipeDialog(false);\n          clearSelection();\n        }}\n        requery={requery}\n      />\n    </>\n  );\n});\n\nexport const ASSET_TABLE_DEFINITION_FRAGMENT = gql`\n  fragment AssetTableDefinitionFragment on AssetNode {\n    id\n    groupName\n    partitionDefinition\n    description\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport const ASSET_TABLE_FRAGMENT = gql`\n  fragment AssetTableFragment on Asset {\n    __typename\n    id\n    key {\n      path\n    }\n    definition {\n      id\n      ...AssetTableDefinitionFragment\n    }\n  }\n  ${ASSET_TABLE_DEFINITION_FRAGMENT}\n`;\n\nconst Description = styled.div`\n  color: ${Colors.Gray800};\n  font-size: 14px;\n`;\n","import {NonIdealState} from '@dagster-io/ui';\nimport * as React from 'react';\n\nexport const AssetsEmptyState = ({prefixPath}: {prefixPath: string[]}) => (\n  <NonIdealState\n    icon=\"asset\"\n    title=\"Assets\"\n    description={\n      <p>\n        {prefixPath && prefixPath.length\n          ? `There are no matching materialized assets with the specified asset key. `\n          : `There are no known materialized assets. `}\n        Any asset keys that have been specified with an <code>AssetMaterialization</code> during a\n        pipeline run will appear here. See the{' '}\n        <a href=\"https://docs.dagster.io/_apidocs/ops#dagster.AssetMaterialization\">\n          AssetMaterialization documentation\n        </a>{' '}\n        for more information.\n      </p>\n    }\n  />\n);\n","import {useStateWithStorage} from '../hooks/useStateWithStorage';\n\nconst ASSET_VIEW_KEY = 'AssetViewPreference';\n\nexport type AssetViewType = 'flat' | 'directory';\n\nconst validateSavedAssetView = (storedValue: any) =>\n  storedValue === 'flat' || storedValue === 'directory' ? storedValue : 'flat';\n\nexport const useAssetView = () => {\n  return useStateWithStorage<AssetViewType>(ASSET_VIEW_KEY, validateSavedAssetView);\n};\n","import {gql, QueryResult, useQuery} from '@apollo/client';\nimport {\n  Box,\n  CursorPaginationControls,\n  CursorPaginationProps,\n  TextInput,\n  Suggest,\n  MenuItem,\n  Icon,\n  ButtonGroup,\n} from '@dagster-io/ui';\nimport isEqual from 'lodash/isEqual';\nimport uniqBy from 'lodash/uniqBy';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {FIFTEEN_SECONDS, useMergedRefresh, useQueryRefreshAtInterval} from '../app/QueryRefresh';\nimport {PythonErrorFragment} from '../app/types/PythonErrorFragment';\nimport {tokenForAssetKey} from '../asset-graph/Utils';\nimport {useLiveDataForAssetKeys} from '../asset-graph/useLiveDataForAssetKeys';\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {AssetGroupSelector} from '../types/globalTypes';\nimport {ClearButton} from '../ui/ClearButton';\nimport {LoadingSpinner} from '../ui/Loading';\nimport {StickyTableContainer} from '../ui/StickyTableContainer';\nimport {buildRepoPath} from '../workspace/buildRepoAddress';\n\nimport {AssetTable, ASSET_TABLE_DEFINITION_FRAGMENT, ASSET_TABLE_FRAGMENT} from './AssetTable';\nimport {AssetsEmptyState} from './AssetsEmptyState';\nimport {AssetKey} from './types';\nimport {\n  AssetCatalogGroupTableQuery,\n  AssetCatalogGroupTableQueryVariables,\n  AssetCatalogGroupTableQuery_assetNodes,\n} from './types/AssetCatalogGroupTableQuery';\nimport {\n  AssetCatalogTableQuery,\n  AssetCatalogTableQuery_assetsOrError_AssetConnection_nodes,\n} from './types/AssetCatalogTableQuery';\nimport {AssetTableFragment} from './types/AssetTableFragment';\nimport {AssetViewType, useAssetView} from './useAssetView';\n\nconst PAGE_SIZE = 50;\n\ntype Asset = AssetCatalogTableQuery_assetsOrError_AssetConnection_nodes;\n\nfunction useAllAssets(\n  groupSelector?: AssetGroupSelector,\n): {\n  query: QueryResult;\n  assets: AssetTableFragment[] | undefined;\n  error: PythonErrorFragment | undefined;\n} {\n  const assetsQuery = useQuery<AssetCatalogTableQuery>(ASSET_CATALOG_TABLE_QUERY, {\n    skip: !!groupSelector,\n    notifyOnNetworkStatusChange: true,\n  });\n  const groupQuery = useQuery<AssetCatalogGroupTableQuery, AssetCatalogGroupTableQueryVariables>(\n    ASSET_CATALOG_GROUP_TABLE_QUERY,\n    {\n      skip: !groupSelector,\n      variables: {group: groupSelector},\n      notifyOnNetworkStatusChange: true,\n    },\n  );\n\n  return React.useMemo(() => {\n    if (groupSelector) {\n      const assetNodes = groupQuery.data?.assetNodes;\n      return {\n        query: groupQuery,\n        error: undefined,\n        assets: assetNodes?.map(definitionToAssetTableFragment),\n      };\n    } else {\n      const assetsOrError = assetsQuery.data?.assetsOrError;\n      return {\n        query: assetsQuery,\n        error: assetsOrError?.__typename === 'PythonError' ? assetsOrError : undefined,\n        assets: assetsOrError?.__typename === 'AssetConnection' ? assetsOrError.nodes : undefined,\n      };\n    }\n  }, [assetsQuery, groupQuery, groupSelector]);\n}\n\ninterface AssetCatalogTableProps {\n  prefixPath: string[];\n  setPrefixPath: (prefixPath: string[]) => void;\n  groupSelector?: AssetGroupSelector;\n}\n\nexport const AssetsCatalogTable: React.FC<AssetCatalogTableProps> = ({\n  prefixPath,\n  setPrefixPath,\n  groupSelector,\n}) => {\n  const [view, setView] = useAssetView();\n  const [cursor, setCursor] = useQueryPersistedState<string | undefined>({queryKey: 'cursor'});\n  const [search, setSearch] = useQueryPersistedState<string | undefined>({queryKey: 'q'});\n  const [searchGroup, setSearchGroup] = useQueryPersistedState<AssetGroupSelector | null>({\n    queryKey: 'g',\n    decode: (qs) => (qs.group ? JSON.parse(qs.group) : null),\n    encode: (group) => ({group: group ? JSON.stringify(group) : undefined}),\n  });\n\n  const searchPath = (search || '')\n    .replace(/(( ?> ?)|\\.|\\/)/g, '/')\n    .toLowerCase()\n    .trim();\n\n  const {assets, query, error} = useAllAssets(groupSelector);\n  const filtered = React.useMemo(\n    () =>\n      (assets || []).filter((a) => {\n        const groupMatch = !searchGroup || isEqual(buildAssetGroupSelector(a), searchGroup);\n        const pathMatch = !searchPath || tokenForAssetKey(a.key).toLowerCase().includes(searchPath);\n        return groupMatch && pathMatch;\n      }),\n    [assets, searchPath, searchGroup],\n  );\n\n  const {displayPathForAsset, displayed, nextCursor, prevCursor} =\n    view === 'flat'\n      ? buildFlatProps(filtered, prefixPath, cursor)\n      : buildNamespaceProps(filtered, prefixPath, cursor);\n\n  const displayedKeys = React.useMemo(\n    () => displayed.map<AssetKey>((a) => ({path: a.key.path})),\n    [displayed],\n  );\n  const {liveDataByNode, liveResult} = useLiveDataForAssetKeys(displayedKeys);\n\n  const refreshState = useMergedRefresh(\n    useQueryRefreshAtInterval(query, FIFTEEN_SECONDS),\n    useQueryRefreshAtInterval(liveResult, FIFTEEN_SECONDS),\n  );\n\n  React.useEffect(() => {\n    if (view !== 'directory' && prefixPath.length) {\n      setView('directory');\n    }\n  }, [view, setView, prefixPath]);\n\n  if (error) {\n    return <PythonErrorInfo error={error} />;\n  }\n  if (!assets) {\n    return <LoadingSpinner purpose=\"page\" />;\n  }\n  if (!assets.length) {\n    return (\n      <Box padding={{vertical: 64}}>\n        <AssetsEmptyState prefixPath={prefixPath} />\n      </Box>\n    );\n  }\n\n  const paginationProps: CursorPaginationProps = {\n    hasPrevCursor: !!prevCursor,\n    hasNextCursor: !!nextCursor,\n    popCursor: () => setCursor(prevCursor),\n    advanceCursor: () => setCursor(nextCursor),\n    reset: () => {\n      setCursor(undefined);\n    },\n  };\n\n  return (\n    <Wrapper>\n      <StickyTableContainer $top={0}>\n        <AssetTable\n          view={view}\n          assets={displayed}\n          liveDataByNode={liveDataByNode}\n          actionBarComponents={\n            <>\n              <ButtonGroup<AssetViewType>\n                activeItems={new Set([view])}\n                buttons={[\n                  {id: 'flat', icon: 'view_list', tooltip: 'List view'},\n                  {id: 'directory', icon: 'folder', tooltip: 'Folder view'},\n                ]}\n                onClick={(view) => {\n                  setView(view);\n                  if (view === 'flat' && prefixPath.length) {\n                    setPrefixPath([]);\n                  }\n                }}\n              />\n              <TextInput\n                value={search || ''}\n                style={{width: '30vw', minWidth: 150, maxWidth: 400}}\n                placeholder={\n                  prefixPath.length\n                    ? `Filter asset keys in ${prefixPath.join('/')}`\n                    : `Filter asset keys`\n                }\n                onChange={(e: React.ChangeEvent<any>) => setSearch(e.target.value)}\n              />\n              {!groupSelector ? (\n                <AssetGroupSuggest assets={assets} value={searchGroup} onChange={setSearchGroup} />\n              ) : undefined}\n            </>\n          }\n          refreshState={refreshState}\n          prefixPath={prefixPath || []}\n          displayPathForAsset={displayPathForAsset}\n          maxDisplayCount={PAGE_SIZE}\n          requery={(_) => [{query: ASSET_CATALOG_TABLE_QUERY}]}\n        />\n      </StickyTableContainer>\n      <Box padding={{bottom: 64}}>\n        <CursorPaginationControls {...paginationProps} />\n      </Box>\n    </Wrapper>\n  );\n};\n\nconst AssetGroupSuggest: React.FC<{\n  assets: Asset[];\n  value: AssetGroupSelector | null;\n  onChange: (g: AssetGroupSelector | null) => void;\n}> = ({assets, value, onChange}) => {\n  const assetGroups = React.useMemo(\n    () =>\n      uniqBy(\n        (assets || []).map(buildAssetGroupSelector).filter((a) => !!a) as AssetGroupSelector[],\n        (a) => JSON.stringify(a),\n      ).sort((a, b) => a.groupName.localeCompare(b.groupName)),\n    [assets],\n  );\n\n  const repoContextNeeded = React.useMemo(() => {\n    // This is a bit tricky - the first time we find a groupName it sets the key to `false`.\n    // The second time, it sets the value to `true` + tells use we need to show the repo name\n    const result: {[groupName: string]: boolean} = {};\n    assetGroups.forEach(\n      (group) => (result[group.groupName] = result.hasOwnProperty(group.groupName)),\n    );\n    return result;\n  }, [assetGroups]);\n\n  return (\n    <Suggest<AssetGroupSelector>\n      selectedItem={value}\n      items={assetGroups}\n      inputProps={{\n        style: {width: 220},\n        placeholder: 'Filter asset groups',\n        rightElement: value ? (\n          <ClearButton onClick={() => onChange(null)} style={{marginTop: 5, marginRight: 4}}>\n            <Icon name=\"cancel\" />\n          </ClearButton>\n        ) : undefined,\n      }}\n      inputValueRenderer={(partition) => partition.groupName}\n      itemPredicate={(query, partition) =>\n        query.length === 0 || partition.groupName.includes(query)\n      }\n      itemsEqual={isEqual}\n      itemRenderer={(assetGroup, props) => (\n        <MenuItem\n          active={props.modifiers.active}\n          onClick={props.handleClick}\n          key={JSON.stringify(assetGroup)}\n          text={\n            <>\n              {assetGroup.groupName}\n              {repoContextNeeded[assetGroup.groupName] ? (\n                <span style={{opacity: 0.5, paddingLeft: 4}}>\n                  {buildRepoPath(assetGroup.repositoryName, assetGroup.repositoryLocationName)}\n                </span>\n              ) : undefined}\n            </>\n          }\n        />\n      )}\n      noResults={<MenuItem disabled={true} text=\"No asset groups\" />}\n      onItemSelect={onChange}\n    />\n  );\n};\nconst Wrapper = styled.div`\n  flex: 1 1;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  min-width: 0;\n  position: relative;\n  z-index: 0;\n`;\n\nconst ASSET_CATALOG_TABLE_QUERY = gql`\n  query AssetCatalogTableQuery {\n    assetsOrError {\n      __typename\n      ... on AssetConnection {\n        nodes {\n          id\n          ...AssetTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ${PYTHON_ERROR_FRAGMENT}\n  ${ASSET_TABLE_FRAGMENT}\n`;\n\nconst ASSET_CATALOG_GROUP_TABLE_QUERY = gql`\n  query AssetCatalogGroupTableQuery($group: AssetGroupSelector) {\n    assetNodes(group: $group) {\n      id\n      assetKey {\n        path\n      }\n      ...AssetTableDefinitionFragment\n    }\n  }\n  ${ASSET_TABLE_DEFINITION_FRAGMENT}\n`;\n\n// When we load the AssetCatalogTable for a particular asset group, we retrieve `assetNodes`,\n// not `assets`. To narrow the scope of this difference we coerce the nodes to look like\n// AssetCatalogTableQuery results.\n//\nfunction definitionToAssetTableFragment(\n  definition: AssetCatalogGroupTableQuery_assetNodes,\n): AssetTableFragment {\n  return {__typename: 'Asset', id: definition.id, key: definition.assetKey, definition};\n}\n\nfunction buildAssetGroupSelector(a: Asset) {\n  return a.definition && a.definition.groupName\n    ? {\n        groupName: a.definition.groupName,\n        repositoryName: a.definition.repository.name,\n        repositoryLocationName: a.definition.repository.location.name,\n      }\n    : null;\n}\n\nfunction buildFlatProps(assets: Asset[], prefixPath: string[], cursor: string | undefined) {\n  const cursorValue = (asset: Asset) => JSON.stringify([...prefixPath, ...asset.key.path]);\n  const cursorIndex = cursor ? assets.findIndex((ns) => cursor <= cursorValue(ns)) : 0;\n  const prevPageIndex = Math.max(0, cursorIndex - PAGE_SIZE);\n  const nextPageIndex = cursorIndex + PAGE_SIZE;\n\n  return {\n    displayed: assets.slice(cursorIndex, cursorIndex + PAGE_SIZE),\n    displayPathForAsset: (asset: Asset) => asset.key.path,\n    prevCursor: cursorIndex > 0 ? cursorValue(assets[prevPageIndex]) : undefined,\n    nextCursor: nextPageIndex < assets.length ? cursorValue(assets[nextPageIndex]) : undefined,\n  };\n}\n\nfunction buildNamespaceProps(assets: Asset[], prefixPath: string[], cursor: string | undefined) {\n  const namespaceForAsset = (asset: Asset) => {\n    return asset.key.path.slice(prefixPath.length, prefixPath.length + 1);\n  };\n\n  const namespaces = Array.from(\n    new Set(assets.map((asset) => JSON.stringify(namespaceForAsset(asset)))),\n  )\n    .map((x) => JSON.parse(x))\n    .sort();\n\n  const cursorValue = (ns: string[]) => JSON.stringify([...prefixPath, ...ns]);\n  const cursorIndex = cursor ? namespaces.findIndex((ns) => cursor <= cursorValue(ns)) : 0;\n\n  if (cursorIndex === -1) {\n    return {\n      displayPathForAsset: namespaceForAsset,\n      displayed: [],\n      prevCursor: undefined,\n      nextCursor: undefined,\n    };\n  }\n\n  const prevPageIndex = Math.max(0, cursorIndex - PAGE_SIZE);\n  const prevCursor = cursorIndex !== 0 ? cursorValue(namespaces[prevPageIndex]) : undefined;\n  const nextPageIndex = cursorIndex + PAGE_SIZE;\n  const nextCursor =\n    namespaces.length > nextPageIndex ? cursorValue(namespaces[nextPageIndex]) : undefined;\n  const displayed = filterAssetsByNamespace(\n    assets,\n    namespaces.map((ns) => [...prefixPath, ...ns]),\n  ).slice(cursorIndex, cursorIndex + PAGE_SIZE);\n\n  return {\n    nextCursor,\n    prevCursor,\n    displayPathForAsset: namespaceForAsset,\n    displayed,\n  };\n}\n\nconst filterAssetsByNamespace = (assets: Asset[], paths: string[][]) => {\n  return assets.filter((asset) =>\n    paths.some((path) => path.every((part, i) => part === asset.key.path[i])),\n  );\n};\n","import {gql, useLazyQuery, useMutation, useQuery} from '@apollo/client';\nimport {\n  Alert,\n  Box,\n  Button,\n  ButtonLink,\n  Checkbox,\n  Colors,\n  DialogBody,\n  DialogFooter,\n  Group,\n  Icon,\n  NonIdealState,\n  Spinner,\n  Tooltip,\n  Mono,\n} from '@dagster-io/ui';\nimport {History} from 'history';\nimport * as React from 'react';\nimport {useHistory} from 'react-router';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {SharedToaster} from '../app/DomUtils';\nimport {PipelineRunTag} from '../app/ExecutionSessionStorage';\nimport {filterByQuery} from '../app/GraphQueryImpl';\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {GanttChartMode} from '../gantt/GanttChart';\nimport {buildLayout} from '../gantt/GanttChartLayout';\nimport {useViewport} from '../gantt/useViewport';\nimport {LAUNCH_PARTITION_BACKFILL_MUTATION} from '../instance/BackfillUtils';\nimport {\n  LaunchPartitionBackfill,\n  LaunchPartitionBackfillVariables,\n} from '../instance/types/LaunchPartitionBackfill';\nimport {LaunchButton} from '../launchpad/LaunchButton';\nimport {TagContainer, TagEditor} from '../launchpad/TagEditor';\nimport {RunStatus} from '../types/globalTypes';\nimport {GraphQueryInput} from '../ui/GraphQueryInput';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {PartitionRangeInput} from './PartitionRangeInput';\nimport {\n  BOX_SIZE,\n  GridColumn,\n  GridFloatingContainer,\n  GridScrollContainer,\n  LeftLabel,\n  topLabelHeightForLabels,\n  TopLabel,\n  TopLabelTilted,\n} from './RunMatrixUtils';\nimport {PartitionStatusQuery, PartitionStatusQueryVariables} from './types/PartitionStatusQuery';\nimport {\n  PartitionsBackfillSelectorQuery,\n  PartitionsBackfillSelectorQueryVariables,\n} from './types/PartitionsBackfillSelectorQuery';\n\nconst OVERSCROLL = 200;\nconst DEFAULT_RUN_LAUNCHER_NAME = 'DefaultRunLauncher';\n\ninterface BackfillOptions {\n  reexecute: boolean;\n  fromFailure: boolean;\n}\n\ntype SelectionRange = {\n  start: string;\n  end: string;\n};\n\nexport const PartitionsBackfillPartitionSelector: React.FC<{\n  partitionSetName: string;\n  pipelineName: string;\n  onLaunch?: (backfillId: string, stepQuery: string) => void;\n  onCancel?: () => void;\n  onSubmit: () => void;\n  repoAddress: RepoAddress;\n}> = ({partitionSetName, pipelineName, onLaunch, onCancel, onSubmit, repoAddress}) => {\n  const history = useHistory();\n  const repositorySelector = repoAddressToSelector(repoAddress);\n  const [currentSelectionRange, setCurrentSelectionRange] = React.useState<\n    SelectionRange | undefined\n  >();\n  const [selected, setSelected] = React.useState<string[]>([]);\n  const [tagEditorOpen, setTagEditorOpen] = React.useState<boolean>(false);\n  const [tags, setTags] = React.useState<PipelineRunTag[]>([]);\n  const [query, setQuery] = React.useState<string>('');\n  const [options, setOptions] = React.useState<BackfillOptions>({\n    reexecute: false,\n    fromFailure: false,\n  });\n\n  const repo = useRepository(repoAddress);\n  const isJob = isThisThingAJob(repo, pipelineName);\n\n  const {containerProps, viewport} = useViewport({\n    initialOffset: React.useCallback((el) => ({left: el.scrollWidth - el.clientWidth, top: 0}), []),\n  });\n\n  React.useEffect(() => {\n    const resetSelectionRange = () => setCurrentSelectionRange(undefined);\n    window.addEventListener('mouseup', resetSelectionRange);\n    return () => window.removeEventListener('mouseup', resetSelectionRange);\n  });\n\n  const mounted = React.useRef(true);\n  React.useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  }, [onLaunch]);\n\n  const {loading, data} = useQuery<\n    PartitionsBackfillSelectorQuery,\n    PartitionsBackfillSelectorQueryVariables\n  >(PARTITIONS_BACKFILL_SELECTOR_QUERY, {\n    variables: {\n      repositorySelector,\n      partitionSetName,\n      pipelineSelector: {\n        ...repositorySelector,\n        pipelineName,\n      },\n    },\n    fetchPolicy: 'network-only',\n  });\n\n  const [queryStatuses, {loading: statusesLoading, data: statusesData}] = useLazyQuery<\n    PartitionStatusQuery,\n    PartitionStatusQueryVariables\n  >(PARTITION_STATUS_QUERY, {\n    variables: {\n      repositorySelector,\n      partitionSetName,\n    },\n    fetchPolicy: 'cache-and-network',\n  });\n\n  if (!data || loading) {\n    return (\n      <Box margin={{vertical: 32}} flex={{justifyContent: 'center'}}>\n        <Spinner purpose=\"section\" />\n      </Box>\n    );\n  }\n\n  if (data.partitionSetOrError.__typename === 'PartitionSetNotFoundError') {\n    return (\n      <Box margin={20}>\n        <NonIdealState\n          icon=\"error\"\n          title=\"Partition Set Not Found\"\n          description={data.partitionSetOrError.message}\n        />\n      </Box>\n    );\n  }\n  if (data.pipelineSnapshotOrError.__typename === 'PipelineNotFoundError') {\n    return (\n      <Box margin={20}>\n        <NonIdealState\n          icon=\"error\"\n          title={isJob ? 'Job not found' : 'Pipeline not found'}\n          description={data.pipelineSnapshotOrError.message}\n        />\n      </Box>\n    );\n  }\n  if (data.pipelineSnapshotOrError.__typename === 'PipelineSnapshotNotFoundError') {\n    return (\n      <Box margin={20}>\n        <NonIdealState\n          icon=\"error\"\n          title={isJob ? 'Job not found' : 'Pipeline not found'}\n          description={data.pipelineSnapshotOrError.message}\n        />\n      </Box>\n    );\n  }\n\n  if (data.partitionSetOrError.__typename === 'PythonError') {\n    return (\n      <Box margin={20}>\n        <PythonErrorInfo error={data.partitionSetOrError} />\n      </Box>\n    );\n  }\n\n  if (data.pipelineSnapshotOrError.__typename === 'PythonError') {\n    return (\n      <Box margin={20}>\n        <PythonErrorInfo error={data.pipelineSnapshotOrError} />;\n      </Box>\n    );\n  }\n\n  if (statusesData?.partitionSetOrError.__typename === 'PythonError') {\n    return (\n      <Box margin={20}>\n        <PythonErrorInfo error={statusesData?.partitionSetOrError} />\n      </Box>\n    );\n  }\n\n  const onSuccess = (backfillId: string) => {\n    showBackfillSuccessToast(history, backfillId);\n    onLaunch?.(backfillId, query);\n  };\n\n  const onError = (data: LaunchPartitionBackfill | null | undefined) => {\n    showBackfillErrorToast(data);\n  };\n\n  const {\n    partitionSetOrError: partitionSet,\n    pipelineSnapshotOrError: pipelineSnapshot,\n    instance,\n  } = data;\n\n  const solids = pipelineSnapshot.solidHandles.map((h: any) => h.solid);\n  const runPartitions =\n    partitionSet.partitionsOrError.__typename === 'Partitions'\n      ? partitionSet.partitionsOrError.results\n      : null;\n\n  if (!solids || !runPartitions) {\n    return <span />;\n  }\n\n  const partitionStatuses = () => {\n    if (\n      statusesData?.partitionSetOrError.__typename === 'PartitionSet' &&\n      statusesData.partitionSetOrError.partitionStatusesOrError.__typename === 'PartitionStatuses'\n    ) {\n      return statusesData.partitionSetOrError.partitionStatusesOrError.results;\n    }\n    return [];\n  };\n\n  const partitionNames = runPartitions.map((x) => x.name);\n  const statuses = partitionStatuses();\n\n  const partitionsWithLastRunSuccess = statuses\n    .filter((x) => x.runStatus === RunStatus.SUCCESS)\n    .map((x) => x.partitionName);\n\n  const partitionsWithLastRunFailure = statuses\n    .filter(\n      (x) =>\n        x.runStatus === RunStatus.FAILURE ||\n        x.runStatus === RunStatus.CANCELED ||\n        x.runStatus === RunStatus.CANCELING,\n    )\n    .map((x) => x.partitionName);\n\n  const selectablePartitions = options.reexecute\n    ? options.fromFailure\n      ? partitionsWithLastRunFailure\n      : partitionsWithLastRunSuccess\n    : partitionNames;\n\n  const solidsFiltered = filterByQuery(solids, query);\n  const layout = buildLayout({nodes: solidsFiltered.all, mode: GanttChartMode.FLAT});\n  const stepRows = layout.boxes.map((box) => ({\n    x: box.x,\n    name: box.node.name,\n  }));\n\n  const usingDefaultRunLauncher = instance.runLauncher?.name === DEFAULT_RUN_LAUNCHER_NAME;\n\n  const getRangeSelection = (start: string, end: string) => {\n    const startIdx = selectablePartitions.indexOf(start);\n    const endIdx = selectablePartitions.indexOf(end);\n    return selectablePartitions.slice(Math.min(startIdx, endIdx), Math.max(startIdx, endIdx) + 1);\n  };\n\n  const currentRangeSelection = currentSelectionRange\n    ? getRangeSelection(currentSelectionRange.start, currentSelectionRange.end)\n    : [];\n\n  const onPartitionMouseDown = (name: string) => {\n    setCurrentSelectionRange({start: name, end: name});\n  };\n\n  const onPartitionMouseUp = (_: string) => {\n    if (!currentRangeSelection.length) {\n      return;\n    }\n\n    const allSelected = currentRangeSelection.every((name) => selected.includes(name));\n    if (allSelected) {\n      setSelected(selected.filter((x) => !currentRangeSelection.includes(x)));\n    } else {\n      const newSelected = new Set(selected);\n      currentRangeSelection.forEach((name) => newSelected.add(name));\n      setSelected(Array.from(newSelected));\n    }\n    setCurrentSelectionRange(undefined);\n  };\n\n  const onPartitionMouseOver = (name: string) => {\n    if (!currentSelectionRange) {\n      return;\n    }\n    const {start} = currentSelectionRange;\n    setCurrentSelectionRange({start, end: name});\n  };\n\n  const visibleRangeStart = Math.max(0, Math.floor((viewport.left - OVERSCROLL) / BOX_SIZE));\n  const visibleCount = Math.ceil((viewport.width + OVERSCROLL * 2) / BOX_SIZE);\n  const visiblePartitionNames = partitionNames.slice(\n    visibleRangeStart,\n    visibleRangeStart + visibleCount,\n  );\n\n  const topLabelHeight = topLabelHeightForLabels(partitionNames);\n\n  return (\n    <>\n      <DialogBody>\n        <Box flex={{direction: 'column', gap: 8}}>\n          <Box flex={{direction: 'row', alignItems: 'center', gap: 12}}>\n            <strong style={{display: 'block'}}>Partitions</strong>\n            <Checkbox\n              label=\"Select all\"\n              disabled={!selectablePartitions.length}\n              style={{marginBottom: 0, marginLeft: 10}}\n              checked={selected.length === selectablePartitions.length}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                if (!e.target.checked) {\n                  setSelected([]);\n                } else {\n                  setSelected(\n                    selected.length === selectablePartitions.length ? [] : selectablePartitions,\n                  );\n                }\n              }}\n            />\n          </Box>\n          <PartitionRangeInput\n            value={selected}\n            partitionNames={partitionNames}\n            onChange={setSelected}\n          />\n        </Box>\n        <Box flex={{direction: 'row', gap: 24}} margin={{top: 16}}>\n          <Box flex={{direction: 'column', gap: 8}}>\n            <strong>Step subset</strong>\n            <GraphQueryInput\n              disabled={options.fromFailure}\n              width={520}\n              items={solids}\n              value={query}\n              placeholder=\"Type a step subset\"\n              onChange={setQuery}\n            />\n          </Box>\n          <Box flex={{direction: 'column', gap: 12}}>\n            <strong>Options</strong>\n            <div style={{display: 'flex'}}>\n              <Checkbox\n                checked={options.fromFailure}\n                onChange={() => {\n                  if (!statusesData) {\n                    queryStatuses();\n                  }\n                  setSelected([]);\n                  setQuery('');\n                  setOptions({\n                    ...options,\n                    reexecute: !options.reexecute,\n                    fromFailure: !options.fromFailure,\n                  });\n                }}\n                label={\n                  <Box flex={{display: 'inline-flex', alignItems: 'center'}}>\n                    <Box margin={{right: 4}}>Re-execute from failures</Box>\n                    <Tooltip\n                      placement=\"top\"\n                      content=\"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed.\"\n                    >\n                      <Icon name=\"info\" color={Colors.Gray500} />\n                    </Tooltip>\n                  </Box>\n                }\n              />\n              {statusesLoading ? (\n                <div style={{marginLeft: '8px', marginTop: '3px'}}>\n                  <Spinner purpose=\"body-text\" />\n                </div>\n              ) : null}\n            </div>\n          </Box>\n        </Box>\n        <Box flex={{direction: 'column', gap: 8}} margin={{top: 16}}>\n          <TagEditor\n            tagsFromSession={tags}\n            onChange={setTags}\n            open={tagEditorOpen}\n            onRequestClose={() => setTagEditorOpen(false)}\n          />\n          <strong>Tags</strong>\n          {tags.length ? (\n            <div style={{border: `1px solid ${Colors.Gray300}`, borderRadius: 8, padding: 3}}>\n              <TagContainer tagsFromSession={tags} onRequestEdit={() => setTagEditorOpen(true)} />\n            </div>\n          ) : (\n            <div>\n              <Button onClick={() => setTagEditorOpen(true)}>Add tags to backfill runs</Button>\n            </div>\n          )}\n        </Box>\n\n        <div\n          style={{\n            display: 'flex',\n            marginTop: 20,\n            paddingTop: 20,\n            borderTop: `1px solid ${Colors.Gray100}`,\n            justifyContent: 'space-between',\n          }}\n        >\n          <strong style={{display: 'block', marginBottom: 4}}>Preview</strong>\n          <div style={{color: Colors.Gray400}}>Click or drag to edit selected partitions</div>\n        </div>\n        <div style={{display: 'flex', border: `1px solid ${Colors.Gray200}`}}>\n          {query && (\n            <GridFloatingContainer floating={true}>\n              <GridColumn disabled>\n                <TopLabel style={{height: topLabelHeight}} />\n                {stepRows.map((step) => (\n                  <LeftLabel style={{paddingLeft: step.x}} key={step.name}>\n                    {step.name}\n                  </LeftLabel>\n                ))}\n              </GridColumn>\n            </GridFloatingContainer>\n          )}\n          <GridScrollContainer {...containerProps}>\n            <div\n              style={{\n                width: partitionNames.length * BOX_SIZE,\n                position: 'relative',\n                height: query\n                  ? stepRows.length * BOX_SIZE + topLabelHeight\n                  : BOX_SIZE + topLabelHeight + 25,\n              }}\n            >\n              {visiblePartitionNames.map((partitionName, idx) => (\n                <GridColumn\n                  key={partitionName}\n                  style={{\n                    zIndex: partitionNames.length - (idx + visibleRangeStart),\n                    width: BOX_SIZE,\n                    position: 'absolute',\n                    userSelect: 'none',\n                    left: (idx + visibleRangeStart) * BOX_SIZE,\n                  }}\n                  disabled={statusesLoading || !selectablePartitions.includes(partitionName)}\n                  focused={selected.includes(partitionName)}\n                  multiselectFocused={currentRangeSelection.includes(partitionName)}\n                  onMouseDown={() => onPartitionMouseDown(partitionName)}\n                  onMouseUp={() => onPartitionMouseUp(partitionName)}\n                  onMouseOver={() => onPartitionMouseOver(partitionName)}\n                >\n                  <TopLabelTilted $height={topLabelHeight} label={partitionName} />\n                  {!options.reexecute ? (\n                    <div\n                      className={`square ${\n                        selectablePartitions.includes(partitionName) ? 'missing' : 'disabled'\n                      }`}\n                    />\n                  ) : options.fromFailure ? (\n                    <div\n                      className={`square ${\n                        selectablePartitions.includes(partitionName) ? 'failure' : 'disabled'\n                      }`}\n                    />\n                  ) : (\n                    stepRows.map((step) => (\n                      <div\n                        key={`${partitionName}:${step.name}`}\n                        className={`square ${\n                          selectablePartitions.includes(partitionName) ? 'missing' : 'disabled'\n                        }`}\n                      />\n                    ))\n                  )}\n                </GridColumn>\n              ))}\n            </div>\n          </GridScrollContainer>\n        </div>\n\n        {!instance.daemonHealth.daemonStatus.healthy ? (\n          <div style={{marginTop: 10}}>\n            <DaemonNotRunningAlert />\n          </div>\n        ) : null}\n        {usingDefaultRunLauncher && !instance.runQueuingSupported ? (\n          <div style={{marginTop: 10}}>\n            <UsingDefaultLauncherAlert />\n          </div>\n        ) : null}\n      </DialogBody>\n      <DialogFooter>\n        <Button intent=\"none\" onClick={onCancel}>\n          Cancel\n        </Button>\n        <LaunchBackfillButton\n          partitionNames={selected}\n          partitionSetName={partitionSet.name}\n          reexecutionSteps={\n            !options.fromFailure && solidsFiltered.all.length < solids.length\n              ? stepRows.map((step) => step.name)\n              : undefined\n          }\n          fromFailure={options.fromFailure}\n          tags={tags}\n          onSubmit={onSubmit}\n          onSuccess={onSuccess}\n          onError={onError}\n          repoAddress={repoAddress}\n        />\n      </DialogFooter>\n    </>\n  );\n};\n\nconst LaunchBackfillButton: React.FC<{\n  partitionSetName: string;\n  partitionNames: string[];\n  reexecutionSteps?: string[];\n  fromFailure?: boolean;\n  tags?: PipelineRunTag[];\n  onSuccess?: (backfillId: string) => void;\n  onError: (data: LaunchPartitionBackfill | null | undefined) => void;\n  onSubmit: () => void;\n  repoAddress: RepoAddress;\n}> = ({\n  partitionSetName,\n  partitionNames,\n  reexecutionSteps,\n  fromFailure,\n  tags,\n  onSuccess,\n  onError,\n  onSubmit,\n  repoAddress,\n}) => {\n  const repositorySelector = repoAddressToSelector(repoAddress);\n  const mounted = React.useRef(true);\n  const [launchBackfill, {loading}] = useMutation<\n    LaunchPartitionBackfill,\n    LaunchPartitionBackfillVariables\n  >(LAUNCH_PARTITION_BACKFILL_MUTATION);\n\n  React.useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  }, [onSuccess]);\n\n  const onLaunch = async () => {\n    onSubmit();\n    const {data} = await launchBackfill({\n      variables: {\n        backfillParams: {\n          selector: {\n            partitionSetName,\n            repositorySelector,\n          },\n          partitionNames,\n          reexecutionSteps,\n          fromFailure,\n          tags,\n        },\n      },\n    });\n\n    if (!mounted.current) {\n      return;\n    }\n\n    if (data && data.launchPartitionBackfill.__typename === 'LaunchBackfillSuccess') {\n      onSuccess?.(data.launchPartitionBackfill.backfillId);\n    } else {\n      onError?.(data);\n    }\n  };\n\n  const count = partitionNames.length;\n  const reexecutionCount = reexecutionSteps?.length;\n\n  const title = () => {\n    if (loading) {\n      return `Submitting ${count} ${count === 1 ? 'run' : 'runs'}`;\n    }\n\n    if (count) {\n      return `Submit ${count} ${count === 1 ? 'run' : 'runs'}`;\n    }\n\n    return 'Select partitions to submit';\n  };\n\n  const subtitle = () => {\n    return !loading && reexecutionCount\n      ? `(${reexecutionCount} selected ${reexecutionCount === 1 ? 'step' : 'steps'})`\n      : '';\n  };\n\n  const buttonTitle = [title(), subtitle()].join(' ');\n\n  return (\n    <LaunchButton\n      runCount={count}\n      config={{\n        title: buttonTitle,\n        icon: 'open_in_new',\n        disabled: !count || loading,\n        onClick: onLaunch,\n      }}\n    />\n  );\n};\n\nconst PARTITIONS_BACKFILL_SELECTOR_QUERY = gql`\n  query PartitionsBackfillSelectorQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n    $pipelineSelector: PipelineSelector!\n  ) {\n    partitionSetOrError(\n      partitionSetName: $partitionSetName\n      repositorySelector: $repositorySelector\n    ) {\n      ... on PartitionSet {\n        id\n        name\n        partitionsOrError {\n          ... on Partitions {\n            results {\n              name\n            }\n          }\n          ...PythonErrorFragment\n        }\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      runLauncher {\n        name\n      }\n      daemonHealth {\n        id\n        daemonStatus(daemonType: \"BACKFILL\") {\n          id\n          healthy\n        }\n      }\n      runQueuingSupported\n    }\n  }\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nconst PARTITION_STATUS_QUERY = gql`\n  query PartitionStatusQuery($partitionSetName: String!, $repositorySelector: RepositorySelector!) {\n    partitionSetOrError(\n      partitionSetName: $partitionSetName\n      repositorySelector: $repositorySelector\n    ) {\n      ... on PartitionSet {\n        id\n        name\n        partitionStatusesOrError {\n          ... on PartitionStatuses {\n            results {\n              id\n              partitionName\n              runStatus\n            }\n          }\n          ...PythonErrorFragment\n        }\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nfunction messageForLaunchBackfillError(data: LaunchPartitionBackfill | null | undefined) {\n  const result = data?.launchPartitionBackfill;\n\n  let errors = <></>;\n  if (result?.__typename === 'PythonError' || result?.__typename === 'PartitionSetNotFoundError') {\n    errors = <PythonErrorInfo error={result} />;\n  } else if (result?.__typename === 'InvalidStepError') {\n    errors = <div>{`Invalid step: ${result.invalidStepKey}`}</div>;\n  } else if (result?.__typename === 'InvalidOutputError') {\n    errors = <div>{`Invalid output: ${result.invalidOutputName} for ${result.stepKey}`}</div>;\n  } else if (result && 'errors' in result) {\n    errors = (\n      <>\n        {result['errors'].map((error, idx) => (\n          <PythonErrorInfo error={error} key={idx} />\n        ))}\n      </>\n    );\n  }\n\n  return (\n    <Group direction=\"column\" spacing={4}>\n      <div>An unexpected error occurred. This backfill was not launched.</div>\n      {errors ? (\n        <ButtonLink\n          color={Colors.White}\n          underline=\"always\"\n          onClick={() => {\n            showCustomAlert({\n              body: errors,\n            });\n          }}\n        >\n          View error\n        </ButtonLink>\n      ) : null}\n    </Group>\n  );\n}\n\nexport function showBackfillErrorToast(data: LaunchPartitionBackfill | null | undefined) {\n  SharedToaster.show({\n    message: messageForLaunchBackfillError(data),\n    icon: 'error',\n    intent: 'danger',\n  });\n}\n\nexport function showBackfillSuccessToast(history: History<unknown>, backfillId: string) {\n  SharedToaster.show({\n    intent: 'success',\n    message: (\n      <div>\n        Created backfill <Mono>{backfillId}</Mono>\n      </div>\n    ),\n    action: {\n      text: 'View',\n      onClick: () => history.push(`/instance/backfills`),\n    },\n  });\n}\n\nconst DaemonNotRunningAlert: React.FC = () => (\n  <Alert\n    intent=\"warning\"\n    title=\"The backfill daemon is not running.\"\n    description={\n      <div>\n        See the{' '}\n        <a\n          href=\"https://docs.dagster.io/deployment/dagster-daemon\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          dagster-daemon documentation\n        </a>{' '}\n        for more information on how to deploy the dagster-daemon process.\n      </div>\n    }\n  />\n);\n\nconst UsingDefaultLauncherAlert: React.FC = () => (\n  <Alert\n    intent=\"warning\"\n    title={\n      <div>\n        Using the default run launcher <code>{DEFAULT_RUN_LAUNCHER_NAME}</code> for launching\n        backfills without a queued run coordinator is not advised.\n      </div>\n    }\n    description={\n      <div>\n        Check your instance configuration in <code>dagster.yaml</code> to either configure the{' '}\n        <a\n          href=\"https://docs.dagster.io/deployment/run-coordinator\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          queued run coordinator\n        </a>{' '}\n        or to configure a run launcher more appropriate for launching a large number of jobs.\n      </div>\n    }\n  />\n);\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, Icon} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {RunningBackfillsNoticeQuery} from './types/RunningBackfillsNoticeQuery';\n\nexport const RunningBackfillsNotice: React.FC<{partitionSetName: string}> = ({\n  partitionSetName,\n}) => {\n  const {data} = useQuery<RunningBackfillsNoticeQuery>(RUNNING_BACKFILLS_NOTICE_QUERY, {\n    fetchPolicy: 'cache-and-network',\n  });\n\n  const runningBackfills =\n    data?.partitionBackfillsOrError.__typename === 'PartitionBackfills'\n      ? data.partitionBackfillsOrError.results\n      : [];\n\n  const runningBackfillCount = runningBackfills.filter(\n    (r) => r.partitionSetName === partitionSetName,\n  ).length;\n\n  if (runningBackfillCount === 0) {\n    return <span />;\n  }\n  return (\n    <div style={{color: Colors.Gray400, maxWidth: 350}}>\n      {runningBackfillCount === 1\n        ? 'Note: A backfill has been requested for this job and may be refreshing displayed assets. '\n        : `Note: ${runningBackfillCount} backfills have been requested for this job and may be refreshing displayed assets. `}\n      <Link to=\"/instance/backfills\" target=\"_blank\">\n        <Box flex={{gap: 4, display: 'inline-flex', alignItems: 'center'}}>\n          View <Icon name=\"open_in_new\" color={Colors.Link} />\n        </Box>\n      </Link>\n    </div>\n  );\n};\n\nconst RUNNING_BACKFILLS_NOTICE_QUERY = gql`\n  query RunningBackfillsNoticeQuery {\n    partitionBackfillsOrError(status: REQUESTED) {\n      __typename\n      ... on PartitionBackfills {\n        results {\n          partitionSetName\n          backfillId\n        }\n      }\n    }\n  }\n`;\n","import {gql, useApolloClient, useQuery} from '@apollo/client';\nimport {\n  Dialog,\n  DialogHeader,\n  DialogBody,\n  Box,\n  Subheading,\n  Button,\n  ButtonLink,\n  DialogFooter,\n  Alert,\n} from '@dagster-io/ui';\nimport reject from 'lodash/reject';\nimport React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {displayNameForAssetKey} from '../asset-graph/Utils';\nimport {PartitionHealthSummary, usePartitionHealthData} from '../assets/PartitionHealthSummary';\nimport {AssetKey} from '../assets/types';\nimport {LAUNCH_PARTITION_BACKFILL_MUTATION} from '../instance/BackfillUtils';\nimport {\n  LaunchPartitionBackfill,\n  LaunchPartitionBackfillVariables,\n} from '../instance/types/LaunchPartitionBackfill';\nimport {CONFIG_PARTITION_SELECTION_QUERY} from '../launchpad/ConfigEditorConfigPicker';\nimport {useLaunchWithTelemetry} from '../launchpad/LaunchRootExecutionButton';\nimport {\n  ConfigPartitionSelectionQuery,\n  ConfigPartitionSelectionQueryVariables,\n} from '../launchpad/types/ConfigPartitionSelectionQuery';\nimport {\n  assembleIntoSpans,\n  PartitionRangeInput,\n  stringForSpan,\n} from '../partitions/PartitionRangeInput';\nimport {showBackfillErrorToast, showBackfillSuccessToast} from '../partitions/PartitionsBackfill';\nimport {RepoAddress} from '../workspace/types';\n\nimport {executionParamsForAssetJob} from './LaunchAssetExecutionButton';\nimport {RunningBackfillsNotice} from './RunningBackfillsNotice';\nimport {\n  AssetJobPartitionSetsQuery,\n  AssetJobPartitionSetsQueryVariables,\n} from './types/AssetJobPartitionSetsQuery';\n\ninterface Props {\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  repoAddress: RepoAddress;\n  assetJobName: string;\n  assets: {assetKey: AssetKey; opNames: string[]; partitionDefinition: string | null}[];\n  upstreamAssetKeys: AssetKey[]; // single layer of upstream dependencies\n}\n\nexport const LaunchAssetChoosePartitionsDialog: React.FC<Props> = (props) => {\n  const title = `Launch runs to materialize ${\n    props.assets.length > 1\n      ? `${props.assets.length} assets`\n      : displayNameForAssetKey(props.assets[0].assetKey)\n  }`;\n\n  return (\n    <Dialog\n      style={{width: 700}}\n      isOpen={props.open}\n      canEscapeKeyClose\n      canOutsideClickClose\n      onClose={() => props.setOpen(false)}\n    >\n      <DialogHeader icon=\"layers\" label={title} />\n      <LaunchAssetChoosePartitionsDialogBody {...props} />\n    </Dialog>\n  );\n};\n\n// Note: This dialog loads a lot of data - the body is broken into a separate\n// component so we can be *sure* the hooks won't load data until it's opened.\n// (<Dialog> does not render it's children until open=true)\n//\n// Additionally, we want the dialog to reset when it's closed and re-opened so\n// that partition health, etc. is up-to-date.\n//\nconst LaunchAssetChoosePartitionsDialogBody: React.FC<Props> = ({\n  setOpen,\n  assets,\n  repoAddress,\n  assetJobName,\n  upstreamAssetKeys,\n}) => {\n  const data = usePartitionHealthData(assets.map((a) => a.assetKey));\n  const upstreamData = usePartitionHealthData(upstreamAssetKeys);\n\n  const allKeys = data[0] ? data[0].keys : [];\n  const mostRecentKey = allKeys[allKeys.length - 1];\n\n  const [selected, setSelected] = React.useState<string[]>([]);\n  const [previewCount, setPreviewCount] = React.useState(4);\n  const [launching, setLaunching] = React.useState(false);\n\n  const setMostRecent = () => setSelected([mostRecentKey]);\n  const setAll = () => setSelected([...allKeys]);\n  const setMissing = () =>\n    setSelected(allKeys.filter((key) => data.every((d) => !d.statusByPartition[key])));\n\n  React.useEffect(() => {\n    setSelected([mostRecentKey]);\n  }, [mostRecentKey]);\n\n  const client = useApolloClient();\n  const history = useHistory();\n  const launchWithTelemetry = useLaunchWithTelemetry();\n\n  // Find the partition set name. This seems like a bit of a hack, unclear\n  // how it would work if there were two different partition spaces in the asset job\n  const {data: partitionSetsData} = useQuery<\n    AssetJobPartitionSetsQuery,\n    AssetJobPartitionSetsQueryVariables\n  >(ASSET_JOB_PARTITION_SETS_QUERY, {\n    variables: {\n      repositoryLocationName: repoAddress.location,\n      repositoryName: repoAddress.name,\n      pipelineName: assetJobName,\n    },\n  });\n\n  const partitionSet =\n    partitionSetsData?.partitionSetsOrError.__typename === 'PartitionSets'\n      ? partitionSetsData.partitionSetsOrError.results[0]\n      : undefined;\n\n  const onLaunch = async () => {\n    setLaunching(true);\n\n    if (!partitionSet) {\n      const error =\n        partitionSetsData?.partitionSetsOrError.__typename === 'PythonError'\n          ? partitionSetsData.partitionSetsOrError\n          : {message: 'No details provided.'};\n\n      setLaunching(false);\n      showCustomAlert({\n        title: `Unable to find partition set on ${assetJobName}`,\n        body: <PythonErrorInfo error={error} />,\n      });\n      return;\n    }\n\n    if (selected.length === 1) {\n      const {data: tagAndConfigData} = await client.query<\n        ConfigPartitionSelectionQuery,\n        ConfigPartitionSelectionQueryVariables\n      >({\n        query: CONFIG_PARTITION_SELECTION_QUERY,\n        fetchPolicy: 'network-only',\n        variables: {\n          repositorySelector: {\n            repositoryLocationName: repoAddress.location,\n            repositoryName: repoAddress.name,\n          },\n          partitionSetName: partitionSet.name,\n          partitionName: selected[0],\n        },\n      });\n\n      if (\n        !tagAndConfigData ||\n        !tagAndConfigData.partitionSetOrError ||\n        tagAndConfigData.partitionSetOrError.__typename !== 'PartitionSet' ||\n        !tagAndConfigData.partitionSetOrError.partition\n      ) {\n        return;\n      }\n\n      const {partition} = tagAndConfigData.partitionSetOrError;\n\n      if (partition.tagsOrError.__typename === 'PythonError') {\n        setLaunching(false);\n        showCustomAlert({\n          title: 'Unable to load tags',\n          body: <PythonErrorInfo error={partition.tagsOrError} />,\n        });\n        return;\n      }\n      if (partition.runConfigOrError.__typename === 'PythonError') {\n        setLaunching(false);\n        showCustomAlert({\n          title: 'Unable to load tags',\n          body: <PythonErrorInfo error={partition.runConfigOrError} />,\n        });\n        return;\n      }\n\n      const tags = [...partition.tagsOrError.results];\n      const runConfigData = partition.runConfigOrError.yaml || '';\n\n      const result = await launchWithTelemetry(\n        {\n          executionParams: {\n            ...executionParamsForAssetJob(repoAddress, assetJobName, assets, tags),\n            runConfigData,\n            mode: partition.mode,\n          },\n        },\n        'toast',\n      );\n\n      setLaunching(false);\n      if (result?.launchPipelineExecution.__typename === 'LaunchRunSuccess') {\n        setOpen(false);\n      }\n    } else {\n      const {data: launchBackfillData} = await client.mutate<\n        LaunchPartitionBackfill,\n        LaunchPartitionBackfillVariables\n      >({\n        mutation: LAUNCH_PARTITION_BACKFILL_MUTATION,\n        variables: {\n          backfillParams: {\n            selector: {\n              partitionSetName: partitionSet.name,\n              repositorySelector: {\n                repositoryLocationName: repoAddress.location,\n                repositoryName: repoAddress.name,\n              },\n            },\n            assetSelection: assets.map((a) => ({path: a.assetKey.path})),\n            partitionNames: selected,\n            fromFailure: false,\n            tags: [],\n          },\n        },\n      });\n\n      setLaunching(false);\n\n      if (launchBackfillData?.launchPartitionBackfill.__typename === 'LaunchBackfillSuccess') {\n        showBackfillSuccessToast(history, launchBackfillData?.launchPartitionBackfill.backfillId);\n        setOpen(false);\n      } else {\n        showBackfillErrorToast(launchBackfillData);\n      }\n    }\n  };\n\n  const upstreamUnavailable = (key: string) =>\n    upstreamData.length > 0 &&\n    upstreamData.some((a) => a.keys.includes(key) && !a.statusByPartition[key]);\n\n  const upstreamUnavailableSpans = assembleIntoSpans(selected, upstreamUnavailable).filter(\n    (s) => s.status === true,\n  );\n  const onRemoveUpstreamUnavailable = () => {\n    setSelected(reject(selected, upstreamUnavailable));\n  };\n\n  return (\n    <>\n      <DialogBody>\n        <Box flex={{direction: 'column', gap: 8}}>\n          <Subheading style={{flex: 1}}>Partition Keys</Subheading>\n          <Box flex={{direction: 'row', gap: 8, alignItems: 'baseline'}}>\n            <Box flex={{direction: 'column'}} style={{flex: 1}}>\n              <PartitionRangeInput\n                value={selected}\n                onChange={setSelected}\n                partitionNames={allKeys}\n              />\n            </Box>\n            <Button small onClick={setMostRecent}>\n              Most Recent\n            </Button>\n            <Button small onClick={setMissing}>\n              Missing\n            </Button>\n            <Button small onClick={setAll}>\n              All\n            </Button>\n          </Box>\n        </Box>\n        <Box\n          flex={{direction: 'column', gap: 8}}\n          style={{marginTop: 16, overflowY: 'auto', overflowX: 'visible', maxHeight: '50vh'}}\n        >\n          {assets.slice(0, previewCount).map((a) => (\n            <PartitionHealthSummary\n              assetKey={a.assetKey}\n              showAssetKey\n              key={displayNameForAssetKey(a.assetKey)}\n              data={data}\n              selected={selected}\n            />\n          ))}\n          {previewCount < assets.length ? (\n            <Box margin={{vertical: 8}}>\n              <ButtonLink onClick={() => setPreviewCount(assets.length)}>\n                Show {assets.length - previewCount} more previews\n              </ButtonLink>\n            </Box>\n          ) : undefined}\n        </Box>\n        {upstreamUnavailableSpans.length > 0 && (\n          <Box margin={{top: 16}}>\n            <Alert\n              intent=\"warning\"\n              title=\"Upstream Data Missing\"\n              description={\n                <>\n                  {upstreamUnavailableSpans.map((span) => stringForSpan(span, selected)).join(', ')}\n                  {\n                    ' cannot be materialized because upstream materializations are missing. Consider materializing upstream assets or '\n                  }\n                  <a onClick={onRemoveUpstreamUnavailable}>remove these partitions</a>\n                  {` to avoid failures.`}\n                </>\n              }\n            />\n          </Box>\n        )}\n      </DialogBody>\n      <DialogFooter\n        left={partitionSet && <RunningBackfillsNotice partitionSetName={partitionSet.name} />}\n      >\n        <Button intent=\"none\" onClick={() => setOpen(false)}>\n          Cancel\n        </Button>\n        <Button intent=\"primary\" onClick={onLaunch}>\n          {launching\n            ? 'Launching...'\n            : selected.length !== 1\n            ? `Launch ${selected.length}-Run Backfill`\n            : `Launch 1 Run`}\n        </Button>\n      </DialogFooter>\n    </>\n  );\n};\n\nconst ASSET_JOB_PARTITION_SETS_QUERY = gql`\n  query AssetJobPartitionSetsQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      __typename\n      ...PythonErrorFragment\n      ... on PartitionSets {\n        __typename\n        results {\n          id\n          name\n          mode\n          solidSelection\n        }\n      }\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {ApolloClient, gql, useApolloClient} from '@apollo/client';\nimport {Button, Icon, Spinner, Tooltip} from '@dagster-io/ui';\nimport pick from 'lodash/pick';\nimport uniq from 'lodash/uniq';\nimport React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {useConfirmation} from '../app/CustomConfirmationProvider';\nimport {IExecutionSession} from '../app/ExecutionSessionStorage';\nimport {usePermissions} from '../app/Permissions';\nimport {displayNameForAssetKey, isSourceAsset} from '../asset-graph/Utils';\nimport {useLaunchWithTelemetry} from '../launchpad/LaunchRootExecutionButton';\nimport {AssetLaunchpad} from '../launchpad/LaunchpadRoot';\nimport {DagsterTag} from '../runs/RunTag';\nimport {LaunchPipelineExecutionVariables} from '../runs/types/LaunchPipelineExecution';\nimport {CONFIG_TYPE_SCHEMA_FRAGMENT} from '../typeexplorer/ConfigTypeSchema';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\nimport {ASSET_NODE_CONFIG_FRAGMENT} from './AssetConfig';\nimport {MULTIPLE_DEFINITIONS_WARNING} from './AssetDefinedInMultipleReposNotice';\nimport {LaunchAssetChoosePartitionsDialog} from './LaunchAssetChoosePartitionsDialog';\nimport {AssetKey} from './types';\nimport {\n  LaunchAssetCheckUpstreamQuery,\n  LaunchAssetCheckUpstreamQueryVariables,\n} from './types/LaunchAssetCheckUpstreamQuery';\nimport {LaunchAssetExecutionAssetNodeFragment} from './types/LaunchAssetExecutionAssetNodeFragment';\nimport {\n  LaunchAssetLoaderQuery,\n  LaunchAssetLoaderQueryVariables,\n} from './types/LaunchAssetLoaderQuery';\nimport {\n  LaunchAssetLoaderResourceQuery,\n  LaunchAssetLoaderResourceQueryVariables,\n} from './types/LaunchAssetLoaderResourceQuery';\n\ntype LaunchAssetsState =\n  | {type: 'none'}\n  | {type: 'loading'}\n  | {type: 'error'; error: string}\n  | {\n      type: 'launchpad';\n      jobName: string;\n      sessionPresets: Partial<IExecutionSession>;\n      repoAddress: RepoAddress;\n    }\n  | {\n      type: 'partitions';\n      jobName: string;\n      assets: LaunchAssetExecutionAssetNodeFragment[];\n      upstreamAssetKeys: AssetKey[];\n      repoAddress: RepoAddress;\n    }\n  | {\n      type: 'single-run';\n      executionParams: LaunchPipelineExecutionVariables['executionParams'];\n    };\n\nexport const LaunchAssetExecutionButton: React.FC<{\n  assetKeys: AssetKey[]; // Memoization not required\n  context?: 'all' | 'selected';\n  intent?: 'primary' | 'none';\n  preferredJobName?: string;\n}> = ({assetKeys, preferredJobName, context, intent = 'primary'}) => {\n  const {canLaunchPipelineExecution} = usePermissions();\n  const launchWithTelemetry = useLaunchWithTelemetry();\n\n  const [state, setState] = React.useState<LaunchAssetsState>({type: 'none'});\n  const client = useApolloClient();\n  const confirm = useConfirmation();\n\n  const count = assetKeys.length > 1 ? ` (${assetKeys.length})` : '';\n  const label = `Materialize${\n    context === 'all' ? ` all${count}` : context === 'selected' ? ` selected${count}` : count\n  }`;\n\n  if (!assetKeys.length || !canLaunchPipelineExecution.enabled) {\n    return (\n      <Tooltip\n        content={\n          !canLaunchPipelineExecution.enabled\n            ? 'You do not have permission to materialize assets'\n            : 'Select one or more assets to materialize.'\n        }\n      >\n        <Button intent={intent} icon={<Icon name=\"materialization\" />} disabled>\n          {label}\n        </Button>\n      </Tooltip>\n    );\n  }\n\n  const onClick = async (e: React.MouseEvent<any>) => {\n    if (state.type === 'loading') {\n      return;\n    }\n    setState({type: 'loading'});\n\n    const result = await client.query<LaunchAssetLoaderQuery, LaunchAssetLoaderQueryVariables>({\n      query: LAUNCH_ASSET_LOADER_QUERY,\n      variables: {assetKeys: assetKeys.map(({path}) => ({path}))},\n    });\n\n    if (result.data.assetNodeDefinitionCollisions.length) {\n      showCustomAlert(buildAssetCollisionsAlert(result.data));\n      setState({type: 'none'});\n      return;\n    }\n\n    const assets = result.data.assetNodes;\n    const forceLaunchpad = e.shiftKey;\n\n    const next = await stateForLaunchingAssets(client, assets, forceLaunchpad, preferredJobName);\n\n    if (next.type === 'error') {\n      showCustomAlert({\n        title: 'Unable to Materialize',\n        body: next.error,\n      });\n      setState({type: 'none'});\n      return;\n    }\n\n    const missing = await upstreamAssetsWithNoMaterializations(client, assets);\n    if (missing.length) {\n      setState({type: 'none'});\n      try {\n        await confirm({\n          title: 'Are you sure?',\n          description: (\n            <>\n              <div>\n                Materializing these assets may fail because the upstream assets listed below have\n                not been materialized yet.\n              </div>\n              <ul>\n                {missing.map((assetKey, idx) => (\n                  <li key={idx}>{displayNameForAssetKey(assetKey)}</li>\n                ))}\n              </ul>\n            </>\n          ),\n        });\n        setState({type: 'loading'});\n      } catch {\n        return;\n      }\n    }\n\n    if (next.type === 'single-run') {\n      await launchWithTelemetry({executionParams: next.executionParams}, 'toast');\n      setState({type: 'none'});\n    } else {\n      setState(next);\n    }\n  };\n\n  return (\n    <>\n      <Tooltip content=\"Shift+click to add configuration\">\n        <Button\n          intent={intent}\n          onClick={onClick}\n          icon={\n            state.type === 'loading' ? (\n              <Spinner purpose=\"body-text\" />\n            ) : (\n              <Icon name=\"materialization\" />\n            )\n          }\n        >\n          {label}\n        </Button>\n      </Tooltip>\n      {state.type === 'launchpad' && (\n        <AssetLaunchpad\n          assetJobName={state.jobName}\n          repoAddress={state.repoAddress}\n          sessionPresets={state.sessionPresets}\n          open={true}\n          setOpen={() => setState({type: 'none'})}\n        />\n      )}\n      {state.type === 'partitions' && (\n        <LaunchAssetChoosePartitionsDialog\n          assets={state.assets}\n          upstreamAssetKeys={state.upstreamAssetKeys}\n          repoAddress={state.repoAddress}\n          assetJobName={state.jobName}\n          open={true}\n          setOpen={() => setState({type: 'none'})}\n        />\n      )}\n    </>\n  );\n};\n\nasync function stateForLaunchingAssets(\n  client: ApolloClient<any>,\n  assets: LaunchAssetExecutionAssetNodeFragment[],\n  forceLaunchpad: boolean,\n  preferredJobName?: string,\n): Promise<LaunchAssetsState> {\n  if (assets.some(isSourceAsset)) {\n    return {\n      type: 'error',\n      error: 'One or more source assets are selected and cannot be materialized.',\n    };\n  }\n\n  const repoAddress = buildRepoAddress(\n    assets[0]?.repository.name || '',\n    assets[0]?.repository.location.name || '',\n  );\n\n  if (\n    !assets.every(\n      (a) =>\n        a.repository.name === repoAddress.name &&\n        a.repository.location.name === repoAddress.location,\n    )\n  ) {\n    return {\n      type: 'error',\n      error: 'Assets must be in the same repository to be materialized together.',\n    };\n  }\n\n  const partitionDefinition = assets.find((a) => !!a.partitionDefinition)?.partitionDefinition;\n  if (assets.some((a) => a.partitionDefinition && a.partitionDefinition !== partitionDefinition)) {\n    return {\n      type: 'error',\n      error: 'Assets must share a partition definition to be materialized together.',\n    };\n  }\n\n  const jobName = getCommonJob(assets, preferredJobName);\n  if (!jobName) {\n    return {\n      type: 'error',\n      error: 'Assets must be in the same job to be materialized together.',\n    };\n  }\n\n  const resourceResult = await client.query<\n    LaunchAssetLoaderResourceQuery,\n    LaunchAssetLoaderResourceQueryVariables\n  >({\n    query: LAUNCH_ASSET_LOADER_RESOURCE_QUERY,\n    variables: {\n      pipelineSelector: {\n        pipelineName: jobName,\n        repositoryName: assets[0].repository.name,\n        repositoryLocationName: assets[0].repository.location.name,\n      },\n    },\n  });\n  const pipeline = resourceResult.data.pipelineOrError;\n  if (pipeline.__typename !== 'Pipeline') {\n    return {\n      type: 'error',\n      error: `Pipeline ${jobName} does not exist.`,\n    };\n  }\n  const requiredResourceKeys = assets.flatMap((a) => a.requiredResources.map((r) => r.resourceKey));\n  const resources = pipeline.modes[0].resources.filter((r) =>\n    requiredResourceKeys.includes(r.name),\n  );\n  const anyResourcesHaveRequiredConfig = resources.some((r) => r.configField?.isRequired);\n\n  const anyAssetsHaveRequiredConfig = assets.some((a) => a.configField?.isRequired);\n\n  if (partitionDefinition) {\n    const upstreamAssetKeys = getUpstreamAssetKeys(assets);\n    return {\n      type: 'partitions',\n      assets,\n      jobName,\n      repoAddress,\n      upstreamAssetKeys,\n    };\n  }\n  if (anyAssetsHaveRequiredConfig || anyResourcesHaveRequiredConfig || forceLaunchpad) {\n    const assetOpNames = assets.flatMap((a) => a.opNames || []);\n    return {\n      type: 'launchpad',\n      jobName,\n      repoAddress,\n      sessionPresets: {\n        flattenGraphs: true,\n        assetSelection: assets.map((a) => ({assetKey: a.assetKey, opNames: a.opNames})),\n        solidSelectionQuery: assetOpNames.map((name) => `\"${name}\"`).join(', '),\n      },\n    };\n  }\n  return {\n    type: 'single-run',\n    executionParams: executionParamsForAssetJob(repoAddress, jobName, assets, []),\n  };\n}\n\nfunction getCommonJob(assets: LaunchAssetExecutionAssetNodeFragment[], preferredJobName?: string) {\n  const everyAssetHasJob = (jobName: string) => assets.every((a) => a.jobNames.includes(jobName));\n  const jobsInCommon = assets[0] ? assets[0].jobNames.filter(everyAssetHasJob) : [];\n  return jobsInCommon.find((name) => name === preferredJobName) || jobsInCommon[0] || null;\n}\n\nfunction getUpstreamAssetKeys(assets: LaunchAssetExecutionAssetNodeFragment[]) {\n  const assetKeys = new Set(assets.map((a) => JSON.stringify({path: a.assetKey.path})));\n  return uniq(assets.flatMap((a) => a.dependencyKeys.map(({path}) => JSON.stringify({path}))))\n    .filter((key) => !assetKeys.has(key))\n    .map((key) => JSON.parse(key));\n}\n\nasync function upstreamAssetsWithNoMaterializations(\n  client: ApolloClient<any>,\n  assets: LaunchAssetExecutionAssetNodeFragment[],\n) {\n  const upstreamAssetKeys = getUpstreamAssetKeys(assets);\n  if (upstreamAssetKeys.length === 0) {\n    return [];\n  }\n\n  const result = await client.query<\n    LaunchAssetCheckUpstreamQuery,\n    LaunchAssetCheckUpstreamQueryVariables\n  >({\n    query: LAUNCH_ASSET_CHECK_UPSTREAM_QUERY,\n    variables: {assetKeys: upstreamAssetKeys},\n  });\n\n  return result.data.assetNodes\n    .filter((a) => !isSourceAsset(a) && a.assetMaterializations.length === 0)\n    .map((a) => a.assetKey);\n}\n\nexport function executionParamsForAssetJob(\n  repoAddress: RepoAddress,\n  jobName: string,\n  assets: {assetKey: AssetKey; opNames: string[]}[],\n  tags: {key: string; value: string}[],\n): LaunchPipelineExecutionVariables['executionParams'] {\n  return {\n    mode: 'default',\n    executionMetadata: {\n      tags: [\n        ...tags.map((t) => pick(t, ['key', 'value'])),\n        {\n          key: DagsterTag.StepSelection,\n          value: assets.flatMap((o) => o.opNames).join(','),\n        },\n      ],\n    },\n    runConfigData: '{}',\n    selector: {\n      repositoryLocationName: repoAddress.location,\n      repositoryName: repoAddress.name,\n      pipelineName: jobName,\n      assetSelection: assets.map((asset) => ({\n        path: asset.assetKey.path,\n      })),\n    },\n  };\n}\n\nfunction buildAssetCollisionsAlert(data: LaunchAssetLoaderQuery) {\n  return {\n    title: MULTIPLE_DEFINITIONS_WARNING,\n    body: (\n      <div style={{overflow: 'auto'}}>\n        One or more of the selected assets are defined in multiple repositories in your workspace.\n        Rename these assets to avoid collisions and then try again.\n        <ul>\n          {data.assetNodeDefinitionCollisions.map((collision, idx) => (\n            <li key={idx}>\n              <strong>{displayNameForAssetKey(collision.assetKey)}</strong>\n              <ul>\n                {collision.repositories.map((r, ridx) => (\n                  <li key={ridx}>\n                    {repoAddressAsString({name: r.name, location: r.location.name})}\n                  </li>\n                ))}\n              </ul>\n            </li>\n          ))}\n        </ul>\n      </div>\n    ),\n  };\n}\n\nexport const LAUNCH_ASSET_EXECUTION_ASSET_NODE_FRAGMENT = gql`\n  fragment LaunchAssetExecutionAssetNodeFragment on AssetNode {\n    id\n    opNames\n    jobNames\n    graphName\n    partitionDefinition\n    assetKey {\n      path\n    }\n    dependencyKeys {\n      path\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n    ...AssetNodeConfigFragment\n  }\n  ${ASSET_NODE_CONFIG_FRAGMENT}\n`;\n\nconst LAUNCH_ASSET_LOADER_QUERY = gql`\n  query LaunchAssetLoaderQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys) {\n      id\n      ...LaunchAssetExecutionAssetNodeFragment\n    }\n    assetNodeDefinitionCollisions(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      repositories {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n    }\n  }\n  ${LAUNCH_ASSET_EXECUTION_ASSET_NODE_FRAGMENT}\n`;\n\nconst LAUNCH_ASSET_LOADER_RESOURCE_QUERY = gql`\n  query LaunchAssetLoaderResourceQuery($pipelineSelector: PipelineSelector!) {\n    pipelineOrError(params: $pipelineSelector) {\n      ... on Pipeline {\n        id\n        modes {\n          id\n          resources {\n            name\n            description\n            configField {\n              name\n              isRequired\n              configType {\n                ...ConfigTypeSchemaFragment\n                recursiveConfigTypes {\n                  ...ConfigTypeSchemaFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ${CONFIG_TYPE_SCHEMA_FRAGMENT}\n`;\n\nconst LAUNCH_ASSET_CHECK_UPSTREAM_QUERY = gql`\n  query LaunchAssetCheckUpstreamQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys, loadMaterializations: true) {\n      id\n      assetKey {\n        path\n      }\n      opNames\n      graphName\n      assetMaterializations(limit: 1) {\n        runId\n      }\n    }\n  }\n`;\n","import {gql, useApolloClient} from '@apollo/client';\nimport {Tooltip, Spinner, Box, Colors} from '@dagster-io/ui';\nimport fromPairs from 'lodash/fromPairs';\nimport React from 'react';\n\nimport {displayNameForAssetKey} from '../asset-graph/Utils';\nimport {assembleIntoSpans} from '../partitions/PartitionRangeInput';\n\nimport {AssetKey} from './types';\nimport {PartitionHealthQuery, PartitionHealthQueryVariables} from './types/PartitionHealthQuery';\n\ninterface PartitionHealthData {\n  assetKey: AssetKey;\n  keys: string[];\n  spans: {startIdx: number; endIdx: number; status: boolean}[];\n  statusByPartition: {[partitionName: string]: boolean};\n  indexToPct: (idx: number) => string;\n}\n\nexport function usePartitionHealthData(assetKeys: AssetKey[]) {\n  const [result, setResult] = React.useState<PartitionHealthData[]>([]);\n  const client = useApolloClient();\n\n  const assetKeyJSONs = assetKeys.map((k) => JSON.stringify(k));\n  const missingKeyJSON = assetKeyJSONs.find(\n    (k) => !result.some((r) => JSON.stringify(r.assetKey) === k),\n  );\n\n  React.useMemo(() => {\n    if (!missingKeyJSON) {\n      return;\n    }\n    const loadKey: AssetKey = JSON.parse(missingKeyJSON);\n    const load = async () => {\n      const {data} = await client.query<PartitionHealthQuery, PartitionHealthQueryVariables>({\n        query: PARTITION_HEALTH_QUERY,\n        fetchPolicy: 'network-only',\n        variables: {\n          assetKey: {path: loadKey.path},\n        },\n      });\n      const latest =\n        (data &&\n          data.assetNodeOrError.__typename === 'AssetNode' &&\n          data.assetNodeOrError.materializationCountByPartition) ||\n        [];\n\n      const keys =\n        data && data.assetNodeOrError.__typename === 'AssetNode'\n          ? data.assetNodeOrError.materializationCountByPartition.map(({partition}) => partition)\n          : [];\n\n      const statusByPartition = fromPairs(\n        latest.map((l) => [l.partition, !!l.materializationCount]),\n      );\n      const spans = assembleIntoSpans(keys, (key) => statusByPartition[key]);\n\n      setResult((result) => [\n        ...result,\n        {\n          keys,\n          spans,\n          assetKey: loadKey,\n          statusByPartition,\n          indexToPct: (idx: number) => `${((idx * 100) / keys.length).toFixed(3)}%`,\n        },\n      ]);\n    };\n    load();\n  }, [client, missingKeyJSON]);\n\n  return result.filter((r) => assetKeyJSONs.includes(JSON.stringify(r.assetKey)));\n}\n\nexport const PartitionHealthSummary: React.FC<{\n  assetKey: AssetKey;\n  selected?: string[];\n  showAssetKey?: boolean;\n  data: PartitionHealthData[];\n}> = ({showAssetKey, assetKey, selected, data}) => {\n  const assetData = data.find((d) => JSON.stringify(d.assetKey) === JSON.stringify(assetKey));\n\n  if (!assetData) {\n    return (\n      <div style={{minHeight: 55, position: 'relative'}}>\n        <Spinner purpose=\"section\" />\n      </div>\n    );\n  }\n\n  const {spans, keys, indexToPct} = assetData;\n  const highestIndex = spans.map((s) => s.endIdx).reduce((prev, cur) => Math.max(prev, cur), 0);\n\n  const selectedSpans = selected\n    ? assembleIntoSpans(keys, (key) => selected.includes(key)).filter((s) => s.status)\n    : [];\n\n  const populated = spans\n    .filter((s) => s.status === true)\n    .map((s) => s.endIdx - s.startIdx + 1)\n    .reduce((a, b) => a + b, 0);\n\n  return (\n    <div>\n      <Box\n        flex={{justifyContent: 'space-between'}}\n        margin={{bottom: 4}}\n        style={{fontSize: '0.8rem', color: Colors.Gray500}}\n      >\n        <span>\n          {showAssetKey\n            ? displayNameForAssetKey(assetKey)\n            : `${populated}/${keys.length} Partitions`}\n        </span>\n        {showAssetKey ? <span>{`${populated}/${keys.length}`}</span> : undefined}\n      </Box>\n      {selected && (\n        <div style={{position: 'relative', width: '100%', overflowX: 'hidden', height: 10}}>\n          {selectedSpans.map((s) => (\n            <div\n              key={s.startIdx}\n              style={{\n                left: `min(calc(100% - 2px), ${indexToPct(s.startIdx)})`,\n                width: indexToPct(s.endIdx - s.startIdx + 1),\n                position: 'absolute',\n                top: 0,\n                height: 8,\n                border: `2px solid ${Colors.Blue500}`,\n                borderBottom: 0,\n              }}\n            />\n          ))}\n        </div>\n      )}\n      <div\n        style={{\n          position: 'relative',\n          width: '100%',\n          height: 14,\n          borderRadius: 6,\n          overflow: 'hidden',\n        }}\n      >\n        {spans.map((s) => (\n          <div\n            key={s.startIdx}\n            style={{\n              left: `min(calc(100% - 2px), ${indexToPct(s.startIdx)})`,\n              width: indexToPct(s.endIdx - s.startIdx + 1),\n              minWidth: s.status ? 2 : undefined,\n              position: 'absolute',\n              zIndex: s.startIdx === 0 || s.endIdx === highestIndex ? 3 : s.status ? 2 : 1, //End-caps, then statuses, then missing\n              top: 0,\n            }}\n          >\n            <Tooltip\n              display=\"block\"\n              content={\n                s.startIdx === s.endIdx\n                  ? `Partition ${keys[s.startIdx]} is ${s.status ? 'up-to-date' : 'missing'}`\n                  : `Partitions ${keys[s.startIdx]} through ${keys[s.endIdx]} are ${\n                      s.status ? 'up-to-date' : 'missing'\n                    }`\n              }\n            >\n              <div\n                style={{\n                  width: '100%',\n                  height: 14,\n                  outline: 'none',\n                  background: s.status ? Colors.Green500 : Colors.Gray200,\n                }}\n              />\n            </Tooltip>\n          </div>\n        ))}\n      </div>\n      <Box\n        flex={{justifyContent: 'space-between'}}\n        margin={{top: 4}}\n        style={{fontSize: '0.8rem', color: Colors.Gray500}}\n      >\n        <span>{keys[0]}</span>\n        <span>{keys[keys.length - 1]}</span>\n      </Box>\n    </div>\n  );\n};\n\nconst PARTITION_HEALTH_QUERY = gql`\n  query PartitionHealthQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        materializationCountByPartition {\n          partition\n          materializationCount\n        }\n      }\n    }\n  }\n`;\n","import {gql} from '@apollo/client';\nimport {Box, Colors, FontFamily, Tag} from '@dagster-io/ui';\nimport {Spacing} from '@dagster-io/ui/src/components/types';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {gqlTypePredicate} from '../app/Util';\nimport {METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {TableSchema} from '../metadata/TableSchema';\nimport {MetadataEntryFragment} from '../metadata/types/MetadataEntryFragment';\nimport {Description} from '../pipelines/Description';\nimport {CONFIG_TYPE_SCHEMA_FRAGMENT} from '../typeexplorer/ConfigTypeSchema';\n\nimport {DagsterTypeFragment} from './types/DagsterTypeFragment';\n\nexport const dagsterTypeKind = (type: {metadataEntries: MetadataEntryFragment[]}) => {\n  const tableSchema = type.metadataEntries.find(gqlTypePredicate('TableSchemaMetadataEntry'));\n  if (tableSchema) {\n    return 'table';\n  } else {\n    return 'standard';\n  }\n};\n\nexport const DagsterTypeKindTag: React.FC<{type: DagsterTypeFragment}> = (kind) => {\n  return <Tag intent=\"primary\">{kind}</Tag>;\n};\n\nconst _DagsterTypeName: React.FC<{type: DagsterTypeFragment; className?: string}> = ({\n  type,\n  className,\n}) => {\n  const typeKind = dagsterTypeKind(type);\n  const displayName = typeKind === 'standard' ? type.name : `${type.name} (${typeKind})`;\n  return <Box className={className}>{displayName}</Box>;\n};\n\nexport const DagsterTypeName = styled(_DagsterTypeName)`\n  font-family: ${FontFamily.monospace};\n  font-size: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nexport const DagsterTypeSummary: React.FC<{\n  type: DagsterTypeFragment;\n  horizontalPadding?: Spacing;\n}> = ({type, horizontalPadding}) => {\n  horizontalPadding = horizontalPadding || 0;\n  const tableSchemaEntry = type.metadataEntries.find(gqlTypePredicate('TableSchemaMetadataEntry'));\n  return (\n    <Box\n      flex={{direction: 'column', gap: 8}}\n      padding={{horizontal: 24, vertical: 16}}\n      style={{overflowY: 'auto'}}\n    >\n      {type.name && (\n        <Box>\n          <DagsterTypeName type={type} />\n        </Box>\n      )}\n      {type.description && (\n        <Box padding={{horizontal: horizontalPadding}}>\n          <Description description={type.description} />\n        </Box>\n      )}\n      {tableSchemaEntry && (\n        <Box\n          border={{side: 'top', width: 1, color: Colors.KeylineGray}}\n          style={{overflowY: 'auto', marginBottom: -12}}\n          margin={{top: 4}}\n        >\n          <TableSchema schema={tableSchemaEntry.schema} itemHorizontalPadding={horizontalPadding} />\n        </Box>\n      )}\n    </Box>\n  );\n};\n\n// NOTE: Because you can't have a recursive fragment, inner types are limited.\nexport const DAGSTER_TYPE_FRAGMENT = gql`\n  fragment DagsterTypeFragment on DagsterType {\n    ..._DagsterTypeFragment\n    innerTypes {\n      ..._DagsterTypeFragment\n    }\n  }\n  fragment _DagsterTypeFragment on DagsterType {\n    key\n    name\n    displayName\n    description\n    isNullable\n    isList\n    isBuiltin\n    isNothing\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    inputSchemaType {\n      ...ConfigTypeSchemaFragment\n      recursiveConfigTypes {\n        ...ConfigTypeSchemaFragment\n      }\n    }\n    outputSchemaType {\n      ...ConfigTypeSchemaFragment\n      recursiveConfigTypes {\n        ...ConfigTypeSchemaFragment\n      }\n    }\n  }\n  ${CONFIG_TYPE_SCHEMA_FRAGMENT}\n  ${METADATA_ENTRY_FRAGMENT}\n`;\n","import {GraphQueryItem} from '../app/GraphQueryImpl';\nimport {IStepState} from '../runs/RunMetadataProvider';\n\nexport type IGanttNode = GraphQueryItem;\n\nexport interface GanttViewport {\n  left: number; // Note: pixel values\n  top: number;\n  width: number;\n  height: number;\n}\n\nexport interface GanttChartPlacement {\n  key: string; // A React-friendly unique key like `step:retry-1`\n  width: number;\n  x: number; // Note: This is a pixel value\n  y: number; // Note: This is a \"row number\" not a pixel value\n}\n\nexport interface GanttChartBox extends GanttChartPlacement {\n  state: IStepState | undefined;\n  children: GanttChartBox[];\n  node: IGanttNode;\n  root: boolean;\n}\n\nexport interface GanttChartMarker extends GanttChartPlacement {}\n\nexport interface GanttChartLayout {\n  boxes: GanttChartBox[];\n\n  // only present in timescaled layout\n  markers: GanttChartMarker[];\n}\n\nexport interface GanttChartLayoutOptions {\n  mode: GanttChartMode;\n  zoom: number; // 1 => 100\n  hideWaiting: boolean;\n  hideTimedMode: boolean;\n  hideUnselectedSteps: boolean;\n}\n\nexport enum GanttChartMode {\n  FLAT = 'flat',\n  WATERFALL = 'waterfall',\n  WATERFALL_TIMED = 'waterfall-timed',\n}\n\nexport const MIN_SCALE = 0.0002;\nexport const MAX_SCALE = 0.5;\nexport const LEFT_INSET = 16;\nexport const TOP_INSET = 16;\nexport const BOTTOM_INSET = 16;\nexport const FLAT_INSET_FROM_PARENT = 16;\nexport const BOX_HEIGHT = 34;\nexport const BOX_MARGIN_Y = 5;\nexport const BOX_SPACING_X = 20;\nexport const BOX_WIDTH = 100;\nexport const BOX_DOT_WIDTH_CUTOFF = 8;\nexport const BOX_SHOW_LABEL_WIDTH_CUTOFF = 30;\nexport const BOX_DOT_SIZE = 6;\nexport const BOX_DOT_MARGIN_Y = (BOX_HEIGHT - BOX_DOT_SIZE) / 2;\n\nexport const LINE_SIZE = 2;\nexport const CSS_DURATION = 100;\n\nexport const DEFAULT_OPTIONS: GanttChartLayoutOptions = {\n  mode: GanttChartMode.WATERFALL,\n  hideWaiting: false,\n  hideTimedMode: false,\n  zoom: 1,\n  hideUnselectedSteps: false,\n};\n","/**\n * Ops with dynamic outputs yield execution plans like step_a => step_b[?] => step_c[?],\n * where the index syntax indicates that step_b and step_c may be invoked an arbitrary number\n * of times. At runtime, Dagit replaces and duplicates these \"planned dynamic steps\" as it\n * observes invocations in the logs.\n *\n * Dagit currently parses step keys to implement this behavior and assumes that:\n *  - [?] Indicates a planned dynamic step\n *  - [ and ] are only used in dynamic steps\n *  - Index values are arbitrary (eg: step[1] or step[A] or step[US-East-1])\n *  - Index values are propagated through the entire subgraph after a dynamic invocation\n */\nexport function isDynamicStep(stepKey: string) {\n  return stepKey.endsWith(']');\n}\n\nexport function isPlannedDynamicStep(stepKey: string) {\n  return stepKey.endsWith('[?]');\n}\n\nexport function invocationsOfPlannedDynamicStep(plannedStepKey: string, runtimeStepKeys: string[]) {\n  return runtimeStepKeys.filter((k) => k.startsWith(plannedStepKey.replace('?]', '')));\n}\n\nexport function dynamicKeyWithoutIndex(stepKey: string) {\n  return stepKey.split('[')[0];\n}\n\nexport function replacePlannedIndex(stepKey: string, stepKeyWithIndex: string) {\n  return stepKey.replace('[?]', stepKeyWithIndex.match(/(\\[.*\\])/)![1]);\n}\n","import {\n  Box,\n  Checkbox,\n  Colors,\n  FontFamily,\n  Group,\n  Icon,\n  NonIdealState,\n  Spinner,\n  SpinnerWrapper,\n  SplitPanelContainer,\n} from '@dagster-io/ui';\nimport isEqual from 'lodash/isEqual';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {AppContext} from '../app/AppContext';\nimport {filterByQuery, GraphQueryItem} from '../app/GraphQueryImpl';\nimport {withMiddleTruncation} from '../app/Util';\nimport {WebSocketContext} from '../app/WebSocketProvider';\nimport {CancelRunButton} from '../runs/RunActionButtons';\nimport {\n  EMPTY_RUN_METADATA,\n  IRunMetadataDict,\n  IStepMetadata,\n  IStepState,\n} from '../runs/RunMetadataProvider';\nimport {runsPathWithFilters} from '../runs/RunsFilterInput';\nimport {StepSelection} from '../runs/StepSelection';\nimport {RunFragment} from '../runs/types/RunFragment';\nimport {GraphQueryInput} from '../ui/GraphQueryInput';\n\nimport {\n  BOTTOM_INSET,\n  BOX_DOT_MARGIN_Y,\n  BOX_DOT_SIZE,\n  BOX_DOT_WIDTH_CUTOFF,\n  BOX_HEIGHT,\n  BOX_MARGIN_Y,\n  BOX_SHOW_LABEL_WIDTH_CUTOFF,\n  BOX_SPACING_X,\n  CSS_DURATION,\n  DEFAULT_OPTIONS,\n  GanttChartBox,\n  GanttChartLayout,\n  GanttChartLayoutOptions,\n  GanttChartMode,\n  GanttChartPlacement,\n  GanttViewport,\n  LINE_SIZE,\n  MAX_SCALE,\n  MIN_SCALE,\n  TOP_INSET,\n} from './Constants';\nimport {isDynamicStep} from './DynamicStepSupport';\nimport {\n  adjustLayoutWithRunMetadata,\n  boxStyleFor,\n  buildLayout,\n  BuildLayoutParams,\n  interestingQueriesFor,\n} from './GanttChartLayout';\nimport {GanttChartModeControl} from './GanttChartModeControl';\nimport {GanttChartTimescale} from './GanttChartTimescale';\nimport {GanttStatusPanel} from './GanttStatusPanel';\nimport {OptionsContainer, OptionsSpacer} from './VizComponents';\nimport {ZoomSlider} from './ZoomSlider';\nimport {useGanttChartMode} from './useGanttChartMode';\nimport {useViewport} from './useViewport';\n\nexport {GanttChartMode} from './Constants';\n\nconst HIGHLIGHT_TIME_EVENT = 'gantt-highlight-time';\n\nlet highlightTimer: NodeJS.Timeout;\n\n/**\n * Set or clear the highlighted time on the Gantt chart. Goal of this convenience\n * method is to make the implementation (via event dispatch) private to this file.\n */\nexport function setHighlightedGanttChartTime(timestamp: null | string, debounced = true) {\n  clearTimeout(highlightTimer);\n\n  if (debounced) {\n    highlightTimer = setTimeout(() => setHighlightedGanttChartTime(timestamp, false), 100);\n  } else {\n    document.dispatchEvent(new CustomEvent(HIGHLIGHT_TIME_EVENT, {detail: timestamp}));\n  }\n}\n\ninterface GanttChartProps {\n  selection: StepSelection;\n  focusedTime: number | null;\n  runId: string;\n  graph: GraphQueryItem[];\n  options?: Partial<GanttChartLayoutOptions>;\n  metadata?: IRunMetadataDict;\n  toolbarActions?: React.ReactChild;\n\n  onClickStep: (step: string, evt: React.MouseEvent<any>) => void;\n  onSetSelection: (query: string) => void;\n\n  // for storybooks\n  overrideNowTime?: number;\n}\n\ninterface GanttChartState {\n  options: GanttChartLayoutOptions;\n}\n\nexport const GanttChart: React.FC<GanttChartProps> = (props) => {\n  const {graph, onSetSelection, options, selection, toolbarActions} = props;\n  const [mode, setMode] = useGanttChartMode();\n  const [state, setState] = React.useState(() => ({\n    ...DEFAULT_OPTIONS,\n    ...options,\n    mode,\n  }));\n\n  const cachedLayout = React.useRef<GanttChartLayout | null>(null);\n  const cachedLayoutParams = React.useRef<BuildLayoutParams | null>(null);\n  const graphFiltered = filterByQuery(graph, selection.query);\n  const layoutParams = React.useMemo(\n    () => ({\n      nodes: state.hideUnselectedSteps ? graphFiltered.all : graph,\n      mode: state.mode,\n    }),\n    [graph, graphFiltered.all, state.hideUnselectedSteps, state.mode],\n  );\n\n  const layout = React.useMemo(() => {\n    const names = (ns: GraphQueryItem[]) => ns.map((n) => n.name).join(',');\n    if (\n      !cachedLayoutParams.current ||\n      names(cachedLayoutParams.current.nodes) !== names(layoutParams.nodes) ||\n      cachedLayoutParams.current.mode !== layoutParams.mode\n    ) {\n      cachedLayout.current = buildLayout(layoutParams);\n      cachedLayoutParams.current = layoutParams;\n    }\n    return cachedLayout.current!;\n  }, [layoutParams]);\n\n  const updateOptions = React.useCallback((changes: Partial<GanttChartLayoutOptions>) => {\n    setState((current) => ({...current, ...changes}));\n  }, []);\n\n  const onChangeMode = React.useCallback(\n    (mode: GanttChartMode) => {\n      updateOptions({mode});\n      setMode(mode);\n    },\n    [setMode, updateOptions],\n  );\n\n  const onUpdateQuery = React.useCallback(\n    (query: string) => {\n      onSetSelection(query || '*');\n    },\n    [onSetSelection],\n  );\n\n  const onDoubleClickStep = React.useCallback(\n    (stepKey: string) => {\n      const query = `*${stepKey}*`;\n      onUpdateQuery(selection.query !== query ? query : '*');\n    },\n    [onUpdateQuery, selection.query],\n  );\n\n  return (\n    <GanttChartContainer>\n      <OptionsContainer>\n        <GanttChartModeControl\n          value={state.mode}\n          onChange={onChangeMode}\n          hideTimedMode={state.hideTimedMode}\n        />\n        {state.mode === GanttChartMode.WATERFALL_TIMED && (\n          <>\n            <OptionsSpacer />\n            <div style={{width: 200}}>\n              <ZoomSlider value={state.zoom} onChange={(v) => updateOptions({zoom: v})} />\n            </div>\n            <OptionsSpacer />\n            <Checkbox\n              style={{marginBottom: 0}}\n              label=\"Hide not started steps\"\n              checked={state.hideWaiting}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                updateOptions({hideWaiting: e.target.checked})\n              }\n            />\n          </>\n        )}\n        <div style={{flex: 1}} />\n        {toolbarActions}\n      </OptionsContainer>\n      <GanttChartInner\n        {...props}\n        options={{...state}}\n        layout={layout}\n        graph={graph}\n        onUpdateQuery={onUpdateQuery}\n        onDoubleClickStep={onDoubleClickStep}\n        onChange={() =>\n          updateOptions({\n            hideUnselectedSteps: !state.hideUnselectedSteps,\n          })\n        }\n      />\n    </GanttChartContainer>\n  );\n};\n\ntype GanttChartInnerProps = GanttChartProps &\n  GanttChartState & {\n    graph: GraphQueryItem[];\n    layout: GanttChartLayout;\n    onUpdateQuery: (value: string) => void;\n    onDoubleClickStep: (stepName: string) => void;\n    onChange: () => void;\n  };\n\nconst GanttChartInner = (props: GanttChartInnerProps) => {\n  const {viewport, containerProps, onMoveToViewport} = useViewport();\n  const [hoveredStep, setHoveredNodeName] = React.useState<string | null>(null);\n  const [hoveredTime, setHoveredTime] = React.useState<number | null>(null);\n  const [nowMs, setNowMs] = React.useState<number>(() => props.overrideNowTime || Date.now());\n  const {options, metadata, selection} = props;\n\n  const {rootServerURI} = React.useContext(AppContext);\n\n  const {availability, disabled, status} = React.useContext(WebSocketContext);\n  const lostWebsocket = !disabled && availability === 'available' && status === WebSocket.CLOSED;\n\n  // The slider in the UI updates `options.zoom` from 1-100. We convert that value\n  // into a px-per-ms \"scale\", where the minimum is the value required to zoom-to-fit.\n  // To make the slider feel more linear, we convert the input from log10 to logE.\n  let minScale = MIN_SCALE;\n  if (viewport.width && metadata && metadata.startedPipelineAt) {\n    const zoomToFitWidthPx = Math.max(1, viewport.width - 150);\n    const elapsedMs = Math.max(1, nowMs - metadata.startedPipelineAt);\n    minScale = zoomToFitWidthPx / elapsedMs;\n  }\n\n  const scale = Math.exp(\n    Math.log(minScale) + ((Math.log(MAX_SCALE) - Math.log(minScale)) / 100) * options.zoom,\n  );\n\n  // When the pipeline is running we want the graph to be steadily moving, even if logs\n  // aren't arriving. To achieve this we determine an update interval based on the scale\n  // and advance a \"now\" value that is used as the currnet time when adjusting the layout\n  // to account for run metadata below.\n\n  // Because renders can happen \"out of band\" of our update interval, we set a timer for\n  // \"time until the next interval after the current nowMs\".\n  React.useEffect(() => {\n    if (scale === 0 || lostWebsocket) {\n      return;\n    }\n\n    if (metadata?.exitedAt) {\n      if (nowMs !== metadata.exitedAt) {\n        setNowMs(metadata.exitedAt);\n      }\n      return;\n    }\n\n    const renderInterval = Math.max(CSS_DURATION, 2 / scale);\n    const now = Date.now();\n\n    const timeUntilIntervalElasped = renderInterval - (now - nowMs);\n    const timeout = setTimeout(() => setNowMs(now), timeUntilIntervalElasped);\n    return () => clearTimeout(timeout);\n  }, [scale, nowMs, lostWebsocket, metadata]);\n\n  // Listen for events specifying hover time (eg: a marker at a particular timestamp)\n  // and sync them to our React state for display.\n  React.useEffect(() => {\n    const listener = (e: CustomEvent) => setHoveredTime(e.detail);\n    document.addEventListener(HIGHLIGHT_TIME_EVENT, listener as EventListener);\n    return () => document.removeEventListener(HIGHLIGHT_TIME_EVENT, listener as EventListener);\n  });\n\n  // The `layout` we receive has been laid out and the rows / \"waterfall\" are final,\n  // but it doesn't incorporate the display scale or run metadata. We stretch and\n  // shift the layout boxes using this data to create the final layout for display.\n  const layout = adjustLayoutWithRunMetadata(\n    props.layout,\n    options,\n    metadata || EMPTY_RUN_METADATA,\n    scale,\n    nowMs,\n  );\n  const layoutSize = {\n    width: Math.max(0, ...layout.boxes.map((b) => b.x + b.width + BOX_SPACING_X)),\n    height: Math.max(0, ...layout.boxes.map((b) => TOP_INSET + b.y * BOX_HEIGHT + BOTTOM_INSET)),\n  };\n\n  React.useEffect(() => {\n    const node = layout.boxes.find((b) => selection.keys.includes(b.node.name));\n    if (!node) {\n      return;\n    }\n    const bounds = boundsForBox(node);\n    const x = (bounds.maxX + bounds.minX) / 2 - viewport.width / 2;\n    const y = (bounds.maxY + bounds.minY) / 2 - viewport.height / 2;\n    onMoveToViewport({left: x, top: y}, true);\n  }, [selection]); // eslint-disable-line\n\n  const highlightedMs: number[] = [];\n  if (props.focusedTime) {\n    highlightedMs.push(props.focusedTime);\n  }\n\n  if (hoveredTime) {\n    highlightedMs.push(hoveredTime);\n  } else if (selection.keys.length > 0) {\n    const selectedMeta = selection.keys\n      .map((stepKey) => metadata?.steps[stepKey])\n      .filter((x): x is IStepMetadata => x !== undefined);\n    const sortedSelectedSteps = selectedMeta.sort((a, b) =>\n      a.start && b.start ? a.start - b.start : 0,\n    );\n    const firstMeta = sortedSelectedSteps[0];\n    const lastMeta = sortedSelectedSteps[sortedSelectedSteps.length - 1];\n    if (firstMeta?.start) {\n      highlightedMs.push(firstMeta.start);\n    }\n    if (lastMeta?.end) {\n      highlightedMs.push(lastMeta.end);\n    }\n  }\n\n  const measurementComplete = viewport.width > 0;\n\n  const content = (\n    <>\n      {options.mode === GanttChartMode.WATERFALL_TIMED && measurementComplete && (\n        <GanttChartTimescale\n          scale={scale}\n          viewport={viewport}\n          layoutSize={layoutSize}\n          startMs={metadata?.startedPipelineAt || 0}\n          highlightedMs={highlightedMs}\n          nowMs={nowMs}\n        />\n      )}\n      <div style={{overflow: 'scroll', flex: 1}} {...containerProps}>\n        <div style={{position: 'relative', marginBottom: 70, ...layoutSize}}>\n          {measurementComplete && (\n            <GanttChartViewportContents\n              options={options}\n              metadata={metadata || EMPTY_RUN_METADATA}\n              layout={layout}\n              hoveredStep={hoveredStep}\n              focusedSteps={selection.keys}\n              viewport={viewport}\n              setHoveredNodeName={setHoveredNodeName}\n              onClickStep={props.onClickStep}\n              onDoubleClickStep={props.onDoubleClickStep}\n            />\n          )}\n        </div>\n      </div>\n\n      <GraphQueryInputContainer>\n        {lostWebsocket ? (\n          <WebsocketWarning>\n            <Box flex={{justifyContent: 'space-around'}} margin={{bottom: 12}}>\n              <Group\n                direction=\"row\"\n                spacing={8}\n                background={`${Colors.Yellow500}26`}\n                padding={{vertical: 8, horizontal: 12}}\n                alignItems=\"flex-start\"\n              >\n                <Icon name=\"warning\" color={Colors.Yellow700} />\n                <div style={{maxWidth: '400px', whiteSpace: 'normal', overflow: 'hidden'}}>\n                  <strong>Lost connection to Dagit server.</strong>\n                  <span>\n                    {` Verify that your instance is responding to requests at ${rootServerURI} and reload the page.`}\n                  </span>\n                </div>\n              </Group>\n            </Box>\n          </WebsocketWarning>\n        ) : null}\n        <FilterInputsBackgroundBox flex={{direction: 'row', alignItems: 'center', gap: 12}}>\n          <GraphQueryInput\n            items={props.graph}\n            value={props.selection.query}\n            placeholder=\"Type a step subset\"\n            onChange={props.onUpdateQuery}\n            presets={metadata ? interestingQueriesFor(metadata, layout) : undefined}\n            className={selection.keys.length > 0 ? 'has-step' : ''}\n          />\n          <Checkbox\n            checked={options.hideUnselectedSteps}\n            label=\"Hide unselected steps\"\n            onChange={props.onChange}\n          />\n        </FilterInputsBackgroundBox>\n      </GraphQueryInputContainer>\n    </>\n  );\n\n  return metadata ? (\n    <SplitPanelContainer\n      identifier=\"gantt-split\"\n      axis=\"horizontal\"\n      first={content}\n      firstInitialPercent={70}\n      second={\n        <GanttStatusPanel\n          {...props}\n          nowMs={nowMs}\n          metadata={metadata}\n          onHighlightStep={(name) => setHoveredNodeName(name)}\n        />\n      }\n    />\n  ) : (\n    content\n  );\n};\n\ninterface GanttChartViewportContentsProps {\n  options: GanttChartLayoutOptions;\n  metadata: IRunMetadataDict;\n  layout: GanttChartLayout;\n  hoveredStep: string | null;\n  focusedSteps: string[];\n  viewport: GanttViewport;\n  setHoveredNodeName: (name: string | null) => void;\n  onDoubleClickStep: (step: string) => void;\n  onClickStep: (step: string, evt: React.MouseEvent<any>) => void;\n}\n\nconst GanttChartViewportContents: React.FC<GanttChartViewportContentsProps> = (props) => {\n  const {viewport, layout, hoveredStep, focusedSteps, metadata, options} = props;\n  const items: React.ReactChild[] = [];\n\n  // To avoid drawing zillions of DOM nodes, we render only the boxes + lines that\n  // intersect with the current viewport.\n  const intersectsViewport = (bounds: Bounds) =>\n    bounds.minX < viewport.left + viewport.width &&\n    bounds.maxX > viewport.left &&\n    bounds.minY < viewport.top + viewport.height &&\n    bounds.maxY > viewport.top;\n\n  // We track the number of lines that end at each X value (they go over and then down,\n  // so this tracks where the vertical lines are). We shift lines by {count}px if there\n  // are others at the same X so wide \"tracks\" show you where data is being collected.\n  const verticalLinesAtXCoord: {[x: string]: number} = {};\n\n  if (options.mode !== GanttChartMode.FLAT) {\n    layout.boxes.forEach((box) => {\n      box.children.forEach((child, childIdx) => {\n        const bounds = boundsForLine(box, child);\n        if (!intersectsViewport(bounds)) {\n          return;\n        }\n        const childNotDrawn = !layout.boxes.includes(child);\n        const childWaiting = metadata ? !metadata.steps[child.node.name]?.state : false;\n\n        const overlapAtXCoord = verticalLinesAtXCoord[bounds.maxX] || 0;\n        verticalLinesAtXCoord[bounds.maxX] = overlapAtXCoord + 1;\n\n        items.push(\n          <GanttLine\n            darkened={\n              (focusedSteps?.includes(box.node.name) || hoveredStep) === box.node.name ||\n              (focusedSteps?.includes(child.node.name) || hoveredStep) === child.node.name\n            }\n            dotted={childNotDrawn || childWaiting}\n            key={`${box.key}-${child.key}-${childIdx}`}\n            depNotDrawn={childNotDrawn}\n            depIdx={overlapAtXCoord}\n            {...bounds}\n          />,\n        );\n      });\n    });\n  }\n\n  layout.boxes.forEach((box) => {\n    const bounds = boundsForBox(box);\n    const useDot = box.width === BOX_DOT_WIDTH_CUTOFF;\n    if (!intersectsViewport(bounds)) {\n      return;\n    }\n\n    items.push(\n      <div\n        key={box.key}\n        data-tooltip={box.node.name}\n        onClick={(evt: React.MouseEvent<any>) => props.onClickStep(box.node.name, evt)}\n        onDoubleClick={() => props.onDoubleClickStep(box.node.name)}\n        onMouseEnter={() => props.setHoveredNodeName(box.node.name)}\n        onMouseLeave={() => props.setHoveredNodeName(null)}\n        className={`\n            chart-element\n            ${useDot ? 'dot' : 'box'}\n            ${focusedSteps.includes(box.node.name) && 'focused'}\n            ${hoveredStep === box.node.name && 'hovered'}\n            ${isDynamicStep(box.node.name) && 'dynamic'}`}\n        style={{\n          left: bounds.minX,\n          top: bounds.minY + (useDot ? BOX_DOT_MARGIN_Y : BOX_MARGIN_Y),\n          width: useDot ? BOX_DOT_SIZE : box.width,\n          ...boxStyleFor(box.state, {metadata, options}),\n        }}\n      >\n        {box.state === IStepState.RUNNING ? <Spinner purpose=\"body-text\" /> : undefined}\n        {truncatedBoxLabel(box)}\n      </div>,\n    );\n  });\n\n  if (options.mode === GanttChartMode.WATERFALL_TIMED) {\n    // Note: We sort the markers from left to right so that they're added to the DOM in that\n    // order and a long one doesn't make ones \"behind it\" unclickable.\n    layout.markers\n      .map((marker, idx) => ({marker, idx, bounds: boundsForBox(marker)}))\n      .filter(({bounds}) => intersectsViewport(bounds))\n      .sort((a, b) => a.bounds.minX - b.bounds.minX)\n      .forEach(({marker, bounds, idx}) => {\n        const useDot = marker.width === BOX_DOT_WIDTH_CUTOFF;\n\n        items.push(\n          <div\n            key={idx}\n            data-tooltip={marker.key}\n            className={`\n            chart-element\n            ${useDot ? 'marker-dot' : 'marker-whiskers'}`}\n            style={{\n              left: bounds.minX,\n              top: bounds.minY + (useDot ? BOX_DOT_MARGIN_Y : BOX_MARGIN_Y),\n              width: useDot ? BOX_DOT_SIZE : marker.width,\n            }}\n          >\n            <div />\n          </div>,\n        );\n      });\n  }\n\n  return <>{items}</>;\n};\n\ninterface Bounds {\n  minX: number;\n  minY: number;\n  maxX: number;\n  maxY: number;\n}\n\n/**\n * Returns the top left + bottom right bounds for the provided Gantt chart box\n * so that the box can be drawn and tested for intersection with the viewport.\n */\nconst boundsForBox = (a: GanttChartPlacement): Bounds => {\n  return {\n    minX: a.x,\n    minY: TOP_INSET + a.y * BOX_HEIGHT,\n    maxX: a.x + a.width,\n    maxY: TOP_INSET + a.y * BOX_HEIGHT + BOX_HEIGHT,\n  };\n};\n\n/**\n * Returns the top left + bottom right bounds for the line between two Gantt\n * chart boxes. The boxes do not need to be provided in left -> right order.\n * @param a: GanttChartBox\n */\nconst boundsForLine = (a: GanttChartBox, b: GanttChartBox): Bounds => {\n  if (b.y < a.y) {\n    [a, b] = [b, a];\n  }\n\n  const aIsDot = a.width === BOX_DOT_WIDTH_CUTOFF;\n  const aCenterY = aIsDot ? BOX_DOT_MARGIN_Y + BOX_DOT_SIZE / 2 : BOX_HEIGHT / 2;\n\n  const bIsDot = b.width === BOX_DOT_WIDTH_CUTOFF;\n  const bCenterY = bIsDot ? BOX_DOT_MARGIN_Y + BOX_DOT_SIZE / 2 : BOX_HEIGHT / 2;\n\n  const straight = b.y === a.y;\n\n  // Line comes out of the center of the right side of the box\n  const minX = Math.min(a.x + a.width, b.x + b.width);\n  const minY = TOP_INSET + (straight ? a.y * BOX_HEIGHT + aCenterY : a.y * BOX_HEIGHT + aCenterY);\n\n  // Line ends on the center left edge of the box if it is on the\n  // same line, or drops into the top center of the box if it's below.\n  const maxX = straight\n    ? Math.max(a.x, b.x)\n    : Math.max(a.x + a.width / 2, b.x + (bIsDot ? BOX_DOT_SIZE : b.width) / 2);\n  const maxY = straight\n    ? TOP_INSET + b.y * BOX_HEIGHT + bCenterY\n    : TOP_INSET + b.y * BOX_HEIGHT + (bIsDot ? BOX_DOT_MARGIN_Y : BOX_MARGIN_Y);\n\n  return {minX, minY, maxX, maxY};\n};\n\n/**\n * Renders a line on the Gantt visualization using a thin horizontal <div> and\n * a thin vertical <div> as necessary.\n */\nconst GanttLine = React.memo(\n  ({\n    minX,\n    minY,\n    maxX,\n    maxY,\n    dotted,\n    darkened,\n    depIdx,\n    depNotDrawn,\n  }: {\n    dotted: boolean;\n    darkened: boolean;\n    depIdx: number;\n    depNotDrawn: boolean;\n  } & Bounds) => {\n    const border = `${LINE_SIZE}px ${dotted ? 'dotted' : 'solid'} ${\n      darkened ? Colors.Gray700 : Colors.Gray300\n    }`;\n\n    const maxXAvoidingOverlap = maxX + (depIdx % 10) * LINE_SIZE;\n\n    return (\n      <>\n        <div\n          className=\"line\"\n          style={{\n            height: 1,\n            left: minX,\n            width: depNotDrawn ? 50 : maxXAvoidingOverlap - minX,\n            top: minY - 1,\n            borderTop: border,\n            zIndex: darkened ? 100 : 1,\n          }}\n        />\n        {minY !== maxY && !depNotDrawn && (\n          <div\n            className=\"line\"\n            style={{\n              width: 1,\n              left: maxXAvoidingOverlap,\n              top: minY - LINE_SIZE / 2,\n              height: maxY - minY,\n              borderRight: border,\n              zIndex: darkened ? 100 : 1,\n            }}\n          />\n        )}\n      </>\n    );\n  },\n  isEqual,\n);\n\nfunction truncatedBoxLabel(box: GanttChartBox) {\n  if (box.width <= BOX_SHOW_LABEL_WIDTH_CUTOFF) {\n    return undefined;\n  }\n\n  // Note: The constants here must be in sync with the CSS immediately below\n  const totalPadding = 7 + (box.state === IStepState.RUNNING ? 16 : 0);\n  const maxLength = (box.width - totalPadding) / 6.2;\n\n  return withMiddleTruncation(box.node.name, {maxLength});\n}\n\n// Note: It is much faster to use standard CSS class selectors here than make\n// each box and line a styled-component because all styled components register\n// listeners for the \"theme\" React context.\nconst GanttChartContainer = styled.div`\n  height: 100%;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  z-index: 2;\n  user-select: none;\n  background: ${Colors.White};\n\n  .line {\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n    transition: top ${CSS_DURATION}ms linear, left ${CSS_DURATION}ms linear,\n      width ${CSS_DURATION}ms linear, height ${CSS_DURATION}ms linear;\n  }\n\n  .chart-element {\n    font-size: 12px;\n    transition: top ${CSS_DURATION}ms linear, left ${CSS_DURATION}ms linear;\n    display: inline-block;\n    position: absolute;\n    color: white;\n    overflow: hidden;\n    user-select: text;\n    z-index: 2;\n\n    user-select: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n  }\n\n  .dot {\n    width: ${BOX_DOT_SIZE}px;\n    height: ${BOX_DOT_SIZE}px;\n    border: 1px solid transparent;\n    border-radius: ${BOX_DOT_SIZE / 2}px;\n  }\n\n  .box {\n    /* Note: padding + font changes may also impact truncatedBoxLabel */\n\n    height: ${BOX_HEIGHT - BOX_MARGIN_Y * 2}px;\n    padding: 3px;\n    padding-right: 1px;\n    border: 1px solid transparent;\n    border-radius: 2px;\n    white-space: nowrap;\n    font-family: ${FontFamily.monospace};\n    font-size: 12.5px;\n    font-weight: 700;\n    line-height: 15px;\n\n    transition: top ${CSS_DURATION}ms linear, left ${CSS_DURATION}ms linear,\n      width ${CSS_DURATION}ms linear, height ${CSS_DURATION}ms linear;\n\n    &.focused {\n      border: 1px solid ${Colors.Gray900};\n      box-shadow: 0 0 0 2px ${Colors.Yellow500};\n    }\n    &.hovered {\n      border: 1px solid ${Colors.Gray800};\n    }\n    &.dynamic {\n      filter: brightness(125%);\n    }\n\n    ${SpinnerWrapper} {\n      display: inline-block;\n      vertical-align: text-bottom;\n      padding-right: 4px;\n    }\n  }\n\n  .marker-dot {\n    width: ${BOX_DOT_SIZE}px;\n    height: ${BOX_DOT_SIZE}px;\n    border: 1px solid rgb(27, 164, 206);\n    border-radius: ${BOX_DOT_SIZE / 2}px;\n  }\n  .marker-whiskers {\n    display: inline-block;\n    position: absolute;\n    height: ${BOX_HEIGHT - BOX_MARGIN_Y * 2}px;\n    background: rgba(27, 164, 206, 0.09);\n    border-left: 1px solid rgba(27, 164, 206, 0.6);\n    border-right: 1px solid rgba(27, 164, 206, 0.6);\n    transition: top ${CSS_DURATION}ms linear, left ${CSS_DURATION}ms linear,\n      width ${CSS_DURATION}ms linear;\n\n    & > div {\n      border-bottom: 1px dashed rgba(27, 164, 206, 0.6);\n      height: ${(BOX_HEIGHT - BOX_MARGIN_Y * 2) / 2}px;\n    }\n  }\n`;\n\nconst WebsocketWarning = styled.div`\n  position: absolute;\n  bottom: 100%;\n  color: ${Colors.Yellow700};\n  width: 100%;\n`;\n\nconst GraphQueryInputContainer = styled.div`\n  z-index: 2;\n  position: absolute;\n  bottom: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  white-space: nowrap;\n`;\n\nconst FilterInputsBackgroundBox = styled(Box)`\n  background: radial-gradient(${Colors.Gray50} 0%, rgba(255, 255, 255, 0) 100%);\n  padding: 15px 15px 0px 15px;\n`;\n\nexport const GanttChartLoadingState = ({runId}: {runId: string}) => (\n  <GanttChartContainer>\n    <OptionsContainer />\n    <SplitPanelContainer\n      identifier=\"gantt-split\"\n      axis=\"horizontal\"\n      first={\n        <div style={{margin: 'auto', marginTop: 100}}>\n          <Spinner purpose=\"section\" />\n        </div>\n      }\n      firstInitialPercent={70}\n      second={\n        <GanttStatusPanel\n          metadata={EMPTY_RUN_METADATA}\n          selection={{keys: [], query: '*'}}\n          runId={runId}\n          nowMs={0}\n        />\n      }\n    />\n  </GanttChartContainer>\n);\n\nexport const QueuedState = ({run}: {run: RunFragment}) => (\n  <GanttChartContainer>\n    <OptionsContainer style={{justifyContent: 'flex-end'}}>\n      <CancelRunButton run={run} />\n    </OptionsContainer>\n    <SplitPanelContainer\n      identifier=\"gantt-split\"\n      axis=\"horizontal\"\n      first={\n        <NonIdealState\n          icon=\"arrow_forward\"\n          title=\"Run queued\"\n          description=\"This run is queued for execution and will start soon.\"\n          action={\n            <Link to={runsPathWithFilters([{token: 'status', value: 'QUEUED'}])}>\n              View queued runs\n            </Link>\n          }\n        />\n      }\n      firstInitialPercent={70}\n      second={\n        <GanttStatusPanel\n          metadata={EMPTY_RUN_METADATA}\n          selection={{keys: [], query: '*'}}\n          runId={run.id}\n          nowMs={0}\n        />\n      }\n    />\n  </GanttChartContainer>\n);\n","import {ButtonGroup, ButtonGroupItem} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {GanttChartMode} from './Constants';\n\nexport const GanttChartModeControl: React.FC<{\n  value: GanttChartMode;\n  hideTimedMode: boolean;\n  onChange: (mode: GanttChartMode) => void;\n}> = React.memo(({value, onChange, hideTimedMode}) => {\n  const buttons: ButtonGroupItem<GanttChartMode>[] = [\n    {id: GanttChartMode.FLAT, icon: 'gantt_flat', tooltip: 'Flat view'},\n    {id: GanttChartMode.WATERFALL, icon: 'gantt_waterfall', tooltip: 'Waterfall view'},\n  ];\n\n  if (!hideTimedMode) {\n    buttons.push({\n      id: GanttChartMode.WATERFALL_TIMED,\n      icon: 'timer',\n      tooltip: 'Timed view',\n    });\n  }\n\n  const activeItems = React.useMemo(() => new Set([value]), [value]);\n  const onClick = React.useCallback((id: GanttChartMode) => onChange(id), [onChange]);\n\n  return <ButtonGroup activeItems={activeItems} buttons={buttons} onClick={onClick} />;\n});\n","import {Colors, FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {formatElapsedTime} from '../app/Util';\n\nimport {CSS_DURATION, GanttViewport, LEFT_INSET} from './Constants';\n\nconst msToMinuteLabel = (ms: number) => `${Math.round(ms / 1000 / 60)}m`;\nconst msToSecondLabel = (ms: number) => `${(ms / 1000).toFixed(0)}s`;\nconst msToSubsecondLabel = (ms: number) => `${(ms / 1000).toFixed(1)}s`;\n\n// We want to gracefully transition the tick marks shown as you zoom, but it's\n// nontrivial to programatically pick good intervals. (500ms => 1s => 5s, etc.)\n// This lookup table defines the available tick mark intervals and the labeling\n// that should be used for each one(\"2:00\" or \"2m\" or \"2s\" or \"0.05s\", etc.).\n//\n// We use the first configuration that places ticks at least 80 pixels apart\n// at the rendered scale.\n//\nconst TICK_LABEL_WIDTH = 56;\nconst TICK_CONFIG = [\n  {\n    tickIntervalMs: 0.5 * 1000,\n    tickLabels: msToSubsecondLabel,\n  },\n  {\n    tickIntervalMs: 1 * 1000,\n    tickLabels: msToSecondLabel,\n  },\n  {\n    tickIntervalMs: 5 * 1000,\n    tickLabels: msToSecondLabel,\n  },\n  {\n    tickIntervalMs: 10 * 1000,\n    tickLabels: msToSecondLabel,\n  },\n  {\n    tickIntervalMs: 30 * 1000,\n    tickLabels: msToSecondLabel,\n  },\n  {\n    tickIntervalMs: 60 * 1000,\n    tickLabels: msToSecondLabel,\n  },\n  {\n    tickIntervalMs: 2 * 60 * 1000,\n    tickLabels: msToMinuteLabel,\n  },\n  {\n    tickIntervalMs: 5 * 60 * 1000,\n    tickLabels: msToMinuteLabel,\n  },\n  {\n    tickIntervalMs: 10 * 60 * 1000,\n    tickLabels: msToMinuteLabel,\n  },\n  {\n    tickIntervalMs: 20 * 60 * 1000,\n    tickLabels: msToMinuteLabel,\n  },\n  {\n    tickIntervalMs: 60 * 60 * 1000,\n    tickLabels: msToMinuteLabel,\n  },\n  {\n    tickIntervalMs: 6 * 60 * 60 * 1000,\n    tickLabels: msToMinuteLabel,\n  },\n];\n\ninterface GanttChartTimescaleProps {\n  scale: number;\n  viewport: GanttViewport;\n  layoutSize: {width: number; height: number};\n  nowMs: number;\n  startMs: number;\n  highlightedMs: number[];\n}\n\nexport const GanttChartTimescale = ({\n  scale,\n  viewport,\n  nowMs,\n  startMs,\n  highlightedMs,\n  layoutSize,\n}: GanttChartTimescaleProps) => {\n  const transform = `translate(${LEFT_INSET - viewport.left}px)`;\n  const ticks: React.ReactChild[] = [];\n  const lines: React.ReactChild[] = [];\n\n  const pxPerMs = scale;\n  const tickConfig = TICK_CONFIG.find((t) => t.tickIntervalMs * pxPerMs > 80);\n  if (tickConfig) {\n    const {tickIntervalMs, tickLabels} = tickConfig;\n    const pxPerTick = tickIntervalMs * pxPerMs;\n    const firstTickX = Math.floor(viewport.left / pxPerTick) * pxPerTick;\n\n    for (let x = firstTickX; x < firstTickX + viewport.width; x += pxPerTick) {\n      if (x - viewport.left < 10) {\n        continue;\n      }\n      const ms = x / pxPerMs;\n      const key = `${ms.toFixed(2)}`;\n      const label = tickLabels(ms);\n      lines.push(<div className=\"line\" key={key} style={{left: x, transform}} />);\n      ticks.push(\n        <div className=\"tick\" key={key} style={{left: x - TICK_LABEL_WIDTH / 2, transform}}>\n          {label}\n        </div>,\n      );\n    }\n  }\n\n  return (\n    <TimescaleContainer>\n      <TimescaleTicksContainer>\n        {ticks}\n        {highlightedMs.length === 2 && (\n          <div\n            key=\"highlight-duration\"\n            className=\"tick duration\"\n            style={{\n              left: (highlightedMs[0] - startMs) * pxPerMs + 2,\n              width: (highlightedMs[1] - highlightedMs[0]) * pxPerMs - 2,\n              transform,\n            }}\n          >\n            {formatElapsedTime(highlightedMs[1] - highlightedMs[0])}\n          </div>\n        )}\n        {highlightedMs.map((ms, idx) => {\n          const timeX = (ms - startMs) * pxPerMs;\n          const labelOffset =\n            idx === 0 && timeX > TICK_LABEL_WIDTH + viewport.left ? -(TICK_LABEL_WIDTH - 1) : 0;\n\n          return (\n            <div\n              key={`highlight-${idx}`}\n              className=\"tick highlight\"\n              style={{left: timeX + labelOffset, transform}}\n            >\n              {msToSubsecondLabel(ms - startMs)}\n            </div>\n          );\n        })}\n      </TimescaleTicksContainer>\n      <TimescaleLinesContainer style={{width: viewport.width, height: viewport.height}}>\n        {lines}\n        {highlightedMs.map((ms, idx) => (\n          <div\n            className=\"line highlight\"\n            key={`highlight-${idx}`}\n            style={{left: (ms - startMs) * pxPerMs + (idx === 0 ? -1 : 0), transform}}\n          />\n        ))}\n        {nowMs > startMs && (\n          <div\n            className=\"fog-of-war\"\n            style={{\n              left: (nowMs - startMs) * pxPerMs,\n              width: Math.max(layoutSize.width, viewport.width) - (nowMs - startMs) * pxPerMs + 100,\n              transform,\n            }}\n          ></div>\n        )}\n      </TimescaleLinesContainer>\n    </TimescaleContainer>\n  );\n};\n\nconst TICKS_ROW_HEIGHT = 32;\n\nconst TimescaleContainer = styled.div`\n  width: 100%;\n\n  & .tick {\n    position: absolute;\n    padding-top: 7px;\n    width: ${TICK_LABEL_WIDTH}px;\n    height: ${TICKS_ROW_HEIGHT}px;\n    box-sizing: border-box;\n    transition: left ${CSS_DURATION}ms linear, width ${CSS_DURATION}ms linear;\n    text-align: center;\n  }\n  & .tick.duration {\n    color: ${Colors.Gray500};\n    background: ${Colors.Gray100};\n    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\n  }\n  & .tick.highlight {\n    color: white;\n    height: ${TICKS_ROW_HEIGHT + 2}px;\n    background: ${Colors.Gray900};\n  }\n  & .line {\n    position: absolute;\n    border-left: 1px solid #f0f0f0;\n    transition: left ${CSS_DURATION}ms linear;\n    top: 0px;\n    bottom: 0px;\n  }\n  & .line.highlight {\n    border-left: 2px solid ${Colors.Gray900};\n    z-index: 1111;\n    top: -1px;\n  }\n\n  & .fog-of-war {\n    position: absolute;\n    background: ${Colors.Gray50};\n    transition: left ${CSS_DURATION}ms linear;\n    top: 0px;\n    bottom: 0px;\n    width: 100%;\n  }\n`;\n\nconst TimescaleTicksContainer = styled.div`\n  height: ${TICKS_ROW_HEIGHT}px;\n  z-index: 4;\n  position: relative;\n  background: ${Colors.White};\n  display: flex;\n  color: ${Colors.Gray500};\n  font-size: 13px;\n  font-family: ${FontFamily.monospace};\n  box-shadow: inset 0 -1px ${Colors.KeylineGray};\n  overflow: hidden;\n`;\n\nconst TimescaleLinesContainer = styled.div`\n  z-index: 0;\n  top: ${TICKS_ROW_HEIGHT}px;\n  left: 0;\n  position: absolute;\n  pointer-events: none;\n  overflow: hidden;\n`;\n","import {Colors, SliderStyles} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\n/**\n * Renders a horizontal slider that lets you adjust the graph's relative zoom from 1-100.\n * It uses Blueprint CSS but not the Slider component, because that renders twice and\n * forces a DOM layout to determine it's size (I think for tick marks, which we aren't using)\n */\nexport const ZoomSlider: React.FC<{\n  value: number;\n  onChange: (v: number) => void;\n}> = React.memo((props) => {\n  return (\n    <ZoomSliderContainer\n      $fillColor={Colors.Gray600}\n      className=\"bp3-slider bp3-slider-unlabeled\"\n      onMouseDown={(e: React.MouseEvent) => {\n        const rect = e.currentTarget.closest('.bp3-slider')!.getBoundingClientRect();\n\n        let initialX: number;\n        if (e.target instanceof HTMLElement && e.target.classList.contains('bp3-slider-handle')) {\n          initialX = e.pageX;\n        } else {\n          initialX = rect.left + (props.value / 100) * rect.width;\n        }\n\n        const onUpdate = (e: MouseEvent) => {\n          const nextValue = props.value + (e.pageX - initialX) * (100 / rect.width);\n          props.onChange(Math.max(0, Math.min(100, nextValue)));\n        };\n        const onRelease = (e: MouseEvent) => {\n          onUpdate(e);\n          document.removeEventListener('mousemove', onUpdate);\n          document.removeEventListener('mouseup', onRelease);\n        };\n        document.addEventListener('mousemove', onUpdate);\n        document.addEventListener('mouseup', onRelease);\n      }}\n    >\n      <div className=\"bp3-slider-track\">\n        <div className=\"bp3-slider-progress\" style={{left: 0, right: 0, top: 0}} />\n        <div\n          className=\"bp3-slider-progress bp3-intent-primary\"\n          style={{left: 0, right: `${100 - props.value}%`, top: 0}}\n        />\n      </div>\n      <div className=\"bp3-slider-axis\" />\n      <span\n        className=\"bp3-slider-handle\"\n        style={{left: `calc(${props.value}% - 8px)`}}\n        tabIndex={0}\n      />\n    </ZoomSliderContainer>\n  );\n});\n\nconst ZoomSliderContainer = styled.div`\n  ${SliderStyles}\n`;\n","import {useStateWithStorage} from '../hooks/useStateWithStorage';\n\nimport {GanttChartMode} from './Constants';\n\nconst GANTT_CHART_MODE_KEY = 'GanttChartModePreference';\n\nconst validateSavedMode = (storedValue: string) =>\n  storedValue === GanttChartMode.FLAT ||\n  storedValue === GanttChartMode.WATERFALL ||\n  storedValue === GanttChartMode.WATERFALL_TIMED\n    ? storedValue\n    : GanttChartMode.WATERFALL_TIMED;\n\nexport const useGanttChartMode = () => {\n  return useStateWithStorage(GANTT_CHART_MODE_KEY, validateSavedMode);\n};\n","import {Colors} from '@dagster-io/ui';\n\nimport {IRunMetadataDict, IStepAttempt, IStepState} from '../runs/RunMetadataProvider';\n\nimport {\n  BOX_DOT_WIDTH_CUTOFF,\n  BOX_SPACING_X,\n  BOX_WIDTH,\n  FLAT_INSET_FROM_PARENT,\n  GanttChartBox,\n  GanttChartLayout,\n  GanttChartLayoutOptions,\n  GanttChartMarker,\n  GanttChartMode,\n  IGanttNode,\n  LEFT_INSET,\n} from './Constants';\nimport {isDynamicStep, isPlannedDynamicStep, dynamicKeyWithoutIndex} from './DynamicStepSupport';\n\nexport interface BuildLayoutParams {\n  nodes: IGanttNode[];\n  mode: GanttChartMode;\n}\n\nexport const buildLayout = (params: BuildLayoutParams) => {\n  const {nodes, mode} = params;\n\n  // Step 1: Place the nodes that have no dependencies into the layout.\n  const hasNoDependencies = (g: IGanttNode) =>\n    !g.inputs.some((i) => i.dependsOn.some((s) => nodes.find((o) => o.name === s.solid.name)));\n\n  const boxes: GanttChartBox[] = nodes.filter(hasNoDependencies).map((node) => ({\n    node,\n    key: node.name,\n    state: undefined,\n    children: [],\n    x: -1,\n    y: -1,\n    root: true,\n    width: BOX_WIDTH,\n  }));\n\n  // Step 2: Recursively iterate through the graph and insert child nodes\n  // into the `boxes` array, ensuring that their positions in the array are\n  // always greater than their parent(s) position (which requires correction\n  // because boxes can have multiple dependencies.)\n  const roots = [...boxes];\n  roots.forEach((box) => addChildren(boxes, box, params));\n\n  // Step 3: Assign X values (pixels) to each box by traversing the graph from the\n  // roots onward and pushing things to the right as we go.\n  const deepen = (box: GanttChartBox, x: number) => {\n    if (box.x >= x) {\n      // If this box is already further to the right than required by it's parent,\n      // we can safely stop traversing this branch of the graph.\n      return;\n    }\n    box.x = x;\n    box.children.forEach((child) => deepen(child, box.x + box.width + BOX_SPACING_X));\n  };\n  roots.forEach((box) => deepen(box, LEFT_INSET));\n\n  const parents: {[name: string]: GanttChartBox[]} = {};\n  const boxesByY: {[y: string]: GanttChartBox[]} = {};\n\n  // Step 4: Assign Y values (row numbers not pixel values)\n  // First put each box on it's own line. We know this will generate a fine gantt viz\n  // because we sorted the boxes array as we built it.\n  boxes.forEach((box, idx) => {\n    box.y = idx;\n    box.children.forEach((child) => {\n      parents[child.node.name] = parents[child.node.name] || [];\n      parents[child.node.name].push(box);\n    });\n  });\n\n  boxes.forEach((box) => {\n    boxesByY[`${box.y}`] = boxesByY[`${box.y}`] || [];\n    boxesByY[`${box.y}`].push(box);\n  });\n\n  // Next, start at the bottom of the viz and \"collapse\" boxes up on to the previous line\n  // as long as that does not result in them being higher than their parents AND does\n  // not cause them to sit on top of an existing on-the-same-line A ---> B arrow.\n\n  // This makes basic box series (A -> B -> C -> D) one row instead of four rows.\n\n  let changed = true;\n  while (changed) {\n    changed = false;\n    for (let idx = boxes.length - 1; idx > 0; idx--) {\n      const box = boxes[idx];\n      const boxParents = parents[box.node.name] || [];\n      const highestYParent = boxParents.sort((a, b) => b.y - a.y)[0];\n      if (!highestYParent) {\n        continue;\n      }\n      // Don't re-order the first row of nodes that \"fan out\" from a dynamic output. this\n      // ensures that these nodes are always \"waterfall\" visually by ascending index.\n      if (isDynamicStep(box.node.name) && !isDynamicStep(highestYParent.node.name)) {\n        continue;\n      }\n      const onTargetY = boxesByY[`${highestYParent.y}`];\n      const taken = onTargetY.find((r) => r.x === box.x);\n      if (taken) {\n        continue;\n      }\n\n      const parentX = highestYParent.x;\n      const willCross = onTargetY.some((r) => r.x > parentX && r.x < box.x);\n      const willCauseCrossing = onTargetY.some(\n        (r) => r.x < box.x && r.children.some((c) => c.y >= highestYParent.y && c.x > box.x),\n      );\n      if (willCross || willCauseCrossing) {\n        continue;\n      }\n\n      boxesByY[`${box.y}`] = boxesByY[`${box.y}`].filter((b) => b !== box);\n      box.y = highestYParent.y;\n      boxesByY[`${box.y}`].push(box);\n\n      changed = true;\n      break;\n    }\n  }\n\n  if (mode === GanttChartMode.FLAT) {\n    // Now that we've inlined chains of boxes where possible, flatten everything back out onto the\n    // Y axis. Doing this after inlining ensures that children are close to their parents in the\n    // resulting tree rather than placed randomly before their mutual dependents.\n    let bottomY = 0;\n    for (const y of Object.keys(boxesByY)) {\n      const row = boxesByY[y];\n      if (!row.length) {\n        continue;\n      }\n      let x = row[0].root ? LEFT_INSET : parents[row[0].node.name][0].x + FLAT_INSET_FROM_PARENT;\n      for (const box of row) {\n        box.x = x;\n        box.y = bottomY;\n        bottomY += 1;\n        x += FLAT_INSET_FROM_PARENT;\n      }\n    }\n    boxes.sort((a, b) => a.y - b.y || a.x - b.x);\n  } else {\n    // Since we've inlined boxes, shift rows up and fill empty space until every Y value has a box.\n    changed = true;\n    while (changed) {\n      changed = false;\n      const maxY = boxes.reduce((m, r) => Math.max(m, r.y), 0);\n      for (let y = 0; y < maxY; y++) {\n        const empty = !boxes.some((r) => r.y === y);\n        if (empty) {\n          boxes.filter((r) => r.y > y).forEach((r) => (r.y -= 1));\n          changed = true;\n          break;\n        }\n      }\n    }\n  }\n\n  return {boxes, markers: []} as GanttChartLayout;\n};\n\nconst ensureSubtreeAfterParentInArray = (\n  boxes: GanttChartBox[],\n  parent: GanttChartBox,\n  box: GanttChartBox,\n) => {\n  const parentIdx = boxes.indexOf(parent);\n  const boxIdx = boxes.indexOf(box);\n  if (parentIdx <= boxIdx) {\n    return;\n  }\n  boxes.splice(boxIdx, 1);\n  boxes.splice(parentIdx, 0, box);\n\n  // Note: It's important that we don't cache or pass indexes during this recursion.\n  // Visiting a child below could cause boxes earlier in the array to be pulled to the\n  // end. Our `parentIdx` above is not stable within the box.children loop below.\n\n  for (const child of box.children) {\n    ensureSubtreeAfterParentInArray(boxes, box, child);\n  }\n};\n\nconst addChildren = (boxes: GanttChartBox[], box: GanttChartBox, params: BuildLayoutParams) => {\n  const seen: string[] = [];\n  const added: GanttChartBox[] = [];\n\n  for (const out of box.node.outputs) {\n    for (const dep of out.dependedBy) {\n      const depNode = params.nodes.find((n) => dep.solid.name === n.name);\n      if (!depNode) {\n        continue;\n      }\n\n      if (seen.includes(depNode.name)) {\n        continue;\n      }\n\n      // Hide the unresolved node if any its resolved node exists\n      if (\n        isPlannedDynamicStep(depNode.name) &&\n        seen\n          .filter((n) => isDynamicStep(n))\n          .some((n) => dynamicKeyWithoutIndex(n) === dynamicKeyWithoutIndex(depNode.name))\n      ) {\n        continue;\n      }\n\n      seen.push(depNode.name);\n\n      const depBoxIdx = boxes.findIndex((r) => r.node === depNode);\n      let depBox: GanttChartBox;\n\n      if (depBoxIdx === -1) {\n        depBox = {\n          children: [],\n          key: depNode.name,\n          node: depNode,\n          state: undefined,\n          width: BOX_WIDTH,\n          root: false,\n          x: 0,\n          y: -1,\n        };\n        boxes.push(depBox);\n        added.push(depBox);\n      } else {\n        depBox = boxes[depBoxIdx];\n        ensureSubtreeAfterParentInArray(boxes, box, depBox);\n      }\n\n      box.children.push(depBox);\n    }\n  }\n\n  // Note: To limit the amount of time we spend shifting elements of our `boxes` array to keep it\n  // ordered (knowing that parents appear before children gives us more opportunities for early\n  // returns, etc. elsewhere), we add all of our immediate children and THEN proceed in to the next layer.\n  for (const depBox of added) {\n    addChildren(boxes, depBox, params);\n  }\n};\n\nconst TextColorForStates = {\n  [IStepState.RUNNING]: Colors.Blue700,\n};\nconst BackgroundColorForStates = {\n  [IStepState.RUNNING]: Colors.Blue100,\n  [IStepState.RETRY_REQUESTED]: Colors.Yellow500,\n  [IStepState.SUCCEEDED]: Colors.Green500,\n  [IStepState.FAILED]: Colors.Red500,\n  [IStepState.SKIPPED]: Colors.Gray500,\n};\n\nexport const boxStyleFor = (\n  state: IStepState | undefined,\n  context: {\n    metadata: IRunMetadataDict;\n    options: {mode: GanttChartMode};\n  },\n) => {\n  // Not running and not viewing waterfall? We always use a nice blue\n  if (\n    !context.metadata.startedPipelineAt &&\n    context.options.mode !== GanttChartMode.WATERFALL_TIMED\n  ) {\n    return {background: `#2491eb`};\n  }\n\n  // Step has started and has state? Return state color.\n  if (state && state !== IStepState.PREPARING) {\n    return {\n      color: TextColorForStates[state] || '#fff',\n      background: BackgroundColorForStates[state] || Colors.Gray400,\n    };\n  }\n\n  // Step has not started, use \"hypothetical dotted box\".\n  return {\n    color: Colors.Gray600,\n    background: Colors.White,\n    border: `1.5px dotted ${Colors.Gray500}`,\n  };\n};\n\n// Does a shallow clone of the boxes so attributes (`width`, `x`, etc) can be mutated.\n// This requires special logic because (for easy graph travesal), boxes.children references\n// other elements of the boxes array. A basic deepClone would replicate these into\n// copies rather than references.\nconst cloneLayout = ({boxes, markers}: GanttChartLayout): GanttChartLayout => {\n  const map = new WeakMap();\n  const nextMarkers = markers.map((m) => ({...m}));\n  const nextBoxes: GanttChartBox[] = [];\n  for (const box of boxes) {\n    const next = {...box};\n    nextBoxes.push(next);\n    map.set(box, next);\n  }\n  for (let ii = 0; ii < boxes.length; ii++) {\n    nextBoxes[ii].children = boxes[ii].children.map((c) => map.get(c));\n  }\n\n  return {boxes: nextBoxes, markers: nextMarkers};\n};\n\nconst positionAndSplitBoxes = (\n  boxes: GanttChartBox[],\n  metadata: IRunMetadataDict,\n  positionFor: (\n    box: GanttChartBox,\n    run?: IStepAttempt | null,\n    runIdx?: number,\n  ) => {width: number; x: number},\n) => {\n  // Apply X values + widths to boxes, and break apart retries into their own boxes by looking\n  // at the transitions recorded for each step.\n  for (let ii = boxes.length - 1; ii >= 0; ii--) {\n    const box = boxes[ii];\n    const meta = metadata.steps[box.node.name];\n    if (!meta) {\n      Object.assign(box, positionFor(box));\n      continue;\n    }\n    if (meta.attempts.length === 0) {\n      Object.assign(box, positionFor(box));\n      box.state = meta.state;\n      continue;\n    }\n\n    const runBoxes: GanttChartBox[] = [];\n    meta.attempts.forEach((run, runIdx) => {\n      runBoxes.push({\n        ...box,\n        ...positionFor(box, run, runIdx),\n        key: `${box.key}-${runBoxes.length}`,\n        state: run.exitState || IStepState.RUNNING,\n      });\n    });\n\n    // Move the children (used to draw outbound lines) to the last box\n    for (let ii = 0; ii < runBoxes.length - 1; ii++) {\n      runBoxes[ii].children = [runBoxes[ii + 1]];\n    }\n    runBoxes[runBoxes.length - 1].children = box.children;\n\n    Object.assign(box, runBoxes[0]);\n    // Add additional boxes we created for retries\n    if (runBoxes.length > 1) {\n      boxes.splice(ii, 0, ...runBoxes.slice(1));\n    }\n  }\n};\n\n/** Traverse the graph from the root and place boxes that still have x=0 locations.\n(Unstarted or skipped boxes) so that they appear downstream of running boxes\nwe have position / time data for. */\nconst positionUntimedBoxes = (boxes: GanttChartBox[], earliestAllowedX: number) => {\n  const unstarted = boxes.filter((box) => box.x === 0);\n\n  const visit = (box: GanttChartBox, parentX: number) => {\n    if (box.x === 0) {\n      // If we are visiting the box for the first time (by traversing the tree from\n      // another starting box), starting another pass using it as the root is unnecessary.\n      const idx = unstarted.indexOf(box);\n      if (idx !== -1) {\n        unstarted.splice(idx, 1);\n      }\n    }\n\n    box.x = Math.max(box.x, earliestAllowedX, parentX);\n\n    const minXForUnstartedChildren = box.x + box.width + BOX_SPACING_X;\n    for (const child of box.children) {\n      if (child.x < minXForUnstartedChildren) {\n        visit(child, minXForUnstartedChildren);\n      }\n    }\n  };\n\n  let box: GanttChartBox | undefined;\n  while ((box = unstarted.shift())) {\n    visit(box, earliestAllowedX);\n  }\n};\n\nexport const adjustLayoutWithRunMetadata = (\n  layout: GanttChartLayout,\n  options: GanttChartLayoutOptions,\n  metadata: IRunMetadataDict,\n  scale: number,\n  nowMs: number,\n): GanttChartLayout => {\n  // Clone the layout into a new set of JS objects so that React components can do shallow\n  // comparison between the old set and the new set and code below can traverse + mutate\n  // in place.\n  let {boxes} = cloneLayout(layout);\n  const markers: GanttChartMarker[] = [];\n\n  // Move and size boxes based on the run metadata. Note that we don't totally invalidate\n  // the pre-computed layout for the execution plan, (and shouldn't have to since the run's\n  // step ordering, etc. should obey the constraints we already planned for). We just push\n  // boxes around on their existing rows.\n  if (options.mode === GanttChartMode.WATERFALL_TIMED) {\n    const startedPipelineAt = metadata.startedPipelineAt || nowMs;\n    const xForMs = (time: number) => LEFT_INSET + (time - startedPipelineAt) * scale;\n    const widthForMs = ({start, end}: {start: number; end?: number}) =>\n      Math.max(BOX_DOT_WIDTH_CUTOFF, ((end || nowMs) - start) * scale);\n\n    positionAndSplitBoxes(boxes, metadata, (_box, run) => ({\n      x: run ? xForMs(run.start) : 0,\n      width: run ? widthForMs(run) : BOX_WIDTH,\n    }));\n\n    positionUntimedBoxes(boxes, xForMs(nowMs) + BOX_SPACING_X);\n\n    // Add markers to the layout using the run metadata\n    metadata.globalMarkers.forEach((m) => {\n      if (m.start === undefined) {\n        return;\n      }\n      markers.push({\n        key: `global:${m.key}`,\n        y: 0,\n        x: xForMs(m.start),\n        width: widthForMs({start: m.start, end: m.end}),\n      });\n    });\n    Object.entries(metadata.steps).forEach(([name, step]) => {\n      for (const m of step.markers) {\n        if (m.start === undefined) {\n          continue;\n        }\n        const stepBox = layout.boxes.find((b) => b.node.name === name);\n        if (!stepBox) {\n          continue;\n        }\n\n        markers.push({\n          key: `${name}:${m.key}`,\n          y: stepBox.y,\n          x: xForMs(m.start),\n          width: widthForMs({start: m.start, end: m.end}),\n        });\n      }\n    });\n\n    // Apply display options / filtering\n    if (options.hideWaiting) {\n      boxes = boxes.filter((b) => !!metadata.steps[b.node.name]?.state);\n    }\n  } else if (options.mode === GanttChartMode.WATERFALL) {\n    positionAndSplitBoxes(boxes, metadata, (box, _run, runIdx) => ({\n      x: box.x + (runIdx ? (BOX_SPACING_X + BOX_WIDTH) * runIdx : 0),\n      width: BOX_WIDTH,\n    }));\n  } else if (options.mode === GanttChartMode.FLAT) {\n    positionAndSplitBoxes(boxes, metadata, (box, _run, runIdx) => ({\n      x: box.x + (runIdx ? (2 + BOX_WIDTH) * runIdx : 0),\n      width: BOX_WIDTH,\n    }));\n  } else {\n    throw new Error('Invalid mdoe ');\n  }\n\n  return {boxes, markers};\n};\n\n/**\n * Returns a set of query presets that highlight interesting slices of the visualization.\n */\nexport const interestingQueriesFor = (metadata: IRunMetadataDict, layout: GanttChartLayout) => {\n  if (layout.boxes.length === 0) {\n    return;\n  }\n  const results: {name: string; value: string}[] = [];\n\n  const errorsQuery = Object.keys(metadata.steps)\n    .filter((k) => metadata.steps[k].state === IStepState.FAILED)\n    .map((k) => `+${k}`)\n    .join(', ');\n  if (errorsQuery) {\n    results.push({name: 'Errors', value: errorsQuery});\n  }\n\n  const slowStepsQuery = Object.keys(metadata.steps)\n    .filter((k) => metadata.steps[k]?.end && metadata.steps[k]?.start)\n    .sort(\n      (a, b) =>\n        metadata.steps[b]!.end! -\n        metadata.steps[b]!.start! -\n        (metadata.steps[a]!.end! - metadata.steps[a]!.start!),\n    )\n    .slice(0, 5)\n    .map((k) => `\"${k}\"`)\n    .join(', ');\n  if (slowStepsQuery) {\n    results.push({name: 'Slowest Individual Steps', value: slowStepsQuery});\n  }\n\n  const rightmostCompletedBox = [...layout.boxes]\n    .filter((b) => metadata.steps[b.node.name]?.end)\n    .sort((a, b) => b.x + b.width - (a.x + a.width))[0];\n\n  if (rightmostCompletedBox) {\n    results.push({\n      name: 'Slowest Path',\n      value: `*${rightmostCompletedBox.node.name}`,\n    });\n  }\n\n  return results;\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, ButtonLink, Colors, Group, Icon, FontFamily} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';\nimport {SidebarSection} from '../pipelines/SidebarComponents';\nimport {RunStatusIndicator} from '../runs/RunStatusDots';\nimport {DagsterTag} from '../runs/RunTag';\nimport {RunStateSummary, RunTime, RUN_TIME_FRAGMENT} from '../runs/RunUtils';\n\nimport {\n  RunGroupPanelQuery,\n  RunGroupPanelQueryVariables,\n  RunGroupPanelQuery_runGroupOrError_RunGroup_runs,\n} from './types/RunGroupPanelQuery';\n\ntype Run = RunGroupPanelQuery_runGroupOrError_RunGroup_runs;\n\nfunction subsetTitleForRun(run: {tags: {key: string; value: string}[]}) {\n  const stepsTag = run.tags.find((t) => t.key === DagsterTag.StepSelection);\n  return stepsTag ? stepsTag.value : '*';\n}\n\nexport const RunGroupPanel: React.FC<{runId: string; runStatusLastChangedAt: number}> = ({\n  runId,\n  runStatusLastChangedAt,\n}) => {\n  const queryResult = useQuery<RunGroupPanelQuery, RunGroupPanelQueryVariables>(\n    RUN_GROUP_PANEL_QUERY,\n    {\n      variables: {runId},\n      fetchPolicy: 'cache-and-network',\n      notifyOnNetworkStatusChange: true,\n    },\n  );\n\n  const {data, refetch} = queryResult;\n  useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);\n\n  // Because the RunGroupPanel makes it's own query for the runs and their statuses,\n  // the log + gantt chart UI can show that the run is \"completed\" for up to 15s before\n  // it's reflected in the sidebar. Observing this single timestamp from our parent\n  // allows us to refetch data immediately when the run's exitedAt / startedAt, etc. is set.\n  React.useEffect(() => {\n    if (runStatusLastChangedAt) {\n      refetch();\n    }\n  }, [refetch, runStatusLastChangedAt]);\n\n  const group = data?.runGroupOrError;\n\n  if (!group || group.__typename === 'RunGroupNotFoundError') {\n    return null;\n  }\n\n  if (group.__typename === 'PythonError') {\n    return (\n      <Group direction=\"row\" spacing={8} padding={8}>\n        <Icon name=\"warning\" color={Colors.Yellow500} />\n        <div style={{fontSize: '13px'}}>\n          The run group for this run could not be loaded.{' '}\n          <ButtonLink\n            color={Colors.Blue500}\n            underline=\"always\"\n            onClick={() => {\n              showCustomAlert({\n                title: 'Python error',\n                body: group.message,\n              });\n            }}\n          >\n            View error\n          </ButtonLink>\n        </div>\n      </Group>\n    );\n  }\n\n  if (group.runs?.length === 1) {\n    return null;\n  }\n\n  const unsorted: Run[] = [];\n  (group.runs || []).forEach((run: Run | null) => {\n    if (run && typeof run.startTime === 'number') {\n      unsorted.push(run);\n    }\n  });\n  const runs: Run[] = unsorted.sort((a: Run, b: Run) => {\n    return (a.startTime || 0) - (b.startTime || 0);\n  });\n\n  return (\n    <SidebarSection title={runs[0] ? `${runs[0].pipelineName} (${runs.length})` : ''}>\n      <>\n        {runs.map((g, idx) =>\n          g ? (\n            <RunGroupRun\n              key={g.runId}\n              to={`/instance/runs/${g.runId}`}\n              selected={g.runId === runId}\n            >\n              {idx < runs.length - 1 && <ThinLine style={{height: 36}} />}\n              <Box padding={{top: 4}}>\n                <RunStatusIndicator status={g.status} />\n              </Box>\n              <div\n                style={{\n                  flex: 1,\n                  marginLeft: 5,\n                  minWidth: 0,\n                  color: Colors.Gray700,\n                }}\n              >\n                <div style={{display: 'flex', justifyContent: 'space-between'}}>\n                  <RunTitle>\n                    {g.runId.split('-')[0]}\n                    {idx === 0 && RootTag}\n                  </RunTitle>\n                  <RunTime run={g} />\n                </div>\n                <div\n                  style={{\n                    display: 'flex',\n                    color: Colors.Gray700,\n                    justifyContent: 'space-between',\n                  }}\n                >\n                  {subsetTitleForRun(g)}\n                  <RunStateSummary run={g} />\n                </div>\n              </div>\n            </RunGroupRun>\n          ) : null,\n        )}\n      </>\n    </SidebarSection>\n  );\n};\n\nconst RUN_GROUP_PANEL_QUERY = gql`\n  query RunGroupPanelQuery($runId: ID!) {\n    runGroupOrError(runId: $runId) {\n      __typename\n      ...PythonErrorFragment\n      ... on RunGroup {\n        rootRunId\n        runs {\n          id\n          runId\n          parentRunId\n          status\n          stepKeysToExecute\n          pipelineName\n          tags {\n            key\n            value\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n  }\n  ${RUN_TIME_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nconst RunGroupRun = styled(Link)<{selected: boolean}>`\n  align-items: flex-start;\n  background: ${({selected}) => (selected ? Colors.Gray100 : Colors.White)};\n  padding: 4px 6px 4px 24px;\n  font-family: ${FontFamily.monospace};\n  font-size: 14px;\n  line-height: 20px;\n  display: flex;\n  position: relative;\n  &:hover {\n    text-decoration: none;\n    background: ${({selected}) => (selected ? Colors.Gray100 : Colors.Gray50)};\n  }\n`;\n\nconst ThinLine = styled.div`\n  position: absolute;\n  top: 20px;\n  width: 1px;\n  background: ${Colors.Gray200};\n  left: 29px;\n  z-index: 2;\n`;\n\nconst RunTitle = styled.span`\n  color: ${Colors.Dark};\n  font-weight: 500;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  user-select: text;\n  flex: 1;\n`;\n\nconst RootTag = (\n  <span\n    style={{\n      borderRadius: 2,\n      fontSize: 12,\n      lineHeight: '14px',\n      background: Colors.Gray300,\n      color: Colors.White,\n      padding: '0 4px',\n      fontWeight: 400,\n      userSelect: 'none',\n      marginLeft: 12,\n    }}\n  >\n    ROOT\n  </span>\n);\n","import {Colors, Spinner, Tooltip} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {formatElapsedTime} from '../app/Util';\nimport {SidebarSection} from '../pipelines/SidebarComponents';\nimport {IRunMetadataDict, IStepState} from '../runs/RunMetadataProvider';\nimport {StepSelection} from '../runs/StepSelection';\n\nimport {GanttChartMode} from './Constants';\nimport {boxStyleFor} from './GanttChartLayout';\nimport {RunGroupPanel} from './RunGroupPanel';\n\ninterface GanttStatusPanelProps {\n  metadata: IRunMetadataDict;\n  selection: StepSelection;\n  runId: string;\n  nowMs: number;\n\n  onClickStep?: (step: string, evt: React.MouseEvent<any>) => void;\n  onHighlightStep?: (step: string | null) => void;\n  onDoubleClickStep?: (step: string) => void;\n}\n\nexport const GanttStatusPanel: React.FC<GanttStatusPanelProps> = ({\n  runId,\n  nowMs,\n  metadata,\n  selection,\n  onClickStep,\n  onDoubleClickStep,\n  onHighlightStep,\n}) => {\n  const {preparing, executing, errored, succeeded} = React.useMemo(() => {\n    const keys = Object.keys(metadata.steps);\n    const preparing = [];\n    const executing = [];\n    const errored = [];\n    const succeeded = [];\n    for (const key of keys) {\n      const state = metadata.steps[key].state;\n      switch (state) {\n        case IStepState.PREPARING:\n          preparing.push(key);\n          break;\n        case IStepState.RUNNING:\n        case IStepState.UNKNOWN:\n          executing.push(key);\n          break;\n        case IStepState.FAILED:\n          errored.push(key);\n          break;\n        case IStepState.SUCCEEDED:\n          succeeded.push(key);\n      }\n    }\n    return {preparing, executing, errored, succeeded};\n  }, [metadata]);\n\n  const renderStepItem = (stepName: string) => (\n    <StepItem\n      nowMs={nowMs}\n      name={stepName}\n      key={stepName}\n      metadata={metadata}\n      selected={selection.keys.includes(stepName)}\n      onClick={onClickStep}\n      onDoubleClick={onDoubleClickStep}\n      onHover={onHighlightStep}\n    />\n  );\n\n  const isFinished = metadata?.exitedAt && metadata.exitedAt > 0;\n\n  return (\n    <div style={{overflowY: 'auto'}}>\n      <RunGroupPanel\n        runId={runId}\n        runStatusLastChangedAt={\n          metadata.exitedAt || metadata.startedProcessAt || metadata.startedPipelineAt || 0\n        }\n      />\n      <SidebarSection title={`${isFinished ? 'Not executed' : 'Preparing'} (${preparing.length})`}>\n        <div>\n          {preparing.length === 0 ? (\n            <EmptyNotice>No steps are waiting to execute</EmptyNotice>\n          ) : (\n            preparing.map(renderStepItem)\n          )}\n        </div>\n      </SidebarSection>\n      <SidebarSection title={`Executing (${executing.length})`}>\n        <div>\n          {executing.length === 0 ? (\n            <EmptyNotice>No steps are executing</EmptyNotice>\n          ) : (\n            executing.map(renderStepItem)\n          )}\n        </div>\n      </SidebarSection>\n      <SidebarSection title={`Errored (${errored.length})`}>\n        <div>\n          {errored.length === 0 ? (\n            <EmptyNotice>No steps have errored</EmptyNotice>\n          ) : (\n            errored.map(renderStepItem)\n          )}\n        </div>\n      </SidebarSection>\n      <SidebarSection collapsedByDefault title={`Succeeded (${succeeded.length})`}>\n        <div>\n          {succeeded.length === 0 ? (\n            <EmptyNotice>No steps have succeeded</EmptyNotice>\n          ) : (\n            succeeded.map(renderStepItem)\n          )}\n        </div>\n      </SidebarSection>\n    </div>\n  );\n};\n\nconst StepItem: React.FC<{\n  name: string;\n  selected: boolean;\n  metadata: IRunMetadataDict;\n  nowMs: number;\n  onClick?: (step: string, evt: React.MouseEvent<any>) => void;\n  onHover?: (name: string | null) => void;\n  onDoubleClick?: (name: string) => void;\n}> = ({nowMs, name, selected, metadata, onClick, onHover, onDoubleClick}) => {\n  const step = metadata.steps[name];\n  const end = step.end ?? nowMs;\n  return (\n    <StepItemContainer\n      key={name}\n      selected={selected}\n      onClick={(evt: React.MouseEvent<any>) => onClick?.(name, evt)}\n      onDoubleClick={() => onDoubleClick?.(name)}\n      onMouseEnter={() => onHover?.(name)}\n      onMouseLeave={() => onHover?.(null)}\n    >\n      {step.state === IStepState.RUNNING ? (\n        <Spinner purpose=\"body-text\" />\n      ) : step.state === IStepState.UNKNOWN ? (\n        <Tooltip\n          // Modifiers are to prevent flickering: https://github.com/palantir/blueprint/issues/4019\n          modifiers={{\n            preventOverflow: {enabled: false},\n            flip: {enabled: false},\n          }}\n          position=\"bottom\"\n          content=\"Unknown step state. Run completed without step execution completion.\"\n        >\n          <StepStatusDot>?</StepStatusDot>\n        </Tooltip>\n      ) : (\n        <StepStatusDot\n          style={{\n            ...boxStyleFor(metadata.steps[name]?.state, {\n              metadata,\n              options: {mode: GanttChartMode.WATERFALL_TIMED},\n            }),\n          }}\n        />\n      )}\n      <StepLabel>{name}</StepLabel>\n      {step.start && <Elapsed>{formatElapsedTime(end - step.start)}</Elapsed>}\n    </StepItemContainer>\n  );\n};\n\nconst StepLabel = styled.div`\n  overflow: hidden;\n  text-overflow: ellipsis;\n  flex: 1;\n`;\n\nconst StepItemContainer = styled.div<{selected: boolean}>`\n  display: flex;\n  line-height: 32px;\n  height: 32px;\n  padding: 0 14px 0 6px;\n  gap: 6px;\n  align-items: center;\n  border-bottom: 1px solid ${Colors.KeylineGray};\n  font-size: 12px;\n  ${({selected}) => selected && `background: ${Colors.Gray100};`}\n\n  &:hover {\n    background: ${Colors.Gray100};\n  }\n`;\n\nexport const StepStatusDot = styled.div`\n  width: 12px;\n  height: 12px;\n  flex-shrink: 0;\n  border-radius: 50%;\n  text-align: center;\n  line-height: 12px;\n`;\n\nconst Elapsed = styled.div`\n  color: ${Colors.Gray400};\n  font-variant-numeric: tabular-nums;\n`;\n\nconst EmptyNotice = styled.div`\n  height: 32px;\n  font-size: 12px;\n  padding: 8px 24px;\n  color: ${Colors.Gray400};\n`;\n","import {Colors, CursorControlsContainer} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\nexport const OptionsContainer = styled.div`\n  min-height: 56px;\n  display: flex;\n  align-items: center;\n  padding: 5px 12px 5px 24px;\n  border-bottom: 1px solid ${Colors.KeylineGray};\n  background: ${Colors.White};\n  flex-shrink: 0;\n  flex-wrap: wrap;\n  z-index: 3;\n\n  ${CursorControlsContainer} {\n    margin-top: 0;\n    gap: 8px;\n\n    @media (max-width: 1100px) {\n      & .hideable-button-text {\n        display: none;\n      }\n      & div[role='img'] {\n        margin: 0;\n      }\n    }\n  }\n`;\n\nexport const OptionsDivider = styled.div`\n  width: 30px;\n  height: 25px;\n`;\n\nexport const OptionsSpacer = styled.div`\n  width: 30px;\n`;\n","import {gql} from '@apollo/client';\n\nimport {GraphQueryItem} from '../app/GraphQueryImpl';\nimport {IStepMetadata, IStepState} from '../runs/RunMetadataProvider';\nimport {StepKind} from '../types/globalTypes';\n\nimport {invocationsOfPlannedDynamicStep, replacePlannedIndex} from './DynamicStepSupport';\nimport {ExecutionPlanToGraphFragment} from './types/ExecutionPlanToGraphFragment';\n\n/**\n * Converts a Run execution plan into a tree of `GraphQueryItem` items that\n * can be used as the input to the \"solid query\" filtering algorithm or rendered\n * into the Gannt visualization or the SVG DAG visualization. The idea\n * is that this data structure is generic, but it's really a fake solid tree.\n *\n * Pass runtimeStepKeys to duplicate dynamic step sub-trees for each occurrence of\n * the step key found at runtime.\n */\n\nexport const toGraphQueryItems = (\n  plan: ExecutionPlanToGraphFragment,\n  runtimeStepMetadata: {[key: string]: IStepMetadata},\n) => {\n  // Step 1: Find unresolved steps in the initial plan and build a mapping\n  // of their unresolved names to their resolved step keys, eg:\n  // \"multiply_input[*]\" => [\"multiply_input[1]\", \"multiply_input[2]\"]\n  const keyExpansionMap: {[key: string]: string[]} = {};\n  const runtimeStepKeys = Object.keys(runtimeStepMetadata);\n\n  for (const step of plan.steps) {\n    if (step.kind === StepKind.UNRESOLVED_MAPPED) {\n      const keys = invocationsOfPlannedDynamicStep(step.key, runtimeStepKeys);\n\n      // If the upstream steps have NOT succeeded, it's expected that there are zero runtime step keys\n      // matching the dynamic step. Until upstream steps run, we should show the [*] placeholder item\n      // in the runtime graph (rather than just showing nothing.)\n      const invocationsHappened = step.inputs.every((i) =>\n        i.dependsOn.every((s) => IStepState.SUCCEEDED === runtimeStepMetadata[s.key]?.state),\n      );\n      if (!invocationsHappened && keys.length === 0) {\n        keyExpansionMap[step.key] = [step.key];\n        continue;\n      }\n      // The order matters here: add the planned dynamic step at the end, so when displaying the gantt\n      // chart, we can ignore planned dynamic step if any of its invocation exists (i.e. hide the\n      // unresolved node if any resolved node exists).\n      keyExpansionMap[step.key] = [...keys, step.key];\n    }\n  }\n\n  // Step 2: Create a graph node for each resolved step without any inputs or outputs.\n  const nodeTable: {[key: string]: GraphQueryItem} = {};\n  for (const step of plan.steps) {\n    const stepRuntimeKeys = keyExpansionMap[step.key] ? keyExpansionMap[step.key] : [step.key];\n    for (const key of stepRuntimeKeys) {\n      nodeTable[key] = {\n        name: key,\n        inputs: [],\n        outputs: [],\n      };\n    }\n  }\n\n  // Step 3: For each step in the original plan, visit each input and create inputs/outputs\n  // in our Gantt Node result set.\n  for (const step of plan.steps) {\n    const stepRuntimeKeys = keyExpansionMap[step.key] ? keyExpansionMap[step.key] : [step.key];\n    for (const key of stepRuntimeKeys) {\n      for (const input of step.inputs) {\n        // Add the input to our node in the result set\n        const nodeInput: GraphQueryItem['inputs'][0] = {dependsOn: []};\n        nodeTable[key].inputs.push(nodeInput);\n\n        // For each upstream step in the plan, map it to upstream nodes in the runtime graph\n        // and attach inputs / outputs to our result graph.\n        for (const upstream of input.dependsOn) {\n          let upstreamKeys = [];\n          if (step.kind === StepKind.UNRESOLVED_COLLECT) {\n            // If we are a collect, there may be N runtime keys fanning in to this input,\n            // fetch the keys if they exist or fall back to the sigle upstream step case.\n            upstreamKeys = keyExpansionMap[upstream.key] || [upstream.key];\n          } else {\n            // If the input was coming from an unresolved mapped step and WE are not a collector,\n            // assume our own dynamic key index applies to the upstream mapped step as well.\n            upstreamKeys = [\n              upstream.kind === StepKind.UNRESOLVED_MAPPED\n                ? replacePlannedIndex(upstream.key, key)\n                : upstream.key,\n            ];\n          }\n\n          for (const upstreamKey of upstreamKeys) {\n            if (!nodeTable[upstreamKey]) {\n              continue;\n            }\n            nodeInput.dependsOn.push({solid: {name: upstreamKey}});\n            let upstreamOutput: GraphQueryItem['outputs'][0] = nodeTable[upstreamKey].outputs[0];\n            if (!upstreamOutput) {\n              upstreamOutput = {dependedBy: []};\n              nodeTable[upstreamKey].outputs.push(upstreamOutput);\n            }\n            upstreamOutput.dependedBy.push({\n              solid: {name: key},\n            });\n          }\n        }\n      }\n    }\n  }\n\n  return Object.values(nodeTable);\n};\n\nexport const EXECUTION_PLAN_TO_GRAPH_FRAGMENT = gql`\n  fragment ExecutionPlanToGraphFragment on ExecutionPlan {\n    steps {\n      key\n      kind\n      inputs {\n        dependsOn {\n          key\n          kind\n        }\n      }\n    }\n  }\n`;\n","import animate from 'amator';\nimport * as React from 'react';\n\nimport {GanttViewport} from './Constants';\n\ntype ContainerRef = {\n  element: HTMLDivElement;\n  __sized: boolean;\n};\n\n/**\n * useViewport is a React hook that exposes a viewport (top/left/width/height)\n * representing the currently visible region of a scrolling contaienr <div>.\n * It uses a ResizeObserver and an onScroll handler to monitor the viewport of the\n * container. To use, spread the returned `containerProps` onto the container div.\n */\nexport const useViewport = (\n  options: {\n    initialOffset?: (el: HTMLElement) => {left: number; top: number};\n  } = {},\n) => {\n  const ref = React.useRef<ContainerRef>();\n  const [offset, setOffset] = React.useState<{left: number; top: number}>({\n    left: 0,\n    top: 0,\n  });\n  const [size, setSize] = React.useState<{width: number; height: number}>({\n    width: 0,\n    height: 0,\n  });\n\n  const {initialOffset} = options;\n\n  // Monitor the container for size changes (if possible, otherwise fall back)\n  // to capturing the initial size only. (Only old FF).\n  const measureRef = React.useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n\n    const onApplySize = (next: {width: number; height: number}) => {\n      setSize({width: next.width, height: next.height});\n      const container = ref.current;\n      if (container) {\n        const {element, __sized} = container;\n        if (!__sized && next.width !== 0 && initialOffset) {\n          const targetOffset = initialOffset(element);\n          element.scrollTop = targetOffset.top;\n          element.scrollLeft = targetOffset.left;\n          setOffset(targetOffset);\n          container.__sized = true;\n        }\n      }\n    };\n\n    const container = ref.current;\n    const {element} = container;\n\n    let resizeObserver: any;\n    if (element instanceof HTMLElement) {\n      if ('ResizeObserver' in window) {\n        resizeObserver = new window['ResizeObserver']((entries: any) => {\n          if (entries[0].target === element) {\n            onApplySize({width: element.clientWidth, height: element.clientHeight});\n          }\n        });\n        resizeObserver.observe(element);\n      } else {\n        console.warn(`No ResizeObserver support, or useViewport is attached to a non-DOM node?`);\n        onApplySize({width: element.clientWidth, height: element.clientHeight});\n      }\n    }\n    return () => {\n      resizeObserver?.disconnect();\n    };\n  }, [initialOffset]);\n\n  React.useEffect(measureRef, [measureRef]);\n\n  // Monitor the container for scroll offset changes\n  const animation = React.useRef<any>(null);\n\n  const onScroll = (e: React.UIEvent) => {\n    if (\n      Math.floor(offset.left) === e.currentTarget.scrollLeft &&\n      Math.floor(offset.top) === e.currentTarget.scrollTop\n    ) {\n      return;\n    }\n    if (animation.current) {\n      animation.current.cancel();\n    }\n    setOffset({\n      left: e.currentTarget.scrollLeft,\n      top: e.currentTarget.scrollTop,\n    });\n  };\n\n  const onMoveToViewport = (targetOffset: {left: number; top: number}, animated: boolean) => {\n    const element = ref.current?.element;\n\n    if (!element) {\n      return;\n    }\n\n    const width = element.clientWidth;\n    const height = element.clientHeight;\n\n    if (animation.current) {\n      animation.current.cancel();\n      animation.current = null;\n    }\n\n    targetOffset.left = Math.min(element.scrollWidth - width, Math.max(0, targetOffset.left));\n    targetOffset.top = Math.min(element.scrollHeight - height, Math.max(0, targetOffset.top));\n\n    const onDone = () => {\n      element.scrollTop = targetOffset.top;\n      element.scrollLeft = targetOffset.left;\n      setOffset(targetOffset);\n      animation.current = null;\n    };\n    if (animated) {\n      animation.current = animate(offset, targetOffset, {\n        step: (v: any) => {\n          element.scrollTop = v.top;\n          element.scrollLeft = v.left;\n          setOffset({left: v.left, top: v.top});\n        },\n        done: onDone,\n      });\n    } else {\n      onDone();\n    }\n  };\n\n  // There are scenarios where the exported `container ref` isn't attached to a component immediately\n  // (eg the parent is showing a loading state). This means it may be undefined during our initial render\n  // and we need to measure it when it's actually assigned a value.\n  const setRef = React.useCallback(\n    (el: HTMLDivElement) => {\n      if (el === ref.current?.element) {\n        return;\n      }\n\n      ref.current = {\n        element: el,\n        __sized: false,\n      };\n      measureRef();\n    },\n    [measureRef],\n  );\n\n  return {\n    viewport: {...offset, ...size} as GanttViewport,\n    containerProps: {\n      ref: setRef,\n      onScroll,\n    },\n    onMoveToViewport,\n  };\n};\n","import {Colors, FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {DEFAULT_RESULT_NAME, titleOfIO} from '../app/titleOfIO';\n\nimport {Edge, isHighlighted, position} from './common';\nimport {OpLayoutIO} from './layout';\nimport {\n  OpNodeDefinitionFragment,\n  OpNodeDefinitionFragment_SolidDefinition_inputDefinitions,\n  OpNodeDefinitionFragment_SolidDefinition_outputDefinitions,\n} from './types/OpNodeDefinitionFragment';\nimport {OpNodeInvocationFragment} from './types/OpNodeInvocationFragment';\n\nexport const PARENT_IN = 'PARENT_IN';\nexport const PARENT_OUT = 'PARENT_OUT';\n\ninterface OpIORenderMetadata {\n  edges: Edge[];\n  jumpTargetOp: string | null;\n  title: string;\n}\n\ninterface OpIOBoxProps extends OpIORenderMetadata {\n  colorKey: 'input' | 'output';\n  item:\n    | OpNodeDefinitionFragment_SolidDefinition_inputDefinitions\n    | OpNodeDefinitionFragment_SolidDefinition_outputDefinitions;\n  layoutInfo: OpLayoutIO | undefined;\n\n  // Passed through from Solid props\n  minified: boolean;\n  highlightedEdges: Edge[];\n  onDoubleClick: (opName: string) => void;\n  onHighlightEdges: (edges: Edge[]) => void;\n}\n\nexport const OpIOBox: React.FC<OpIOBoxProps> = ({\n  minified,\n  title,\n  jumpTargetOp,\n  edges,\n  highlightedEdges,\n  colorKey,\n  item,\n  layoutInfo,\n  onDoubleClick,\n  onHighlightEdges,\n}) => {\n  if (!layoutInfo) {\n    return null;\n  }\n  const {name, type} = item;\n  const highlighted = edges.some((e) => isHighlighted(highlightedEdges, e));\n\n  return (\n    <OpIOContainer\n      title={title}\n      style={{...position(layoutInfo.layout), width: 'initial'}}\n      onMouseEnter={() => onHighlightEdges(edges)}\n      onMouseLeave={() => onHighlightEdges([])}\n      onClick={(e) => {\n        jumpTargetOp && onDoubleClick(jumpTargetOp);\n        e.stopPropagation();\n      }}\n      onDoubleClick={(e) => e.stopPropagation()}\n      $colorKey={colorKey}\n      $highlighted={highlighted}\n    >\n      {minified || !layoutInfo.label ? (\n        <div className=\"circle\" />\n      ) : (\n        <>\n          <div className=\"circle\" />\n          {name !== DEFAULT_RESULT_NAME && <div className=\"label\">{name}</div>}\n          {type.displayName && <div className=\"type\">{type.displayName}</div>}\n        </>\n      )}\n      {layoutInfo.collapsed.length > 0 && (\n        <div className=\"collapsedCount\">+ {layoutInfo.collapsed.length}</div>\n      )}\n    </OpIOContainer>\n  );\n};\n\nconst OpIOContainer = styled.div<{$colorKey: string; $highlighted: boolean}>`\n  display: inline-flex;\n  align-items: center;\n  border-top-right-radius: 6px;\n  border-bottom-right-radius: 6px;\n  background: ${(p) => (p.$highlighted ? 'rgba(255, 255, 255, 1)' : 'rgba(255, 255, 255, 0.75)')};\n  font-size: 12px;\n\n  .circle {\n    width: 14px;\n    height: 14px;\n    border-radius: 50%;\n    background: ${(p) => (p.$highlighted ? Colors.Blue500 : Colors.Gray500)};\n    display: inline-block;\n    margin: 6px;\n  }\n  .label {\n    line-height: 26px;\n    font-family: ${FontFamily.monospace};\n    font-weight: 500;\n    height: 26px;\n    padding-left: 2px;\n    padding-right: 6px;\n  }\n  .type {\n    padding: 1px 6px;\n    background: #e7e6f0;\n    margin-right: 4px;\n    color: ${Colors.Blue500};\n    font-family: ${FontFamily.monospace};\n    font-weight: 700;\n    border-radius: 4px;\n  }\n  .collapsedCount {\n    color: ${(p) => (p.$highlighted ? Colors.Blue500 : Colors.Gray500)};\n    font-weight: 600;\n    margin-left: -3px;\n    padding-right: 4px;\n  }\n`;\n\nexport function metadataForCompositeParentIO(\n  parentDefinition: OpNodeDefinitionFragment,\n  item:\n    | OpNodeDefinitionFragment_SolidDefinition_inputDefinitions\n    | OpNodeDefinitionFragment_SolidDefinition_outputDefinitions,\n): OpIORenderMetadata {\n  const edges: Edge[] = [];\n  let title = `${item.name}: ${item.type.displayName}`;\n\n  if (parentDefinition.__typename !== 'CompositeSolidDefinition') {\n    throw new Error('Parent solid is not a composite - how did this happen?');\n  }\n\n  if (item.__typename === 'InputDefinition') {\n    const others = parentDefinition.inputMappings\n      .filter((i) => i.definition.name === item.name)\n      .map((i) => i.mappedInput);\n\n    title += `\\n\\nConnected to: ${others.map(titleOfIO).join('\\n')}`;\n    edges.push(\n      ...others.map((i) => ({\n        a: `${i.solid.name}:${i.definition.name}`,\n        b: PARENT_IN,\n      })),\n    );\n  }\n  if (item.__typename === 'OutputDefinition') {\n    const others = parentDefinition.outputMappings\n      .filter((i) => i.definition.name === item.name)\n      .map((i) => i.mappedOutput);\n\n    title += `\\n\\nConnected to: ${others.map(titleOfIO).join('\\n')}`;\n    edges.push(\n      ...others.map((i) => ({\n        a: `${i.solid.name}:${i.definition.name}`,\n        b: PARENT_OUT,\n      })),\n    );\n  }\n\n  return {\n    edges,\n    title,\n    jumpTargetOp: edges.length === 1 ? edges[0].a : null,\n  };\n}\n\nexport function metadataForIO(\n  item:\n    | OpNodeDefinitionFragment_SolidDefinition_inputDefinitions\n    | OpNodeDefinitionFragment_SolidDefinition_outputDefinitions,\n  invocation?: OpNodeInvocationFragment,\n): OpIORenderMetadata {\n  const edges: Edge[] = [];\n\n  let title = `${item.name}: ${item.type.displayName}`;\n  let jumpTargetOp: string | null = null;\n\n  if (invocation && item.__typename === 'InputDefinition') {\n    const others = invocation.inputs.find((i) => i.definition.name === item.name)!.dependsOn;\n    if (others.length) {\n      title += `\\n\\nFrom:\\n` + others.map(titleOfIO).join('\\n');\n      jumpTargetOp = others.length === 1 ? others[0].solid.name : null;\n      edges.push(...others.map((o) => ({a: o.solid.name, b: invocation.name})));\n    }\n    edges.push({a: `${invocation.name}:${item.name}`, b: PARENT_IN});\n  }\n  if (invocation && item.__typename === 'OutputDefinition') {\n    const output = invocation.outputs.find((i) => i.definition.name === item.name);\n    if (!output) {\n      throw new Error(\n        `Invocation ${invocation.name} has no output with a definition named \"${item.name}\"`,\n      );\n    }\n\n    const others = output.dependedBy;\n    if (others.length) {\n      title += '\\n\\nUsed By:\\n' + others.map((o) => titleOfIO(o)).join('\\n');\n      jumpTargetOp = others.length === 1 ? others[0].solid.name : null;\n      edges.push(...others.map((o) => ({a: o.solid.name, b: invocation.name})));\n    }\n    edges.push({a: `${invocation.name}:${item.name}`, b: PARENT_OUT});\n  }\n\n  return {edges, title, jumpTargetOp};\n}\n","import {gql} from '@apollo/client';\nimport {Colors, Icon, FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {withMiddleTruncation} from '../app/Util';\nimport {displayNameForAssetKey} from '../asset-graph/Utils';\nimport {AssetKey} from '../assets/types';\n\nimport {OpIOBox, metadataForIO} from './OpIOBox';\nimport {OpTags, IOpTag} from './OpTags';\nimport {OpLayout} from './asyncGraphLayout';\nimport {Edge, position} from './common';\nimport {OpNodeDefinitionFragment} from './types/OpNodeDefinitionFragment';\nimport {OpNodeInvocationFragment} from './types/OpNodeInvocationFragment';\n\ninterface IOpNodeProps {\n  layout: OpLayout;\n  invocation?: OpNodeInvocationFragment;\n  definition: OpNodeDefinitionFragment;\n  highlightedEdges: Edge[];\n  minified: boolean;\n  selected: boolean;\n  focused: boolean;\n  dim: boolean;\n  onClick: () => void;\n  onDoubleClick: () => void;\n  onEnterComposite: () => void;\n  onHighlightEdges: (edges: Edge[]) => void;\n}\n\nconst TOOLTIP_STYLE = JSON.stringify({\n  top: -20,\n  left: 5,\n});\n\nexport class OpNode extends React.Component<IOpNodeProps> {\n  shouldComponentUpdate(prevProps: IOpNodeProps) {\n    if (prevProps.dim !== this.props.dim) {\n      return true;\n    }\n    if (prevProps.selected !== this.props.selected) {\n      return true;\n    }\n    if (prevProps.focused !== this.props.focused) {\n      return true;\n    }\n    if (prevProps.minified !== this.props.minified) {\n      return true;\n    }\n    if (prevProps.highlightedEdges !== this.props.highlightedEdges) {\n      return true;\n    }\n    if (prevProps.layout !== this.props.layout) {\n      return true;\n    }\n    if (\n      (prevProps.invocation && prevProps.invocation.name) !==\n      (this.props.invocation && this.props.invocation.name)\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onClick();\n  };\n\n  handleDoubleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onDoubleClick();\n  };\n\n  handleEnterComposite = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onEnterComposite();\n  };\n\n  handleKindClicked = (e: React.MouseEvent) => {\n    this.handleClick(e);\n    window.requestAnimationFrame(() => document.dispatchEvent(new Event('show-kind-info')));\n  };\n\n  public render() {\n    const {definition, invocation, layout, dim, focused, selected, minified} = this.props;\n    const {metadata} = definition;\n    if (!layout) {\n      throw new Error(`Layout is missing for ${definition.name}`);\n    }\n\n    let configField = null;\n    if (definition.__typename === 'SolidDefinition') {\n      configField = definition.configField;\n    }\n\n    const tags: IOpTag[] = [];\n\n    const kind = metadata.find((m) => m.key === 'kind');\n    const composite = definition.__typename === 'CompositeSolidDefinition';\n\n    if (kind) {\n      tags.push({label: kind.value, onClick: this.handleKindClicked});\n    }\n    if (composite) {\n      tags.push({label: 'Expand', onClick: this.handleEnterComposite});\n    }\n\n    const label = invocation ? invocation.name : definition.name;\n\n    return (\n      <NodeContainer\n        $minified={minified}\n        $selected={selected}\n        $secondaryHighlight={focused}\n        $dim={dim}\n        onClick={this.handleClick}\n        onDoubleClick={this.handleDoubleClick}\n      >\n        <div className=\"highlight-box\" style={{...position(layout.bounds)}} />\n        {composite && <div className=\"composite-marker\" style={{...position(layout.op)}} />}\n\n        {invocation?.isDynamicMapped && (\n          <div className=\"dynamic-marker\" style={{...position(layout.op)}} />\n        )}\n\n        {configField && configField.configType.key !== 'Any' && (\n          <div\n            className=\"config-marker\"\n            style={{left: layout.op.x + layout.op.width, top: layout.op.y}}\n          >\n            {minified ? 'C' : 'Config'}\n          </div>\n        )}\n\n        {definition.inputDefinitions.map((item, idx) => (\n          <OpIOBox\n            {...this.props}\n            {...metadataForIO(item, invocation)}\n            key={idx}\n            item={item}\n            layoutInfo={layout.inputs[item.name]}\n            colorKey=\"input\"\n          />\n        ))}\n\n        {definition.outputDefinitions.map((item, idx) => (\n          <OpIOBox\n            {...this.props}\n            {...metadataForIO(item, invocation)}\n            key={idx}\n            item={item}\n            layoutInfo={layout.outputs[item.name]}\n            colorKey=\"output\"\n          />\n        ))}\n\n        <div className=\"node-box\" style={{...position(layout.op)}}>\n          <div className=\"name\">\n            {!minified && <Icon name=\"op\" size={16} />}\n            <div className=\"label\" data-tooltip={label} data-tooltip-style={TOOLTIP_STYLE}>\n              {withMiddleTruncation(label, {maxLength: 48})}\n            </div>\n          </div>\n          {!minified && (definition.description || definition.assetNodes.length === 0) && (\n            <div className=\"description\">{(definition.description || '').split('\\n')[0]}</div>\n          )}\n          {!minified && definition.assetNodes.length > 0 && (\n            <OpNodeAssociatedAssets nodes={definition.assetNodes} />\n          )}\n        </div>\n\n        {tags.length > 0 && (\n          <OpTags\n            style={{\n              left: layout.op.x + layout.op.width,\n              top: layout.op.y + layout.op.height,\n              transform: 'translate(-100%, 3px)',\n            }}\n            minified={minified}\n            tags={tags}\n          />\n        )}\n      </NodeContainer>\n    );\n  }\n}\n\nconst OpNodeAssociatedAssets: React.FC<{nodes: {assetKey: AssetKey}[]}> = ({nodes}) => {\n  const more = nodes.length > 1 ? ` + ${nodes.length - 1} more` : '';\n  return (\n    <div className=\"assets\">\n      <Icon name=\"asset\" size={16} />\n      {withMiddleTruncation(displayNameForAssetKey(nodes[0].assetKey), {\n        maxLength: 48 - more.length,\n      })}\n      {more}\n    </div>\n  );\n};\n\nexport const OP_NODE_INVOCATION_FRAGMENT = gql`\n  fragment OpNodeInvocationFragment on Solid {\n    name\n    isDynamicMapped\n    inputs {\n      definition {\n        name\n      }\n      isDynamicCollect\n      dependsOn {\n        definition {\n          name\n          type {\n            displayName\n          }\n        }\n        solid {\n          name\n        }\n      }\n    }\n    outputs {\n      definition {\n        name\n      }\n      dependedBy {\n        solid {\n          name\n        }\n        definition {\n          name\n          type {\n            displayName\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const OP_NODE_DEFINITION_FRAGMENT = gql`\n  fragment OpNodeDefinitionFragment on ISolidDefinition {\n    __typename\n    name\n    description\n    metadata {\n      key\n      value\n    }\n    assetNodes {\n      id\n      assetKey {\n        path\n      }\n    }\n    inputDefinitions {\n      name\n      type {\n        displayName\n      }\n    }\n    outputDefinitions {\n      name\n      isDynamic\n      type {\n        displayName\n      }\n    }\n    ... on SolidDefinition {\n      configField {\n        configType {\n          key\n          description\n        }\n      }\n    }\n    ... on CompositeSolidDefinition {\n      id\n      inputMappings {\n        definition {\n          name\n        }\n        mappedInput {\n          definition {\n            name\n          }\n          solid {\n            name\n          }\n        }\n      }\n      outputMappings {\n        definition {\n          name\n        }\n        mappedOutput {\n          definition {\n            name\n          }\n          solid {\n            name\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const NodeHighlightColors = {\n  Border: Colors.Blue500,\n  Background: Colors.Blue50,\n};\n\nconst NodeContainer = styled.div<{\n  $minified: boolean;\n  $selected: boolean;\n  $secondaryHighlight: boolean;\n  $dim: boolean;\n}>`\n  opacity: ${({$dim}) => ($dim ? 0.3 : 1)};\n  pointer-events: auto;\n\n  .highlight-box {\n    border-radius: 6px;\n    background: ${(p) => (p.$selected ? NodeHighlightColors.Background : 'transparent')};\n  }\n  .node-box {\n    border: ${(p) =>\n      p.$selected\n        ? `2px dashed ${NodeHighlightColors.Border}`\n        : p.$secondaryHighlight\n        ? `2px solid ${Colors.Blue500}55`\n        : '2px solid #dcd5ca'};\n\n    border-width: ${(p) => (p.$minified ? '3px' : '2px')};\n    border-radius: 5px;\n    background: ${(p) => (p.$minified ? Colors.Gray50 : Colors.White)};\n  }\n  .composite-marker {\n    outline: ${(p) => (p.$minified ? '3px' : '2px')} solid\n      ${(p) => (p.$selected ? 'transparent' : Colors.Yellow200)};\n    outline-offset: ${(p) => (p.$minified ? '5px' : '3px')};\n    border-radius: 3px;\n  }\n  .dynamic-marker {\n    transform: translate(-5px, -5px);\n    border: ${(p) => (p.$minified ? '3px' : '2px')} solid #dcd5ca;\n    border-radius: 3px;\n  }\n  .config-marker {\n    position: absolute;\n    transform: ${(p) => (p.$minified ? ' translate(-100%, -28px)' : ' translate(-100%, -21px)')};\n    font-size: ${(p) => (p.$minified ? '24px' : '12px')};\n    font-family: ${FontFamily.monospace};\n    font-weight: 700;\n    opacity: 0.5;\n  }\n  .name {\n    display: flex;\n    gap: 5px;\n    padding: 4px ${(p) => (p.$minified ? '8px' : '3px')};\n    font-size: ${(p) => (p.$minified ? '32px' : '14px')};\n    font-family: ${FontFamily.monospace};\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    align-items: center;\n    font-weight: 600;\n    .label {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n  .assets {\n    padding: 0 4px;\n    white-space: nowrap;\n    line-height: 22px;\n    height: 22px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    background: #f5f3ef;\n    font-size: 12px;\n    display: flex;\n    gap: 4px;\n    align-items: center;\n  }\n  .description {\n    padding: 0 8px;\n    white-space: nowrap;\n    line-height: 22px;\n    height: 22px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    background: #f5f3ef;\n    border-top: 1px solid #e6e1d8;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    font-size: 12px;\n  }\n`;\n","import {Colors, FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nexport interface IOpTag {\n  label: string;\n  onClick: (e: React.MouseEvent) => void;\n}\n\ninterface IOpTagsProps {\n  style: React.CSSProperties;\n  minified: boolean;\n  tags: IOpTag[];\n}\n\nfunction hueForTag(text = '') {\n  if (text === 'ipynb') {\n    return 25;\n  }\n  if (text === 'dbt') {\n    return 250;\n  }\n  if (text === 'snowflake') {\n    return 197;\n  }\n  if (text === 'pyspark' || text === 'spark') {\n    return 30;\n  }\n  if (text === 'Expand') {\n    return 40;\n  }\n  return (\n    text\n      .split('')\n      .map((c) => c.charCodeAt(0))\n      .reduce((n, a) => n + a) % 360\n  );\n}\n\nexport const OpTags = React.memo(({tags, style, minified}: IOpTagsProps) => {\n  return (\n    <OpTagsContainer style={style} $minified={minified}>\n      {tags.map((tag) => (\n        <div\n          key={tag.label}\n          style={{background: `hsl(${hueForTag(tag.label)}, 75%, 50%)`}}\n          onClick={tag.onClick}\n        >\n          {tag.label}\n        </div>\n      ))}\n    </OpTagsContainer>\n  );\n});\n\nconst OpTagsContainer = styled.div<{$minified: boolean}>`\n  gap: 6px;\n  position: absolute;\n  display: flex;\n\n  & > div {\n    padding: 0 ${(p) => (p.$minified ? 10 : 5)}px;\n    line-height: ${(p) => (p.$minified ? 32 : 20)}px;\n    color: ${Colors.White};\n    font-family: ${FontFamily.monospace};\n    font-size: ${(p) => (p.$minified ? 24 : 14)}px;\n    font-weight: 700;\n    border-radius: 3px;\n  }\n`;\n","const USED_ATTRIBUTES = [\n  '-moz-osx-font-smoothing',\n  'align-items',\n  'align-self',\n  'animation',\n  'background',\n  'border',\n  'box-shadow',\n  'box-sizing',\n  'color',\n  'column-gap',\n  'display',\n  'flex',\n  'font',\n  'fill',\n  'gap',\n  'height',\n  'justify-content',\n  'left',\n  'letter-spacing',\n  'line-height',\n  'margin',\n  'mask-image',\n  '-webkit-mask-image',\n  'mask-size',\n  '-webkit-mask-size',\n  'min-height',\n  'min-width',\n  'object-fit',\n  'opacity',\n  'overflow',\n  'padding',\n  'position',\n  'row-gap',\n  'stroke',\n  'text-align',\n  'text-decoration',\n  'text-overflow',\n  'text-transform',\n  'top',\n  'transform',\n  'white-space',\n  'width',\n];\n\nconst attributeURLToBase64Map: {[attrURL: string]: string} = {};\n\nasync function makeAttributeValuePortable(attrValue: string) {\n  // If the attribute value references a url(http:...), fetch it and convert\n  // it to an inline base64 data url. (This replaces our dependency on icon SVGs)\n  if (attrValue.startsWith('url(')) {\n    const match = attrValue.match(/url\\(['\"]?(http[^'\"]+)['\"]?\\)/);\n    if (match) {\n      const url = match[1];\n      if (!attributeURLToBase64Map[url]) {\n        const data = await fetch(url);\n        attributeURLToBase64Map[url] = btoa(await data.text());\n      }\n      attrValue = attrValue.replace(\n        url,\n        `data:image/svg+xml;base64,${attributeURLToBase64Map[url]}`,\n      );\n    }\n  }\n  return attrValue;\n}\n\nexport async function makeSVGPortable(svg: SVGElement) {\n  // iterate over the entire object tree in the CSV and apply all computed styles as inline styles\n  // to remove the dependency on outside stylesheets\n  const nodeIterator = document.createNodeIterator(svg, NodeFilter.SHOW_ELEMENT);\n  const baseStyles = window.getComputedStyle(svg);\n  let node: Node | null = null;\n\n  while ((node = nodeIterator.nextNode())) {\n    if (!(node instanceof SVGElement || node instanceof HTMLElement)) {\n      continue;\n    }\n    const nodeStyles = window.getComputedStyle(node);\n    for (const idx of Object.keys(nodeStyles)) {\n      const attrName: string = nodeStyles[idx];\n      if (!USED_ATTRIBUTES.some((prefix) => attrName.startsWith(prefix))) {\n        continue;\n      }\n      if (!node.style[attrName] && nodeStyles[attrName] !== baseStyles[attrName]) {\n        node.style[attrName] = await makeAttributeValuePortable(nodeStyles[attrName]);\n      }\n      if (node instanceof HTMLElement) {\n        node.style.boxSizing = 'border-box';\n      }\n    }\n  }\n\n  // Apply styles inherited from the surrounding document to the base SVG element. This\n  // sets things like the line-height, font smoothing, etc.\n  for (const idx of Object.keys(baseStyles)) {\n    const attrName: string = baseStyles[idx];\n    if (!USED_ATTRIBUTES.some((prefix) => attrName.startsWith(prefix))) {\n      continue;\n    }\n    if (!svg.style[attrName]) {\n      svg.style[attrName] = baseStyles[attrName];\n    }\n  }\n\n  // Remove references to CSS classes (no longer needed)\n  const removeClassesIterator = document.createNodeIterator(svg, NodeFilter.SHOW_ELEMENT);\n  while ((node = removeClassesIterator.nextNode())) {\n    if (node instanceof SVGElement || node instanceof HTMLElement) {\n      node.removeAttribute('class');\n    }\n  }\n\n  // Find all the stylesheets on the page and embed the font-face declarations into\n  // the SVG document.\n  const fontFaces = Array.from(document.querySelectorAll('style'))\n    .flatMap((style) => (style.textContent || '').match(/@font-face ?{[^\\}]*}/gim))\n    .filter(Boolean);\n  const styleEl = document.createElement('style');\n  styleEl.textContent = fontFaces.join('\\n\\n');\n  svg.appendChild(styleEl);\n}\n","import {Box, Colors, Icon, IconWrapper, Slider} from '@dagster-io/ui';\nimport animate from 'amator';\nimport * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport {MemoryRouter} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {IBounds} from './common';\nimport {makeSVGPortable} from './makeSVGPortable';\n\nexport interface SVGViewportInteractor {\n  onMouseDown(viewport: SVGViewport, event: React.MouseEvent<HTMLDivElement>): void;\n  onWheel(viewport: SVGViewport, event: WheelEvent): void;\n  render?(viewport: SVGViewport): React.ReactElement<any> | null;\n}\n\ninterface SVGViewportProps {\n  graphWidth: number;\n  graphHeight: number;\n  interactor: SVGViewportInteractor;\n  maxZoom: number;\n  maxAutocenterZoom: number;\n  onClick?: (event: React.MouseEvent<HTMLDivElement>) => void;\n  onDoubleClick?: (event: React.MouseEvent<HTMLDivElement>) => void;\n  onArrowKeyDown?: (\n    event: React.KeyboardEvent<HTMLDivElement>,\n    dir: 'left' | 'up' | 'right' | 'down',\n  ) => void;\n  children: (\n    state: SVGViewportState,\n    bounds: {top: number; left: number; bottom: number; right: number},\n  ) => React.ReactNode;\n}\n\ninterface SVGViewportState {\n  x: number;\n  y: number;\n  scale: number;\n  minScale: number;\n}\n\ninterface Point {\n  x: number;\n  y: number;\n}\n\nexport const DETAIL_ZOOM = 0.75;\nconst DEFAULT_ZOOM = 0.75;\nconst DEFAULT_MAX_AUTOCENTER_ZOOM = 1;\n\nconst MIN_AUTOCENTER_ZOOM = 0.17;\nconst MIN_ZOOM = 0.17;\nconst BUTTON_INCREMENT = 0.05;\n\nconst PanAndZoomInteractor: SVGViewportInteractor = {\n  onMouseDown(viewport: SVGViewport, event: React.MouseEvent<HTMLDivElement>) {\n    if (viewport._animation) {\n      viewport._animation.cancel();\n    }\n\n    if (!viewport.element.current) {\n      return;\n    }\n\n    if (event.target instanceof HTMLElement && event.target.closest('#zoom-slider-container')) {\n      return;\n    }\n\n    const start = viewport.getOffsetXY(event);\n    if (!start) {\n      return;\n    }\n\n    let lastX: number = start.x;\n    let lastY: number = start.y;\n\n    const onMove = (e: MouseEvent) => {\n      const offset = viewport.getOffsetXY(e);\n      if (!offset) {\n        return;\n      }\n\n      const delta = {x: offset.x - lastX, y: offset.y - lastY};\n      viewport.setState({\n        x: viewport.state.x + delta.x,\n        y: viewport.state.y + delta.y,\n      });\n      lastX = offset.x;\n      lastY = offset.y;\n    };\n\n    const onUp = () => {\n      document.removeEventListener('mousemove', onMove);\n      document.removeEventListener('mouseup', onUp);\n    };\n    document.addEventListener('mousemove', onMove);\n    document.addEventListener('mouseup', onUp);\n    event.stopPropagation();\n  },\n\n  onWheel(viewport: SVGViewport, event: WheelEvent) {\n    const cursorPosition = viewport.getOffsetXY(event);\n    if (!cursorPosition) {\n      return;\n    }\n\n    if (event.altKey || event.shiftKey) {\n      viewport.shiftXY(-event.deltaX, -event.deltaY);\n    } else {\n      const targetScale = viewport.state.scale * (1 - event.deltaY * 0.0025);\n      const scale = Math.max(MIN_ZOOM, Math.min(viewport.getMaxZoom(), targetScale));\n      viewport.adjustZoomRelativeToScreenPoint(scale, cursorPosition);\n    }\n  },\n\n  render(viewport: SVGViewport) {\n    return (\n      <ZoomSliderContainer id=\"zoom-slider-container\">\n        <Box margin={{bottom: 8}}>\n          <IconButton\n            onClick={() => {\n              const x = viewport.element.current!.clientWidth / 2;\n              const y = viewport.element.current!.clientHeight / 2;\n              const scale = Math.min(\n                viewport.getMaxZoom(),\n                viewport.state.scale + BUTTON_INCREMENT,\n              );\n              const adjusted = Math.round((scale + Number.EPSILON) * 100) / 100;\n              viewport.adjustZoomRelativeToScreenPoint(adjusted, {x, y});\n            }}\n          >\n            <Icon size={24} name=\"zoom_in\" color={Colors.Gray300} />\n          </IconButton>\n        </Box>\n        <Slider\n          vertical\n          min={MIN_ZOOM}\n          max={viewport.getMaxZoom()}\n          stepSize={0.001}\n          value={viewport.state.scale}\n          labelRenderer={false}\n          onChange={(scale: number) => {\n            const x = viewport.element.current!.clientWidth / 2;\n            const y = viewport.element.current!.clientHeight / 2;\n            viewport.adjustZoomRelativeToScreenPoint(scale, {x, y});\n          }}\n        />\n        <Box margin={{top: 8}}>\n          <IconButton\n            onClick={() => {\n              const x = viewport.element.current!.clientWidth / 2;\n              const y = viewport.element.current!.clientHeight / 2;\n              const scale = Math.max(MIN_ZOOM, viewport.state.scale - BUTTON_INCREMENT);\n              viewport.adjustZoomRelativeToScreenPoint(scale, {x, y});\n            }}\n          >\n            <Icon size={24} name=\"zoom_out\" color={Colors.Gray300} />\n          </IconButton>\n        </Box>\n        <Box margin={{top: 8}}>\n          <IconButton\n            onClick={() => {\n              viewport.onExportToSVG();\n            }}\n          >\n            <Icon size={24} name=\"download_for_offline\" color={Colors.Gray300} />\n          </IconButton>\n        </Box>\n      </ZoomSliderContainer>\n    );\n  },\n};\n\nconst IconButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  position: relative;\n  left: -4px;\n\n  :focus {\n    outline: none;\n  }\n\n  ${IconWrapper} {\n    transition: background 100ms;\n  }\n\n  :focus ${IconWrapper}, :hover ${IconWrapper}, :active ${IconWrapper} {\n    background-color: ${Colors.Blue500};\n  }\n`;\n\nconst NoneInteractor: SVGViewportInteractor = {\n  onMouseDown(_viewport: SVGViewport, event: React.MouseEvent<HTMLDivElement>) {\n    event.preventDefault();\n    event.stopPropagation();\n  },\n\n  onWheel() {\n    return;\n  },\n\n  render() {\n    return <span />;\n  },\n};\n\nexport class SVGViewport extends React.Component<SVGViewportProps, SVGViewportState> {\n  static Interactors = {\n    PanAndZoom: PanAndZoomInteractor,\n    None: NoneInteractor,\n  };\n\n  static defaultProps = {\n    maxZoom: DEFAULT_ZOOM,\n    maxAutocenterZoom: DEFAULT_MAX_AUTOCENTER_ZOOM,\n  };\n\n  element: React.RefObject<HTMLDivElement> = React.createRef();\n  panzoom: any;\n\n  _animation: any = null;\n  _lastWheelTime = 0;\n  _lastWheelDir = 0;\n\n  state = {\n    x: 0,\n    y: 0,\n    scale: DETAIL_ZOOM,\n    minScale: 0,\n  };\n\n  resizeObserver: any | undefined;\n\n  componentDidMount() {\n    this.autocenter();\n\n    // The wheel event cannot be prevented via the `onWheel` handler.\n    document.addEventListener('wheel', this.onWheel, {passive: false});\n\n    // The op/asset graphs clip rendered nodes to the visible region, so changes to the\n    // size of the viewport need to cause re-renders. Otherwise you expand the window\n    // and see nothing in the newly visible areas.\n    if (\n      this.element.current &&\n      this.element.current instanceof HTMLElement &&\n      'ResizeObserver' in window\n    ) {\n      const RO = window['ResizeObserver'] as any;\n      this.resizeObserver = new RO(() => {\n        window.requestAnimationFrame(() => {\n          this.forceUpdate();\n        });\n      });\n      this.resizeObserver.observe(this.element.current);\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('wheel', this.onWheel);\n    this.resizeObserver?.disconnect();\n  }\n\n  onWheel = (e: WheelEvent) => {\n    const container = this.element.current;\n    // If the wheel event occurs within our SVG container, prevent it from zooming\n    // the document, and handle it with the interactor.\n    if (container && e.target instanceof Node && container.contains(e.target)) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.props.interactor.onWheel(this, e);\n    }\n  };\n\n  cancelAnimations() {\n    if (this._animation) {\n      this._animation.cancel();\n    }\n  }\n\n  focus() {\n    this.element.current?.focus();\n  }\n\n  autocenter(animate = false, scale?: number) {\n    const el = this.element.current!;\n    const ownerRect = {width: el.clientWidth, height: el.clientHeight};\n\n    const dw = ownerRect.width / this.props.graphWidth;\n    const dh = ownerRect.height / this.props.graphHeight;\n    const desiredScale = Math.min(dw, dh);\n    const boundedScale =\n      scale || Math.max(Math.min(desiredScale, this.props.maxAutocenterZoom), MIN_AUTOCENTER_ZOOM);\n\n    if (\n      this.state.scale < boundedScale &&\n      desiredScale !== boundedScale &&\n      boundedScale === MIN_AUTOCENTER_ZOOM\n    ) {\n      // If the user is zoomed out past where they're going to land, AND where they're going to land\n      // is not a view of the entire DAG but instead a view of some zoomed section, autocentering is\n      // undesirable and should do nothing.\n      return;\n    }\n    const target = {\n      x: -(this.props.graphWidth / 2) * boundedScale + ownerRect.width / 2,\n      y: -(this.props.graphHeight / 2) * boundedScale + ownerRect.height / 2,\n      scale: boundedScale,\n    };\n\n    if (animate) {\n      this.smoothZoom(target);\n    } else {\n      this.setState(Object.assign(target, {minScale: boundedScale}));\n    }\n  }\n\n  screenToSVGCoords({x, y}: Point): Point {\n    const el = this.element.current!;\n    const {width, height} = el.getBoundingClientRect();\n    return {\n      x: (-(this.state.x - width / 2) + x - width / 2) / this.state.scale,\n      y: (-(this.state.y - height / 2) + y - height / 2) / this.state.scale,\n    };\n  }\n\n  getOffsetXY(e: MouseEvent | React.MouseEvent): Point | null {\n    const el = this.element.current;\n    if (!el) {\n      return null;\n    }\n    const ownerRect = el.getBoundingClientRect();\n    return {x: e.clientX - ownerRect.left, y: e.clientY - ownerRect.top};\n  }\n\n  public shiftXY(dx: number, dy: number) {\n    const {x, y, scale} = this.state;\n    this.setState({x: x + dx, y: y + dy, scale});\n  }\n\n  public adjustZoomRelativeToScreenPoint(nextScale: number, point: Point) {\n    const centerSVGCoord = this.screenToSVGCoords(point);\n    const {scale} = this.state;\n    let {x, y} = this.state;\n    x = x + (centerSVGCoord.x * scale - centerSVGCoord.x * nextScale);\n    y = y + (centerSVGCoord.y * scale - centerSVGCoord.y * nextScale);\n    this.setState({x, y, scale: nextScale});\n  }\n\n  public zoomToSVGBox(box: IBounds, animate: boolean, newScale = this.state.scale) {\n    this.zoomToSVGCoords(box.x + box.width / 2, box.y + box.height / 2, animate, newScale);\n  }\n\n  public zoomToSVGCoords(x: number, y: number, animate: boolean, scale = this.state.scale) {\n    const el = this.element.current!;\n    const ownerRect = el.getBoundingClientRect();\n    x = -x * scale + ownerRect.width / 2;\n    y = -y * scale + ownerRect.height / 2;\n\n    if (animate) {\n      this.smoothZoom({x, y, scale});\n    } else {\n      this.setState({x, y, scale});\n    }\n  }\n\n  public smoothZoom(to: {x: number; y: number; scale: number}) {\n    const from = {scale: this.state.scale, x: this.state.x, y: this.state.y};\n\n    if (this._animation) {\n      this._animation.cancel();\n    }\n\n    this._animation = animate(from, to, {\n      step: (v: any) => {\n        this.setState({\n          x: v.x,\n          y: v.y,\n          scale: v.scale,\n        });\n      },\n      done: () => {\n        this.setState(to);\n        this._animation = null;\n      },\n    });\n  }\n\n  public getMaxZoom() {\n    return this.props.maxZoom;\n  }\n\n  public getViewport() {\n    let viewport = {top: 0, left: 0, right: 0, bottom: 0};\n    if (this.element.current) {\n      const el = this.element.current!;\n      const {width, height} = el.getBoundingClientRect();\n      viewport = {\n        left: -this.state.x / this.state.scale,\n        top: -this.state.y / this.state.scale,\n        right: (-this.state.x + width) / this.state.scale,\n        bottom: (-this.state.y + height) / this.state.scale,\n      };\n    }\n    return viewport;\n  }\n\n  onZoomAndCenter = (event: React.MouseEvent<HTMLDivElement>) => {\n    const offsetXY = this.getOffsetXY(event);\n    if (!offsetXY) {\n      return;\n    }\n    const offset = this.screenToSVGCoords(offsetXY);\n    const maxZoom = this.props.maxZoom || DEFAULT_ZOOM;\n\n    if (Math.abs(maxZoom - this.state.scale) < 0.01) {\n      this.zoomToSVGCoords(offset.x, offset.y, true, this.state.minScale);\n    } else {\n      this.zoomToSVGCoords(offset.x, offset.y, true, maxZoom);\n    }\n  };\n\n  onKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.target && (e.target as HTMLElement).nodeName === 'INPUT') {\n      return;\n    }\n\n    const dir = ({\n      ArrowLeft: 'left',\n      ArrowUp: 'up',\n      ArrowRight: 'right',\n      ArrowDown: 'down',\n    } as const)[e.code];\n    if (!dir) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onArrowKeyDown?.(e, dir);\n  };\n\n  onDoubleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    // Don't allow double-click events on the zoom slider to trigger this.\n    if (event.target instanceof HTMLElement && event.target.closest('#zoom-slider-container')) {\n      return;\n    }\n    this.props.onDoubleClick && this.props.onDoubleClick(event);\n  };\n\n  onExportToSVG = async () => {\n    const unclippedViewport = {\n      top: 0,\n      left: 0,\n      right: this.props.graphWidth,\n      bottom: this.props.graphHeight,\n    };\n\n    const div = document.createElement('div');\n    document.getElementById('root')!.appendChild(div);\n    ReactDOM.render(\n      <MemoryRouter>{this.props.children(this.state, unclippedViewport)}</MemoryRouter>,\n      div,\n    );\n    const svg = div.querySelector('svg') as SVGElement;\n    await makeSVGPortable(svg);\n\n    const text = new XMLSerializer().serializeToString(svg);\n    const blob = new Blob([text], {type: 'image/svg+xml'});\n    const a = document.createElement('a');\n    a.setAttribute(\n      'download',\n      `${document.title.replace(/[: \\/]/g, '_').replace(/__+/g, '_')}.svg`,\n    );\n    a.setAttribute('href', URL.createObjectURL(blob));\n    a.click();\n    div.remove();\n  };\n\n  render() {\n    const {children, onClick, interactor} = this.props;\n    const {x, y, scale} = this.state;\n    const dotsize = Math.max(14, 30 * scale);\n\n    return (\n      <div\n        ref={this.element}\n        style={Object.assign({}, SVGViewportStyles, {\n          backgroundPosition: `${x}px ${y}px`,\n          backgroundSize: `${dotsize}px`,\n        })}\n        onMouseDown={(e) => interactor.onMouseDown(this, e)}\n        onDoubleClick={this.onDoubleClick}\n        onKeyDown={this.onKeyDown}\n        onClick={onClick}\n        tabIndex={-1}\n      >\n        <div\n          style={{\n            transformOrigin: `top left`,\n            transform: `matrix(${scale}, 0, 0, ${scale}, ${x}, ${y})`,\n          }}\n        >\n          {children(this.state, this.getViewport())}\n        </div>\n        {interactor.render && interactor.render(this)}\n      </div>\n    );\n  }\n}\n\n/*\nBG: Not using styled-components here because I need a `ref` to an actual DOM element.\nStyled-component with a ref returns a React component we need to findDOMNode to use.\n*/\nconst SVGViewportStyles: React.CSSProperties = {\n  width: '100%',\n  height: '100%',\n  position: 'relative',\n  overflow: 'hidden',\n  userSelect: 'none',\n  outline: 'none',\n  background: `url(\"data:image/svg+xml;utf8,<svg width='30px' height='30px' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'><circle fill='rgba(236, 236, 236, 1)' cx='5' cy='5' r='5' /></svg>\") repeat`,\n};\n\nconst ZoomSliderContainer = styled.div`\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 30px;\n  padding: 10px 8px;\n  padding-bottom: 0;\n  background: rgba(245, 248, 250, 0.4);\n`;\n","import * as dagre from 'dagre';\n\nimport {titleOfIO} from '../app/titleOfIO';\n\nimport {IBounds, IPoint} from './common';\n\nexport type OpLayoutEdgeSide = {\n  point: IPoint;\n  opName: string;\n  edgeName: string;\n};\n\nexport type OpLayoutEdge = {\n  from: OpLayoutEdgeSide;\n  to: OpLayoutEdgeSide;\n};\n\nexport interface OpLayout {\n  // Overall frame of the box relative to 0,0 on the graph\n  bounds: IBounds;\n\n  // Frames of specific components - These need to be computed during layout\n  // (rather than at render time) to position edges into inputs/outputs.\n  op: IBounds;\n  inputs: {[inputName: string]: OpLayoutIO};\n  outputs: {[outputName: string]: OpLayoutIO};\n}\n\nexport interface OpLayoutIO {\n  layout: IBounds;\n  label: boolean;\n  collapsed: string[];\n  port: IPoint;\n}\n\nexport type OpGraphLayout = {\n  width: number;\n  height: number;\n  parent: ParentOpLayout | null;\n  edges: OpLayoutEdge[];\n  nodes: {[opName: string]: OpLayout};\n};\n\ninterface ParentOpLayout extends Omit<OpLayout, 'op'> {\n  mappingLeftEdge: number;\n  mappingLeftSpacing: number;\n  dependsOn: {[opName: string]: IPoint};\n  dependedBy: {[opName: string]: IPoint};\n  invocationBoundingBox: IBounds;\n}\n\nexport interface ILayoutOp {\n  name: string;\n  inputs: {\n    definition: {\n      name: string;\n    };\n    dependsOn: {\n      definition: {\n        name: string;\n      };\n      solid: {\n        name: string;\n      };\n    }[];\n  }[];\n  definition: {\n    description: string | null;\n    assetNodes: {\n      assetKey: {\n        path: string[];\n      };\n    }[];\n  };\n  outputs: {\n    definition: {\n      name: string;\n    };\n    dependedBy: {\n      definition: {\n        name: string;\n      };\n      solid: {\n        name: string;\n      };\n    }[];\n  }[];\n}\n\nconst OP_WIDTH = 370;\nconst OP_BASE_HEIGHT = 52;\nconst OP_ASSETS_ROW_HEIGHT = 22;\nconst IO_HEIGHT = 26;\nconst IO_INSET = 0;\nconst IO_MINI_WIDTH = 35;\nconst IO_THRESHOLD_FOR_MINI = 4;\nconst PORT_INSET_X = 13;\nconst PORT_INSET_Y = IO_HEIGHT / 2;\nconst PARENT_DEFINITION_PADDING = 70;\nconst PARENT_INVOCATION_PADDING = 70;\nconst EXTERNAL_DEPENDENCY_PADDING = 50;\n\nconst MARGIN_BASE = 100;\n\ntype OpLinkInfo = {\n  solid: {name: string};\n  definition: {name: string};\n};\n\nfunction flattenIO(arrays: OpLinkInfo[][]) {\n  const map: {[key: string]: OpLinkInfo} = {};\n  arrays.forEach((array) => array.forEach((item) => (map[titleOfIO(item)] = item)));\n  return Object.values(map);\n}\n\nexport function layoutOpGraph(pipelineOps: ILayoutOp[], parentOp?: ILayoutOp): OpGraphLayout {\n  const g = new dagre.graphlib.Graph();\n\n  // First, identify how much space we need to pad the DAG by in order to show the\n  // parent op AROUND it. We pass this padding in to dagre, and then we have enough\n  // room to add our parent layout around the result.\n  let parentIOPadding = 0;\n  let marginy = MARGIN_BASE;\n  let marginx = MARGIN_BASE;\n  if (parentOp) {\n    parentIOPadding = Math.max(parentOp.inputs.length, parentOp.outputs.length) * IO_HEIGHT;\n    marginx = PARENT_DEFINITION_PADDING + PARENT_INVOCATION_PADDING;\n    marginy = marginx + parentIOPadding;\n  }\n\n  // Define a new top-down, left to right graph layout\n  g.setGraph({rankdir: 'TB', marginx, marginy});\n  g.setDefaultEdgeLabel(() => ({}));\n\n  const edges: OpLayoutEdge[] = [];\n  const opNamesPresent: {[name: string]: boolean} = {};\n\n  pipelineOps.forEach((op) => {\n    opNamesPresent[op.name] = true;\n  });\n  pipelineOps.forEach((op) => {\n    // Lay out each op individually to get it's width and height based on it's\n    // inputs and outputs, and then attach it to the graph. Dagre will give us it's\n    // x,y position.\n    const layout = layoutOp(op, {x: 0, y: 0});\n    g.setNode(op.name, {\n      width: layout.bounds.width,\n      height: layout.bounds.height,\n    });\n\n    // Give Dagre the dependency edges and build a flat set of them so we\n    // can reference them in a single pass later\n    op.inputs.forEach((input) => {\n      input.dependsOn.forEach((dep) => {\n        if (opNamesPresent[dep.solid.name] && opNamesPresent[op.name]) {\n          g.setEdge({v: dep.solid.name, w: op.name}, {weight: 1});\n\n          edges.push({\n            from: {\n              point: {x: 0, y: 0},\n              opName: dep.solid.name,\n              edgeName: dep.definition.name,\n            },\n            to: {\n              point: {x: 0, y: 0},\n              opName: op.name,\n              edgeName: input.definition.name,\n            },\n          });\n        }\n      });\n    });\n  });\n\n  dagre.layout(g);\n\n  const ops: {[opName: string]: OpLayout} = {};\n  const dagreNodes: {[opName: string]: dagre.Node} = {};\n  g.nodes().forEach(function (opName) {\n    const node = g.node(opName);\n    if (!node) {\n      return;\n    }\n    dagreNodes[opName] = node;\n  });\n\n  // Due to a bug in Dagre when run without an \"align\" value, we need to calculate\n  // the total width of the graph coordinate space ourselves. We need the height\n  // because we've shifted long single rows into multiple rows.\n  let maxWidth = 0;\n  let maxHeight = 0;\n\n  // Read the Dagre layout and map \"nodes\" back to our solids, but with\n  // X,Y coordinates this time.\n  Object.keys(dagreNodes).forEach((opName) => {\n    const node = dagreNodes[opName];\n    const op = pipelineOps.find(({name}) => name === opName);\n    if (!op) {\n      return;\n    }\n\n    const x = node.x - node.width / 2; // Dagre's x/y is the center, we want top left\n    const y = node.y - node.height / 2;\n    ops[opName] = layoutOp(op, {x, y});\n    maxWidth = Math.max(maxWidth, x + node.width);\n    maxHeight = Math.max(maxHeight, y + node.height);\n  });\n\n  // Read the Dagre layout and map \"edges\" back to our data model. We don't\n  // currently use the \"closest points on the node\" Dagre suggests (but we could).\n  g.edges().forEach(function (e) {\n    const conn = edges.find((c) => c.from.opName === e.v && c.to.opName === e.w);\n    const points = g.edge(e).points;\n    if (conn) {\n      conn.from.point = points[0];\n      conn.to.point = points[points.length - 1];\n    }\n  });\n\n  const result: OpGraphLayout = {\n    edges,\n    nodes: ops,\n    width: maxWidth + marginx,\n    height: maxHeight + marginy,\n    parent: null,\n  };\n\n  if (parentOp) {\n    // Now that we've computed the pipeline layout fully, lay out the\n    // composite op around the completed DAG.\n    result.parent = layoutParentGraphOp(result, parentOp, parentIOPadding);\n  }\n\n  return result;\n}\n\nfunction layoutParentGraphOp(layout: OpGraphLayout, op: ILayoutOp, parentIOPadding: number) {\n  const result: ParentOpLayout = {\n    invocationBoundingBox: {\n      x: 1,\n      y: 1,\n      width: layout.width - 1,\n      height: layout.height - 1,\n    },\n    bounds: {\n      x: PARENT_INVOCATION_PADDING,\n      y: PARENT_INVOCATION_PADDING + parentIOPadding,\n      width: layout.width - PARENT_INVOCATION_PADDING * 2,\n      height: layout.height - (PARENT_INVOCATION_PADDING + parentIOPadding) * 2,\n    },\n    mappingLeftEdge: PARENT_INVOCATION_PADDING - 20,\n    mappingLeftSpacing: 10,\n    inputs: {},\n    outputs: {},\n    dependsOn: layoutExternalConnections(\n      flattenIO(op.inputs.map((d) => d.dependsOn)),\n      -EXTERNAL_DEPENDENCY_PADDING,\n      layout.width,\n    ),\n    dependedBy: layoutExternalConnections(\n      flattenIO(op.outputs.map((d) => d.dependedBy)),\n      layout.height + EXTERNAL_DEPENDENCY_PADDING,\n      layout.width,\n    ),\n  };\n\n  const boundingBottom = result.bounds.y + result.bounds.height;\n\n  op.inputs.forEach((input, idx) => {\n    result.inputs[input.definition.name] = {\n      layout: {\n        x: result.bounds.x,\n        y: result.bounds.y - idx * IO_HEIGHT - IO_HEIGHT,\n        width: 0,\n        height: IO_HEIGHT,\n      },\n      collapsed: [],\n      label: true,\n      port: {\n        x: result.bounds.x + PORT_INSET_X,\n        y: result.bounds.y - idx * IO_HEIGHT - IO_HEIGHT / 2,\n      },\n    };\n  });\n\n  op.outputs.forEach((output, idx) => {\n    result.outputs[output.definition.name] = {\n      layout: {\n        x: result.bounds.x,\n        y: boundingBottom + idx * IO_HEIGHT,\n        width: 0,\n        height: IO_HEIGHT,\n      },\n      collapsed: [],\n      label: true,\n      port: {\n        x: result.bounds.x + PORT_INSET_X,\n        y: boundingBottom + idx * IO_HEIGHT + IO_HEIGHT / 2,\n      },\n    };\n  });\n\n  return result;\n}\n\nfunction layoutExternalConnections(links: OpLinkInfo[], y: number, layoutWidth: number) {\n  // fill evenly from 0 to layoutWidth from left to right, then center them if there's overflow.\n  const inset = PARENT_INVOCATION_PADDING + PORT_INSET_X;\n  const insetWidth = layoutWidth - inset * 2;\n  const spacing = Math.max(200, insetWidth / links.length);\n  const baseX = inset + Math.min(0, (insetWidth - links.length * spacing) / 2);\n  const yShift = spacing < 300 ? 20 : 0;\n\n  const result: {[opName: string]: IPoint} = {};\n  links.forEach((link, idx) => {\n    const shiftDirection = 1 - (idx % 2) * 2; // 1 or -1, alternating\n    result[titleOfIO(link)] = {\n      x: baseX + idx * spacing,\n      y: y + yShift * shiftDirection,\n    };\n  });\n  return result;\n}\n\nexport function layoutOp(op: ILayoutOp, root: IPoint): OpLayout {\n  // Starting at the root (top left) X,Y, return the layout information for an op with\n  // input blocks, then the main block, then output blocks (arranged vertically).\n  //\n  // This code \"appends\" boxes vertically, advancing accY as it goes.\n  let accY = root.y;\n\n  const appendMiniIODots = <T extends ILayoutOp['inputs'][0] | ILayoutOp['outputs'][0]>(\n    ios: T[],\n    sortKey: (io: T) => string,\n    clusteringKey: (io: T) => string,\n  ) => {\n    // Sort both input and output boxes displayed on the graph alphabetically based on the input name.\n    // This means that if two ops are connected to each other multiple times, the lines do not cross.\n    const sorted = [...ios].sort((a, b) => sortKey(a).localeCompare(sortKey(b)));\n\n    let x = 0;\n    let last: OpLayoutIO;\n    let lastKey: string | null = null;\n    const layouts: {[name: string]: OpLayoutIO} = {};\n    const spacing = Math.min(IO_MINI_WIDTH, OP_WIDTH / (sorted.length + 1));\n\n    // Add \"port\" layouts, collapsing the dots if they are connected to the same opposing solid\n    // (eg: two inputs connected to the same upstream output) with a \"[O] + 2\" style.\n    sorted.forEach((io, _idx) => {\n      const key = clusteringKey(io);\n      if (key !== lastKey) {\n        lastKey = key;\n        last = {\n          port: {\n            x: root.x + x + PORT_INSET_X,\n            y: accY + PORT_INSET_Y,\n          },\n          collapsed: [],\n          label: false,\n          layout: {\n            x: root.x + x,\n            y: accY,\n            width: IO_MINI_WIDTH,\n            height: IO_HEIGHT,\n          },\n        };\n        layouts[io.definition.name] = last;\n        x += spacing;\n      } else {\n        if (last.collapsed.length === 0) {\n          x += 15;\n        }\n        last.collapsed.push(io.definition.name);\n      }\n    });\n\n    // Center the items on the op rather than left justifying them\n    const centeringAdjustment = (OP_WIDTH - (x - PORT_INSET_X + IO_MINI_WIDTH)) / 2;\n    Object.values(layouts).forEach((l) => {\n      l.layout.x += centeringAdjustment;\n      l.port.x += centeringAdjustment;\n    });\n\n    // Place the next box beneath the\n    accY += IO_HEIGHT;\n\n    return layouts;\n  };\n\n  const appendStackedIOBoxes = (ios: ILayoutOp['inputs'] | ILayoutOp['outputs']) => {\n    const layouts: {[name: string]: OpLayoutIO} = {};\n    ios.forEach((io) => {\n      layouts[io.definition.name] = {\n        port: {x: root.x + PORT_INSET_X, y: accY + PORT_INSET_Y},\n        label: true,\n        collapsed: [],\n        layout: {\n          x: root.x,\n          y: accY,\n          width: 0,\n          height: IO_HEIGHT,\n        },\n      };\n      accY += IO_HEIGHT;\n    });\n    return layouts;\n  };\n\n  const inputLayouts =\n    op.inputs.length > IO_THRESHOLD_FOR_MINI\n      ? appendMiniIODots(\n          op.inputs,\n          (input) => input.definition.name,\n          (input) => input.dependsOn[0]?.solid.name || '',\n        )\n      : appendStackedIOBoxes(op.inputs);\n\n  const opLayout: IBounds = {\n    x: root.x,\n    y: Math.max(root.y, accY - IO_INSET),\n    width: OP_WIDTH,\n    height: OP_BASE_HEIGHT + IO_INSET * 2,\n  };\n\n  accY += OP_BASE_HEIGHT;\n\n  if (op.definition.assetNodes.length && op.definition.description) {\n    opLayout.height += OP_ASSETS_ROW_HEIGHT;\n    accY += OP_ASSETS_ROW_HEIGHT;\n  }\n\n  const outputLayouts =\n    op.outputs.length > IO_THRESHOLD_FOR_MINI\n      ? appendMiniIODots(\n          op.outputs,\n          (o) => o.dependedBy[0]?.definition.name || '',\n          (o) => o.dependedBy[0]?.solid.name || '',\n        )\n      : appendStackedIOBoxes(op.outputs);\n\n  return {\n    bounds: {\n      x: root.x - 5,\n      y: root.y - 5,\n      width: OP_WIDTH + 10,\n      height: accY - root.y + 10,\n    },\n    op: opLayout,\n    inputs: inputLayouts,\n    outputs: outputLayouts,\n  };\n}\n","import memoize from 'lodash/memoize';\nimport React from 'react';\n\nimport {AppContext} from '../app/AppContext';\nimport {asyncMemoize} from '../app/Util';\nimport {GraphData} from '../asset-graph/Utils';\nimport {AssetGraphLayout, layoutAssetGraph} from '../asset-graph/layout';\n\nimport {ILayoutOp, layoutOpGraph, OpGraphLayout} from './layout';\n\nconst ASYNC_LAYOUT_SOLID_COUNT = 50;\n\n// Op Graph\n\nconst _opLayoutCacheKey = (ops: ILayoutOp[], parentOp?: ILayoutOp) => {\n  const solidKey = ops.map((x) => x.name).join('|');\n  const parentKey = parentOp?.name;\n  return `${solidKey}:${parentKey}`;\n};\n\nexport const getFullOpLayout = memoize(layoutOpGraph, _opLayoutCacheKey);\n\nexport const asyncGetFullOpLayout = asyncMemoize(\n  (ops: ILayoutOp[], parentOp?: ILayoutOp, staticPathRoot?: string) => {\n    return new Promise<OpGraphLayout>((resolve) => {\n      const worker = new Worker(new URL('../workers/dagre_layout.worker', import.meta.url));\n      worker.addEventListener('message', (event) => {\n        resolve(event.data);\n        worker.terminate();\n      });\n      worker.postMessage({type: 'layoutOpGraph', ops, parentOp, staticPathRoot});\n    });\n  },\n  _opLayoutCacheKey,\n);\n\n// Asset Graph\n\nconst _assetLayoutCacheKey = (graphData: GraphData) => {\n  // Note: The \"show secondary edges\" toggle means that we need a cache key that incorporates\n  // both the displayed nodes and the displayed edges.\n  return JSON.stringify(graphData);\n};\n\nexport const getFullAssetLayout = memoize(layoutAssetGraph, _assetLayoutCacheKey);\n\nexport const asyncGetFullAssetLayout = asyncMemoize(\n  (graphData: GraphData, staticPathRoot?: string) => {\n    return new Promise<AssetGraphLayout>((resolve) => {\n      const worker = new Worker(new URL('../workers/dagre_layout.worker', import.meta.url));\n      worker.addEventListener('message', (event) => {\n        resolve(event.data);\n        worker.terminate();\n      });\n      worker.postMessage({type: 'layoutAssetGraph', graphData, staticPathRoot});\n    });\n  },\n  _assetLayoutCacheKey,\n);\n\n// Helper Hooks:\n// - Automatically switch between sync and async loading strategies\n// - Re-layout when the cache key function returns a different value\n\ntype State = {\n  loading: boolean;\n  layout: OpGraphLayout | AssetGraphLayout | null;\n  cacheKey: string;\n};\n\ntype Action =\n  | {type: 'loading'}\n  | {type: 'layout'; payload: {layout: OpGraphLayout | AssetGraphLayout; cacheKey: string}};\n\nconst reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'loading':\n      return {loading: true, layout: null, cacheKey: ''};\n    case 'layout':\n      return {\n        loading: false,\n        layout: action.payload.layout,\n        cacheKey: action.payload.cacheKey,\n      };\n    default:\n      return state;\n  }\n};\n\nconst initialState: State = {\n  loading: false,\n  layout: null,\n  cacheKey: '',\n};\n\n/**\n * Todo: It would be nice to merge these hooks into one, passing the sync + async layout methods in as args.\n * I tried but felt like the complexity wasn't worth the code savings. The key problem is that the layout\n * functions take different args and a generic solution loses the types.\n */\n\nexport function useOpLayout(ops: ILayoutOp[], parentOp?: ILayoutOp) {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const {staticPathRoot} = React.useContext(AppContext);\n\n  const cacheKey = _opLayoutCacheKey(ops, parentOp);\n  const runAsync = ops.length >= ASYNC_LAYOUT_SOLID_COUNT;\n\n  React.useEffect(() => {\n    async function runAsyncLayout() {\n      dispatch({type: 'loading'});\n      const layout = await asyncGetFullOpLayout(ops, parentOp, staticPathRoot);\n      dispatch({\n        type: 'layout',\n        payload: {layout, cacheKey},\n      });\n    }\n\n    if (!runAsync) {\n      const layout = getFullOpLayout(ops, parentOp);\n      dispatch({type: 'layout', payload: {layout, cacheKey}});\n    } else {\n      void runAsyncLayout();\n    }\n  }, [cacheKey, ops, parentOp, runAsync, staticPathRoot]);\n\n  return {\n    loading: state.loading || !state.layout || state.cacheKey !== cacheKey,\n    async: runAsync,\n    layout: state.layout as OpGraphLayout | null,\n  };\n}\n\nexport function useAssetLayout(graphData: GraphData) {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const {staticPathRoot} = React.useContext(AppContext);\n\n  const cacheKey = _assetLayoutCacheKey(graphData);\n  const nodeCount = Object.keys(graphData.nodes).length;\n  const runAsync = nodeCount >= ASYNC_LAYOUT_SOLID_COUNT;\n\n  React.useEffect(() => {\n    async function runAsyncLayout() {\n      dispatch({type: 'loading'});\n      const layout = await asyncGetFullAssetLayout(graphData, staticPathRoot);\n      dispatch({\n        type: 'layout',\n        payload: {layout, cacheKey},\n      });\n    }\n\n    if (!runAsync) {\n      const layout = getFullAssetLayout(graphData);\n      dispatch({type: 'layout', payload: {layout, cacheKey}});\n    } else {\n      void runAsyncLayout();\n    }\n  }, [cacheKey, graphData, runAsync, staticPathRoot]);\n\n  return {\n    loading: state.loading || !state.layout || state.cacheKey !== cacheKey,\n    async: runAsync,\n    layout: state.layout as AssetGraphLayout | null,\n  };\n}\n\nexport {layoutOp} from './layout';\nexport type {OpGraphLayout, OpLayout, OpLayoutEdge} from './layout';\n","import {AssetGraphLayout, AssetLayout} from '../asset-graph/layout';\n\nimport {OpGraphLayout, OpLayout} from './layout';\n\nexport type Edge = {a: string; b: string};\n\nexport type IBounds = {\n  x: number;\n  y: number;\n  height: number;\n  width: number;\n};\n\nexport type IPoint = {\n  x: number;\n  y: number;\n};\n\nexport const isHighlighted = (edges: Edge[], {a, b}: Edge) =>\n  edges.some((h) => (h.a === a && h.b === b) || (h.b === a && h.a === b));\n\nexport const isOpHighlighted = (edges: Edge[], name: string) =>\n  edges.some((h) => h.a.split(':')[0] === name || h.b.split(':')[0] === name);\n\nexport const isNodeOffscreen = (\n  layoutNode: {x: number; y: number; width: number; height: number},\n  viewportRect: {top: number; left: number; right: number; bottom: number},\n) => {\n  return (\n    layoutNode.x + layoutNode.width < viewportRect.left ||\n    layoutNode.y + layoutNode.height < viewportRect.top ||\n    layoutNode.x > viewportRect.right ||\n    layoutNode.y > viewportRect.bottom\n  );\n};\n\nexport const closestNodeInDirection = (\n  layout: OpGraphLayout | AssetGraphLayout,\n  selectedNodeKey: string | undefined,\n  dir: string,\n): string | undefined => {\n  if (!selectedNodeKey) {\n    return;\n  }\n\n  const current = layout.nodes[selectedNodeKey];\n  const center = (op: OpLayout | AssetLayout): {x: number; y: number} => ({\n    x: op.bounds.x + op.bounds.width / 2,\n    y: op.bounds.y + op.bounds.height / 2,\n  });\n\n  /* Sort all the ops in the graph based on their attractiveness\n    as a jump target. We want the nearest node in the exact same row for left/right,\n    and the visually \"closest\" node above/below for up/down. */\n  const score = (op: OpLayout | AssetLayout): number => {\n    const dx = center(op).x - center(current).x;\n    const dy = center(op).y - center(current).y;\n\n    if (dir === 'left' && dy === 0 && dx < 0) {\n      return -dx;\n    }\n    if (dir === 'right' && dy === 0 && dx > 0) {\n      return dx;\n    }\n    if (dir === 'up' && dy < 0) {\n      return -dy + Math.abs(dx) / 5;\n    }\n    if (dir === 'down' && dy > 0) {\n      return dy + Math.abs(dx) / 5;\n    }\n    return Number.NaN;\n  };\n\n  const closest = Object.keys(layout.nodes)\n    .map((name) => ({name, score: score(layout.nodes[name])}))\n    .filter((e) => e.name !== selectedNodeKey && !Number.isNaN(e.score))\n    .sort((a, b) => b.score - a.score)\n    .pop();\n\n  return closest ? closest.name : undefined;\n};\n\n/**\n * Identifies groups of ops that share a similar `prefix.` and returns\n * an array of bounding boxes and common prefixes. Used to render lightweight\n * outlines around flattened composites.\n */\nexport function computeNodeKeyPrefixBoundingBoxes(layout: OpGraphLayout) {\n  const groups: {[base: string]: IBounds[]} = {};\n  let maxDepth = 0;\n\n  for (const key of Object.keys(layout.nodes)) {\n    const parts = key.split('.');\n    if (parts.length === 1) {\n      continue;\n    }\n    for (let ii = 1; ii < parts.length; ii++) {\n      const base = parts.slice(0, ii).join('.');\n      groups[base] = groups[base] || [];\n      groups[base].push(layout.nodes[key].bounds);\n      maxDepth = Math.max(maxDepth, ii);\n    }\n  }\n\n  const boxes: (IBounds & {name: string})[] = [];\n  for (const base of Object.keys(groups)) {\n    const group = groups[base];\n    const depth = base.split('.').length;\n    const margin = 5 + (maxDepth - depth) * 5;\n\n    if (group.length === 1) {\n      continue;\n    }\n    const x1 = Math.min(...group.map((l) => l.x)) - margin;\n    const x2 = Math.max(...group.map((l) => l.x + l.width)) + margin;\n    const y1 = Math.min(...group.map((l) => l.y)) - margin;\n    const y2 = Math.max(...group.map((l) => l.y + l.height)) + margin;\n    boxes.push({name: base, x: x1, y: y1, width: x2 - x1, height: y2 - y1});\n  }\n\n  return boxes;\n}\n\nexport const position = ({x, y, width, height}: IBounds) => ({\n  left: x,\n  top: y,\n  width,\n  height,\n  position: 'absolute' as const,\n});\n","import * as React from 'react';\n\nexport const useDocumentTitle = (title: string) => {\n  React.useEffect(() => {\n    const currentTitle = document.title;\n    document.title = title;\n    return () => {\n      document.title = currentTitle;\n    };\n  }, [title]);\n};\n","import isEqual from 'lodash/isEqual';\nimport qs from 'qs';\nimport React from 'react';\nimport {useHistory, useLocation} from 'react-router-dom';\n\ntype QueryPersistedDataType =\n  | {[key: string]: any}\n  | Array<any>\n  | (string | undefined | number)\n  | (boolean | undefined)\n  | null;\n\nlet currentQueryString: {[key: string]: any} = {};\n\nexport type QueryPersistedStateConfig<T extends QueryPersistedDataType> = {\n  queryKey?: string;\n  defaults?: {[key: string]: any};\n  decode?: (raw: {[key: string]: any}) => T;\n  encode?: (raw: T) => {[key: string]: any};\n};\n\n/**\n * This goal of this hook is to make it easy to replace `React.useState` with a version\n * that persists the value to the page querystring so it is saved across page reload, etc.\n * Hopefully by making it easy, we'll do this often and improve overall UX.\n *\n * Examples:\n *\n * // Single (string | undefined) key saved to querystring with default value applied inline\n *\n * const [search = '', setSearch] = useQueryPersistedState({queryKey: 'q'})\n *\n * // Object saved to querystring with default values pre-filled\n * // Note: String and boolean values are automatically encoded / decoded, see below for others\n *\n * const [query, setQuery] = useQueryPersistedState<{cursor: string, filter: string}>({\n *   defaults: {cursor: '', filter: ''},\n * })\n *\n * // Custom transformer mapping to / from querystring representation (for our filter tokens)\n * // Note: `setIdeas` will be a different function on every render unless you memoize the options\n * // passed to the hook! Pull the encode/decode functions out into a file constant or use React.useRef\n *\n * const [ideas, setIdeas] = useQueryPersistedState<string[]>({\n *   encode: (ideas) => ({q: ideas.join(',')}),\n *   decode: ({q}) => (q || '').split(','),\n * })\n *\n * Note: if you combine encode/decode with defaults, the defaults are applied to the query\n * string BEFORE decoding.\n */\nexport function useQueryPersistedState<T extends QueryPersistedDataType>(\n  options: QueryPersistedStateConfig<T>,\n): [T, (updates: T) => void] {\n  const {queryKey, defaults} = options;\n  let {encode, decode} = options;\n\n  if (queryKey) {\n    // Just a short-hand way of providing encode/decode that go from qs object => string\n    if (!encode) {\n      encode = (raw: T) => ({[queryKey]: raw});\n    }\n    if (!decode) {\n      decode = (qs: {[key: string]: any}) => inferTypeOfQueryParam<T>(qs[queryKey]);\n    }\n  }\n\n  const location = useLocation();\n  const history = useHistory();\n\n  // We stash the query string into a ref so that the setter can operate on the /current/\n  // location even if the user retains it and calls it after other query string changes.\n  currentQueryString = qs.parse(location.search, {ignoreQueryPrefix: true});\n\n  const qsWithDefaults = {...(defaults || {}), ...currentQueryString};\n\n  // Note: If you have provided defaults and no encoder/decoder, the `value` exposed by\n  // useQueryPersistedState only includes those keys so other params don't leak into your value.\n  const qsDecoded = decode ? decode(qsWithDefaults) : inferTypeOfQueryParams<T>(qsWithDefaults);\n\n  // If `decode` yields a non-primitive type (eg: object or array), by default we yield\n  // an object with a new identity on every render. To prevent possible render loops caused by\n  // our value as a useEffect dependency, etc., we re-use the last yielded object if it isEqual.\n  const valueRef = React.useRef<T>(qsDecoded);\n  const onChangeRef = React.useCallback<(updated: T) => void>(\n    (updated: T) => {\n      const next = {\n        ...currentQueryString,\n        ...(encode ? encode(updated) : (updated as {[key: string]: any})),\n      };\n\n      // omit any keys that are equal to the defaults to keep URLs minimal\n      for (const [key, value] of Object.entries(next)) {\n        if (options.defaults && options.defaults[key] === value) {\n          delete next[key];\n        }\n      }\n\n      currentQueryString = next;\n      history.replace(`${location.pathname}?${qs.stringify(next, {arrayFormat: 'brackets'})}`);\n    },\n    [history, encode, location.pathname, options],\n  );\n\n  if (!isEqual(valueRef.current, qsDecoded)) {\n    valueRef.current = qsDecoded;\n  }\n  return [valueRef.current, onChangeRef];\n}\n\nfunction inferTypeOfQueryParam<T>(q: any): T {\n  return q === 'false' ? false : q === 'true' ? true : q;\n}\n\nfunction inferTypeOfQueryParams<T>(qs: {[key: string]: any}) {\n  const result: {[key: string]: any} = {};\n  for (const key of Object.keys(qs)) {\n    result[key] = inferTypeOfQueryParam<any>(qs[key]);\n  }\n  return result as T;\n}\n","import React from 'react';\n\ntype State = {\n  checkedIds: Set<string>;\n  lastCheckedId: string | null;\n};\n\ntype Action =\n  | {type: 'toggle-one'; payload: {checked: boolean; id: string}}\n  | {\n      type: 'toggle-slice';\n      payload: {checked: boolean; id: string; allIds: string[]};\n    }\n  | {type: 'toggle-all'; payload: {checked: boolean; allIds: string[]}};\n\nconst reducer = (state: State, action: Action): State => {\n  const copy = new Set(Array.from(state.checkedIds));\n  switch (action.type) {\n    case 'toggle-one': {\n      const {checked, id} = action.payload;\n      checked ? copy.add(id) : copy.delete(id);\n      return {lastCheckedId: id, checkedIds: copy};\n    }\n\n    case 'toggle-slice': {\n      const {checked, id, allIds} = action.payload;\n      const {lastCheckedId} = state;\n\n      const indexOfLast = lastCheckedId ? allIds.indexOf(lastCheckedId) : -1;\n      const indexOfChecked = allIds.indexOf(id);\n      if (indexOfLast === -1 || indexOfChecked === -1) {\n        return state;\n      }\n\n      const [start, end] = [indexOfLast, indexOfChecked].sort();\n      for (let ii = start; ii <= end; ii++) {\n        checked ? copy.add(allIds[ii]) : copy.delete(allIds[ii]);\n      }\n\n      return {\n        lastCheckedId: id,\n        checkedIds: copy,\n      };\n    }\n\n    case 'toggle-all': {\n      const {checked, allIds} = action.payload;\n      return {\n        lastCheckedId: null,\n        checkedIds: checked ? new Set(allIds) : new Set(),\n      };\n    }\n  }\n};\n\nconst initialState: State = {\n  checkedIds: new Set(),\n  lastCheckedId: null,\n};\n\nexport function useSelectionReducer(allIds: string[]) {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  const onToggleFactory = (id: string) => (values: {checked: boolean; shiftKey: boolean}) => {\n    const {checked, shiftKey} = values;\n    if (shiftKey && state.lastCheckedId) {\n      dispatch({type: 'toggle-slice', payload: {checked, id, allIds}});\n    } else {\n      dispatch({type: 'toggle-one', payload: {checked, id}});\n    }\n  };\n\n  const onToggleAll = (checked: boolean) => {\n    dispatch({type: 'toggle-all', payload: {checked, allIds}});\n  };\n\n  return [state, {onToggleFactory, onToggleAll}] as const;\n}\n","import {Button, DialogBody, DialogFooter, Dialog} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {BackfillTableFragment} from './types/BackfillTableFragment';\n\ninterface Props {\n  backfill?: BackfillTableFragment;\n  onClose: () => void;\n}\nexport const BackfillPartitionsRequestedDialog = ({backfill, onClose}: Props) => {\n  if (!backfill) {\n    return null;\n  }\n  if (!backfill.partitionSet) {\n    return null;\n  }\n\n  return (\n    <Dialog\n      isOpen={!!backfill}\n      title={\n        <span>\n          Partitions requested for backfill:{' '}\n          <span style={{fontFamily: 'monospace'}}>{backfill.backfillId}</span>\n        </span>\n      }\n      onClose={onClose}\n    >\n      <DialogBody>\n        <div style={{maxHeight: '80vh', overflowY: 'auto'}}>\n          {backfill.partitionNames.map((partitionName: string) => (\n            <div key={partitionName}>{partitionName}</div>\n          ))}\n        </div>\n      </DialogBody>\n      <DialogFooter>\n        <Button intent=\"none\" onClick={onClose}>\n          Close\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n};\n","import {Button, DialogBody, DialogFooter, Dialog} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {PartitionStepStatus} from '../partitions/PartitionStepStatus';\nimport {usePartitionStepQuery} from '../partitions/usePartitionStepQuery';\nimport {RunFilterToken} from '../runs/RunsFilterInput';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  BackfillTableFragment,\n  BackfillTableFragment_partitionSet,\n} from './types/BackfillTableFragment';\n\ninterface Props {\n  backfill?: BackfillTableFragment;\n  onClose: () => void;\n}\nexport const BackfillStepStatusDialog = ({backfill, onClose}: Props) => {\n  if (!backfill) {\n    return null;\n  }\n  if (!backfill.partitionSet) {\n    return null;\n  }\n  const repoAddress = buildRepoAddress(\n    backfill.partitionSet.repositoryOrigin.repositoryName,\n    backfill.partitionSet.repositoryOrigin.repositoryLocationName,\n  );\n  return (\n    <BackfillStepStatusDialogContent\n      backfill={backfill}\n      partitionSet={backfill.partitionSet}\n      repoAddress={repoAddress}\n      onClose={onClose}\n    />\n  );\n};\n\ninterface ContentProps {\n  backfill: BackfillTableFragment;\n  partitionSet: BackfillTableFragment_partitionSet;\n  repoAddress: RepoAddress;\n  onClose: () => void;\n}\n\nexport const BackfillStepStatusDialogContent = ({\n  backfill,\n  partitionSet,\n  repoAddress,\n  onClose,\n}: ContentProps) => {\n  const [pageSize, setPageSize] = React.useState(60);\n  const [offset, setOffset] = React.useState<number>(0);\n  const runsFilter = React.useMemo(() => {\n    const token: RunFilterToken = {token: 'tag', value: `dagster/backfill=${backfill.backfillId}`};\n    return [token];\n  }, [backfill.backfillId]);\n  const partitions = usePartitionStepQuery(\n    partitionSet.name,\n    backfill.partitionNames,\n    pageSize,\n    runsFilter,\n    partitionSet.pipelineName,\n    offset,\n    !backfill,\n  );\n\n  if (!backfill) {\n    return null;\n  }\n\n  return (\n    <Dialog\n      isOpen={!!backfill}\n      title={\n        <span>\n          Step status for backfill:{' '}\n          <span style={{fontFamily: 'monospace'}}>{backfill.backfillId}</span>\n        </span>\n      }\n      onClose={onClose}\n      style={{width: '80vw'}}\n    >\n      <DialogBody>\n        <PartitionStepStatus\n          partitionNames={backfill.partitionNames}\n          partitions={partitions}\n          pipelineName={partitionSet?.pipelineName}\n          repoAddress={repoAddress}\n          setPageSize={setPageSize}\n          offset={offset}\n          setOffset={setOffset}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button intent=\"none\" onClick={onClose}>\n          Close\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n};\n","import {gql, useMutation} from '@apollo/client';\nimport {Button, DialogBody, DialogFooter, Dialog} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {cancelableStatuses} from '../runs/RunStatuses';\nimport {TerminationDialog} from '../runs/TerminationDialog';\nimport {BulkActionStatus} from '../types/globalTypes';\n\nimport {BackfillTableFragment} from './types/BackfillTableFragment';\nimport {CancelBackfill, CancelBackfillVariables} from './types/CancelBackfill';\n\ninterface Props {\n  backfill?: BackfillTableFragment;\n  onClose: () => void;\n  onComplete: () => void;\n}\nexport const BackfillTerminationDialog = ({backfill, onClose, onComplete}: Props) => {\n  const [cancelBackfill] = useMutation<CancelBackfill, CancelBackfillVariables>(\n    CANCEL_BACKFILL_MUTATION,\n  );\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\n\n  if (!backfill) {\n    return null;\n  }\n\n  const numUnscheduled = (backfill.numPartitions || 0) - (backfill.numRequested || 0);\n  const cancel = async () => {\n    setIsSubmitting(true);\n    await cancelBackfill({variables: {backfillId: backfill.backfillId}});\n    onComplete();\n    setIsSubmitting(false);\n    onClose();\n  };\n\n  const unfinishedPartitions = backfill.partitionStatuses.results.filter(\n    (partition) =>\n      partition.runStatus && partition.runId && partition.runStatus in cancelableStatuses,\n  );\n  const unfinishedMap =\n    unfinishedPartitions?.reduce(\n      (accum, partition) =>\n        partition && partition.runId ? {...accum, [partition.runId]: true} : accum,\n      {},\n    ) || {};\n\n  return (\n    <>\n      <Dialog\n        isOpen={!!backfill && backfill.status !== BulkActionStatus.CANCELED && !!numUnscheduled}\n        title=\"Cancel backfill\"\n        onClose={onClose}\n      >\n        <DialogBody>\n          There {numUnscheduled === 1 ? 'is 1 partition ' : `are ${numUnscheduled} partitions `}\n          yet to be queued or launched.\n        </DialogBody>\n        <DialogFooter>\n          <Button intent=\"none\" onClick={onClose}>\n            Close\n          </Button>\n          {isSubmitting ? (\n            <Button intent=\"danger\" disabled>\n              Canceling...\n            </Button>\n          ) : (\n            <Button intent=\"danger\" onClick={cancel}>\n              Cancel backfill\n            </Button>\n          )}\n        </DialogFooter>\n      </Dialog>\n      <TerminationDialog\n        isOpen={\n          !!backfill &&\n          (!numUnscheduled || backfill.status !== 'REQUESTED') &&\n          !!unfinishedPartitions.length\n        }\n        onClose={onClose}\n        onComplete={onComplete}\n        selectedRuns={unfinishedMap}\n      />\n    </>\n  );\n};\n\nconst CANCEL_BACKFILL_MUTATION = gql`\n  mutation CancelBackfill($backfillId: String!) {\n    cancelPartitionBackfill(backfillId: $backfillId) {\n      __typename\n      ... on CancelBackfillSuccess {\n        backfillId\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {gql, useMutation} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  Colors,\n  Group,\n  Icon,\n  MenuItem,\n  Menu,\n  Popover,\n  Table,\n  Tag,\n  Mono,\n  stringFromValue,\n} from '@dagster-io/ui';\nimport qs from 'qs';\nimport * as React from 'react';\nimport {useHistory, Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {SharedToaster} from '../app/DomUtils';\nimport {usePermissions} from '../app/Permissions';\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {PartitionStatus} from '../partitions/PartitionStatus';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {inProgressStatuses} from '../runs/RunStatuses';\nimport {runsPathWithFilters} from '../runs/RunsFilterInput';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {BulkActionStatus, RunStatus} from '../types/globalTypes';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsString} from '../workspace/repoAddressAsString';\nimport {workspacePathFromAddress, workspacePipelinePath} from '../workspace/workspacePath';\n\nimport {BackfillPartitionsRequestedDialog} from './BackfillPartitionsRequestedDialog';\nimport {BackfillStepStatusDialog} from './BackfillStepStatusDialog';\nimport {BackfillTerminationDialog} from './BackfillTerminationDialog';\nimport {RESUME_BACKFILL_MUTATION} from './BackfillUtils';\nimport {\n  BackfillTableFragment,\n  BackfillTableFragment_partitionSet,\n} from './types/BackfillTableFragment';\nimport {resumeBackfill, resumeBackfillVariables} from './types/resumeBackfill';\n\nexport const BackfillTable = ({\n  showPartitionSet = true,\n  allPartitions,\n  backfills,\n  refetch,\n}: {\n  allPartitions?: string[];\n  backfills: BackfillTableFragment[];\n  refetch: () => void;\n  showPartitionSet?: boolean;\n}) => {\n  const [terminationBackfill, setTerminationBackfill] = React.useState<BackfillTableFragment>();\n  const [stepStatusBackfill, setStepStatusBackfill] = React.useState<BackfillTableFragment>();\n  const [\n    partitionsRequestedBackfill,\n    setPartitionsRequestedBackfill,\n  ] = React.useState<BackfillTableFragment>();\n  const [resumeBackfill] = useMutation<resumeBackfill, resumeBackfillVariables>(\n    RESUME_BACKFILL_MUTATION,\n  );\n  const {canCancelPartitionBackfill} = usePermissions();\n\n  const candidateId = terminationBackfill?.backfillId;\n\n  React.useEffect(() => {\n    if (canCancelPartitionBackfill.enabled && candidateId) {\n      const [backfill] = backfills.filter((backfill) => backfill.backfillId === candidateId);\n      setTerminationBackfill(backfill);\n    }\n  }, [backfills, candidateId, canCancelPartitionBackfill]);\n\n  const resume = async (backfill: BackfillTableFragment) => {\n    const {data} = await resumeBackfill({variables: {backfillId: backfill.backfillId}});\n    if (data && data.resumePartitionBackfill.__typename === 'ResumeBackfillSuccess') {\n      refetch();\n    } else if (data && data.resumePartitionBackfill.__typename === 'UnauthorizedError') {\n      SharedToaster.show({\n        message: (\n          <Group direction=\"column\" spacing={4}>\n            <div>\n              Attempted to retry the backfill in read-only mode. This backfill was not retried.\n            </div>\n          </Group>\n        ),\n        icon: 'error',\n        intent: 'danger',\n      });\n    } else if (data && data.resumePartitionBackfill.__typename === 'PythonError') {\n      const error = data.resumePartitionBackfill;\n      SharedToaster.show({\n        message: <div>An unexpected error occurred. This backfill was not retried.</div>,\n        icon: 'error',\n        intent: 'danger',\n        action: {\n          text: 'View error',\n          onClick: () =>\n            showCustomAlert({\n              body: <PythonErrorInfo error={error} />,\n            }),\n        },\n      });\n    }\n  };\n\n  return (\n    <>\n      <Table>\n        <thead>\n          <tr>\n            <th style={{width: 120}}>Backfill Id</th>\n            <th style={{width: 200}}>Created</th>\n            {showPartitionSet ? <th>Partition Set</th> : null}\n            {allPartitions ? <th>Requested</th> : null}\n            <th style={{textAlign: 'right', width: 200}}>Backfill Status</th>\n            <th>Run Status</th>\n            <th style={{width: 80}} />\n          </tr>\n        </thead>\n        <tbody>\n          {backfills.map((backfill: BackfillTableFragment) => (\n            <BackfillRow\n              key={backfill.backfillId}\n              showPartitionSet={showPartitionSet}\n              backfill={backfill}\n              allPartitions={allPartitions}\n              onTerminateBackfill={setTerminationBackfill}\n              onResumeBackfill={resume}\n              onShowStepStatus={setStepStatusBackfill}\n              onShowPartitionsRequested={setPartitionsRequestedBackfill}\n            />\n          ))}\n        </tbody>\n      </Table>\n      <BackfillStepStatusDialog\n        backfill={stepStatusBackfill}\n        onClose={() => setStepStatusBackfill(undefined)}\n      />\n      <BackfillPartitionsRequestedDialog\n        backfill={partitionsRequestedBackfill}\n        onClose={() => setPartitionsRequestedBackfill(undefined)}\n      />\n      <BackfillTerminationDialog\n        backfill={terminationBackfill}\n        onClose={() => setTerminationBackfill(undefined)}\n        onComplete={() => refetch()}\n      />\n    </>\n  );\n};\n\nconst BackfillRow = ({\n  backfill,\n  allPartitions,\n  showPartitionSet,\n  onTerminateBackfill,\n  onResumeBackfill,\n  onShowStepStatus,\n  onShowPartitionsRequested,\n}: {\n  backfill: BackfillTableFragment;\n  allPartitions?: string[];\n  onTerminateBackfill: (backfill: BackfillTableFragment) => void;\n  onResumeBackfill: (backfill: BackfillTableFragment) => void;\n  showPartitionSet: boolean;\n  onShowStepStatus: (backfill: BackfillTableFragment) => void;\n  onShowPartitionsRequested: (backfill: BackfillTableFragment) => void;\n}) => {\n  const history = useHistory();\n  const {canCancelPartitionBackfill, canLaunchPartitionBackfill} = usePermissions();\n  const runsUrl = runsPathWithFilters([\n    {\n      token: 'tag',\n      value: `dagster/backfill=${backfill.backfillId}`,\n    },\n  ]);\n\n  const repoAddress = backfill.partitionSet\n    ? buildRepoAddress(\n        backfill.partitionSet.repositoryOrigin.repositoryName,\n        backfill.partitionSet.repositoryOrigin.repositoryLocationName,\n      )\n    : null;\n  const repo = useRepository(repoAddress);\n  const isJob = !!(\n    repo &&\n    backfill.partitionSet &&\n    isThisThingAJob(repo, backfill.partitionSet.pipelineName)\n  );\n\n  const partitionSetBackfillUrl = backfill.partitionSet\n    ? workspacePipelinePath({\n        repoName: backfill.partitionSet.repositoryOrigin.repositoryName,\n        repoLocation: backfill.partitionSet.repositoryOrigin.repositoryLocationName,\n        pipelineName: backfill.partitionSet.pipelineName,\n        path: `/partitions?${qs.stringify({\n          partitionSet: backfill.partitionSet.name,\n          q: [stringFromValue([{token: 'tag', value: `dagster/backfill=${backfill.backfillId}`}])],\n        })}`,\n        isJob,\n      })\n    : null;\n\n  const canCancelRuns = backfill.partitionStatuses.results.some(\n    (r) => r.runStatus === RunStatus.QUEUED || r.runStatus === RunStatus.STARTED,\n  );\n\n  return (\n    <tr>\n      <td style={{width: 120}}>\n        <Mono>\n          {partitionSetBackfillUrl ? (\n            <Link to={partitionSetBackfillUrl}>{backfill.backfillId}</Link>\n          ) : (\n            backfill.backfillId\n          )}\n        </Mono>\n      </td>\n      <td style={{width: 240}}>\n        {backfill.timestamp ? <TimestampDisplay timestamp={backfill.timestamp} /> : '-'}\n      </td>\n      {showPartitionSet ? (\n        <td>\n          {backfill.partitionSet ? (\n            <PartitionSetReference partitionSet={backfill.partitionSet} />\n          ) : (\n            backfill.partitionSetName\n          )}\n        </td>\n      ) : null}\n      {allPartitions ? (\n        <td style={{width: 300}}>\n          <BackfillRequested\n            allPartitions={allPartitions}\n            backfill={backfill}\n            onExpand={() => onShowPartitionsRequested(backfill)}\n          />\n        </td>\n      ) : null}\n      <td style={{textAlign: 'right', width: 200}}>\n        <BackfillStatus backfill={backfill} />\n      </td>\n      <td>\n        <BackfillRunStatus backfill={backfill} history={history} />\n      </td>\n      <td>\n        <Popover\n          content={\n            <Menu>\n              {canCancelPartitionBackfill.enabled ? (\n                <>\n                  {backfill.numRequested < backfill.partitionStatuses.results.length &&\n                  backfill.status === BulkActionStatus.REQUESTED ? (\n                    <MenuItem\n                      text=\"Cancel backfill submission\"\n                      icon=\"cancel\"\n                      intent=\"danger\"\n                      onClick={() => onTerminateBackfill(backfill)}\n                    />\n                  ) : null}\n                  {canCancelRuns ? (\n                    <MenuItem\n                      text=\"Terminate unfinished runs\"\n                      icon=\"cancel\"\n                      intent=\"danger\"\n                      onClick={() => onTerminateBackfill(backfill)}\n                    />\n                  ) : null}\n                </>\n              ) : null}\n              {canLaunchPartitionBackfill.enabled &&\n              backfill.status === BulkActionStatus.FAILED &&\n              backfill.partitionSet ? (\n                <MenuItem\n                  text=\"Resume failed backfill\"\n                  title=\"Submits runs for all partitions in the backfill that do not have a corresponding run. Does not retry failed runs.\"\n                  icon=\"refresh\"\n                  onClick={() => onResumeBackfill(backfill)}\n                />\n              ) : null}\n              <MenuItem\n                text=\"View Backfill Runs\"\n                icon=\"settings_backup_restore\"\n                onClick={() => history.push(runsUrl)}\n              />\n              <MenuItem\n                text=\"View Step Status\"\n                icon=\"view_list\"\n                onClick={() => {\n                  onShowStepStatus(backfill);\n                }}\n              />\n            </Menu>\n          }\n          position=\"bottom-right\"\n        >\n          <Button icon={<Icon name=\"expand_more\" />} />\n        </Popover>\n      </td>\n    </tr>\n  );\n};\n\nconst BackfillRequested = ({\n  allPartitions,\n  backfill,\n  onExpand,\n}: {\n  allPartitions: string[];\n  backfill: BackfillTableFragment;\n  onExpand: () => void;\n}) => {\n  const partitionData = {};\n  backfill.partitionNames.forEach((partitionName) => {\n    // kind of a hack, but set status here to get the coloring we want\n    partitionData[partitionName] = RunStatus.QUEUED;\n  });\n  return (\n    <Box flex={{direction: 'column', gap: 8}}>\n      <div>\n        <TagButton onClick={onExpand}>\n          <Tag intent=\"primary\" interactive>\n            {backfill.partitionNames.length} partitions\n          </Tag>\n        </TagButton>\n      </div>\n      <PartitionStatus\n        partitionNames={allPartitions}\n        partitionData={partitionData}\n        small\n        hideStatusTooltip\n      />\n    </Box>\n  );\n};\n\nconst BackfillStatus = ({backfill}: {backfill: BackfillTableFragment}) => {\n  switch (backfill.status) {\n    case BulkActionStatus.REQUESTED:\n      return <Tag>Requested</Tag>;\n    case BulkActionStatus.CANCELED:\n    case BulkActionStatus.FAILED:\n      return (\n        <Box margin={{bottom: 12}}>\n          <TagButton\n            onClick={() =>\n              backfill.error &&\n              showCustomAlert({title: 'Error', body: <PythonErrorInfo error={backfill.error} />})\n            }\n          >\n            <Tag intent=\"danger\">{backfill.status === 'FAILED' ? 'Failed' : 'Canceled'}</Tag>\n          </TagButton>\n        </Box>\n      );\n    case BulkActionStatus.COMPLETED:\n      const statuses = backfill.partitionStatuses.results.map((r) => r.runStatus);\n      if (\n        statuses.filter((runStatus) => runStatus === RunStatus.SUCCESS).length ===\n        backfill.partitionNames.length\n      ) {\n        return <Tag intent=\"success\">Completed</Tag>;\n      }\n      if (statuses.filter((runStatus) => runStatus && runStatus in inProgressStatuses).length) {\n        return <Tag intent=\"primary\">In progress</Tag>;\n      }\n      return <Tag intent=\"warning\">Incomplete</Tag>;\n  }\n};\n\nconst BackfillRunStatus = ({\n  backfill,\n  history,\n}: {\n  backfill: BackfillTableFragment;\n  history: any;\n}) => {\n  const partitionData = {};\n  const partitionRun = {};\n  backfill.partitionStatuses.results.forEach((s) => {\n    partitionData[s.partitionName] = s.runStatus;\n    partitionRun[s.partitionName] = s.runId;\n  });\n\n  return (\n    <PartitionStatus\n      partitionNames={backfill.partitionNames}\n      partitionData={partitionData}\n      splitPartitions={true}\n      onClick={(partitionName) => {\n        if (partitionRun[partitionName]) {\n          history.push(`/instance/runs/${partitionRun[partitionName]}`);\n        }\n      }}\n    />\n  );\n};\n\nconst PartitionSetReference: React.FC<{\n  partitionSet: BackfillTableFragment_partitionSet;\n}> = ({partitionSet}) => {\n  const repoAddress = buildRepoAddress(\n    partitionSet.repositoryOrigin.repositoryName,\n    partitionSet.repositoryOrigin.repositoryLocationName,\n  );\n  const repo = useRepository(repoAddress);\n  const isJob = !!(repo && isThisThingAJob(repo, partitionSet.pipelineName));\n\n  return (\n    <Box flex={{direction: 'column', gap: 8}}>\n      <Link\n        to={workspacePipelinePath({\n          repoName: partitionSet.repositoryOrigin.repositoryName,\n          repoLocation: partitionSet.repositoryOrigin.repositoryLocationName,\n          pipelineName: partitionSet.pipelineName,\n          isJob,\n          path: `/partitions?partitionSet=${encodeURIComponent(partitionSet.name)}`,\n        })}\n      >\n        {partitionSet.name}\n      </Link>\n      <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n        <Icon name=\"repo\" color={Colors.Gray400} />\n        <Link to={workspacePathFromAddress(repoAddress)}>{repoAddressAsString(repoAddress)}</Link>\n      </Box>\n      <PipelineReference\n        showIcon\n        size=\"small\"\n        pipelineName={partitionSet.pipelineName}\n        pipelineHrefContext={{\n          name: partitionSet.repositoryOrigin.repositoryName,\n          location: partitionSet.repositoryOrigin.repositoryLocationName,\n        }}\n        isJob={isJob}\n      />\n    </Box>\n  );\n};\n\nconst TagButton = styled.button`\n  border: none;\n  background: none;\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n\n  :focus {\n    outline: none;\n  }\n`;\n\nexport const BACKFILL_TABLE_FRAGMENT = gql`\n  fragment BackfillTableFragment on PartitionBackfill {\n    backfillId\n    status\n    numRequested\n    partitionNames\n    numPartitions\n    timestamp\n    partitionSetName\n    partitionSet {\n      id\n      name\n      mode\n      pipelineName\n      repositoryOrigin {\n        id\n        repositoryName\n        repositoryLocationName\n      }\n    }\n    partitionStatuses {\n      results {\n        id\n        partitionName\n        runId\n        runStatus\n      }\n    }\n    error {\n      ...PythonErrorFragment\n    }\n  }\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {gql} from '@apollo/client';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\n\nexport const RESUME_BACKFILL_MUTATION = gql`\n  mutation resumeBackfill($backfillId: String!) {\n    resumePartitionBackfill(backfillId: $backfillId) {\n      __typename\n      ... on ResumeBackfillSuccess {\n        backfillId\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nexport const LAUNCH_PARTITION_BACKFILL_MUTATION = gql`\n  mutation LaunchPartitionBackfill($backfillParams: LaunchBackfillParams!) {\n    launchPartitionBackfill(backfillParams: $backfillParams) {\n      __typename\n      ... on LaunchBackfillSuccess {\n        backfillId\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n      ... on InvalidStepError {\n        invalidStepKey\n      }\n      ... on InvalidOutputError {\n        stepKey\n        invalidOutputName\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on RunConflict {\n        message\n      }\n      ... on ConflictingExecutionParamsError {\n        message\n      }\n      ... on PresetNotFoundError {\n        message\n      }\n      ... on RunConfigValidationInvalid {\n        pipelineName\n        errors {\n          __typename\n          message\n          path\n          reason\n        }\n      }\n    }\n  }\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {Box, Colors, FontFamily, Mono, Popover} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {SectionHeader} from '../pipelines/SidebarComponents';\nimport {RunStatus} from '../types/globalTypes';\n\nimport {RunStatusIndicator} from './RunStatusDots';\nimport {RunStateSummary, RunTime, titleForRun} from './RunUtils';\nimport {RunTimeFragment} from './types/RunTimeFragment';\n\nconst RUN_STATUS_COLORS = {\n  QUEUED: Colors.Blue500,\n  NOT_STARTED: Colors.Blue500,\n  STARTING: Colors.Blue500,\n  MANAGED: Colors.Blue500,\n  STARTED: Colors.Blue500,\n  SUCCESS: Colors.Green500,\n  FAILURE: Colors.Red500,\n  CANCELING: Colors.Red500,\n  CANCELED: Colors.Red500,\n};\n\nconst MIN_OPACITY = 0.2;\nconst MAX_OPACITY = 1.0;\nconst MIN_OPACITY_STEPS = 3;\n\ninterface Props {\n  opacity?: number;\n  runId: string;\n  status: RunStatus;\n}\n\nexport const RunStatusPez = (props: Props) => {\n  const {status, opacity = MAX_OPACITY} = props;\n  const color = RUN_STATUS_COLORS[status];\n\n  return <Pez $color={color} $opacity={opacity} />;\n};\n\ninterface ListProps {\n  fade: boolean;\n  repoAddress: string;\n  runs: RunTimeFragment[];\n}\n\nexport const RunStatusPezList = (props: ListProps) => {\n  const {fade, runs} = props;\n  const count = runs.length;\n  const countForStep = Math.max(MIN_OPACITY_STEPS, count);\n  const step = (MAX_OPACITY - MIN_OPACITY) / countForStep;\n  return (\n    <Box flex={{direction: 'row', alignItems: 'center', gap: 2}}>\n      {runs.map((run, ii) => (\n        <Popover\n          key={run.runId}\n          position=\"bottom\"\n          interactionKind=\"hover\"\n          content={\n            <div>\n              <RunStatusOverlay run={run} repoAddr={props.repoAddress} />\n            </div>\n          }\n          hoverOpenDelay={100}\n        >\n          <RunStatusPez\n            key={run.runId}\n            runId={run.runId}\n            status={run.status}\n            opacity={fade ? MAX_OPACITY - (count - ii - 1) * step : 1.0}\n          />\n        </Popover>\n      ))}\n    </Box>\n  );\n};\n\ninterface OverlayProps {\n  run: RunTimeFragment;\n  repoAddr: string;\n}\n\nconst RunStatusOverlay = (props: OverlayProps) => {\n  return (\n    <OverlayContainer>\n      <OverlayTitle>{props.repoAddr}</OverlayTitle>\n      <RunRow>\n        <RunStatusIndicator status={props.run.status} />\n        <Link to={`/instance/runs/${props.run.runId}`}>\n          <Mono>{titleForRun(props.run)}</Mono>\n        </Link>\n        <HorizontalSpace />\n        <Box flex={{direction: 'column'}}>\n          <RunTime run={props.run} />\n          <RunStateSummary run={props.run} />\n        </Box>\n      </RunRow>\n    </OverlayContainer>\n  );\n};\n\nconst OverlayContainer = styled.div`\n  padding: 4px;\n  font-size: 12px;\n  width: 280px;\n`;\n\nconst HorizontalSpace = styled.div`\n  flex: 1;\n`;\n\nconst OverlayTitle = styled(SectionHeader)`\n  padding: 8px;\n  box-shadow: inset 0 -1px ${Colors.KeylineGray};\n  max-width: 100%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  min-width: 0px;\n`;\n\nconst RunRow = styled.div`\n  align-items: baseline;\n  padding: 8px;\n  font-family: ${FontFamily.monospace};\n  font-size: 14px;\n  line-height: 20px;\n  display: flex;\n  gap: 8px;\n`;\n\nconst Pez = styled.div<{$color: string; $opacity: number}>`\n  background-color: ${({$color}) => $color};\n  border-radius: 2px;\n  height: 16px;\n  opacity: ${({$opacity}) => $opacity};\n  width: 8px;\n`;\n","import {gql, useLazyQuery} from '@apollo/client';\nimport {Button, Icon, Menu, MenuItem, Popover, Tooltip} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {usePermissions} from '../app/Permissions';\nimport {canRunAllSteps, canRunFromFailure} from '../runs/RunActionButtons';\nimport {RunFragments} from '../runs/RunFragments';\nimport {RunTimeFragment} from '../runs/types/RunTimeFragment';\nimport {useJobReExecution} from '../runs/useJobReExecution';\nimport {MenuLink} from '../ui/MenuLink';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePipelinePath} from '../workspace/workspacePath';\n\nimport {RunReExecutionQuery} from './types/RunReExecutionQuery';\n\ninterface Props {\n  job: {isJob: boolean; name: string; runs: RunTimeFragment[]};\n  repoAddress: RepoAddress;\n}\n\n/**\n * Lazily load more information about the last run for this job, then use that data to inform\n * whether re-execution is possible.\n */\nexport const JobMenu = (props: Props) => {\n  const {job, repoAddress} = props;\n  const lastRun = job.runs.length ? job.runs[0] : null;\n  const {canLaunchPipelineReexecution} = usePermissions();\n  const [fetchHasExecutionPlan, {data}] = useLazyQuery<RunReExecutionQuery>(RUN_RE_EXECUTION_QUERY);\n\n  const run = data?.pipelineRunOrError.__typename === 'Run' ? data?.pipelineRunOrError : null;\n\n  const fetchIfPossible = React.useCallback(() => {\n    if (lastRun?.id) {\n      fetchHasExecutionPlan({variables: {runId: lastRun.id}});\n    }\n  }, [lastRun, fetchHasExecutionPlan]);\n\n  const onLaunch = useJobReExecution(run);\n\n  const reExecuteAllItem = (\n    <MenuItem\n      icon=\"replay\"\n      text=\"Re-execute latest run\"\n      onClick={() => onLaunch({type: 'all'})}\n      disabled={!canLaunchPipelineReexecution.enabled || !run || !canRunAllSteps(run)}\n    />\n  );\n\n  const reExecuteFromFailureItem = (\n    <MenuItem\n      icon=\"sync_problem\"\n      text=\"Re-execute latest run from failure\"\n      onClick={() => onLaunch({type: 'from-failure'})}\n      disabled={!canLaunchPipelineReexecution.enabled || !run || !canRunFromFailure(run)}\n    />\n  );\n\n  return (\n    <Popover\n      onOpened={() => fetchIfPossible()}\n      content={\n        <Menu>\n          <MenuLink\n            to={workspacePipelinePath({\n              repoName: repoAddress.name,\n              repoLocation: repoAddress.location,\n              pipelineName: job.name,\n              isJob: job.isJob,\n            })}\n            icon=\"job\"\n            text=\"View job\"\n          />\n          <MenuLink\n            to={workspacePipelinePath({\n              repoName: repoAddress.name,\n              repoLocation: repoAddress.location,\n              pipelineName: job.name,\n              isJob: job.isJob,\n              path: '/runs',\n            })}\n            icon=\"checklist\"\n            text=\"View all recent runs\"\n          />\n          {canLaunchPipelineReexecution.enabled ? (\n            reExecuteAllItem\n          ) : (\n            <Tooltip content={canLaunchPipelineReexecution.disabledReason} display=\"block\">\n              {reExecuteAllItem}\n            </Tooltip>\n          )}\n          {canLaunchPipelineReexecution.enabled ? (\n            reExecuteFromFailureItem\n          ) : (\n            <Tooltip content={canLaunchPipelineReexecution.disabledReason} display=\"block\">\n              {reExecuteFromFailureItem}\n            </Tooltip>\n          )}\n        </Menu>\n      }\n      position=\"bottom-right\"\n    >\n      <Button icon={<Icon name=\"expand_more\" />} />\n    </Popover>\n  );\n};\n\nconst RUN_RE_EXECUTION_QUERY = gql`\n  query RunReExecutionQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        ...RunFragment\n      }\n    }\n  }\n\n  ${RunFragments.RunFragment}\n`;\n","import {Body, Box, Colors, FontFamily, Table} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {ScheduleOrSensorTag} from '../nav/ScheduleOrSensorTag';\nimport {LegacyPipelineTag} from '../pipelines/LegacyPipelineTag';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {makeJobKey} from '../runs/QueryfulRunTimeline';\nimport {RunStatusPezList} from '../runs/RunStatusPez';\nimport {RunTimeFragment} from '../runs/types/RunTimeFragment';\nimport {ScheduleSwitchFragment} from '../schedules/types/ScheduleSwitchFragment';\nimport {SensorSwitchFragment} from '../sensors/types/SensorSwitchFragment';\nimport {repoAddressAsString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\nimport {JobMenu} from './JobMenu';\nimport {LastRunSummary} from './LastRunSummary';\nimport {NextTick} from './NextTick';\nimport {ScheduleFutureTicksFragment} from './types/ScheduleFutureTicksFragment';\n\nexport type ScheduleFragment = ScheduleSwitchFragment & ScheduleFutureTicksFragment;\n\nexport type JobItem = {\n  name: string;\n  isJob: boolean;\n  repoAddress: RepoAddress;\n  schedules: ScheduleFragment[];\n  sensors: SensorSwitchFragment[];\n};\n\nexport type JobItemWithRuns = JobItem & {\n  runs: RunTimeFragment[];\n};\n\ninterface Props {\n  jobs: JobItemWithRuns[];\n}\n\nexport const JobTable = (props: Props) => {\n  const {jobs} = props;\n  return (\n    <Table>\n      <thead>\n        <tr>\n          <th style={{width: '40%'}}>Job</th>\n          <th style={{width: '25%'}}>Trigger</th>\n          <th style={{width: '35%'}}>Latest run</th>\n          <th />\n        </tr>\n      </thead>\n      <tbody>\n        {jobs.map(({isJob, name, repoAddress, runs, schedules, sensors}) => {\n          const jobKey = makeJobKey(repoAddress, name);\n          const repoAddressString = repoAddressAsString(repoAddress);\n          return (\n            <tr key={jobKey}>\n              <td>\n                <Box\n                  flex={{\n                    direction: 'row',\n                    justifyContent: 'space-between',\n                    alignItems: 'flex-start',\n                  }}\n                >\n                  <Box flex={{direction: 'column', gap: 4}}>\n                    <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n                      <PipelineReference\n                        pipelineName={name}\n                        isJob={isJob}\n                        pipelineHrefContext={repoAddress}\n                      />\n                      {!isJob ? <LegacyPipelineTag /> : null}\n                    </Box>\n                    <Body color={Colors.Gray400} style={{fontFamily: FontFamily.monospace}}>\n                      {repoAddressString}\n                    </Body>\n                  </Box>\n                  {runs.length ? (\n                    <Box margin={{top: 4}}>\n                      <RunStatusPezList fade runs={runs} repoAddress={repoAddressString} />\n                    </Box>\n                  ) : null}\n                </Box>\n              </td>\n              <td>\n                {schedules.length || sensors.length ? (\n                  <Box flex={{direction: 'column', alignItems: 'flex-start', gap: 8}}>\n                    <ScheduleOrSensorTag\n                      schedules={schedules}\n                      sensors={sensors}\n                      repoAddress={repoAddress}\n                    />\n                    {schedules.length ? <NextTick schedules={schedules} /> : null}\n                  </Box>\n                ) : (\n                  <div style={{color: Colors.Gray500}}>None</div>\n                )}\n              </td>\n              <td>\n                {runs.length ? (\n                  <LastRunSummary run={runs[0]} />\n                ) : (\n                  <div style={{color: Colors.Gray500}}>None</div>\n                )}\n              </td>\n              <td>\n                <JobMenu job={{isJob, name, runs}} repoAddress={repoAddress} />\n              </td>\n            </tr>\n          );\n        })}\n      </tbody>\n    </Table>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Colors, CaptionMono} from '@dagster-io/ui';\nimport qs from 'qs';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {failedStatuses, inProgressStatuses} from '../runs/RunStatuses';\nimport {StepEventStatus} from '../types/globalTypes';\n\nimport {\n  StepSummaryForRunQuery,\n  StepSummaryForRunQueryVariables,\n} from './types/StepSummaryForRunQuery';\n\ninterface Props {\n  runId: string;\n}\n\nexport const StepSummaryForRun = (props: Props) => {\n  const {runId} = props;\n  const {data} = useQuery<StepSummaryForRunQuery, StepSummaryForRunQueryVariables>(\n    STEP_SUMMARY_FOR_RUN_QUERY,\n    {variables: {runId}},\n  );\n\n  const run = data?.pipelineRunOrError;\n  const status = run?.__typename === 'Run' ? run.status : null;\n\n  const relevantSteps = React.useMemo(() => {\n    if (run?.__typename !== 'Run') {\n      return [];\n    }\n\n    const {status} = run;\n    if (failedStatuses.has(status)) {\n      return run.stepStats.filter((step) => step.status === StepEventStatus.FAILURE);\n    }\n\n    if (inProgressStatuses.has(status)) {\n      return run.stepStats.filter((step) => step.status === StepEventStatus.IN_PROGRESS);\n    }\n\n    return [];\n  }, [run]);\n\n  const stepCount = relevantSteps.length;\n\n  if (!stepCount || !status) {\n    return null;\n  }\n\n  if (failedStatuses.has(status)) {\n    if (stepCount === 1) {\n      const step = relevantSteps[0];\n      const query = step.endTime\n        ? qs.stringify({focusedTime: Math.floor(step.endTime * 1000)}, {addQueryPrefix: true})\n        : '';\n      return (\n        <CaptionMono color={Colors.Gray500}>\n          Failed at <Link to={`/instance/runs/${runId}${query}`}>{step.stepKey}</Link>\n        </CaptionMono>\n      );\n    }\n    return (\n      <CaptionMono color={Colors.Gray500}>\n        Failed at <Link to={`/instance/runs/${runId}`}>{stepCount} steps</Link>\n      </CaptionMono>\n    );\n  }\n\n  if (inProgressStatuses.has(status)) {\n    if (stepCount === 1) {\n      const step = relevantSteps[0];\n      const query = step.endTime\n        ? qs.stringify({focusedTime: Math.floor(step.endTime * 1000)}, {addQueryPrefix: true})\n        : '';\n      return (\n        <CaptionMono color={Colors.Gray500}>\n          In progress at <Link to={`/instance/runs/${runId}${query}`}>{step.stepKey}</Link>\n        </CaptionMono>\n      );\n    }\n    return (\n      <CaptionMono color={Colors.Gray500}>\n        In progress at <Link to={`/instance/runs/${runId}`}>{stepCount} steps</Link>\n      </CaptionMono>\n    );\n  }\n\n  return null;\n};\n\nconst STEP_SUMMARY_FOR_RUN_QUERY = gql`\n  query StepSummaryForRunQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        stepStats {\n          endTime\n          stepKey\n          status\n        }\n      }\n    }\n  }\n`;\n","import {Box, Tag} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {RunStatusIndicator} from '../runs/RunStatusDots';\nimport {failedStatuses, inProgressStatuses} from '../runs/RunStatuses';\nimport {RunStateSummary, RunTime} from '../runs/RunUtils';\nimport {RunTimeFragment} from '../runs/types/RunTimeFragment';\nimport {RunStatus} from '../types/globalTypes';\nimport {AnchorButton} from '../ui/AnchorButton';\n\nimport {StepSummaryForRun} from './StepSummaryForRun';\n\nexport const LastRunSummary: React.FC<{run: RunTimeFragment}> = React.memo(({run}) => {\n  const {status} = run;\n\n  const intent = React.useMemo(() => {\n    switch (status) {\n      case RunStatus.SUCCESS:\n        return 'success';\n      case RunStatus.CANCELED:\n      case RunStatus.CANCELING:\n      case RunStatus.FAILURE:\n        return 'danger';\n      default:\n        return 'none';\n    }\n  }, [status]);\n\n  return (\n    <Box\n      flex={{\n        direction: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'flex-start',\n        gap: 16,\n      }}\n    >\n      <Box flex={{direction: 'column', alignItems: 'flex-start', gap: 8}}>\n        <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>\n          <Tag intent={intent}>\n            <Box flex={{direction: 'row', alignItems: 'center', gap: 4}}>\n              <RunStatusIndicator status={run.status} size={10} />\n              <RunTime run={run} />\n            </Box>\n          </Tag>\n          <RunStateSummary run={run} />\n        </Box>\n        {failedStatuses.has(run.status) || inProgressStatuses.has(run.status) ? (\n          <StepSummaryForRun runId={run.id} />\n        ) : undefined}\n      </Box>\n      <AnchorButton to={`/instance/runs/${run.id}`}>View run</AnchorButton>\n    </Box>\n  );\n});\n","import {gql} from '@apollo/client';\nimport {Colors, CaptionMono} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {InstigationStatus} from '../types/globalTypes';\n\nimport {ScheduleFutureTicksFragment} from './types/ScheduleFutureTicksFragment';\n\nconst TIME_FORMAT = {\n  showTimezone: true,\n  showSeconds: true,\n};\n\ninterface Props {\n  schedules: ScheduleFutureTicksFragment[];\n}\n\nexport const NextTick = (props: Props) => {\n  const {schedules} = props;\n\n  const nextTick = React.useMemo(() => {\n    const timestamps = schedules.map((schedule) => {\n      const {executionTimezone, futureTicks, scheduleState} = schedule;\n      if (scheduleState.status === InstigationStatus.RUNNING) {\n        return {\n          executionTimezone,\n          earliest: Math.min(...futureTicks.results.map(({timestamp}) => timestamp)),\n        };\n      }\n      return null;\n    });\n\n    return timestamps.reduce((earliestOverall, timestamp) => {\n      if (\n        !earliestOverall ||\n        (timestamp?.earliest && timestamp.earliest < earliestOverall?.earliest)\n      ) {\n        return timestamp;\n      }\n      return earliestOverall;\n    }, null);\n  }, [schedules]);\n\n  if (nextTick) {\n    return (\n      <CaptionMono color={Colors.Gray500}>\n        Next tick:{' '}\n        <TimestampDisplay\n          timestamp={nextTick.earliest}\n          timezone={nextTick.executionTimezone}\n          timeFormat={TIME_FORMAT}\n        />\n      </CaptionMono>\n    );\n  }\n\n  return null;\n};\n\nexport const SCHEDULE_FUTURE_TICKS_FRAGMENT = gql`\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(limit: 10) {\n      results {\n        timestamp\n      }\n    }\n  }\n`;\n","import {Box, Button, DialogFooter, DialogHeader, Dialog, Icon} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {RepoSelector} from '../nav/RepoSelector';\nimport {WorkspaceContext} from '../workspace/WorkspaceContext';\n\nexport const RepoFilterButton: React.FC = () => {\n  const {allRepos, visibleRepos, toggleVisible} = React.useContext(WorkspaceContext);\n  const [open, setOpen] = React.useState(false);\n  return (\n    <>\n      <Dialog\n        canOutsideClickClose\n        canEscapeKeyClose\n        isOpen={open}\n        style={{width: 'auto'}}\n        onClose={() => setOpen(false)}\n      >\n        <DialogHeader icon=\"repo\" label=\"Repositories\" />\n        <RepoSelector\n          options={allRepos}\n          onBrowse={() => setOpen(false)}\n          onToggle={toggleVisible}\n          selected={visibleRepos}\n        />\n        <DialogFooter>\n          <Box padding={{top: 8}}>\n            <Button intent=\"none\" onClick={() => setOpen(false)}>\n              Done\n            </Button>\n          </Box>\n        </DialogFooter>\n      </Dialog>\n\n      <Button\n        intent=\"none\"\n        icon={<Icon name=\"folder\" />}\n        rightIcon={<Icon name=\"expand_more\" />}\n        onClick={() => setOpen(true)}\n      >\n        {`${visibleRepos.length} of ${allRepos.length} Repositories`}\n      </Button>\n    </>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  ButtonLink,\n  Colors,\n  DialogBody,\n  DialogFooter,\n  Dialog,\n  Group,\n  Icon,\n  NonIdealState,\n  Spinner,\n  Tag,\n  Body,\n  Tooltip,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {assertUnreachable} from '../app/Util';\nimport {RunTable, RUN_TABLE_RUN_FRAGMENT} from '../runs/RunTable';\nimport {InstigationTickStatus, InstigationType} from '../types/globalTypes';\n\nimport {LaunchedRunListQuery, LaunchedRunListQueryVariables} from './types/LaunchedRunListQuery';\nimport {TickTagFragment} from './types/TickTagFragment';\n\nexport const TickTag: React.FC<{\n  tick: TickTagFragment;\n  instigationType?: InstigationType;\n}> = ({tick, instigationType}) => {\n  const [open, setOpen] = React.useState<boolean>(false);\n  switch (tick.status) {\n    case InstigationTickStatus.STARTED:\n      return <Tag>Started</Tag>;\n    case InstigationTickStatus.SUCCESS:\n      if (!tick.runIds.length) {\n        return <Tag intent=\"primary\">Requested</Tag>;\n      }\n      const tag = (\n        <>\n          <Tag intent=\"primary\" interactive>\n            <ButtonLink underline=\"never\" onClick={() => setOpen(true)}>\n              {tick.runIds.length} Requested\n            </ButtonLink>\n          </Tag>\n          <Dialog\n            isOpen={open}\n            onClose={() => setOpen(false)}\n            style={{width: '90vw'}}\n            title=\"Launched runs\"\n          >\n            <DialogBody>{open && <RunList runIds={tick.runIds} />}</DialogBody>\n            <DialogFooter>\n              <Button intent=\"primary\" onClick={() => setOpen(false)}>\n                OK\n              </Button>\n            </DialogFooter>\n          </Dialog>\n        </>\n      );\n      if (tick.runKeys.length > tick.runIds.length) {\n        const message = `${tick.runKeys.length} runs requested, but ${\n          tick.runKeys.length - tick.runIds.length\n        } skipped because the runs already exist for those requested keys.`;\n        return (\n          <Tooltip position=\"right\" content={message}>\n            {tag}\n          </Tooltip>\n        );\n      }\n      return tag;\n\n    case InstigationTickStatus.SKIPPED:\n      if (tick.runKeys.length) {\n        const message = `${tick.runKeys.length} runs requested, but skipped because the runs already exist for the requested keys.`;\n        return (\n          <Tooltip position=\"right\" content={message}>\n            <Tag intent=\"warning\">Skipped</Tag>\n          </Tooltip>\n        );\n      }\n      if (tick.skipReason) {\n        return (\n          <Tooltip position=\"right\" content={tick.skipReason} targetTagName=\"div\">\n            <Tag intent=\"warning\">Skipped</Tag>\n          </Tooltip>\n        );\n      }\n      return <Tag intent=\"warning\">Skipped</Tag>;\n    case InstigationTickStatus.FAILURE:\n      if (!tick.error) {\n        return <Tag intent=\"danger\">Failure</Tag>;\n      } else {\n        const error = tick.error;\n        const showError = () =>\n          showCustomAlert({\n            title: instigationType\n              ? instigationType === InstigationType.SCHEDULE\n                ? 'Schedule Response'\n                : 'Sensor Response'\n              : 'Python Error',\n            body: <PythonErrorInfo error={error} />,\n          });\n        return (\n          <>\n            <LinkButton onClick={showError}>\n              <Tag minimal={true} intent=\"danger\">\n                Failure\n              </Tag>\n            </LinkButton>\n            <ButtonLink onClick={showError} style={{marginLeft: 8, fontSize: 14}}>\n              View error\n            </ButtonLink>\n          </>\n        );\n      }\n    default:\n      return assertUnreachable(tick.status);\n  }\n};\n\nexport const RunList: React.FC<{\n  runIds: string[];\n}> = ({runIds}) => {\n  const {data, loading} = useQuery<LaunchedRunListQuery, LaunchedRunListQueryVariables>(\n    LAUNCHED_RUN_LIST_QUERY,\n    {\n      variables: {\n        filter: {\n          runIds,\n        },\n      },\n    },\n  );\n\n  if (loading || !data) {\n    return <Spinner purpose=\"section\" />;\n  }\n\n  if (data.pipelineRunsOrError.__typename !== 'Runs') {\n    return (\n      <NonIdealState\n        icon=\"error\"\n        title=\"Query Error\"\n        description={data.pipelineRunsOrError.message}\n      />\n    );\n  }\n  return (\n    <div>\n      <RunTable runs={data.pipelineRunsOrError.results} />\n    </div>\n  );\n};\n\nexport const FailedRunList: React.FC<{\n  originRunIds?: string[];\n}> = ({originRunIds}) => {\n  if (!originRunIds || !originRunIds.length) {\n    return null;\n  }\n  return (\n    <Group direction=\"column\" spacing={16}>\n      <Box padding={12} border={{side: 'bottom', width: 1, color: Colors.Gray200}}>\n        <Body>\n          Failed Runs\n          <Tooltip content=\"Failed runs this tick reacted on and reported back to.\">\n            <Icon name=\"info\" color={Colors.Gray500} />\n          </Tooltip>\n        </Body>\n\n        <RunList runIds={originRunIds} />\n      </Box>\n      <Box padding={12} margin={{bottom: 8}}>\n        <Body>\n          Requested Runs\n          <Tooltip content=\"Runs launched by the run requests in this tick.\">\n            <Icon name=\"info\" color={Colors.Gray500} />\n          </Tooltip>\n        </Body>\n        <NonIdealState\n          icon=\"sensors\"\n          title=\"No runs to display\"\n          description=\"This sensor does not target a pipeline or job.\"\n        />\n      </Box>\n    </Group>\n  );\n};\nconst LinkButton = styled.button`\n  background: inherit;\n  border: none;\n  cursor: pointer;\n  font-size: inherit;\n  text-decoration: none;\n  padding: 0;\n`;\n\nexport const TICK_TAG_FRAGMENT = gql`\n  fragment TickTagFragment on InstigationTick {\n    id\n    status\n    timestamp\n    skipReason\n    runIds\n    runKeys\n    error {\n      ...PythonErrorFragment\n    }\n  }\n`;\n\nconst LAUNCHED_RUN_LIST_QUERY = gql`\n  query LaunchedRunListQuery($filter: RunsFilter!) {\n    pipelineRunsOrError(filter: $filter, limit: 500) {\n      ... on PipelineRuns {\n        results {\n          ...RunTableRunFragment\n          id\n          runId\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ${RUN_TABLE_RUN_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {gql} from '@apollo/client';\nimport {Colors, Group, Mono} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {LastRunSummary} from '../instance/LastRunSummary';\nimport {RunStatusIndicator} from '../runs/RunStatusDots';\nimport {RUN_TIME_FRAGMENT, titleForRun} from '../runs/RunUtils';\n\nimport {TICK_TAG_FRAGMENT} from './InstigationTick';\nimport {InstigationStateFragment} from './types/InstigationStateFragment';\nimport {RunStatusFragment} from './types/RunStatusFragment';\n\nexport const InstigatedRunStatus: React.FC<{\n  instigationState: InstigationStateFragment;\n}> = ({instigationState}) => {\n  if (!instigationState.runs.length) {\n    return <span style={{color: Colors.Gray300}}>None</span>;\n  }\n  return <LastRunSummary run={instigationState.runs[0]} />;\n};\n\nexport const RunStatusLink: React.FC<{run: RunStatusFragment}> = ({run}) => (\n  <Group direction=\"row\" spacing={4} alignItems=\"center\">\n    <RunStatusIndicator status={run.status} />\n    <Link to={`/instance/runs/${run.runId}`} target=\"_blank\" rel=\"noreferrer\">\n      <Mono>{titleForRun({runId: run.runId})}</Mono>\n    </Link>\n  </Group>\n);\n\nexport const RUN_STATUS_FRAGMENT = gql`\n  fragment RunStatusFragment on Run {\n    id\n    runId\n    status\n  }\n`;\n\nexport const INSTIGATION_STATE_FRAGMENT = gql`\n  fragment InstigationStateFragment on InstigationState {\n    id\n    selectorId\n    name\n    instigationType\n    status\n    repositoryName\n    repositoryLocationName\n    typeSpecificData {\n      ... on SensorData {\n        lastRunKey\n        lastCursor\n      }\n      ... on ScheduleData {\n        cronSchedule\n      }\n    }\n    runs(limit: 1) {\n      id\n      ...RunStatusFragment\n      ...RunTimeFragment\n    }\n    status\n    ticks(limit: 1) {\n      id\n      cursor\n      ...TickTagFragment\n    }\n    runningCount\n  }\n  ${PYTHON_ERROR_FRAGMENT}\n  ${TICK_TAG_FRAGMENT}\n  ${RUN_STATUS_FRAGMENT}\n  ${RUN_TIME_FRAGMENT}\n`;\n\nexport const StatusTable = styled.table`\n  font-size: 13px;\n  border-spacing: 0;\n\n  &&&&& tr {\n    box-shadow: none;\n  }\n\n  &&&&& tbody > tr > td {\n    background: transparent;\n    box-shadow: none !important;\n    padding: 1px 0;\n  }\n\n  &&&&& tbody > tr > td:first-child {\n    color: ${Colors.Gray500};\n  }\n`;\n","import {useMutation} from '@apollo/client';\nimport {Alert, Box, Checkbox, Colors, Group, Table, Subheading, Tooltip} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {useConfirmation} from '../app/CustomConfirmationProvider';\nimport {usePermissions} from '../app/Permissions';\nimport {\n  displayScheduleMutationErrors,\n  STOP_SCHEDULE_MUTATION,\n} from '../schedules/ScheduleMutations';\nimport {humanCronString} from '../schedules/humanCronString';\nimport {StopSchedule, StopScheduleVariables} from '../schedules/types/StopSchedule';\nimport {displaySensorMutationErrors, STOP_SENSOR_MUTATION} from '../sensors/SensorMutations';\nimport {StopSensor, StopSensorVariables} from '../sensors/types/StopSensor';\nimport {InstigationStatus, InstigationType} from '../types/globalTypes';\nimport {InstigatorSelectorInformation} from '../workspace/RepositoryInformation';\n\nimport {TickTag} from './InstigationTick';\nimport {InstigatedRunStatus} from './InstigationUtils';\nimport {InstigationStateFragment} from './types/InstigationStateFragment';\n\nexport const UnloadableSensors: React.FC<{\n  sensorStates: InstigationStateFragment[];\n}> = ({sensorStates}) => {\n  if (!sensorStates.length) {\n    return null;\n  }\n  return (\n    <>\n      <Box padding={{top: 16, horizontal: 24}}>\n        <Subheading>Unloadable sensors</Subheading>\n        <UnloadableSensorInfo />\n      </Box>\n      <Table>\n        <thead>\n          <tr>\n            <th style={{maxWidth: '60px'}}></th>\n            <th>Sensor Name</th>\n            <th style={{width: '100px'}}>Last Tick</th>\n            <th>Last Run</th>\n          </tr>\n        </thead>\n        <tbody>\n          {sensorStates.map((sensorState) => (\n            <SensorStateRow sensorState={sensorState} key={sensorState.id} />\n          ))}\n        </tbody>\n      </Table>\n    </>\n  );\n};\n\nexport const UnloadableSchedules: React.FC<{\n  scheduleStates: InstigationStateFragment[];\n}> = ({scheduleStates}) => {\n  if (!scheduleStates.length) {\n    return null;\n  }\n  return (\n    <>\n      <Box padding={{top: 16, horizontal: 24}}>\n        <Subheading>Unloadable schedules</Subheading>\n        <UnloadableScheduleInfo />\n      </Box>\n      <Table>\n        <thead>\n          <tr>\n            <th style={{maxWidth: '60px'}}></th>\n            <th>Schedule Name</th>\n            <th style={{width: '150px'}}>Schedule</th>\n            <th style={{width: '100px'}}>Last Tick</th>\n            <th>Last Run</th>\n            <th>Partition Set Status</th>\n          </tr>\n        </thead>\n        <tbody>\n          {scheduleStates.map((scheduleState) => (\n            <ScheduleStateRow scheduleState={scheduleState} key={scheduleState.id} />\n          ))}\n        </tbody>\n      </Table>\n    </>\n  );\n};\n\nconst UnloadableSensorInfo = () => (\n  <Box margin={{vertical: 20}}>\n    <Alert\n      intent=\"warning\"\n      title={\n        <div>\n          Note: You can turn off any of the following sensors, but you cannot turn them back on.{' '}\n        </div>\n      }\n      description={\n        <div>\n          The following sensors were previously started but now cannot be loaded. They may be part\n          of a different workspace or from a sensor or repository that no longer exists in code. You\n          can turn them off, but you cannot turn them back on since they cant be loaded.\n        </div>\n      }\n    />\n  </Box>\n);\n\nconst UnloadableScheduleInfo = () => (\n  <Box margin={{vertical: 20}}>\n    <Alert\n      intent=\"warning\"\n      title={\n        <div>\n          Note: You can turn off any of the following schedules, but you cannot turn them back on.\n        </div>\n      }\n      description={\n        <div>\n          The following schedules were previously started but now cannot be loaded. They may be part\n          of a different workspace or from a schedule or repository that no longer exists in code.\n          You can turn them off, but you cannot turn them back on since they cant be loaded.\n        </div>\n      }\n    />\n  </Box>\n);\n\nconst SensorStateRow = ({sensorState}: {sensorState: InstigationStateFragment}) => {\n  const {id, selectorId, name, status, ticks} = sensorState;\n  const {canStopSensor} = usePermissions();\n\n  const [stopSensor, {loading: toggleOffInFlight}] = useMutation<StopSensor, StopSensorVariables>(\n    STOP_SENSOR_MUTATION,\n    {\n      onCompleted: displaySensorMutationErrors,\n    },\n  );\n  const confirm = useConfirmation();\n\n  const onChangeSwitch = async () => {\n    if (status === InstigationStatus.RUNNING) {\n      await confirm({\n        title: 'Are you sure you want to turn off this sensor?',\n        description:\n          'The definition for this sensor is not available. ' +\n          'If you turn it off, you will not be able to turn it back on from ' +\n          'the currently loaded workspace.',\n      });\n      stopSensor({variables: {jobOriginId: id, jobSelectorId: selectorId}});\n    }\n  };\n\n  const lacksPermission = status === InstigationStatus.RUNNING && !canStopSensor.enabled;\n  const latestTick = ticks.length ? ticks[0] : null;\n\n  const checkbox = () => {\n    const element = (\n      <Checkbox\n        format=\"switch\"\n        disabled={toggleOffInFlight || status === InstigationStatus.STOPPED || lacksPermission}\n        checked={status === InstigationStatus.RUNNING}\n        onChange={onChangeSwitch}\n      />\n    );\n    return lacksPermission ? (\n      <Tooltip content={canStopSensor.disabledReason}>{element}</Tooltip>\n    ) : (\n      element\n    );\n  };\n\n  return (\n    <tr key={name}>\n      <td style={{width: 60}}>{checkbox()}</td>\n      <td>\n        <Group direction=\"row\" spacing={8} alignItems=\"center\">\n          {name}\n        </Group>\n        <InstigatorSelectorInformation instigatorState={sensorState} />\n      </td>\n      <td>\n        {latestTick ? (\n          <TickTag tick={latestTick} instigationType={InstigationType.SENSOR} />\n        ) : (\n          <span style={{color: Colors.Gray300}}>None</span>\n        )}\n      </td>\n      <td>\n        <div style={{display: 'flex'}}>\n          <InstigatedRunStatus instigationState={sensorState} />\n        </div>\n      </td>\n    </tr>\n  );\n};\n\nconst ScheduleStateRow: React.FC<{\n  scheduleState: InstigationStateFragment;\n}> = ({scheduleState}) => {\n  const {canStopRunningSchedule} = usePermissions();\n  const [stopSchedule, {loading: toggleOffInFlight}] = useMutation<\n    StopSchedule,\n    StopScheduleVariables\n  >(STOP_SCHEDULE_MUTATION, {\n    onCompleted: displayScheduleMutationErrors,\n  });\n  const confirm = useConfirmation();\n  const {id, selectorId, name, ticks, status, typeSpecificData} = scheduleState;\n  const latestTick = ticks.length > 0 ? ticks[0] : null;\n  const cronSchedule =\n    typeSpecificData && typeSpecificData.__typename === 'ScheduleData'\n      ? typeSpecificData.cronSchedule\n      : null;\n  const onChangeSwitch = async () => {\n    if (status === InstigationStatus.RUNNING) {\n      await confirm({\n        title: 'Are you sure you want to stop this schedule?',\n        description:\n          'The definition for this schedule is not available. ' +\n          'If you turn it off, you will not be able to turn it back on from ' +\n          'the currently loaded workspace.',\n      });\n      stopSchedule({variables: {scheduleOriginId: id, scheduleSelectorId: selectorId}});\n    }\n  };\n\n  const lacksPermission = status === InstigationStatus.RUNNING && !canStopRunningSchedule.enabled;\n  const checkbox = () => {\n    const element = (\n      <Checkbox\n        format=\"switch\"\n        checked={status === InstigationStatus.RUNNING}\n        disabled={status !== InstigationStatus.RUNNING || toggleOffInFlight || lacksPermission}\n        onChange={onChangeSwitch}\n      />\n    );\n\n    return lacksPermission ? (\n      <Tooltip content={canStopRunningSchedule.disabledReason}>{element}</Tooltip>\n    ) : (\n      element\n    );\n  };\n\n  return (\n    <tr key={name}>\n      <td style={{width: 60}}>{checkbox()}</td>\n      <td>\n        <Group direction=\"row\" spacing={8} alignItems=\"center\">\n          <div>{name}</div>\n        </Group>\n        <InstigatorSelectorInformation instigatorState={scheduleState} />\n      </td>\n      <td style={{maxWidth: 150}}>\n        <div\n          style={{\n            position: 'relative',\n            width: '100%',\n            whiteSpace: 'pre-wrap',\n            display: 'block',\n          }}\n        >\n          {cronSchedule ? (\n            <Tooltip position=\"bottom\" content={cronSchedule}>\n              {humanCronString(cronSchedule)}\n            </Tooltip>\n          ) : (\n            <div>&mdash;</div>\n          )}\n        </div>\n      </td>\n      <td>\n        {latestTick ? (\n          <TickTag tick={latestTick} instigationType={InstigationType.SCHEDULE} />\n        ) : null}\n      </td>\n      <td>\n        <InstigatedRunStatus instigationState={scheduleState} />\n      </td>\n      <td>\n        <div style={{display: 'flex'}}>&mdash;</div>\n      </td>\n    </tr>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {HTMLInputProps, InputGroupProps2, Intent} from '@blueprintjs/core';\nimport {\n  Box,\n  Button,\n  Colors,\n  Icon,\n  IconWrapper,\n  MenuDivider,\n  MenuItem,\n  Menu,\n  Select,\n  Spinner,\n  Suggest,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {AppContext} from '../app/AppContext';\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {IExecutionSession} from '../app/ExecutionSessionStorage';\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\nimport {PythonErrorFragment} from '../app/types/PythonErrorFragment';\nimport {useStateWithStorage} from '../hooks/useStateWithStorage';\nimport {RepositorySelector} from '../types/globalTypes';\nimport {repoAddressAsString} from '../workspace/repoAddressAsString';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {ConfigEditorGeneratorPartitionSetsFragment_results} from './types/ConfigEditorGeneratorPartitionSetsFragment';\nimport {\n  ConfigEditorGeneratorPipelineFragment,\n  ConfigEditorGeneratorPipelineFragment_presets,\n} from './types/ConfigEditorGeneratorPipelineFragment';\nimport {\n  ConfigPartitionsQuery,\n  ConfigPartitionsQueryVariables,\n  ConfigPartitionsQuery_partitionSetOrError_PartitionSet_partitionsOrError_Partitions_results,\n} from './types/ConfigPartitionsQuery';\n\ntype Pipeline = ConfigEditorGeneratorPipelineFragment;\ntype Preset = ConfigEditorGeneratorPipelineFragment_presets;\ntype PartitionSet = ConfigEditorGeneratorPartitionSetsFragment_results;\ntype Partition = ConfigPartitionsQuery_partitionSetOrError_PartitionSet_partitionsOrError_Partitions_results;\ntype ConfigGenerator = Preset | PartitionSet;\n\ninterface ConfigEditorConfigPickerProps {\n  base: IExecutionSession['base'];\n  pipeline: Pipeline;\n  pipelineMode?: string;\n  partitionSets: PartitionSet[];\n  onSaveSession: (updates: Partial<IExecutionSession>) => void;\n  onSelectPreset: (preset: Preset) => Promise<void>;\n  onSelectPartition: (\n    repositorySelector: RepositorySelector,\n    partitionSetName: string,\n    partitionName: string,\n  ) => Promise<void>;\n  repoAddress: RepoAddress;\n}\n\nexport const ConfigEditorConfigPicker: React.FC<ConfigEditorConfigPickerProps> = (props) => {\n  const {\n    pipeline,\n    base,\n    onSaveSession,\n    onSelectPreset,\n    onSelectPartition,\n    partitionSets,\n    repoAddress,\n  } = props;\n\n  const {isJob, presets} = pipeline;\n\n  const configGenerators: ConfigGenerator[] = React.useMemo(() => {\n    const byName = (a: {name: string}, b: {name: string}) => a.name.localeCompare(b.name);\n    return [...presets, ...partitionSets].sort(byName);\n  }, [presets, partitionSets]);\n\n  const label = () => {\n    if (!base) {\n      if (presets.length && !partitionSets.length) {\n        return 'Preset';\n      }\n      if (!presets.length && partitionSets.length) {\n        return 'Partition Set';\n      }\n      return 'Preset / Partition Set';\n    }\n\n    if ('presetName' in base) {\n      return `Preset: ${base.presetName}`;\n    }\n\n    return `Partition Set: ${base.partitionsSetName}`;\n  };\n\n  const onSelect = (item: ConfigGenerator) => {\n    if (item.__typename === 'PartitionSet') {\n      onSaveSession({\n        mode: item.mode,\n        base: {\n          partitionsSetName: item.name,\n          partitionName: null,\n          tags: base ? base.tags : null,\n        },\n      });\n    } else {\n      onSelectPreset(item);\n    }\n  };\n\n  return (\n    <PickerContainer>\n      {isJob || configGenerators.length < 1 ? null : (\n        <ConfigEditorConfigGeneratorPicker\n          label={label()}\n          configGenerators={configGenerators}\n          onSelect={onSelect}\n        />\n      )}\n      {base && 'partitionsSetName' in base ? (\n        <ConfigEditorPartitionPicker\n          pipeline={pipeline}\n          partitionSetName={base.partitionsSetName}\n          value={base.partitionName}\n          onSelect={onSelectPartition}\n          repoAddress={repoAddress}\n        />\n      ) : null}\n    </PickerContainer>\n  );\n};\n\ninterface ConfigEditorPartitionPickerProps {\n  pipeline: Pipeline;\n  partitionSetName: string;\n  value: string | null;\n  onSelect: (\n    repositorySelector: RepositorySelector,\n    partitionSetName: string,\n    partitionName: string,\n  ) => void;\n  repoAddress: RepoAddress;\n}\n\nconst SORT_ORDER_KEY_BASE = 'dagit.partition-sort-order';\ntype SortOrder = 'asc' | 'desc';\n\nconst ConfigEditorPartitionPicker: React.FC<ConfigEditorPartitionPickerProps> = React.memo(\n  (props) => {\n    const {partitionSetName, value, onSelect, repoAddress} = props;\n    const {basePath} = React.useContext(AppContext);\n    const repositorySelector = repoAddressToSelector(repoAddress);\n    const {data, loading} = useQuery<ConfigPartitionsQuery, ConfigPartitionsQueryVariables>(\n      CONFIG_PARTITIONS_QUERY,\n      {\n        variables: {repositorySelector, partitionSetName},\n        fetchPolicy: 'network-only',\n      },\n    );\n\n    const sortOrderKey = `${SORT_ORDER_KEY_BASE}-${basePath}-${repoAddressAsString(\n      repoAddress,\n    )}-${partitionSetName}`;\n\n    const [sortOrder, setSortOrder] = useStateWithStorage<SortOrder>(sortOrderKey, (value: any) =>\n      value === undefined ? 'asc' : value,\n    );\n\n    const partitions: Partition[] = React.useMemo(() => {\n      const retrieved =\n        data?.partitionSetOrError.__typename === 'PartitionSet' &&\n        data?.partitionSetOrError.partitionsOrError.__typename === 'Partitions'\n          ? data.partitionSetOrError.partitionsOrError.results\n          : [];\n      return sortOrder === 'asc' ? retrieved : [...retrieved].reverse();\n    }, [data, sortOrder]);\n\n    const error: PythonErrorFragment | null =\n      data?.partitionSetOrError.__typename === 'PartitionSet' &&\n      data?.partitionSetOrError.partitionsOrError.__typename !== 'Partitions'\n        ? data.partitionSetOrError.partitionsOrError\n        : null;\n\n    const selected = partitions.find((p) => p.name === value);\n\n    const onClickSort = React.useCallback(\n      (event) => {\n        event.preventDefault();\n        setSortOrder((order) => (order === 'asc' ? 'desc' : 'asc'));\n      },\n      [setSortOrder],\n    );\n\n    const rightElement = partitions.length ? (\n      <SortButton onMouseDown={onClickSort}>\n        <Icon name=\"sort_by_alpha\" color={Colors.Gray400} />\n      </SortButton>\n    ) : undefined;\n\n    const inputProps: InputGroupProps2 & HTMLInputProps = {\n      placeholder: 'Partition',\n      style: {width: 180},\n      intent: (loading ? !!value : !!selected) ? Intent.NONE : Intent.DANGER,\n      rightElement,\n    };\n\n    // If we are loading the partitions and do NOT have any cached data to display,\n    // show the component in a loading state with a spinner and fill it with the\n    // current partition's name so it doesn't flicker (if one is set already.)\n    if (loading && partitions.length === 0) {\n      return (\n        <Suggest<string>\n          key=\"loading\"\n          inputProps={{\n            ...inputProps,\n            rightElement: !value ? (\n              <Box\n                flex={{direction: 'column', justifyContent: 'center'}}\n                padding={{right: 4}}\n                style={{height: '30px'}}\n              >\n                <Spinner purpose=\"body-text\" />\n              </Box>\n            ) : undefined,\n          }}\n          items={[]}\n          itemRenderer={() => null}\n          noResults={<MenuItem disabled={true} text=\"Loading...\" />}\n          inputValueRenderer={(str) => str}\n          selectedItem={value}\n          onItemSelect={() => {}}\n        />\n      );\n    }\n\n    if (error) {\n      showCustomAlert({\n        body: <PythonErrorInfo error={error} />,\n      });\n    }\n\n    // Note: We don't want this Suggest to be a fully \"controlled\" React component.\n    // Keeping it's state is annoyign and we only want to update our data model on\n    // selection change. However, we need to set an initial value (defaultSelectedItem)\n    // and ensure it is re-applied to the internal state when it changes (via `key` below).\n    return (\n      <Suggest<Partition>\n        key={selected ? selected.name : 'none'}\n        defaultSelectedItem={selected}\n        items={partitions}\n        inputProps={inputProps}\n        inputValueRenderer={(partition) => partition.name}\n        itemPredicate={(query, partition) => query.length === 0 || partition.name.includes(query)}\n        itemRenderer={(partition, props) => (\n          <MenuItem\n            active={props.modifiers.active}\n            onClick={props.handleClick}\n            key={partition.name}\n            text={partition.name}\n          />\n        )}\n        noResults={<MenuItem disabled={true} text=\"No presets.\" />}\n        onItemSelect={(item) => {\n          onSelect(repositorySelector, partitionSetName, item.name);\n        }}\n      />\n    );\n  },\n);\n\ninterface ConfigEditorConfigGeneratorPickerProps {\n  label: string;\n  configGenerators: ConfigGenerator[];\n  onSelect: (configGenerator: ConfigGenerator) => void;\n}\n\nconst ConfigEditorConfigGeneratorPicker: React.FC<ConfigEditorConfigGeneratorPickerProps> = React.memo(\n  (props) => {\n    const {configGenerators, label, onSelect} = props;\n    const button = React.useRef<HTMLButtonElement>(null);\n\n    return (\n      <div>\n        <ShortcutHandler\n          shortcutLabel=\"E\"\n          shortcutFilter={(e) => e.code === 'KeyE' && e.altKey}\n          onShortcut={() => button.current?.click()}\n        >\n          <Select<ConfigGenerator>\n            items={configGenerators}\n            itemPredicate={(query, configGenerator) =>\n              query.length === 0 || configGenerator.name.includes(query)\n            }\n            itemListRenderer={({itemsParentRef, renderItem, filteredItems}) => {\n              const renderedPresetItems = filteredItems\n                .filter((item) => item.__typename === 'PipelinePreset')\n                .map(renderItem)\n                .filter(Boolean);\n\n              const renderedPartitionSetItems = filteredItems\n                .filter((item) => item.__typename === 'PartitionSet')\n                .map(renderItem)\n                .filter(Boolean);\n\n              const bothTypesPresent =\n                renderedPresetItems.length > 0 && renderedPartitionSetItems.length > 0;\n\n              return (\n                <Menu ulRef={itemsParentRef}>\n                  {bothTypesPresent && <MenuItem disabled={true} text=\"Presets\" />}\n                  {renderedPresetItems}\n                  {bothTypesPresent && <MenuDivider />}\n                  {bothTypesPresent && <MenuItem disabled={true} text=\"Partition Sets\" />}\n                  {renderedPartitionSetItems}\n                </Menu>\n              );\n            }}\n            itemRenderer={(item, props) => (\n              <MenuItem\n                active={props.modifiers.active}\n                onClick={props.handleClick}\n                key={item.name}\n                text={\n                  <div>\n                    {item.name}\n                    <div style={{opacity: 0.4, fontSize: '0.75rem'}}>\n                      {[\n                        item.solidSelection\n                          ? item.solidSelection.length === 1\n                            ? `Ops: ${item.solidSelection[0]}`\n                            : `Ops: ${item.solidSelection.length}`\n                          : `Ops: All`,\n                        `Mode: ${item.mode}`,\n                      ].join(' - ')}\n                    </div>\n                  </div>\n                }\n              />\n            )}\n            noResults={<MenuItem disabled={true} text=\"No presets.\" />}\n            onItemSelect={onSelect}\n          >\n            <Button\n              ref={button}\n              data-test-id=\"preset-selector-button\"\n              rightIcon={<Icon name=\"expand_more\" />}\n            >\n              {label}\n            </Button>\n          </Select>\n        </ShortcutHandler>\n      </div>\n    );\n  },\n);\n\nconst SortButton = styled.button`\n  border: 0;\n  cursor: pointer;\n  padding: 4px;\n  margin: 3px 3px 0 0;\n  background-color: ${Colors.White};\n  border-radius: 4px;\n  transition: background-color 100ms;\n\n  :hover,\n  :focus {\n    background-color: ${Colors.Gray100};\n    outline: none;\n\n    ${IconWrapper} {\n      background-color: ${Colors.Gray700};\n    }\n  }\n`;\n\nconst PickerContainer = styled.div`\n  display: flex;\n  justify: space-between;\n  align-items: center;\n  gap: 6px;\n`;\n\nexport const CONFIG_EDITOR_GENERATOR_PIPELINE_FRAGMENT = gql`\n  fragment ConfigEditorGeneratorPipelineFragment on Pipeline {\n    id\n    isJob\n    name\n    presets {\n      __typename\n      name\n      mode\n      solidSelection\n      runConfigYaml\n      tags {\n        key\n        value\n      }\n    }\n    tags {\n      key\n      value\n    }\n  }\n`;\n\nexport const CONFIG_EDITOR_GENERATOR_PARTITION_SETS_FRAGMENT = gql`\n  fragment ConfigEditorGeneratorPartitionSetsFragment on PartitionSets {\n    results {\n      id\n      name\n      mode\n      solidSelection\n    }\n  }\n`;\n\nconst CONFIG_PARTITIONS_QUERY = gql`\n  query ConfigPartitionsQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partitionsOrError {\n          ... on Partitions {\n            results {\n              name\n            }\n          }\n          ...PythonErrorFragment\n        }\n      }\n    }\n  }\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nexport const CONFIG_PARTITION_SELECTION_QUERY = gql`\n  query ConfigPartitionSelectionQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n    $partitionName: String!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partition(partitionName: $partitionName) {\n          name\n          solidSelection\n          runConfigOrError {\n            ... on PartitionRunConfig {\n              yaml\n            }\n            ...PythonErrorFragment\n          }\n          mode\n          tagsOrError {\n            ... on PartitionTags {\n              results {\n                key\n                value\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n    }\n  }\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {\n  Button,\n  Colors,\n  Icon,\n  IconName,\n  Menu,\n  MenuItem,\n  Popover,\n  Spinner,\n  Tooltip,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {useConfirmation} from '../app/CustomConfirmationProvider';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\n\nexport interface LaunchButtonConfiguration {\n  title: string;\n  disabled: boolean;\n  warning?: React.ReactNode;\n  scope?: string;\n  onClick: () => Promise<any>;\n  icon?: IconName | JSX.Element | 'dagster-spinner';\n  tooltip?: string | JSX.Element;\n}\n\nenum LaunchButtonStatus {\n  Ready = 'ready',\n  Starting = 'starting',\n  Disabled = 'disabled',\n}\n\nfunction useLaunchButtonCommonState({runCount, disabled}: {runCount: number; disabled: boolean}) {\n  const [starting, setStarting] = React.useState(false);\n\n  const onConfigSelected = async (option: LaunchButtonConfiguration) => {\n    setStarting(true);\n    await option.onClick();\n    setStarting(false);\n  };\n\n  let forced: Partial<LaunchButtonConfiguration> = {};\n  let status = disabled ? LaunchButtonStatus.Disabled : LaunchButtonStatus.Ready;\n\n  if (starting) {\n    status = LaunchButtonStatus.Starting;\n    forced = {\n      title: runCount === 1 ? 'Submitting run' : `Submitting ${runCount} runs`,\n      disabled: true,\n      icon: 'dagster-spinner',\n    };\n  }\n\n  return {\n    forced,\n    status,\n    onConfigSelected,\n  };\n}\n\ninterface LaunchButtonProps {\n  config: LaunchButtonConfiguration;\n  runCount: number;\n}\n\nexport const LaunchButton = ({config, runCount}: LaunchButtonProps) => {\n  const {forced, status, onConfigSelected} = useLaunchButtonCommonState({\n    runCount,\n    disabled: config.disabled,\n  });\n  const onClick = () => {\n    status === LaunchButtonStatus.Ready && onConfigSelected(config);\n  };\n  return (\n    <ShortcutHandler\n      onShortcut={onClick}\n      shortcutLabel=\"L\"\n      shortcutFilter={(e) => e.code === 'KeyL' && e.altKey}\n    >\n      <ButtonWithConfiguration\n        status={status}\n        {...config}\n        {...forced}\n        onClick={onClick}\n        disabled={status === 'disabled'}\n      />\n    </ShortcutHandler>\n  );\n};\n\ninterface LaunchButtonDropdownProps {\n  title: string;\n  primary: LaunchButtonConfiguration;\n  options: LaunchButtonConfiguration[];\n  disabled?: boolean;\n  tooltip?: string | JSX.Element;\n  icon?: IconName | undefined;\n  runCount: number;\n}\n\nexport const LaunchButtonDropdown = ({\n  title,\n  primary,\n  options,\n  disabled,\n  icon,\n  tooltip,\n  runCount,\n}: LaunchButtonDropdownProps) => {\n  const [isOpen, setIsOpen] = React.useState(false);\n  const allOptionsDisabled = options.every((d) => d.disabled);\n  const {forced, status, onConfigSelected} = useLaunchButtonCommonState({\n    runCount,\n    disabled: disabled || allOptionsDisabled,\n  });\n  const popoverDisabled = status === LaunchButtonStatus.Disabled;\n\n  return (\n    <ShortcutHandler\n      onShortcut={() => onConfigSelected(primary)}\n      shortcutLabel=\"L\"\n      shortcutFilter={(e) => e.code === 'KeyL' && e.altKey}\n    >\n      <ButtonWithConfiguration\n        status={status}\n        title={title}\n        joined=\"right\"\n        icon={icon}\n        tooltip={tooltip}\n        onClick={() => onConfigSelected(primary)}\n        disabled={!!disabled}\n        {...forced}\n      />\n      <Popover\n        isOpen={isOpen}\n        onInteraction={(nextOpen) => setIsOpen(nextOpen)}\n        disabled={popoverDisabled}\n        position=\"bottom-right\"\n        content={\n          <Menu>\n            {options.map((option, idx) => (\n              <Tooltip\n                key={idx}\n                hoverOpenDelay={300}\n                position=\"left\"\n                openOnTargetFocus={false}\n                targetTagName=\"div\"\n                content={option.tooltip || ''}\n              >\n                <LaunchMenuItem\n                  text={option.title}\n                  disabled={option.disabled}\n                  onClick={() => onConfigSelected(option)}\n                  icon={option.icon !== 'dagster-spinner' ? option.icon : undefined}\n                />\n              </Tooltip>\n            ))}\n          </Menu>\n        }\n      >\n        <ButtonContainer\n          role=\"button\"\n          status={status}\n          style={{minWidth: 'initial'}}\n          icon={<Icon name=\"arrow_drop_down\" />}\n          intent=\"primary\"\n          joined=\"left\"\n          disabled={popoverDisabled}\n        />\n      </Popover>\n    </ShortcutHandler>\n  );\n};\n\ninterface ButtonWithConfigurationProps {\n  title: string;\n  warning?: React.ReactNode;\n  status: LaunchButtonStatus;\n  style?: React.CSSProperties;\n  icon?: IconName | JSX.Element | 'dagster-spinner';\n  joined?: 'left' | 'right';\n  tooltip?: string | JSX.Element;\n  onClick?: () => void;\n  disabled?: boolean;\n}\n\n// Basic helper components\n\nconst ButtonWithConfiguration: React.FC<ButtonWithConfigurationProps> = ({\n  tooltip,\n  icon,\n  title,\n  warning,\n  status,\n  style,\n  onClick,\n  joined,\n  disabled,\n}) => {\n  const confirm = useConfirmation();\n\n  const onClickWithWarning = async () => {\n    if (!onClick || disabled) {\n      return;\n    }\n    if (warning) {\n      try {\n        await confirm({title: 'Are you sure?', description: warning});\n      } catch {\n        return;\n      }\n    }\n    onClick();\n  };\n\n  return (\n    <Tooltip position=\"left\" openOnTargetFocus={false} targetTagName=\"div\" content={tooltip || ''}>\n      <ButtonContainer\n        role=\"button\"\n        intent=\"primary\"\n        style={{...style}}\n        status={status}\n        onClick={onClickWithWarning}\n        joined={joined}\n        disabled={disabled}\n        icon={\n          icon === 'dagster-spinner' ? (\n            <Spinner purpose=\"body-text\" fillColor={Colors.White} />\n          ) : typeof icon === 'string' ? (\n            <Icon name={icon} size={16} style={{textAlign: 'center', marginRight: 5}} />\n          ) : (\n            icon\n          )\n        }\n      >\n        <MaxwidthText>{title}</MaxwidthText>\n      </ButtonContainer>\n    </Tooltip>\n  );\n};\n\nconst ButtonContainer = styled(Button)<{\n  status: LaunchButtonStatus;\n  joined?: 'right' | 'left';\n}>`\n  border-top-${({joined}) => joined}-radius: 0;\n  border-bottom-${({joined}) => joined}-radius: 0;\n  border-left: ${({joined}) =>\n    joined === 'left' ? `1px solid rgba(255,255,255,0.2)` : 'transparent'};\n  cursor: ${({status}) => (status !== 'ready' ? 'normal' : 'pointer')};\n  margin-left: ${({joined}) => (joined ? '0' : '6px')};\n  ${({joined}) => (joined === 'right' ? 'padding-right: 8px;' : null)}\n`;\n\nconst MaxwidthText = styled.div`\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  max-width: 350px;\n`;\n\nconst LaunchMenuItem = styled(MenuItem)`\n  max-width: 200px;\n`;\n","import {useMutation} from '@apollo/client';\nimport * as React from 'react';\nimport {useHistory} from 'react-router';\n\nimport {IconName} from '../../../ui/src';\nimport {usePermissions} from '../app/Permissions';\nimport {TelemetryAction, useTelemetryAction} from '../app/Telemetry';\nimport {\n  LAUNCH_PIPELINE_EXECUTION_MUTATION,\n  handleLaunchResult,\n  LaunchBehavior,\n} from '../runs/RunUtils';\nimport {\n  LaunchPipelineExecution,\n  LaunchPipelineExecutionVariables,\n} from '../runs/types/LaunchPipelineExecution';\n\nimport {LaunchButton} from './LaunchButton';\nimport {showLaunchError} from './showLaunchError';\n\ninterface LaunchRootExecutionButtonProps {\n  disabled: boolean;\n  warning?: React.ReactNode;\n  getVariables: () => undefined | LaunchPipelineExecutionVariables;\n  behavior: LaunchBehavior;\n  pipelineName: string;\n  title?: string;\n  icon?: IconName;\n}\n\nexport function useLaunchWithTelemetry() {\n  const {canLaunchPipelineExecution} = usePermissions();\n  const [launchPipelineExecution] = useMutation<\n    LaunchPipelineExecution,\n    LaunchPipelineExecutionVariables\n  >(LAUNCH_PIPELINE_EXECUTION_MUTATION);\n  const logTelemetry = useTelemetryAction();\n  const history = useHistory();\n\n  return React.useCallback(\n    async (variables: LaunchPipelineExecutionVariables, behavior: LaunchBehavior) => {\n      const jobName =\n        variables.executionParams.selector.jobName ||\n        variables.executionParams.selector.pipelineName;\n\n      if (!canLaunchPipelineExecution.enabled || !jobName) {\n        return;\n      }\n      const metadata: {[key: string]: string | null | undefined} = {\n        jobName,\n        opSelection: variables.executionParams.selector.solidSelection ? 'provided' : undefined,\n      };\n\n      const result = await launchPipelineExecution({variables});\n      logTelemetry(TelemetryAction.LAUNCH_RUN, metadata);\n      try {\n        handleLaunchResult(jobName, result, history, {behavior});\n      } catch (error) {\n        showLaunchError(error as Error);\n      }\n\n      return result.data;\n    },\n    [canLaunchPipelineExecution, history, launchPipelineExecution, logTelemetry],\n  );\n}\n\nexport const LaunchRootExecutionButton: React.FC<LaunchRootExecutionButtonProps> = (props) => {\n  const launchWithTelemetry = useLaunchWithTelemetry();\n  const {canLaunchPipelineExecution} = usePermissions();\n\n  const onLaunch = async () => {\n    const variables = props.getVariables();\n    if (variables == null) {\n      return;\n    }\n    await launchWithTelemetry(variables, props.behavior);\n  };\n\n  return (\n    <LaunchButton\n      runCount={1}\n      config={{\n        onClick: onLaunch,\n        icon: props.icon || 'open_in_new',\n        title: props.title || 'Launch Run',\n        warning: props.warning || undefined,\n        disabled: props.disabled || !canLaunchPipelineExecution.enabled,\n        tooltip: !canLaunchPipelineExecution.enabled\n          ? canLaunchPipelineExecution.disabledReason\n          : undefined,\n      }}\n    />\n  );\n};\n","import * as React from 'react';\n\nimport {\n  createSingleSession,\n  IExecutionSession,\n  IExecutionSessionChanges,\n} from '../app/ExecutionSessionStorage';\nimport {RepoAddress} from '../workspace/types';\n\nimport {LaunchpadType} from './LaunchpadRoot';\nimport LaunchpadSession from './LaunchpadSession';\nimport {LaunchpadSessionPartitionSetsFragment} from './types/LaunchpadSessionPartitionSetsFragment';\nimport {LaunchpadSessionPipelineFragment} from './types/LaunchpadSessionPipelineFragment';\n\ninterface Props {\n  launchpadType: LaunchpadType;\n  pipeline: LaunchpadSessionPipelineFragment;\n  partitionSets: LaunchpadSessionPartitionSetsFragment;\n  repoAddress: RepoAddress;\n  sessionPresets: Partial<IExecutionSession>;\n}\n\nexport const LaunchpadTransientSessionContainer = (props: Props) => {\n  const {launchpadType, pipeline, partitionSets, repoAddress, sessionPresets} = props;\n\n  const initialSessionComplete = createSingleSession(sessionPresets);\n  const [session, setSession] = React.useState<IExecutionSession>(initialSessionComplete);\n\n  const onSaveSession = (changes: IExecutionSessionChanges) => {\n    const newSession = {...session, ...changes};\n    setSession(newSession);\n  };\n\n  return (\n    <LaunchpadSession\n      launchpadType={launchpadType}\n      session={session}\n      onSave={onSaveSession}\n      pipeline={pipeline}\n      partitionSets={partitionSets}\n      repoAddress={repoAddress}\n    />\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Dialog, DialogHeader} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Redirect, useParams} from 'react-router-dom';\n\nimport {IExecutionSession} from '../app/ExecutionSessionStorage';\nimport {usePermissions} from '../app/Permissions';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {useTrackPageView} from '../app/analytics';\nimport {explorerPathFromString, useStripSnapshotFromPath} from '../pipelines/PipelinePathUtils';\nimport {useJobTitle} from '../pipelines/useJobTitle';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  CONFIG_EDITOR_GENERATOR_PARTITION_SETS_FRAGMENT,\n  CONFIG_EDITOR_GENERATOR_PIPELINE_FRAGMENT,\n} from './ConfigEditorConfigPicker';\nimport {LaunchpadSessionError} from './LaunchpadSessionError';\nimport {LaunchpadSessionLoading} from './LaunchpadSessionLoading';\nimport {LaunchpadTransientSessionContainer} from './LaunchpadTransientSessionContainer';\nimport {LaunchpadRootQuery, LaunchpadRootQueryVariables} from './types/LaunchpadRootQuery';\n\nconst LaunchpadStoredSessionsContainer = React.lazy(\n  () => import('./LaunchpadStoredSessionsContainer'),\n);\n\nexport type LaunchpadType = 'asset' | 'job';\n\n// ########################\n// ##### LAUNCHPAD ROOTS\n// ########################\n\nexport const AssetLaunchpad: React.FC<{\n  repoAddress: RepoAddress;\n  sessionPresets?: Partial<IExecutionSession>;\n  assetJobName: string;\n  open: boolean;\n  setOpen: (open: boolean) => void;\n}> = ({repoAddress, sessionPresets, assetJobName, open, setOpen}) => {\n  const title = 'Launchpad (configure assets)';\n\n  return (\n    <Dialog\n      style={{height: '90vh', width: '80%'}}\n      isOpen={open}\n      canEscapeKeyClose={true}\n      canOutsideClickClose={true}\n      onClose={() => setOpen(false)}\n    >\n      <DialogHeader icon=\"layers\" label={title} />\n      <LaunchpadAllowedRoot\n        launchpadType=\"asset\"\n        pipelinePath={assetJobName}\n        repoAddress={repoAddress}\n        sessionPresets={sessionPresets}\n      />\n    </Dialog>\n  );\n};\n\nexport const JobLaunchpad: React.FC<{repoAddress: RepoAddress}> = (props) => {\n  const {repoAddress} = props;\n  const {pipelinePath, repoPath} = useParams<{repoPath: string; pipelinePath: string}>();\n  const {canLaunchPipelineExecution} = usePermissions();\n\n  if (!canLaunchPipelineExecution.enabled) {\n    return <Redirect to={`/workspace/${repoPath}/pipeline_or_job/${pipelinePath}`} />;\n  }\n\n  return (\n    <LaunchpadAllowedRoot\n      launchpadType=\"job\"\n      pipelinePath={pipelinePath}\n      repoAddress={repoAddress}\n    />\n  );\n};\n\n// ########################\n// ##### LAUNCHPAD ALLOWED ROOT\n// ########################\n\ninterface Props {\n  launchpadType: LaunchpadType;\n  pipelinePath: string;\n  repoAddress: RepoAddress;\n  sessionPresets?: Partial<IExecutionSession>;\n}\n\nconst LaunchpadAllowedRoot: React.FC<Props> = (props) => {\n  useTrackPageView();\n\n  const {pipelinePath, repoAddress, launchpadType, sessionPresets} = props;\n  const explorerPath = explorerPathFromString(pipelinePath);\n  const {pipelineName} = explorerPath;\n\n  const repo = useRepository(repoAddress);\n  const isJob = isThisThingAJob(repo, pipelineName);\n\n  useJobTitle(explorerPath, isJob);\n  useStripSnapshotFromPath(props);\n\n  const {name: repositoryName, location: repositoryLocationName} = repoAddress;\n\n  const result = useQuery<LaunchpadRootQuery, LaunchpadRootQueryVariables>(\n    PIPELINE_EXECUTION_ROOT_QUERY,\n    {\n      variables: {repositoryName, repositoryLocationName, pipelineName},\n      fetchPolicy: 'cache-and-network',\n      partialRefetch: true,\n    },\n  );\n\n  const pipelineOrError = result?.data?.pipelineOrError;\n  const partitionSetsOrError = result?.data?.partitionSetsOrError;\n\n  if (!pipelineOrError || !partitionSetsOrError) {\n    return <LaunchpadSessionLoading />;\n  }\n\n  if (\n    partitionSetsOrError.__typename === 'PipelineNotFoundError' ||\n    pipelineOrError.__typename === 'PipelineNotFoundError'\n  ) {\n    const message =\n      pipelineOrError.__typename === 'PipelineNotFoundError'\n        ? pipelineOrError.message\n        : 'No data returned from GraphQL';\n\n    return pipelineName !== '' ? (\n      <LaunchpadSessionError\n        icon=\"error\"\n        title={isJob ? 'Job not found' : 'Pipeline not found'}\n        description={message}\n      />\n    ) : (\n      <LaunchpadSessionError\n        icon=\"no-results\"\n        title={isJob ? 'Select a job' : 'Select a pipeline'}\n        description={message}\n      />\n    );\n  }\n\n  if (pipelineOrError.__typename === 'InvalidSubsetError') {\n    throw new Error(`Should never happen because we do not request a subset`);\n  }\n\n  if (pipelineOrError.__typename === 'PythonError') {\n    return (\n      <LaunchpadSessionError\n        icon=\"error\"\n        title=\"Python Error\"\n        description={pipelineOrError.message}\n      />\n    );\n  }\n  if (partitionSetsOrError && partitionSetsOrError.__typename === 'PythonError') {\n    return (\n      <LaunchpadSessionError\n        icon=\"error\"\n        title=\"Python Error\"\n        description={partitionSetsOrError.message}\n      />\n    );\n  }\n\n  if (launchpadType === 'asset') {\n    return (\n      <LaunchpadTransientSessionContainer\n        launchpadType={launchpadType}\n        pipeline={pipelineOrError}\n        partitionSets={partitionSetsOrError}\n        repoAddress={repoAddress}\n        sessionPresets={sessionPresets || {}}\n      />\n    );\n  } else {\n    // job\n    return (\n      <React.Suspense fallback={<div />}>\n        <LaunchpadStoredSessionsContainer\n          launchpadType={launchpadType}\n          pipeline={pipelineOrError}\n          partitionSets={partitionSetsOrError}\n          repoAddress={repoAddress}\n        />\n      </React.Suspense>\n    );\n  }\n};\n\nconst EXECUTION_SESSION_CONTAINER_PIPELINE_FRAGMENT = gql`\n  fragment LaunchpadSessionPipelineFragment on Pipeline {\n    id\n    isJob\n    ...ConfigEditorGeneratorPipelineFragment\n    modes {\n      id\n      name\n      description\n    }\n  }\n  ${CONFIG_EDITOR_GENERATOR_PIPELINE_FRAGMENT}\n`;\n\nconst EXECUTION_SESSION_CONTAINER_PARTITION_SETS_FRAGMENT = gql`\n  fragment LaunchpadSessionPartitionSetsFragment on PartitionSets {\n    ...ConfigEditorGeneratorPartitionSetsFragment\n  }\n  ${CONFIG_EDITOR_GENERATOR_PARTITION_SETS_FRAGMENT}\n`;\n\nconst PIPELINE_EXECUTION_ROOT_QUERY = gql`\n  query LaunchpadRootQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    pipelineOrError(\n      params: {\n        pipelineName: $pipelineName\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n      ... on Pipeline {\n        id\n        ...LaunchpadSessionPipelineFragment\n      }\n    }\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      __typename\n      ...LaunchpadSessionPartitionSetsFragment\n      ... on PipelineNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${EXECUTION_SESSION_CONTAINER_PIPELINE_FRAGMENT}\n  ${EXECUTION_SESSION_CONTAINER_PARTITION_SETS_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","// Patched lint mode that won't constantly lint\nimport CodeMirror from 'codemirror';\n\nconst GUTTER_ID = 'CodeMirror-lint-markers';\n\nfunction showTooltip(e, content, node) {\n  const tt = document.createElement('div');\n  const nodeRect = node.getBoundingClientRect();\n\n  tt.className = 'CodeMirror-lint-tooltip';\n  tt.appendChild(content.cloneNode(true));\n  document.body.appendChild(tt);\n  if (nodeRect.top > tt.clientHeight) {\n    // position on the top\n    tt.style.top = nodeRect.top - tt.clientHeight - 5 + 'px';\n    tt.style.left = nodeRect.left + 5 + 'px';\n  } else {\n    // positon on the right if top would be off-screen\n    tt.style.top = nodeRect.top + 5 + 'px';\n    tt.style.left = nodeRect.right + 10 + 'px';\n  }\n  if (tt.style.opacity != null) {\n    tt.style.opacity = 1;\n  }\n  return tt;\n}\nfunction rm(elt) {\n  if (elt.parentNode) {\n    elt.parentNode.removeChild(elt);\n  }\n}\nfunction hideTooltip(tt) {\n  if (!tt.parentNode) {\n    return;\n  }\n  if (tt.style.opacity == null) {\n    rm(tt);\n  }\n  tt.style.opacity = 0;\n  setTimeout(function () {\n    rm(tt);\n  }, 600);\n}\n\nfunction showTooltipFor(e, content, node) {\n  let tooltip = showTooltip(e, content, node);\n  function hide() {\n    CodeMirror.off(node, 'mouseout', hide);\n    if (tooltip) {\n      hideTooltip(tooltip);\n      tooltip = null;\n    }\n  }\n  const poll = setInterval(function () {\n    if (tooltip) {\n      for (let n = node; ; n = n.parentNode) {\n        if (n && n.nodeType === 11) {\n          n = n.host;\n        }\n        if (n === document.body) {\n          return;\n        }\n        if (!n) {\n          hide();\n          break;\n        }\n      }\n    }\n    if (!tooltip) {\n      return clearInterval(poll);\n    }\n  }, 400);\n  CodeMirror.on(node, 'mouseout', hide);\n}\n\nfunction parseOptions(_cm, options) {\n  if (options instanceof Function) {\n    return {getAnnotations: options};\n  }\n  if (!options || options === true) {\n    options = {};\n  }\n  return options;\n}\n\nfunction clearMarks(cm) {\n  const state = cm.state.lint;\n  if (state.hasGutter) {\n    cm.clearGutter(GUTTER_ID);\n  }\n  for (let i = 0; i < state.marked.length; ++i) {\n    state.marked[i].clear();\n  }\n  state.marked.length = 0;\n}\n\nfunction makeMarker(labels, severity, multiple, tooltips) {\n  const marker = document.createElement('div');\n  let inner = marker;\n  marker.className = 'CodeMirror-lint-marker CodeMirror-lint-marker-' + severity;\n  if (multiple) {\n    inner = marker.appendChild(document.createElement('div'));\n    inner.className = 'CodeMirror-lint-marker CodeMirror-lint-marker-multiple';\n  }\n\n  if (tooltips !== false) {\n    CodeMirror.on(inner, 'mouseover', function (e) {\n      showTooltipFor(e, labels, inner);\n    });\n  }\n  return marker;\n}\n\nfunction getMaxSeverity(a, b) {\n  if (a === 'error') {\n    return a;\n  } else {\n    return b;\n  }\n}\n\nfunction groupByLine(annotations) {\n  const lines = [];\n  for (let i = 0; i < annotations.length; ++i) {\n    const ann = annotations[i],\n      line = ann.from.line;\n    (lines[line] || (lines[line] = [])).push(ann);\n  }\n  return lines;\n}\n\nfunction annotationTooltip(ann) {\n  let severity = ann.severity;\n  if (!severity) {\n    severity = 'error';\n  }\n  const tip = document.createElement('div');\n  tip.className = 'CodeMirror-lint-message CodeMirror-lint-message-' + severity;\n  if (typeof ann.messageHTML !== 'undefined') {\n    tip.innerHTML = ann.messageHTML;\n  } else {\n    tip.appendChild(document.createTextNode(ann.message));\n  }\n  return tip;\n}\n\nfunction updateLinting(cm, annotationsNotSorted) {\n  clearMarks(cm);\n  const state = cm.state.lint,\n    options = state.options;\n\n  const annotations = groupByLine(annotationsNotSorted);\n\n  for (let line = 0; line < annotations.length; ++line) {\n    const anns = annotations[line];\n    if (!anns) {\n      continue;\n    }\n\n    let maxSeverity = null;\n    const tipLabel = state.hasGutter && document.createDocumentFragment();\n\n    for (let i = 0; i < anns.length; ++i) {\n      let ann = anns[i];\n      let severity = ann.severity;\n      if (!severity) {\n        severity = 'error';\n      }\n      maxSeverity = getMaxSeverity(maxSeverity, severity);\n\n      if (options.formatAnnotation) {\n        ann = options.formatAnnotation(ann);\n      }\n      if (state.hasGutter) {\n        tipLabel.appendChild(annotationTooltip(ann));\n      }\n\n      if (ann.to) {\n        state.marked.push(\n          cm.markText(ann.from, ann.to, {\n            className: 'CodeMirror-lint-mark CodeMirror-lint-mark-' + severity,\n            __annotation: ann,\n          }),\n        );\n      }\n    }\n\n    if (state.hasGutter) {\n      cm.setGutterMarker(\n        line,\n        GUTTER_ID,\n        makeMarker(tipLabel, maxSeverity, anns.length > 1, state.options.tooltips),\n      );\n    }\n  }\n  if (options.onUpdateLinting) {\n    options.onUpdateLinting(annotationsNotSorted, annotations, cm);\n  }\n}\n\nfunction lintAsync(cm, getAnnotations, passOptions) {\n  const state = cm.state.lint;\n  let id = ++state.waitingFor;\n  function abort() {\n    id = -1;\n    cm.off('change', abort);\n  }\n  cm.on('change', abort);\n  getAnnotations(\n    cm.getValue(),\n    function (annotations, arg2) {\n      cm.off('change', abort);\n      if (state.waitingFor !== id) {\n        return;\n      }\n      if (arg2 && annotations instanceof CodeMirror) {\n        annotations = arg2;\n      }\n      cm.operation(function () {\n        updateLinting(cm, annotations);\n      });\n    },\n    passOptions,\n    cm,\n  );\n}\n\nfunction startLinting(cm) {\n  const state = cm.state.lint,\n    options = state.options;\n  /*\n   * Passing rules in `options` property prevents JSHint (and other linters) from complaining\n   * about unrecognized rules like `onUpdateLinting`, `delay`, `lintOnChange`, etc.\n   */\n  const passOptions = options.options || options;\n  const getAnnotations = options.getAnnotations || cm.getHelper(CodeMirror.Pos(0, 0), 'lint');\n  if (!getAnnotations) {\n    return;\n  }\n  if (options.async || getAnnotations.async) {\n    lintAsync(cm, getAnnotations, passOptions);\n  } else {\n    const annotations = getAnnotations(cm.getValue(), passOptions, cm);\n    if (!annotations) {\n      return;\n    }\n    if (annotations.then) {\n      annotations.then(function (issues) {\n        cm.operation(function () {\n          updateLinting(cm, issues);\n        });\n      });\n    } else {\n      cm.operation(function () {\n        updateLinting(cm, annotations);\n      });\n    }\n  }\n}\n\nfunction onChange(cm) {\n  const state = cm.state.lint;\n  if (!state) {\n    return;\n  }\n  clearTimeout(state.timeout);\n  state.timeout = setTimeout(function () {\n    startLinting(cm);\n  }, state.options.delay || 500);\n}\n\nfunction popupTooltip(docs, annotations, e) {\n  const target = e.target || e.srcElement;\n\n  const tooltip = document.createDocumentFragment();\n\n  if (docs) {\n    const docsEl = document.createElement('div');\n    docsEl.textContent = docs;\n    tooltip.appendChild(docsEl);\n    if (annotations.length) {\n      docsEl.style.paddingBottom = '4px';\n      docsEl.style.marginBottom = '4px';\n      docsEl.style.borderBottom = '1px solid rgba(0,0,0,0.25)';\n    }\n  }\n\n  for (let i = 0; i < annotations.length; i++) {\n    const ann = annotations[i];\n    tooltip.appendChild(annotationTooltip(ann));\n  }\n  showTooltipFor(e, tooltip, target);\n}\n\nfunction onMouseOver(cm, e) {\n  const target = e.target || e.srcElement;\n  const box = target.getBoundingClientRect(),\n    x = (box.left + box.right) / 2,\n    y = (box.top + box.bottom) / 2;\n  const pos = cm.coordsChar({left: x, top: y}, 'client');\n  const spans = cm.findMarksAt(pos);\n\n  const getDocs = cm.getHelper(CodeMirror.Pos(0, 0), 'dagster-docs');\n  const docs = getDocs(cm, pos);\n\n  const annotations = [];\n  for (let i = 0; i < spans.length; ++i) {\n    const ann = spans[i].__annotation;\n    if (ann) {\n      annotations.push(ann);\n    }\n  }\n\n  if (docs || annotations.length) {\n    popupTooltip(docs, annotations, e);\n  }\n}\n\nfunction LintState(cm, options, hasGutter) {\n  this.marked = [];\n  this.options = options;\n  this.timeout = null;\n  this.hasGutter = hasGutter;\n  this.onMouseOver = function (e) {\n    onMouseOver(cm, e);\n  };\n  this.waitingFor = 0;\n}\n\nexport const patchLint = () => {\n  CodeMirror.defineOption('lint', false, function (cm, val, old) {\n    if (old && old !== CodeMirror.Init) {\n      clearMarks(cm);\n      if (cm.state.lint.options.lintOnChange !== false) {\n        cm.off('change', onChange);\n      }\n      CodeMirror.off(cm.getWrapperElement(), 'mouseover', cm.state.lint.onMouseOver);\n      clearTimeout(cm.state.lint.timeout);\n      delete cm.state.lint;\n    }\n\n    if (val) {\n      const gutters = cm.getOption('gutters');\n      let hasLintGutter = false;\n      for (let i = 0; i < gutters.length; ++i) {\n        if (gutters[i] === GUTTER_ID) {\n          hasLintGutter = true;\n        }\n      }\n      const state = (cm.state.lint = new LintState(cm, parseOptions(cm, val), hasLintGutter));\n      if (state.options.lintOnChange !== false) {\n        cm.on('change', onChange);\n      }\n      if (state.options.tooltips !== false && state.options.tooltips !== 'gutter') {\n        CodeMirror.on(cm.getWrapperElement(), 'mouseover', state.onMouseOver);\n      }\n    }\n  });\n\n  CodeMirror.defineExtension('performLint', function () {\n    if (this.state.lint) {\n      startLinting(this);\n    }\n  });\n};\n","import * as CodeMirror from 'codemirror';\nimport 'codemirror/addon/hint/show-hint';\nimport 'codemirror/addon/search/search';\nimport 'codemirror/addon/search/searchcursor';\nimport 'codemirror/addon/dialog/dialog';\nimport 'codemirror/addon/dialog/dialog.css';\nimport * as yaml from 'yaml';\n\nimport {\n  ConfigSchema,\n  ConfigSchema_allConfigTypes_CompositeConfigType as CompositeConfigType,\n  ConfigSchema_allConfigTypes_MapConfigType as MapConfigType,\n} from '../types/ConfigSchema';\n\n// Example YAML for testing this parser:\n// https://gist.github.com/bengotow/0b700e7d0367750cb31eaf697f865d70\n\ninterface IParseStateParent {\n  key: string;\n  indent: number;\n  childKeys: string[];\n}\n\nenum ContainerType {\n  Dict = 'dict',\n  List = 'list',\n}\n\ninterface IParseState {\n  trailingSpace: boolean;\n  inlineContainers: ContainerType[];\n  escaped: boolean;\n  inValue: boolean;\n  inBlockLiteral: boolean;\n  inBlockLiteralIndentation: number;\n  parents: IParseStateParent[];\n}\n\n// Helper methods that mutate parser state. These must return new JavaScript objects.\n//\nfunction parentsPoppingItemsDeeperThan(parents: IParseStateParent[], indent: number) {\n  while (parents.length > 0 && parents[parents.length - 1]!.indent >= indent) {\n    parents = parents.slice(0, parents.length - 1);\n  }\n  return parents;\n}\n\nfunction parentsAddingChildKeyToLast(parents: IParseStateParent[], key: string) {\n  if (parents.length === 0) {\n    return [];\n  }\n\n  const immediateParent = parents[parents.length - 1]!;\n  return [\n    ...parents.slice(0, parents.length - 1),\n    {\n      key: immediateParent.key,\n      indent: immediateParent.indent,\n      childKeys: [...immediateParent.childKeys, key],\n    },\n  ];\n}\n\nconst indentMark = (col: number) => {\n  switch (col % 14) {\n    case 0:\n      return 'zero';\n    case 2:\n      return 'one';\n    case 4:\n      return 'two';\n    case 6:\n      return 'three';\n    case 8:\n      return 'four';\n    case 10:\n      return 'five';\n    case 12:\n      return 'six';\n    default:\n      return '';\n  }\n};\n\nfunction parentsAddingChildKeyAtIndent(parents: IParseStateParent[], key: string, indent: number) {\n  parents = parentsPoppingItemsDeeperThan(parents, indent);\n  parents = parentsAddingChildKeyToLast(parents, key);\n  parents = [...parents, {key, indent, childKeys: []}];\n  return parents;\n}\n\nconst Constants = ['true', 'false', 'on', 'off', 'yes', 'no'];\n\nexport const RegExps = {\n  KEYWORD: new RegExp('\\\\b((' + Constants.join(')|(') + '))$', 'i'),\n  DICT_COLON: /^:\\s*/,\n  // eslint-disable-next-line no-useless-escape\n  DICT_KEY: /^\\s*(?:[,\\[\\]{}&*!|>'\"%@`][^\\s'\":]|[^,\\[\\]{}#&*!|>'\"%@`])[^# ,]*?(?=\\s*:)/,\n  // eslint-disable-next-line no-useless-escape\n  QUOTED_STRING: /^('([^']|\\\\.)*'?|\"([^\"\\\\]|\\\\.)*\"?)/,\n  // eslint-disable-next-line no-useless-escape\n  BLOCKSTART_PIPE_OR_ARROW: /^\\s*(\\||\\>)\\s*/,\n  // eslint-disable-next-line no-useless-escape\n  NUMBER: /^\\s*-?[0-9\\.]+(?![0-9\\.]+)$/,\n  // eslint-disable-next-line no-useless-escape\n  VARIABLE: /^\\s*(\\&|\\*)[a-z0-9\\._-]+$/i,\n};\n\nCodeMirror.defineMode('yaml', () => {\n  return {\n    lineComment: '#',\n    flattenSpans: false,\n    fold: 'indent',\n    startState: (): IParseState => {\n      return {\n        trailingSpace: false,\n        escaped: false,\n        inValue: false,\n        inBlockLiteral: false,\n        inBlockLiteralIndentation: 0,\n        inlineContainers: [],\n        parents: [],\n      };\n    },\n    token: (stream, state: IParseState) => {\n      const ch = stream.peek();\n      const col = stream.column();\n\n      // reset escape, indent and trailing\n      const wasEscaped = state.escaped;\n      const wasTrailingSpace = state.trailingSpace;\n      state.escaped = false;\n      state.trailingSpace = false;\n\n      // indent\n      if (col % 2 === 0 && ch === ' ' && stream.match(/  /)) {\n        state.trailingSpace = true;\n        return `indent ${indentMark(col)}`;\n      }\n\n      // whitespace\n      const trailingSpace = stream.eatSpace();\n      if (trailingSpace) {\n        state.trailingSpace = true;\n      }\n\n      // escape\n      if (ch === '\\\\') {\n        state.escaped = true;\n        stream.next();\n        return null;\n      }\n\n      // comments\n      // either beginning of the line or had whitespace before\n      if (ch === '#' && (stream.sol() || wasTrailingSpace)) {\n        stream.skipToEnd();\n        return 'comment';\n      }\n\n      if (state.inBlockLiteral) {\n        // continuation of a literal string that was started on a previous line\n        if (stream.indentation() > state.inBlockLiteralIndentation) {\n          stream.skipToEnd();\n          return 'string';\n        }\n        state.inBlockLiteralIndentation = 0;\n        state.inBlockLiteral = false;\n      }\n\n      // array list item, value to follow\n      if (stream.match(/-/)) {\n        state.inValue = true;\n        return 'meta';\n      }\n\n      // doc start / end\n      if (stream.sol()) {\n        state.inValue = false;\n        state.parents = [];\n\n        if (stream.match(/---/) || stream.match(/\\.\\.\\./)) {\n          return 'def';\n        }\n      }\n\n      // Handle inline objects and arrays. These can be nested arbitrarily but we\n      // don't currently support them spanning multiple lines.\n      if (stream.match(/^(\\{|\\}|\\[|\\])/)) {\n        if (ch === '{') {\n          state.inlineContainers = [...state.inlineContainers, ContainerType.Dict];\n          state.inValue = false;\n        } else if (ch === '}') {\n          state.inlineContainers = state.inlineContainers.slice(\n            0,\n            state.inlineContainers.length - 1,\n          );\n          state.parents = state.parents.slice(0, state.parents.length - 1);\n          state.inValue = state.inlineContainers.length > 0;\n        } else if (ch === '[') {\n          state.inlineContainers = [...state.inlineContainers, ContainerType.List];\n          state.inValue = true;\n        } else if (ch === ']') {\n          state.inlineContainers = state.inlineContainers.slice(\n            0,\n            state.inlineContainers.length - 1,\n          );\n          state.inValue = state.inlineContainers.length > 0;\n        }\n        state.trailingSpace = false;\n        return 'meta';\n      }\n\n      // Handle inline separators. For dictionaries, we pop from value parsing state back to\n      // key parsing state after a comma and unwind the parent stack.\n      if (state.inlineContainers && !wasEscaped && ch === ',') {\n        const current = state.inlineContainers[state.inlineContainers.length - 1];\n        if (current === ContainerType.Dict) {\n          state.parents = state.parents.slice(0, state.parents.length - 1);\n          state.inValue = false;\n        }\n        stream.next();\n        return 'meta';\n      }\n\n      // A `:` fragment starts value parsing mode if it is not the last character on the line\n      if (stream.match(RegExps.DICT_COLON)) {\n        state.inValue = !stream.eol();\n        return 'meta';\n      }\n\n      // Handle dict key fragments. May be the first element on a line or nested within an inline\n      // (eg: {a: 1, b: 2}). We add the new key to the current `parent` and push a new parent\n      // in case the dict key has subkeys.\n      if (!state.inValue) {\n        const match = stream.match(RegExps.DICT_KEY);\n        if (match) {\n          const key = match[0]!;\n          const keyIndent = stream.pos - key.length;\n          state.parents = parentsAddingChildKeyAtIndent(state.parents, key, keyIndent);\n          return 'atom';\n        }\n      }\n\n      if (state.inValue) {\n        let result = null;\n\n        // Child dicts can start within a value if the user is creating a list, but we don't want to\n        // clasifiy \"my\" as a sub-dict in \"- my:weird:key\". As a balance we require that the colon\n        // be followed by the end-of-line or whitespace.\n        const match = !stream.string.match(/[^\\s]:[^\\s]/) ? stream.match(RegExps.DICT_KEY) : false;\n        if (match) {\n          const key = match[0]!;\n          const keyIndent = stream.pos - key.length;\n          state.inValue = false;\n          state.parents = parentsAddingChildKeyAtIndent(state.parents, key, keyIndent);\n          result = 'atom';\n        }\n\n        if (stream.match(RegExps.BLOCKSTART_PIPE_OR_ARROW)) {\n          state.inBlockLiteralIndentation = stream.indentation();\n          state.inBlockLiteral = true;\n          result = 'meta';\n        }\n\n        if (!result) {\n          // First, read any value that is a quoted string until we reach the end quote.\n          let match = stream.match(RegExps.QUOTED_STRING);\n          if (!match) {\n            // If the value is not a string in quotes, read until a separator (,) or container closing character,\n            // then we'll decide what to do with it.\n            const parentContainer = state.inlineContainers[state.inlineContainers.length - 1];\n            match =\n              parentContainer === ContainerType.List\n                ? stream.match(/^[^,\\]]+/)\n                : parentContainer === ContainerType.Dict\n                ? stream.match(/^[^,\\}]+/)\n                : stream.match(/^.+$/);\n          }\n          const value = match ? match[0]! : '';\n          if (value.match(RegExps.VARIABLE)) {\n            result = 'variable-2';\n          } else if (value.match(RegExps.NUMBER)) {\n            result = 'number';\n          } else if (value.match(RegExps.KEYWORD)) {\n            result = 'keyword';\n          } else {\n            // \"In YAML, you can write a string without quotes, if it doesn't have a special meaning.\",\n            // so if we can't match the content to any other type and we are inValue, we make it a string.\n            // http://blogs.perl.org/users/tinita/2018/03/strings-in-yaml---to-quote-or-not-to-quote.html\n            result = 'string';\n          }\n        }\n\n        // If after consuming the value and trailing spaces we're at the end of the\n        // line, terminate the value and look for another key on the following line.\n        if (stream.eol() && !state.inBlockLiteral) {\n          state.inValue = false;\n        }\n\n        return result;\n      }\n\n      stream.skipToEnd();\n\n      return null;\n    },\n  };\n});\n\n// TODO\n// Uniquity of keys\n// add colon\n// add colon and return for composites\n\ntype CodemirrorLocation = {\n  line: number;\n  ch: number;\n};\n\ntype CodemirrorHint = {\n  render: (el: Element, self: any, data: any) => void;\n  text: string;\n  from: CodemirrorLocation;\n  to: CodemirrorLocation;\n};\n\ntype CodemirrorToken = CodeMirror.Token & {\n  state: IParseState;\n};\n\nCodeMirror.registerHelper(\n  'hint',\n  'yaml',\n  (\n    editor: any,\n    options: {\n      schema?: ConfigSchema;\n    },\n  ): {list: Array<CodemirrorHint>; from: CodemirrorLocation; to: CodemirrorLocation} => {\n    const {\n      cursor,\n      context,\n      token,\n      start,\n      searchString,\n      prevToken,\n    } = expandAutocompletionContextAtCursor(editor);\n\n    const from = {line: cursor.line, ch: start};\n    const to = {line: cursor.line, ch: token.end};\n\n    if (!options.schema) {\n      return {list: [], from, to};\n    }\n\n    if (!context) {\n      return {list: [], from, to};\n    }\n\n    // Since writing meaningful tests for this functionality is difficult given a) no jsdom\n    // support for APIs that codemirror uses (and so no way to use snapshot tests) and b) no\n    // appetite (yet) for writing Selenium tests, we record here the manual tests used to verify\n    // this logic. In what follows, | represents the position of the cursor and -> the transition\n    // on accepting an autocomplete suggestion for `storage: filesystem:\n\n    // st|\n    // ->\n    // storage:\n    //   |\n\n    // storage:|\n    // ->\n    // storage:\n    //   filesystem:\n    //     |\n\n    // storage: |\n    // ->\n    // storage:\n    //   filesystem:\n    //     |\n\n    // storage:  |\n    // ->\n    // storage:\n    //   filesystem:\n    //     |\n\n    // storage:\n    //   |\n    // ->\n    // storage:\n    //   filesystem:\n    //     |\n\n    const isCompOrList = (key: string): boolean => {\n      if (!options.schema) {\n        return false;\n      }\n      // Using a lookup table here seems like a good idea\n      // https://github.com/dagster-io/dagster/issues/1966\n      let type = options.schema.allConfigTypes.find((t) => t.key === key);\n      if (!type) {\n        return false;\n      }\n\n      // If nullable, extract the inner type.\n      if (type.__typename === 'NullableConfigType') {\n        const innerKey = type.typeParamKeys[0];\n        type = options.schema.allConfigTypes.find((t) => t.key === innerKey);\n        if (!type) {\n          return false;\n        }\n      }\n\n      return (\n        type.__typename === 'ArrayConfigType' ||\n        type.__typename === 'CompositeConfigType' ||\n        type.__typename === 'MapConfigType'\n      );\n    };\n\n    const formatReplacement = (\n      field: any,\n      start: any,\n      token: CodemirrorToken,\n      prevToken: CodemirrorToken,\n      inList: boolean,\n    ) => {\n      let replacement = `${field.name}`;\n      let postReplacementIndentation = start;\n\n      const listMarkerPresent = prevToken.string === ' ' || prevToken.string === '-';\n      if (inList && !listMarkerPresent) {\n        replacement = `- ${replacement}`;\n        postReplacementIndentation += 2;\n      }\n\n      const cursorAtColon = token.string.startsWith(':');\n      if (cursorAtColon) {\n        const nextLineIndent = prevToken.start + 2;\n        replacement = `\\n${' '.repeat(nextLineIndent)}${replacement}`;\n        postReplacementIndentation = nextLineIndent;\n      }\n\n      const completionHasChildren = isCompOrList(field.configTypeKey);\n      if (completionHasChildren) {\n        replacement += `:\\n${' '.repeat(postReplacementIndentation + 2)}`;\n      } else {\n        replacement += ': ';\n      }\n\n      return replacement;\n    };\n\n    const buildSuggestion = (\n      display: string,\n      replacement: string,\n      description: string | null,\n    ): CodemirrorHint => ({\n      text: replacement,\n      render: (el) => {\n        const div = document.createElement('div');\n        div.textContent = display;\n        if (description) {\n          const docs = document.createElement('div');\n          docs.innerText =\n            description.length < 90 ? description : description.substr(0, 87) + '...';\n          docs.style.opacity = '0.5';\n          docs.style.overflow = 'hidden';\n          docs.style.maxHeight = '33px';\n          docs.style.maxWidth = '360px';\n          docs.style.whiteSpace = 'normal';\n          div.appendChild(docs);\n        }\n        el.appendChild(div);\n      },\n      from,\n      to,\n    });\n\n    // Calculate if this is on a new-line child of a scalar union type, as an indication that we\n    // should autocomplete the selector fields of the scalar union\n    const isScalarUnionNewLine =\n      context.type.__typename === 'ScalarUnionConfigType' && !prevToken.end;\n\n    // The context will have available fields if the type is a composite config type OR a scalar\n    // union type\n    if (\n      context.availableFields.length &&\n      (context.type.__typename === 'CompositeConfigType' || isScalarUnionNewLine)\n    ) {\n      return {\n        list: context.availableFields\n          .filter((field) => field.name.startsWith(searchString))\n          .map((field) =>\n            buildSuggestion(\n              field.name,\n              formatReplacement(field, start, token, prevToken, context.inArray),\n              field.description,\n            ),\n          ),\n        from,\n        to,\n      };\n    }\n\n    // Completion of enum field values\n    if (context.type.__typename === 'EnumConfigType') {\n      const searchWithoutQuotes = searchString.startsWith('\"')\n        ? searchString.substr(1)\n        : searchString;\n      return {\n        list: context.type.values\n          .filter((val) => val.value.startsWith(searchWithoutQuotes))\n          .map((val) => buildSuggestion(val.value, `\"${val.value}\"`, null)),\n        from,\n        to,\n      };\n    }\n\n    // Completion of boolean field values\n    if (context.type.__typename === 'RegularConfigType' && context.type.givenName === 'Bool') {\n      return {\n        list: ['True', 'False']\n          .filter((val) => val.startsWith(searchString))\n          .map((val) => buildSuggestion(val, val, null)),\n        from,\n        to,\n      };\n    }\n\n    // Completion of Scalar Union field values, the union of the scalar suggestions and the\n    // non-scalar suggestions\n    const type = context.type;\n    if (type.__typename === 'ScalarUnionConfigType') {\n      const scalarType = options.schema.allConfigTypes.find((x) => x.key === type.scalarTypeKey);\n      const nonScalarType = options.schema.allConfigTypes.find(\n        (x) => x.key === type.nonScalarTypeKey,\n      );\n      let scalarSuggestions: CodemirrorHint[] = [];\n      if (\n        scalarType &&\n        scalarType.__typename === 'RegularConfigType' &&\n        scalarType.givenName === 'Bool'\n      ) {\n        scalarSuggestions = ['True', 'False']\n          .filter((val) => val.startsWith(searchString))\n          .map((val) => buildSuggestion(val, val, null));\n      }\n      let nonScalarSuggestions: CodemirrorHint[] = [];\n      if (nonScalarType && nonScalarType.__typename === 'CompositeConfigType') {\n        nonScalarSuggestions = nonScalarType.fields\n          .filter((field) => field.name.startsWith(searchString))\n          .map((field) =>\n            buildSuggestion(\n              field.name,\n              formatReplacement(field, start, token, prevToken, false),\n              field.description,\n            ),\n          );\n      }\n\n      return {list: [...scalarSuggestions, ...nonScalarSuggestions], from, to};\n    }\n\n    return {list: [], from, to};\n  },\n);\n\n/** Takes the pipeline schema and the YAML tokenizer state and returns the\n * type in scope and available (yet-to-be-used) fields\n * if it is a composite type.\n */\nfunction findAutocompletionContext(\n  schema: ConfigSchema | null,\n  parents: IParseStateParent[],\n  currentIndent: number,\n) {\n  parents = parents.filter(({indent}) => currentIndent > indent);\n  const immediateParent = parents[parents.length - 1];\n\n  if (!schema) {\n    // Schema may still be loading\n    return;\n  }\n\n  // We only provide autocompletion if the root type is a Map or a composite (Shape)\n  let type = schema.allConfigTypes.find((t) => t.key === schema.rootConfigType.key);\n  if (!type || (type.__typename !== 'CompositeConfigType' && type.__typename !== 'MapConfigType')) {\n    return null;\n  }\n\n  let available = type.__typename === 'CompositeConfigType' ? type.fields : [];\n\n  // Tracks the nearest mapping type (Shape, Map, etc.) in the hierarchy to the cursor\n  // This is what's rendered in the schema sidebar\n  let closestMappingType: MapConfigType | CompositeConfigType = type;\n  let inArray = false;\n\n  // Tracks the type key to be used for the next depth level\n  // Used for Map config types, which specify the type key for their values, otherwise is null\n  let nextTypeKey: string | null =\n    type.__typename === 'MapConfigType' ? type.typeParamKeys[1]! : null;\n\n  if ((available || type.__typename === 'MapConfigType') && parents.length > 0) {\n    for (const parent of parents) {\n      // In order to provide completion, we must either have type information on hand (parentTypeDef)\n      // for the current key that we are in, or we must have the type info provided by an enclosing Map (nextTypeKey)\n      const parentTypeDef = available.find(({name}) => parent.key === name);\n      if (!parentTypeDef && !nextTypeKey) {\n        return null;\n      }\n\n      // The current composite type's available \"fields\" each only have a configType key.\n      // The rest of the configType's information is in the top level schema.allConfigTypes\n      // to avoid superlinear GraphQL response size.\n      const typeKey = nextTypeKey ? nextTypeKey : parentTypeDef?.configTypeKey;\n      nextTypeKey = null;\n\n      let parentConfigType = schema.allConfigTypes.find((t) => t.key === typeKey)!;\n\n      // If nullable, extract the inner type.\n      if (parentConfigType.__typename === 'NullableConfigType') {\n        const innerType = parentConfigType.typeParamKeys[0];\n        parentConfigType = schema.allConfigTypes.find((t) => t.key === innerType)!;\n      }\n\n      let childTypeKey = parentConfigType.key;\n      let childEntriesUnique = true;\n\n      inArray = parentConfigType.__typename === 'ArrayConfigType';\n      if (inArray) {\n        childTypeKey = parentConfigType.typeParamKeys[0]!;\n        childEntriesUnique = false;\n      }\n\n      // Maps provide no direct autocompletions, but they do act as the closestMappingType,\n      // meaning they show up in the schema sidebar\n      if (parentConfigType.__typename === 'MapConfigType') {\n        nextTypeKey = parentConfigType.typeParamKeys[1]!;\n        closestMappingType = parentConfigType;\n        available = [];\n        continue;\n      }\n\n      type = schema.allConfigTypes.find((t) => t.key === childTypeKey);\n      if (!type) {\n        return null;\n      }\n\n      if (type.__typename === 'ScalarUnionConfigType') {\n        available = [];\n        const nonScalarTypeKey = type.nonScalarTypeKey;\n        const nonScalarType = schema.allConfigTypes.find((x) => x.key === nonScalarTypeKey);\n        if (nonScalarType && nonScalarType.__typename === 'CompositeConfigType') {\n          available = nonScalarType.fields;\n        }\n      } else if (type.__typename === 'CompositeConfigType') {\n        closestMappingType = type;\n        available = type.fields;\n\n        if (parent === immediateParent && childEntriesUnique) {\n          available = available.filter(\n            (item) => immediateParent.childKeys.indexOf(item.name) === -1,\n          );\n        }\n      } else {\n        available = [];\n      }\n    }\n  }\n\n  return {type, closestMappingType, availableFields: available, inArray};\n}\n\n// Find context for a fully- or partially- typed key or value in the YAML document\nexport function expandAutocompletionContextAtCursor(editor: any) {\n  const schema: ConfigSchema = editor.options.hintOptions.schema;\n\n  const cursor = editor.getCursor();\n  const token: CodemirrorToken = editor.getTokenAt(cursor);\n  const prevToken: CodemirrorToken = editor.getTokenAt({\n    line: cursor.line,\n    ch: token.start,\n  });\n\n  let searchString: string;\n  let start: number;\n  if (token.type === 'whitespace' || token.string.startsWith(':')) {\n    searchString = '';\n    start = token.end;\n  } else {\n    searchString = token.string;\n    start = token.start;\n  }\n\n  // Takes the schema and the YAML tokenizer state and returns the\n  // type in scope and available (yet-to-be-used) fields\n  // if it is a composite type.\n  return {\n    start,\n    cursor,\n    searchString,\n    token,\n    prevToken,\n    context: findAutocompletionContext(schema, token.state.parents, start),\n  };\n}\n\ntype CodemirrorLintError = {\n  message: string;\n  severity: 'error' | 'warning' | 'information' | 'hint';\n  type: 'validation' | 'syntax' | 'deprecation';\n  from: CodemirrorLocation;\n  to: CodemirrorLocation;\n};\n\nexport type YamlModeValidationResult =\n  | {\n      isValid: true;\n    }\n  | {\n      isValid: false;\n      errors: YamlModeValidationError[];\n    };\n\nexport type YamlModeValidateFunction = (configYaml: string) => Promise<YamlModeValidationResult>;\n\nexport type YamlModeValidationError = {\n  message: string;\n  path: string[];\n  reason: string;\n};\n\nCodeMirror.registerHelper('dagster-docs', 'yaml', (editor: any, pos: CodeMirror.Position) => {\n  const token = editor.getTokenAt(pos);\n\n  const schema: ConfigSchema = editor.options.hintOptions.schema;\n\n  if (token.type !== 'atom') {\n    return null;\n  }\n\n  const context = findAutocompletionContext(schema, token.state.parents, token.start);\n  const match =\n    context &&\n    context.type.__typename === 'CompositeConfigType' &&\n    context.type.fields.find((f) => f.name === token.string);\n\n  if (match && match.description) {\n    return match.description;\n  }\n\n  return null;\n});\n\nCodeMirror.registerHelper(\n  'lint',\n  'yaml',\n  async (\n    text: string,\n    {checkConfig}: {checkConfig: YamlModeValidateFunction},\n    editor: any,\n  ): Promise<Array<CodemirrorLintError>> => {\n    const codeMirrorDoc = editor.getDoc();\n\n    // TODO: In some scenarios where every line yields an error `parseDocument` can take 1s+\n    // and returns 20,000+ errors. The library does not have a \"bail out\" option but we need one.\n    // However we can't switch libraries because we need the structured document model this returns.\n    // (It's not just text parsed to plain JS objects.)\n    const yamlDoc = yaml.parseDocument(text);\n    const lints: Array<CodemirrorLintError> = [];\n    const lintingTruncated = yamlDoc.errors.length > 10;\n    let lastMarkLocation: CodeMirror.Position | undefined;\n\n    yamlDoc.errors.slice(0, 10).forEach((error) => {\n      const [fromPos, toPos] = error.pos;\n      const from = codeMirrorDoc.posFromIndex(fromPos) as CodeMirror.Position;\n      const to = codeMirrorDoc.posFromIndex(toPos) as CodeMirror.Position;\n\n      if (!lastMarkLocation || lastMarkLocation.line < from.line) {\n        lastMarkLocation = from;\n      }\n\n      lints.push({\n        message: error.message,\n        severity: 'error',\n        type: 'syntax',\n        from,\n        to,\n      });\n    });\n\n    if (lintingTruncated && lastMarkLocation) {\n      const nextLineLocation: CodeMirror.Position = {\n        line: lastMarkLocation.line + 1,\n        ch: 0,\n      };\n      lints.push({\n        message: `${yamlDoc.errors.length - lints.length} more errors - bailed out.`,\n        severity: 'warning',\n        type: 'syntax',\n        from: nextLineLocation,\n        to: nextLineLocation,\n      });\n    }\n\n    if (yamlDoc.errors.length === 0) {\n      const validationResult = await checkConfig(text);\n      if (!validationResult.isValid) {\n        validationResult.errors.forEach((error) => {\n          const lint = validationErrorToCodemirrorError(error, yamlDoc, codeMirrorDoc);\n          if (lint) {\n            lints.push(lint);\n          }\n        });\n      }\n    }\n\n    return lints;\n  },\n);\n\nexport function validationErrorToCodemirrorError(\n  error: YamlModeValidationError,\n  yamlDoc: yaml.Document,\n  codeMirrorDoc: any,\n): CodemirrorLintError | null {\n  const part = error.reason === 'RUNTIME_TYPE_MISMATCH' ? 'value' : 'key';\n  const range = findRangeInDocumentFromPath(yamlDoc, error.path, part);\n  if (range === null) {\n    return null;\n  }\n  return {\n    message: error.message,\n    severity: 'error',\n    type: 'syntax',\n    from: codeMirrorDoc.posFromIndex(range ? range.start : 0) as CodeMirror.Position,\n    to: codeMirrorDoc.posFromIndex(\n      range ? range.end : Number.MAX_SAFE_INTEGER,\n    ) as CodeMirror.Position,\n  };\n}\n\nexport function findRangeInDocumentFromPath(\n  doc: yaml.Document,\n  path: Array<string>,\n  pathPart: 'key' | 'value',\n): {start: number; end: number} | null {\n  let node = nodeAtPath(doc, path);\n  if (!node || !('type' in node)) {\n    return null;\n  }\n\n  if (node.type === 'PAIR') {\n    if (pathPart === 'value' && node.value) {\n      node = node.value;\n    } else {\n      node = node.key;\n    }\n  }\n\n  if (node && node.range) {\n    return {\n      start: node.range[0],\n      end: node.range[1],\n    };\n  } else {\n    return null;\n  }\n}\n\nfunction nodeAtPath(doc: yaml.Document, path: Array<string>) {\n  let node: any = doc.contents;\n  for (let i = 0; i < path.length; i++) {\n    const part = path[i]!;\n    if (node && node.type && node.type === 'PAIR') {\n      node = node.value;\n    }\n\n    if (node && node.type && (node.type === 'SEQ' || node.type === 'FLOW_SEQ')) {\n      const index = Number.parseInt(part);\n      if (!Number.isNaN(index)) {\n        node = node.items[index];\n      } else {\n        return null;\n      }\n    } else if (node && node.type && (node.type === 'FLOW_MAP' || node.type === 'MAP')) {\n      const item = node.items.find(({key}: {key: any}) => key.value === part);\n      if (item && item.type && item.type === 'PAIR') {\n        node = item;\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  return node;\n}\n","import 'codemirror/addon/comment/comment';\nimport 'codemirror/addon/dialog/dialog';\nimport 'codemirror/addon/fold/foldgutter';\nimport 'codemirror/addon/fold/foldgutter.css';\nimport 'codemirror/addon/fold/indent-fold';\nimport 'codemirror/addon/hint/show-hint';\nimport 'codemirror/addon/hint/show-hint.css';\nimport 'codemirror/addon/lint/lint.css';\nimport 'codemirror/addon/search/jump-to-line';\nimport 'codemirror/addon/search/search';\nimport 'codemirror/addon/search/searchcursor';\nimport 'codemirror/keymap/sublime';\n\nimport {Editor} from 'codemirror';\nimport debounce from 'lodash/debounce';\nimport * as React from 'react';\nimport {createGlobalStyle} from 'styled-components/macro';\nimport * as yaml from 'yaml';\n\nimport {StyledCodeMirror} from './CodeMirror';\nimport {patchLint} from './configeditor/codemirror-yaml/lint';\nimport {\n  YamlModeValidateFunction,\n  expandAutocompletionContextAtCursor,\n  findRangeInDocumentFromPath,\n  YamlModeValidationResult,\n} from './configeditor/codemirror-yaml/mode'; // eslint-disable-line import/no-duplicates\nimport {ConfigEditorHelpContext} from './configeditor/types/ConfigEditorHelpContext';\nimport {ConfigSchema} from './configeditor/types/ConfigSchema';\n\nexport {isHelpContextEqual} from './configeditor/isHelpContextEqual';\nexport {ConfigEditorHelp} from './configeditor/ConfigEditorHelp';\n\nexport type {ConfigEditorHelpContext, ConfigSchema, YamlModeValidationResult};\n\npatchLint();\n\ninterface ConfigEditorProps {\n  configCode: string;\n  readOnly: boolean;\n  configSchema?: ConfigSchema | null;\n\n  checkConfig: YamlModeValidateFunction;\n  onConfigChange: (newValue: string) => void;\n  onHelpContextChange: (helpContext: ConfigEditorHelpContext | null) => void;\n}\n\nconst AUTO_COMPLETE_AFTER_KEY = /^[a-zA-Z0-9_@(]$/;\nconst performLint = debounce((editor: any) => {\n  editor.performLint();\n}, 1000);\n\nconst ConfigEditorStyle = createGlobalStyle`\n  .react-codemirror2 .CodeMirror.cm-s-config-editor {\n    height: initial;\n    position: absolute;\n    inset: 0;\n  }\n`;\n\nexport class ConfigEditor extends React.Component<ConfigEditorProps> {\n  _editor?: Editor;\n\n  componentDidUpdate(prevProps: ConfigEditorProps) {\n    if (!this._editor) {\n      return;\n    }\n    if (prevProps.configSchema === this.props.configSchema) {\n      return;\n    }\n    this.performInitialPass();\n  }\n\n  shouldComponentUpdate(prevProps: ConfigEditorProps) {\n    // Unfortunately, updates to the ConfigEditor clear the linter highlighting for\n    // unknown reasons and they're recalculated asynchronously. To prevent flickering,\n    // only update if our input has meaningfully changed.\n    return (\n      prevProps.configCode !== this.props.configCode ||\n      prevProps.readOnly !== this.props.readOnly ||\n      prevProps.configSchema !== this.props.configSchema\n    );\n  }\n\n  // Public API\n\n  moveCursor = (line: number, ch: number) => {\n    if (!this._editor) {\n      return;\n    }\n    this._editor.setCursor(line, ch, {scroll: false});\n    const {clientHeight} = this._editor.getScrollInfo();\n    const {left, top} = this._editor.cursorCoords(true, 'local');\n    const offsetFromTop = 20;\n\n    this._editor?.scrollIntoView({\n      left,\n      right: left,\n      top: top - offsetFromTop,\n      bottom: top + (clientHeight - offsetFromTop),\n    });\n    this._editor.focus();\n  };\n\n  moveCursorToPath = (path: string[]) => {\n    if (!this._editor) {\n      return;\n    }\n    const codeMirrorDoc = this._editor.getDoc();\n    const yamlDoc = yaml.parseDocument(this.props.configCode);\n    const range = findRangeInDocumentFromPath(yamlDoc, path, 'key');\n    if (!range) {\n      return;\n    }\n    const from = codeMirrorDoc.posFromIndex(range ? range.start : 0) as CodeMirror.Position;\n    this.moveCursor(from.line, from.ch);\n  };\n\n  // End Public API\n\n  performInitialPass() {\n    // update the gutter and redlining\n    performLint(this._editor);\n\n    // update the contextual help based on the configSchema and content\n    const {context} = expandAutocompletionContextAtCursor(this._editor);\n    this.props.onHelpContextChange(context ? {type: context.closestMappingType} : null);\n  }\n\n  render() {\n    // Unfortunately, CodeMirror is too intense to be simulated in the JSDOM \"virtual\" DOM.\n    // Until we run tests against something like selenium, trying to render the editor in\n    // tests have to stop here.\n    if (process.env.NODE_ENV === 'test') {\n      return <span />;\n    }\n\n    return (\n      <div style={{flex: 1, position: 'relative'}}>\n        <ConfigEditorStyle />\n        <StyledCodeMirror\n          value={this.props.configCode}\n          theme={['config-editor']}\n          options={\n            {\n              mode: 'yaml',\n              lineNumbers: true,\n              readOnly: this.props.readOnly,\n              indentUnit: 2,\n              smartIndent: true,\n              showCursorWhenSelecting: true,\n              lintOnChange: false,\n              lint: {\n                checkConfig: this.props.checkConfig,\n                lintOnChange: false,\n                onUpdateLinting: false,\n              },\n              hintOptions: {\n                completeSingle: false,\n                closeOnUnfocus: false,\n                schema: this.props.configSchema,\n              },\n              keyMap: 'sublime',\n              extraKeys: {\n                'Cmd-Space': (editor: any) => editor.showHint({completeSingle: true}),\n                'Ctrl-Space': (editor: any) => editor.showHint({completeSingle: true}),\n                'Alt-Space': (editor: any) => editor.showHint({completeSingle: true}),\n                'Shift-Tab': (editor: any) => editor.execCommand('indentLess'),\n                Tab: (editor: any) => editor.execCommand('indentMore'),\n                // Persistent search box in Query Editor\n                'Cmd-F': 'findPersistent',\n                'Ctrl-F': 'findPersistent',\n              },\n              gutters: [\n                'CodeMirror-foldgutter',\n                'CodeMirror-lint-markers',\n                'CodeMirror-linenumbers',\n              ],\n              foldGutter: true,\n            } as any\n          }\n          editorDidMount={(editor) => {\n            this._editor = editor;\n            this.performInitialPass();\n          }}\n          onBeforeChange={(editor, data, value) => {\n            this.props.onConfigChange(value);\n          }}\n          onCursorActivity={(editor: any) => {\n            if (editor.getSelection().length) {\n              this.props.onHelpContextChange(null);\n            } else {\n              const {context} = expandAutocompletionContextAtCursor(editor);\n              this.props.onHelpContextChange(context ? {type: context.closestMappingType} : null);\n            }\n          }}\n          onChange={(editor: Editor) => {\n            performLint(editor);\n          }}\n          onBlur={(editor: Editor) => {\n            performLint(editor);\n          }}\n          onKeyUp={(editor, event: KeyboardEvent) => {\n            if (AUTO_COMPLETE_AFTER_KEY.test(event.key)) {\n              editor.execCommand('autocomplete');\n            }\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import {ConfigEditorHelpContext} from './types/ConfigEditorHelpContext';\n\nexport const isHelpContextEqual = (\n  prev: ConfigEditorHelpContext | null,\n  next: ConfigEditorHelpContext | null,\n) => (prev && prev.type.key) === (next && next.type.key);\n","import * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Colors} from '../Colors';\nimport {ConfigTypeSchema, TypeData} from '../ConfigTypeSchema';\nimport {isHelpContextEqual} from '../configeditor/isHelpContextEqual';\n\nimport {ConfigEditorHelpContext} from './types/ConfigEditorHelpContext';\n\ninterface ConfigEditorHelpProps {\n  context: ConfigEditorHelpContext | null;\n  allInnerTypes: TypeData[];\n}\n\nexport const ConfigEditorHelp: React.FC<ConfigEditorHelpProps> = React.memo(\n  ({context, allInnerTypes}) => {\n    if (!context) {\n      return <Container />;\n    }\n    return (\n      <Container>\n        <ConfigScrollWrap>\n          <ConfigTypeSchema type={context.type} typesInScope={allInnerTypes} maxDepth={2} />\n        </ConfigScrollWrap>\n        <AutocompletionsNote>Use Ctrl+Space to show auto-completions inline.</AutocompletionsNote>\n      </Container>\n    );\n  },\n  (prev, next) => isHelpContextEqual(prev.context, next.context),\n);\n\nconst AutocompletionsNote = styled.div`\n  font-size: 0.75rem;\n  text-align: center;\n  padding: 4px;\n  border-top: 1px solid ${Colors.KeylineGray};\n  background: ${Colors.Gray100};\n  color: ${Colors.Gray500};\n`;\n\nconst ConfigScrollWrap = styled.div`\n  padding: 8px;\n  color: ${Colors.Dark};\n  flex: 1;\n  pointer-events: initial;\n  max-height: 100%;\n  overflow-y: auto;\n`;\n\nconst Container = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  background-color: ${Colors.Gray50};\n  height: 100%;\n`;\n","import {gql} from '@apollo/client';\nimport {YamlModeValidationResult} from '@dagster-io/ui';\nimport yaml from 'yaml';\n\nimport {ConfigEditorValidationFragment} from './types/ConfigEditorValidationFragment';\n\nexport const CONFIG_EDITOR_RUN_CONFIG_SCHEMA_FRAGMENT = gql`\n  fragment ConfigEditorRunConfigSchemaFragment on RunConfigSchema {\n    rootConfigType {\n      key\n    }\n    allConfigTypes {\n      __typename\n      key\n      description\n      isSelector\n      typeParamKeys\n      ... on RegularConfigType {\n        givenName\n      }\n      ... on MapConfigType {\n        keyLabelName\n      }\n      ... on EnumConfigType {\n        givenName\n        values {\n          value\n          description\n        }\n      }\n      ... on CompositeConfigType {\n        fields {\n          name\n          description\n          isRequired\n          configTypeKey\n          defaultValueAsJson\n        }\n      }\n      ... on ScalarUnionConfigType {\n        key\n        scalarTypeKey\n        nonScalarTypeKey\n      }\n    }\n  }\n`;\n\nexport const CONFIG_EDITOR_VALIDATION_FRAGMENT = gql`\n  fragment ConfigEditorValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        __typename\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              fieldName\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n            ... on EvaluationStackMapKeyEntry {\n              mapKey\n            }\n            ... on EvaluationStackMapValueEntry {\n              mapKey\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\ntype StackEntry =\n  | {\n      __typename: 'EvaluationStackPathEntry';\n      fieldName: string;\n    }\n  | {\n      __typename: 'EvaluationStackListItemEntry';\n      listIndex: number;\n    }\n  | {\n      __typename: 'EvaluationStackMapKeyEntry';\n      mapKey: object;\n    }\n  | {\n      __typename: 'EvaluationStackMapValueEntry';\n      mapKey: object;\n    };\n\nexport function errorStackToYamlPath(entries: StackEntry[]) {\n  return entries.map((entry) => {\n    switch (entry.__typename) {\n      case 'EvaluationStackPathEntry':\n        return entry.fieldName;\n      case 'EvaluationStackListItemEntry':\n        return `${entry.listIndex}`;\n      case 'EvaluationStackMapKeyEntry':\n      case 'EvaluationStackMapValueEntry':\n        return `${entry.mapKey}`;\n    }\n  });\n}\n\nexport function responseToYamlValidationResult(\n  configYaml: string,\n  response: ConfigEditorValidationFragment,\n): YamlModeValidationResult {\n  if (response.__typename !== 'RunConfigValidationInvalid') {\n    return {isValid: true};\n  }\n\n  const errors = response.errors.map((err) => ({\n    message: err.message,\n    reason: err.reason,\n    path: errorStackToYamlPath(err.stack.entries),\n  }));\n\n  // Errors at the top level have no stack path because they are not within any\n  // dicts. To avoid highlighting the entire editor, associate them with the first\n  // element of the top dict.\n  const parsed = yaml.parse(configYaml);\n  const topLevelKey = Object.keys(parsed);\n  errors.forEach((error) => {\n    if (error.path.length === 0 && topLevelKey.length) {\n      error.path = [topLevelKey[0]];\n    }\n  });\n\n  return {isValid: false, errors};\n}\n","import {Button, Icon, MenuItem, Select} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {ModeNotFoundError} from './ModeNotFoundError';\n\ninterface Mode {\n  name: string;\n}\n\ninterface ConfigEditorModePickerProps {\n  modes: Mode[];\n  modeError?: ModeNotFoundError;\n  modeName: string | null;\n  onModeChange: (mode: string) => void;\n}\n\nconst MODE_PICKER_HINT_TEXT = `To add a mode, add a ModeDefinition to the pipeline.`;\n\nexport const ConfigEditorModePicker: React.FC<ConfigEditorModePickerProps> = (props) => {\n  const resolvedMode = props.modeName\n    ? props.modes.find((m) => m.name === props.modeName)\n    : props.modes[0];\n\n  React.useEffect(() => {\n    if (resolvedMode && resolvedMode.name !== props.modeName) {\n      props.onModeChange?.(resolvedMode.name);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [resolvedMode, props.modeName]);\n\n  const singleMode = props.modes.length === 1;\n  const valid = !props.modeError;\n  const disabled = singleMode && valid;\n\n  const onItemSelect = (mode: Mode) => {\n    props.onModeChange?.(mode.name);\n  };\n\n  return (\n    <Select\n      activeItem={resolvedMode}\n      filterable={true}\n      disabled={disabled}\n      items={props.modes}\n      itemPredicate={(query, mode) => query.length === 0 || mode.name.includes(query)}\n      itemRenderer={(mode, props) => (\n        <MenuItem\n          active={props.modifiers.active}\n          key={mode.name}\n          text={mode.name}\n          onClick={props.handleClick}\n        />\n      )}\n      onItemSelect={onItemSelect}\n    >\n      <Button\n        icon={valid ? undefined : <Icon name=\"error\" />}\n        intent={valid ? 'none' : 'danger'}\n        title={disabled ? MODE_PICKER_HINT_TEXT : 'Current execution mode'}\n        disabled={disabled}\n        rightIcon={<Icon name=\"expand_more\" />}\n        data-test-id=\"mode-picker-button\"\n      >\n        {valid\n          ? resolvedMode\n            ? `Mode: ${resolvedMode.name}`\n            : 'Select Mode'\n          : 'Invalid Mode Selection'}\n      </Button>\n    </Select>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, Popover} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {filterByQuery} from '../app/GraphQueryImpl';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\nimport {explodeCompositesInHandleGraph} from '../pipelines/CompositeSupport';\nimport {GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT} from '../pipelines/GraphExplorer';\nimport {GraphQueryInput} from '../ui/GraphQueryInput';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {OpSelectorQuery, OpSelectorQueryVariables} from './types/OpSelectorQuery';\n\ninterface IOpSelectorProps {\n  pipelineName: string;\n  serverProvidedSubsetError?: {message: string};\n  value: string[] | null;\n  query: string | null;\n  onChange: (value: string[] | null, query: string | null) => void;\n  flattenGraphs: boolean;\n  onFlattenGraphsChange: (v: boolean) => void;\n  repoAddress: RepoAddress;\n}\n\nconst SOLID_SELECTOR_QUERY = gql`\n  query OpSelectorQuery($selector: PipelineSelector!, $requestScopeHandleID: String) {\n    pipelineOrError(params: $selector) {\n      __typename\n      ... on Pipeline {\n        id\n        name\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ${GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nexport const OpSelector = (props: IOpSelectorProps) => {\n  const {\n    serverProvidedSubsetError,\n    onChange,\n    pipelineName,\n    repoAddress,\n    onFlattenGraphsChange,\n  } = props;\n  const [focused, setFocused] = React.useState(false);\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const flattenGraphs = props.flattenGraphs || false;\n  const selector = {...repoAddressToSelector(repoAddress), pipelineName};\n  const repo = useRepository(repoAddress);\n  const isJob = isThisThingAJob(repo, pipelineName);\n  const {data, loading} = useQuery<OpSelectorQuery, OpSelectorQueryVariables>(\n    SOLID_SELECTOR_QUERY,\n    {\n      variables: {selector, requestScopeHandleID: flattenGraphs ? undefined : ''},\n      fetchPolicy: 'cache-and-network',\n    },\n  );\n\n  const query = props.query || '*';\n\n  const opHandles =\n    data?.pipelineOrError.__typename === 'Pipeline'\n      ? flattenGraphs\n        ? explodeCompositesInHandleGraph(data.pipelineOrError.solidHandles)\n        : data.pipelineOrError.solidHandles\n      : [];\n  const ops = opHandles.map((h) => h.solid);\n  const flattenGraphsEnabled =\n    flattenGraphs || ops.some((f) => f.definition.__typename === 'CompositeSolidDefinition');\n\n  const opsFetchError =\n    (data?.pipelineOrError.__typename !== 'Pipeline' && data?.pipelineOrError.message) || null;\n\n  const queryResultOps = filterByQuery(ops, query).all;\n  const invalidOpSelection = !loading && queryResultOps.length === 0;\n\n  const errorMessage = invalidOpSelection\n    ? isJob\n      ? `You must provide a valid op query or * to execute the entire job.`\n      : `You must provide a valid solid query or * to execute the entire pipeline.`\n    : serverProvidedSubsetError\n    ? serverProvidedSubsetError.message\n    : opsFetchError;\n\n  const onTextChange = (nextQuery: string) => {\n    if (nextQuery === '') {\n      nextQuery = '*';\n    }\n    const queryResultOps = filterByQuery(ops, nextQuery).all;\n\n    // If all ops are returned, we set the subset to null rather than sending\n    // a comma separated list of evey solid to the API\n    if (queryResultOps.length === ops.length) {\n      onChange(null, nextQuery);\n    } else {\n      onChange(\n        queryResultOps.map((s) => s.name),\n        nextQuery,\n      );\n    }\n  };\n\n  if (!data?.pipelineOrError) {\n    return null;\n  }\n\n  return (\n    <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>\n      <Popover\n        isOpen={focused && !!errorMessage}\n        position=\"bottom-left\"\n        content={<PopoverErrorWrap>{errorMessage}</PopoverErrorWrap>}\n      >\n        <ShortcutHandler\n          shortcutLabel=\"S\"\n          shortcutFilter={(e) => e.code === 'KeyS' && e.altKey}\n          onShortcut={() => inputRef.current?.focus()}\n        >\n          <GraphQueryInput\n            width={(query !== '*' && query !== '') || focused || flattenGraphsEnabled ? 350 : 90}\n            intent={errorMessage ? 'danger' : 'none'}\n            items={ops}\n            ref={inputRef}\n            value={query}\n            placeholder=\"Type an op subset\"\n            onChange={onTextChange}\n            onFocus={() => setFocused(true)}\n            onBlur={() => setFocused(false)}\n            linkToPreview={{\n              repoName: repoAddress.name,\n              repoLocation: repoAddress.location,\n              pipelineName,\n              isJob,\n            }}\n            flattenGraphsEnabled={flattenGraphsEnabled}\n            flattenGraphs={flattenGraphs}\n            setFlattenGraphs={() => {\n              onFlattenGraphsChange(!flattenGraphs);\n            }}\n          />\n        </ShortcutHandler>\n      </Popover>\n    </Box>\n  );\n};\n\nconst PopoverErrorWrap = styled.div`\n  padding: 4px 8px;\n  border-radius: 2px;\n  border: 1px solid ${Colors.Red500};\n  background: ${Colors.Red200};\n  color: ${Colors.Red700};\n`;\n","import {gql} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {Intent} from '@blueprintjs/core';\nimport {\n  Box,\n  Button,\n  ButtonLink,\n  Checkbox,\n  Colors,\n  Icon,\n  SplitPanelContainer,\n  Tag,\n  Code,\n  Tooltip,\n  FontFamily,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {useConfirmation} from '../app/CustomConfirmationProvider';\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {errorStackToYamlPath} from '../configeditor/ConfigEditorUtils';\nimport {\n  ConfigEditorRunConfigSchemaFragment,\n  ConfigEditorRunConfigSchemaFragment_allConfigTypes_CompositeConfigType,\n} from '../configeditor/types/ConfigEditorRunConfigSchemaFragment';\n\nimport {LaunchpadType} from './LaunchpadRoot';\nimport {\n  RunPreviewValidationFragment,\n  RunPreviewValidationFragment_RunConfigValidationInvalid_errors,\n} from './types/RunPreviewValidationFragment';\n\ntype ValidationError = RunPreviewValidationFragment_RunConfigValidationInvalid_errors;\ntype ValidationErrorOrNode = ValidationError | React.ReactNode;\n\nfunction isValidationError(e: ValidationErrorOrNode): e is ValidationError {\n  return e && typeof e === 'object' && '__typename' in e ? true : false;\n}\n\nconst stateToHint: {[key: string]: {title: string; intent: Intent}} = {\n  invalid: {\n    title: `You need to fix this configuration section.`,\n    intent: 'danger',\n  },\n  missing: {\n    title: `You need to add this configuration section.`,\n    intent: 'danger',\n  },\n  present: {\n    title: `This section is present and valid.`,\n    intent: 'none',\n  },\n  none: {title: `This section is empty and valid.`, intent: 'none'},\n};\n\nconst RemoveExtraConfigButton = ({\n  onRemoveExtraPaths,\n  extraNodes,\n  disabled,\n}: {\n  extraNodes: string[];\n  onRemoveExtraPaths: (paths: string[]) => void;\n  disabled: boolean;\n}) => {\n  const confirm = useConfirmation();\n\n  const knownKeyExtraPaths: {[key: string]: string[]} = {};\n  const otherPaths: string[] = [];\n\n  for (const path of extraNodes) {\n    const parts = path.split('.');\n\n    // If the length is 2, the first part of the path is a known key, such as \"solids\", \"resouces\",\n    // or \"loggers\", and the user has provided extra config for one of those. We will keep track of\n    // these in `knownKeyExtraPaths` just so we can display them with an extra description.\n    if (parts.length === 2) {\n      const [type, name] = parts;\n      if (!knownKeyExtraPaths[type]) {\n        knownKeyExtraPaths[type] = [];\n      }\n      knownKeyExtraPaths[type].push(name);\n    } else {\n      otherPaths.push(path);\n    }\n  }\n\n  const onClick = async () => {\n    await confirm({\n      title: 'Remove extra config',\n      description: (\n        <div>\n          <p>\n            {`You have provided extra configuration in your run config which does not conform to your\n            pipeline's config schema.`}\n          </p>\n          {Object.entries(knownKeyExtraPaths).length > 0 &&\n            Object.entries(knownKeyExtraPaths).map(([key, value]) => (\n              <>\n                <p>Extra {key}:</p>\n                <ul>\n                  {value.map((v) => (\n                    <li key={v}>\n                      <Code>{v}</Code>\n                    </li>\n                  ))}\n                </ul>\n              </>\n            ))}\n          {otherPaths.length > 0 && (\n            <>\n              <p>Other extra paths:</p>\n              <ul>\n                {otherPaths.map((v) => (\n                  <li key={v}>\n                    <Code>{v}</Code>\n                  </li>\n                ))}\n              </ul>\n            </>\n          )}\n          <p>\n            Clicking confirm will automatically remove this extra configuration from your run\n            config.\n          </p>\n        </div>\n      ),\n    });\n    onRemoveExtraPaths(extraNodes);\n  };\n\n  return (\n    <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n      <Button disabled={disabled} onClick={onClick}>\n        Remove extra config\n      </Button>\n      {disabled ? (\n        <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n          <Icon name=\"check_circle\" color={Colors.Green500} />\n          No extra config to remove\n        </Box>\n      ) : null}\n    </Box>\n  );\n};\n\nconst ScaffoldConfigButton = ({\n  onScaffoldMissingConfig,\n  missingNodes,\n  disabled,\n}: {\n  missingNodes: string[];\n  onScaffoldMissingConfig: () => void;\n  disabled: boolean;\n}) => {\n  const confirm = useConfirmation();\n\n  const confirmationMessage = (\n    <div>\n      {missingNodes.length > 0 && (\n        <>\n          <p>Missing paths:</p>\n          <ul>\n            {missingNodes.map((v) => (\n              <li key={v}>\n                <Code>{v}</Code>\n              </li>\n            ))}\n          </ul>\n        </>\n      )}\n      <p>\n        Clicking confirm will automatically scaffold this missing configuration into your run config\n        with default values. You will need to change the values appropriately.\n      </p>\n    </div>\n  );\n\n  const onClick = async () => {\n    await confirm({\n      title: 'Scaffold missing config',\n      description: confirmationMessage,\n    });\n    onScaffoldMissingConfig();\n  };\n\n  return (\n    <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n      <Button disabled={disabled} onClick={onClick}>\n        Scaffold missing config\n      </Button>\n      {disabled ? (\n        <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n          <Icon name=\"check_circle\" color={Colors.Green500} />\n          No missing config\n        </Box>\n      ) : null}\n    </Box>\n  );\n};\n\ninterface RunPreviewProps {\n  validation: RunPreviewValidationFragment | null;\n  document: any | null;\n  launchpadType: LaunchpadType;\n\n  runConfigSchema?: ConfigEditorRunConfigSchemaFragment;\n  onHighlightPath: (path: string[]) => void;\n  onRemoveExtraPaths: (paths: string[]) => void;\n  onScaffoldMissingConfig: () => void;\n  solidSelection: string[] | null;\n}\n\nexport const RunPreview: React.FC<RunPreviewProps> = (props) => {\n  const {\n    document,\n    validation,\n    onHighlightPath,\n    launchpadType,\n    onRemoveExtraPaths,\n    onScaffoldMissingConfig,\n    solidSelection,\n    runConfigSchema,\n  } = props;\n  const [errorsOnly, setErrorsOnly] = React.useState(false);\n\n  const rootCompositeChildren = React.useMemo(() => {\n    if (!runConfigSchema) {\n      return {};\n    }\n\n    const {allConfigTypes, rootConfigType} = runConfigSchema;\n    const children: {\n      [fieldName: string]: ConfigEditorRunConfigSchemaFragment_allConfigTypes_CompositeConfigType;\n    } = {};\n\n    const root = allConfigTypes.find((t) => t.key === rootConfigType.key);\n    if (root?.__typename !== 'CompositeConfigType') {\n      return children;\n    }\n\n    root.fields.forEach((field) => {\n      const allConfigVersion = allConfigTypes.find((t) => t.key === field.configTypeKey);\n      if (allConfigVersion?.__typename !== 'CompositeConfigType') {\n        return;\n      }\n      children[field.name] = allConfigVersion;\n    });\n\n    return children;\n  }, [runConfigSchema]);\n\n  const extraNodes: string[] = [];\n  const missingNodes: string[] = [];\n  const errorsAndPaths: {\n    pathKey: string;\n    error: ValidationErrorOrNode;\n  }[] = [];\n\n  if (validation && validation.__typename === 'RunConfigValidationInvalid') {\n    validation.errors.forEach((e) => {\n      const path = errorStackToYamlPath(e.stack.entries);\n\n      errorsAndPaths.push({pathKey: path.join('.'), error: e});\n\n      if (e.__typename === 'MissingFieldConfigError') {\n        missingNodes.push([...path, e.field.name].join('.'));\n      } else if (e.__typename === 'MissingFieldsConfigError') {\n        for (const field of e.fields) {\n          missingNodes.push([...path, field.name].join('.'));\n        }\n      } else if (e.__typename === 'FieldNotDefinedConfigError') {\n        extraNodes.push([...path, e.fieldName].join('.'));\n      } else if (e.__typename === 'FieldsNotDefinedConfigError') {\n        for (const fieldName of e.fieldNames) {\n          extraNodes.push([...path, fieldName].join('.'));\n        }\n      } else if (e.__typename === 'RuntimeMismatchConfigError') {\n        // If an entry at a path is the wrong type,\n        // it is equivalent to it being missing\n        missingNodes.push(path.join('.'));\n      }\n    });\n  }\n\n  if (validation?.__typename === 'InvalidSubsetError') {\n    errorsAndPaths.push({pathKey: '', error: validation.message});\n  }\n\n  if (validation?.__typename === 'PythonError') {\n    const info = <PythonErrorInfo error={validation} />;\n    errorsAndPaths.push({\n      pathKey: '',\n      error: (\n        <span>\n          PythonError:{' '}\n          <ButtonLink onClick={() => showCustomAlert({body: info})}>Click for details</ButtonLink>\n        </span>\n      ),\n    });\n  }\n\n  const {resources, ops, solids, ...rest} = rootCompositeChildren;\n  const hasOps = !!ops?.fields;\n\n  const itemsIn = (parents: string[], items: {name: string; isRequired: boolean}[]) => {\n    const boxes = items\n      .map((item) => {\n        // If a solid selection is in use, discard anything not in it.\n        if (solidSelection?.length && !solidSelection?.includes(item.name)) {\n          return null;\n        }\n\n        const path = [...parents, item.name];\n        const pathKey = path.join('.');\n        const pathErrors = errorsAndPaths\n          .filter((e) => e.pathKey === pathKey || e.pathKey.startsWith(`${pathKey}.`))\n          .map((e) => e.error);\n\n        const isPresent = pathExistsInObject(path, document);\n        const containsMissing = missingNodes.some((missingNode) =>\n          missingNode.includes(path.join('.')),\n        );\n        const isInvalid = pathErrors.length || containsMissing;\n        const isMissing = path.some((_, idx) =>\n          missingNodes.includes(path.slice(0, idx + 1).join('.')),\n        );\n\n        if (errorsOnly && !isInvalid) {\n          return false;\n        }\n\n        const state =\n          isMissing && item.isRequired\n            ? 'missing'\n            : isInvalid\n            ? 'invalid'\n            : isPresent\n            ? 'present'\n            : 'none';\n\n        return (\n          <Tooltip\n            position=\"bottom\"\n            content={stateToHint[state].title}\n            intent={stateToHint[state].intent}\n            key={item.name}\n          >\n            <Tag\n              key={item.name}\n              intent={stateToHint[state].intent}\n              onClick={() => {\n                const first = pathErrors.find(isValidationError);\n                onHighlightPath(first ? errorStackToYamlPath(first.stack.entries) : path);\n              }}\n            >\n              {item.name}\n            </Tag>\n          </Tooltip>\n        );\n      })\n      .filter(Boolean);\n\n    if (!boxes.length) {\n      return <ItemsEmptyNotice>Nothing to display.</ItemsEmptyNotice>;\n    }\n    return boxes;\n  };\n\n  return (\n    <SplitPanelContainer\n      identifier=\"run-preview\"\n      axis=\"horizontal\"\n      first={\n        <ErrorListContainer>\n          <Section>\n            <SectionTitle>Errors</SectionTitle>\n            {errorsAndPaths.length ? (\n              errorsAndPaths.map((item, idx) => (\n                <ErrorRow key={idx} error={item.error} onHighlight={onHighlightPath} />\n              ))\n            ) : (\n              <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n                <Icon name=\"check_circle\" color={Colors.Green500} />\n                No errors\n              </Box>\n            )}\n          </Section>\n          <Section>\n            <SectionTitle>Config actions:</SectionTitle>\n            <Box flex={{direction: 'column', gap: 8}} padding={{top: 4, bottom: 20}}>\n              <ScaffoldConfigButton\n                onScaffoldMissingConfig={onScaffoldMissingConfig}\n                missingNodes={missingNodes}\n                disabled={!missingNodes.length}\n              />\n              <RemoveExtraConfigButton\n                onRemoveExtraPaths={onRemoveExtraPaths}\n                extraNodes={extraNodes}\n                disabled={!extraNodes.length}\n              />\n            </Box>\n          </Section>\n        </ErrorListContainer>\n      }\n      firstInitialPercent={50}\n      firstMinSize={150}\n      second={\n        <>\n          <div style={{overflowY: 'scroll', width: '100%', height: '100%'}}>\n            <RuntimeAndResourcesSection>\n              <Section>\n                <SectionTitle>Runtime</SectionTitle>\n                <ItemSet>\n                  {itemsIn(\n                    [],\n                    Object.keys(rest).map((name) => ({name, isRequired: false})),\n                  )}\n                </ItemSet>\n              </Section>\n              {(resources?.fields.length || 0) > 0 && (\n                <Section>\n                  <SectionTitle>Resources</SectionTitle>\n                  <ItemSet>{itemsIn(['resources'], resources?.fields || [])}</ItemSet>\n                </Section>\n              )}\n            </RuntimeAndResourcesSection>\n            <Section>\n              <SectionTitle>{launchpadType === 'asset' ? 'Assets (Ops)' : 'Ops'}</SectionTitle>\n              <ItemSet>\n                {itemsIn(\n                  [hasOps ? 'ops' : 'solids'],\n                  (hasOps ? ops?.fields : solids?.fields) || [],\n                )}\n              </ItemSet>\n            </Section>\n            <div style={{height: 50}} />\n          </div>\n          <div\n            style={{\n              position: 'absolute',\n              top: 0,\n              right: 0,\n              padding: '12px 15px 0px 10px',\n              background: 'rgba(255,255,255,0.7)',\n            }}\n          >\n            <Checkbox\n              label=\"Errors Only\"\n              checked={errorsOnly}\n              onChange={() => setErrorsOnly(!errorsOnly)}\n            />\n          </div>\n        </>\n      }\n    />\n  );\n};\n\nexport const RUN_PREVIEW_VALIDATION_FRAGMENT = gql`\n  fragment RunPreviewValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        __typename\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              fieldName\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n            ... on EvaluationStackMapKeyEntry {\n              mapKey\n            }\n            ... on EvaluationStackMapValueEntry {\n              mapKey\n            }\n          }\n        }\n        ... on MissingFieldConfigError {\n          field {\n            name\n          }\n        }\n        ... on MissingFieldsConfigError {\n          fields {\n            name\n          }\n        }\n        ... on FieldNotDefinedConfigError {\n          fieldName\n        }\n        ... on FieldsNotDefinedConfigError {\n          fieldNames\n        }\n      }\n    }\n    ... on PipelineNotFoundError {\n      message\n    }\n    ... on InvalidSubsetError {\n      message\n    }\n    ...PythonErrorFragment\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nconst SectionTitle = styled.div`\n  color: ${Colors.Gray400};\n  text-transform: uppercase;\n  font-size: 12px;\n  margin-bottom: 8px;\n`;\n\nconst Section = styled.div`\n  margin-top: 14px;\n  margin-left: 10px;\n`;\n\nconst ItemSet = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 4px;\n`;\n\nconst ItemsEmptyNotice = styled.div`\n  font-size: 13px;\n  padding-top: 7px;\n  padding-bottom: 7px;\n`;\n\nconst ErrorListContainer = styled.div`\n  margin-left: 10px;\n  overflow-y: scroll;\n  height: 100%;\n`;\n\nconst ErrorRowContainer = styled.div<{hoverable: boolean}>`\n  text-align: left;\n  font-size: 13px;\n  white-space: pre-wrap;\n  word-break: break-word;\n  font-family: ${FontFamily.monospace};\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  border-bottom: 1px solid #ccc;\n  padding: 8px;\n  margin: 8px 12px 0 -8px;\n  &:last-child {\n    border-bottom: 0;\n    margin-bottom: 15px;\n  }\n  ${({hoverable}) =>\n    hoverable &&\n    `&:hover {\n      background: ${Colors.Gray50};\n    }\n  `}\n`;\n\nconst RuntimeAndResourcesSection = styled.div`\n  display: flex;\n  gap: 12px;\n  @media (max-width: 800px) {\n    flex-direction: column;\n  }\n`;\n\nconst ErrorRow: React.FC<{\n  error: ValidationError | React.ReactNode;\n  onHighlight: (path: string[]) => void;\n}> = ({error, onHighlight}) => {\n  let message = error;\n  let target: ValidationError | null = null;\n  if (isValidationError(error)) {\n    message = error.message;\n    target = error;\n  }\n\n  let displayed = message;\n  if (typeof message === 'string' && message.length > 400) {\n    displayed = truncateErrorMessage(message);\n  }\n\n  return (\n    <ErrorRowContainer\n      hoverable={!!target}\n      onClick={() => target && onHighlight(errorStackToYamlPath(target.stack.entries))}\n    >\n      <div style={{paddingRight: 4}}>\n        <Icon name=\"error\" color={Colors.Red500} />\n      </div>\n      <div>\n        {displayed}\n        {displayed !== message && (\n          <>\n            &nbsp;\n            <ButtonLink\n              onClick={() =>\n                showCustomAlert({\n                  body: <div style={{whiteSpace: 'pre-wrap'}}>{message}</div>,\n                })\n              }\n            >\n              View all\n            </ButtonLink>\n          </>\n        )}\n      </div>\n    </ErrorRowContainer>\n  );\n};\n\nfunction truncateErrorMessage(message: string) {\n  let split = message.indexOf('{');\n  if (split === -1) {\n    split = message.indexOf('. ');\n  }\n  if (split === -1) {\n    split = 400;\n  }\n  return message.substr(0, split) + '... ';\n}\n\nfunction pathExistsInObject(path: string[], object: any): boolean {\n  if (!object || typeof object !== 'object') {\n    return false;\n  }\n  if (path.length === 0) {\n    return true;\n  }\n  const [first, ...rest] = path;\n  return pathExistsInObject(rest, object[first]);\n}\n","import {assertUnreachable} from '../app/Util';\nimport {\n  ConfigEditorRunConfigSchemaFragment_allConfigTypes,\n  ConfigEditorRunConfigSchemaFragment,\n} from '../configeditor/types/ConfigEditorRunConfigSchemaFragment';\n\nexport const scaffoldType = (\n  configTypeKey: string,\n  typeLookup: {[key: string]: ConfigEditorRunConfigSchemaFragment_allConfigTypes},\n): any => {\n  const type = typeLookup[configTypeKey];\n\n  switch (type.__typename) {\n    case 'CompositeConfigType':\n      if (type.isSelector) {\n        // Could potentially do something better here, like scaffold out\n        // all the types and let the user delete the ones they don't want.\n        return '<selector>';\n      }\n\n      const config = {};\n      for (const field of type.fields) {\n        const {name, isRequired, configTypeKey} = field;\n        if (isRequired) {\n          config[name] = scaffoldType(configTypeKey, typeLookup);\n        }\n      }\n\n      return config;\n    case 'ArrayConfigType':\n      return [];\n    case 'MapConfigType':\n      return {};\n    case 'NullableConfigType':\n      // If a type is nullable we include it in the scaffolded config anyway\n      // by using the inner type\n      const innerType = type.typeParamKeys[0];\n      return scaffoldType(innerType, typeLookup);\n    case 'EnumConfigType':\n      // Here we just join all the potential enum values with a |. The user needs to delete\n      // all the values but the ones they want to use.\n      return type.values.map((i) => i.value).join('|');\n    case 'ScalarUnionConfigType':\n      // Here we just scaffold the scalar value. Could potentially try to\n      // scaffold the other type instead.\n      const {scalarTypeKey} = type;\n      return scaffoldType(scalarTypeKey, typeLookup);\n    case 'RegularConfigType':\n      return {\n        String: '',\n        Int: 0,\n        Float: 0.0,\n        Bool: true,\n        Any: 'AnyType',\n      }[type.key];\n    default:\n      assertUnreachable(type);\n  }\n};\n\nexport const createTypeLookup = (\n  allConfigTypes: ConfigEditorRunConfigSchemaFragment_allConfigTypes[],\n) => {\n  const typeLookup: {[key: string]: ConfigEditorRunConfigSchemaFragment_allConfigTypes} = {};\n  for (const type of allConfigTypes) {\n    typeLookup[type.key] = type;\n  }\n\n  return typeLookup;\n};\n\nexport const scaffoldPipelineConfig = (configSchema: ConfigEditorRunConfigSchemaFragment) => {\n  const {allConfigTypes, rootConfigType} = configSchema;\n  const typeLookup = createTypeLookup(allConfigTypes);\n  const config = scaffoldType(rootConfigType.key, typeLookup);\n  return config;\n};\n","import {gql, useApolloClient, useQuery} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  Colors,\n  ConfigEditor,\n  ConfigEditorHelpContext,\n  Group,\n  Icon,\n  SecondPanelToggle,\n  SplitPanelContainer,\n  isHelpContextEqual,\n  ConfigEditorHelp,\n  TextInput,\n} from '@dagster-io/ui';\nimport merge from 'deepmerge';\nimport uniqBy from 'lodash/uniqBy';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\nimport * as yaml from 'yaml';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {\n  IExecutionSession,\n  IExecutionSessionChanges,\n  PipelineRunTag,\n  SessionBase,\n} from '../app/ExecutionSessionStorage';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\nimport {tokenForAssetKey} from '../asset-graph/Utils';\nimport {\n  CONFIG_EDITOR_RUN_CONFIG_SCHEMA_FRAGMENT,\n  CONFIG_EDITOR_VALIDATION_FRAGMENT,\n  responseToYamlValidationResult,\n} from '../configeditor/ConfigEditorUtils';\nimport {DagsterTag} from '../runs/RunTag';\nimport {PipelineSelector, RepositorySelector} from '../types/globalTypes';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  ConfigEditorConfigPicker,\n  CONFIG_PARTITION_SELECTION_QUERY,\n} from './ConfigEditorConfigPicker';\nimport {ConfigEditorModePicker} from './ConfigEditorModePicker';\nimport {LaunchRootExecutionButton} from './LaunchRootExecutionButton';\nimport {LaunchpadType} from './LaunchpadRoot';\nimport {LoadingOverlay} from './LoadingOverlay';\nimport {OpSelector} from './OpSelector';\nimport {RunPreview, RUN_PREVIEW_VALIDATION_FRAGMENT} from './RunPreview';\nimport {SessionSettingsBar} from './SessionSettingsBar';\nimport {TagContainer, TagEditor} from './TagEditor';\nimport {scaffoldPipelineConfig} from './scaffoldType';\nimport {ConfigEditorGeneratorPipelineFragment_presets} from './types/ConfigEditorGeneratorPipelineFragment';\nimport {\n  ConfigPartitionSelectionQuery,\n  ConfigPartitionSelectionQueryVariables,\n} from './types/ConfigPartitionSelectionQuery';\nimport {LaunchpadSessionPartitionSetsFragment} from './types/LaunchpadSessionPartitionSetsFragment';\nimport {LaunchpadSessionPipelineFragment} from './types/LaunchpadSessionPipelineFragment';\nimport {\n  PipelineExecutionConfigSchemaQuery,\n  PipelineExecutionConfigSchemaQueryVariables,\n} from './types/PipelineExecutionConfigSchemaQuery';\nimport {PreviewConfigQuery, PreviewConfigQueryVariables} from './types/PreviewConfigQuery';\n\nconst YAML_SYNTAX_INVALID = `The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.`;\nconst LOADING_CONFIG_FOR_PARTITION = `Generating configuration...`;\nconst LOADING_CONFIG_SCHEMA = `Loading config schema...`;\nconst LOADING_RUN_PREVIEW = `Checking config...`;\n\ntype Preset = ConfigEditorGeneratorPipelineFragment_presets;\n\ninterface LaunchpadSessionProps {\n  session: IExecutionSession;\n  onSave: (changes: IExecutionSessionChanges) => void;\n  launchpadType: LaunchpadType;\n  pipeline: LaunchpadSessionPipelineFragment;\n  partitionSets: LaunchpadSessionPartitionSetsFragment;\n  repoAddress: RepoAddress;\n  initialExecutionSessionState?: Partial<IExecutionSession>;\n}\n\ninterface ILaunchpadSessionState {\n  preview: PreviewConfigQuery | null;\n  previewLoading: boolean;\n  previewedDocument: any | null;\n  configLoading: boolean;\n  editorHelpContext: ConfigEditorHelpContext | null;\n  tagEditorOpen: boolean;\n}\n\ntype Action =\n  | {type: 'preview-loading'; payload: boolean}\n  | {\n      type: 'set-preview';\n      payload: {\n        preview: PreviewConfigQuery | null;\n        previewLoading: boolean;\n        previewedDocument: string | null;\n      };\n    }\n  | {type: 'toggle-tag-editor'; payload: boolean}\n  | {type: 'toggle-config-loading'; payload: boolean}\n  | {type: 'set-editor-help-context'; payload: ConfigEditorHelpContext | null};\n\nconst reducer = (state: ILaunchpadSessionState, action: Action) => {\n  switch (action.type) {\n    case 'preview-loading':\n      return {...state, previewLoading: action.payload};\n    case 'set-preview': {\n      const {preview, previewedDocument, previewLoading} = action.payload;\n      return {\n        ...state,\n        preview,\n        previewedDocument,\n        previewLoading,\n      };\n    }\n    case 'toggle-tag-editor':\n      return {...state, tagEditorOpen: action.payload};\n    case 'toggle-config-loading':\n      return {...state, configLoading: action.payload};\n    case 'set-editor-help-context':\n      return {...state, editorHelpContext: action.payload};\n    default:\n      return state;\n  }\n};\n\nconst LaunchButtonContainer: React.FC<{launchpadType: LaunchpadType}> = ({\n  launchpadType,\n  children,\n}) => {\n  if (launchpadType === 'asset') {\n    return (\n      <Box\n        flex={{direction: 'row'}}\n        border={{side: 'top', width: 1, color: Colors.KeylineGray}}\n        padding={{right: 12, vertical: 8}}\n      >\n        <div style={{flexGrow: 1}} />\n        {children}\n      </Box>\n    );\n  } else {\n    // job\n    return <div style={{position: 'absolute', bottom: 12, right: 12, zIndex: 1}}>{children}</div>;\n  }\n};\n\nconst initialState: ILaunchpadSessionState = {\n  preview: null,\n  previewLoading: false,\n  previewedDocument: null,\n  configLoading: false,\n  editorHelpContext: null,\n  tagEditorOpen: false,\n};\n\nconst LaunchpadSession: React.FC<LaunchpadSessionProps> = (props) => {\n  const {\n    launchpadType,\n    session: currentSession,\n    onSave,\n    partitionSets,\n    pipeline,\n    repoAddress,\n  } = props;\n\n  const client = useApolloClient();\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  const mounted = React.useRef<boolean>(false);\n  const editor = React.useRef<ConfigEditor | null>(null);\n  const editorSplitPanelContainer = React.useRef<SplitPanelContainer | null>(null);\n  const previewCounter = React.useRef(0);\n\n  const {isJob} = pipeline;\n  const tagsFromSession = React.useMemo(() => currentSession.tags || [], [currentSession]);\n\n  const pipelineSelector: PipelineSelector = {\n    ...repoAddressToSelector(repoAddress),\n    pipelineName: pipeline.name,\n    solidSelection: currentSession?.solidSelection || undefined,\n  };\n\n  const configResult = useQuery<\n    PipelineExecutionConfigSchemaQuery,\n    PipelineExecutionConfigSchemaQueryVariables\n  >(PIPELINE_EXECUTION_CONFIG_SCHEMA_QUERY, {\n    variables: {selector: pipelineSelector, mode: currentSession?.mode},\n    fetchPolicy: 'cache-and-network',\n    partialRefetch: true,\n  });\n\n  const configSchemaOrError = configResult?.data?.runConfigSchemaOrError;\n\n  React.useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  });\n\n  const onSaveSession = (changes: IExecutionSessionChanges) => {\n    onSave(changes);\n  };\n\n  const onConfigChange = (config: any) => {\n    onSaveSession({\n      runConfigYaml: config,\n    });\n  };\n\n  const onOpSelectionChange = (\n    solidSelection: string[] | null,\n    solidSelectionQuery: string | null,\n  ) => {\n    onSaveSession({\n      solidSelection,\n      solidSelectionQuery,\n    });\n  };\n\n  const onFlattenGraphsChange = (flattenGraphs: boolean) => {\n    onSaveSession({flattenGraphs});\n  };\n\n  const onModeChange = (mode: string) => {\n    onSaveSession({mode});\n  };\n\n  const onRemoveExtraPaths = (paths: string[]) => {\n    try {\n      const runConfigData = yaml.parse(sanitizeConfigYamlString(currentSession.runConfigYaml));\n      for (const path of paths) {\n        deletePropertyPath(runConfigData, path);\n      }\n      onSaveSession({runConfigYaml: yaml.stringify(runConfigData)});\n    } catch (err) {\n      showCustomAlert({title: 'Invalid YAML', body: YAML_SYNTAX_INVALID});\n      return;\n    }\n  };\n\n  const runConfigSchema =\n    configSchemaOrError?.__typename === 'RunConfigSchema' ? configSchemaOrError : undefined;\n  const modeError =\n    configSchemaOrError?.__typename === 'ModeNotFoundError' ? configSchemaOrError : undefined;\n\n  const onScaffoldMissingConfig = () => {\n    const config = runConfigSchema ? scaffoldPipelineConfig(runConfigSchema) : {};\n    try {\n      const runConfigData = yaml.parse(sanitizeConfigYamlString(currentSession.runConfigYaml));\n      const updatedRunConfigData = merge(config, runConfigData);\n      const runConfigYaml = yaml.stringify(updatedRunConfigData);\n      onSaveSession({runConfigYaml});\n    } catch (err) {\n      showCustomAlert({title: 'Invalid YAML', body: YAML_SYNTAX_INVALID});\n    }\n  };\n\n  const buildExecutionVariables = () => {\n    if (!currentSession) {\n      return;\n    }\n\n    const configYamlOrEmpty = sanitizeConfigYamlString(currentSession.runConfigYaml);\n\n    try {\n      yaml.parse(configYamlOrEmpty);\n    } catch (err) {\n      showCustomAlert({title: 'Invalid YAML', body: YAML_SYNTAX_INVALID});\n      return;\n    }\n\n    return {\n      executionParams: {\n        runConfigData: configYamlOrEmpty,\n        selector: {\n          ...pipelineSelector,\n          assetSelection: currentSession.assetSelection\n            ? currentSession.assetSelection.map((a) => ({path: a.assetKey.path}))\n            : undefined,\n        },\n        mode: currentSession.mode || 'default',\n        executionMetadata: {\n          tags: uniqBy(\n            [\n              // pass solid selection query via tags\n              // clean up https://github.com/dagster-io/dagster/issues/2495\n              ...(currentSession.solidSelectionQuery\n                ? [\n                    {\n                      key: DagsterTag.SolidSelection,\n                      value: currentSession.solidSelectionQuery,\n                    },\n                  ]\n                : []),\n              ...(currentSession?.base?.['presetName']\n                ? [\n                    {\n                      key: DagsterTag.PresetName,\n                      value: currentSession?.base?.['presetName'],\n                    },\n                  ]\n                : []),\n\n              ...(currentSession.assetSelection\n                ? [\n                    {\n                      key: DagsterTag.StepSelection,\n                      value: currentSession.assetSelection.flatMap((o) => o.opNames).join(','),\n                    },\n                  ]\n                : []),\n\n              ...tagsFromSession.map(onlyKeyAndValue),\n\n              // note, we apply these last - uniqBy uses the first value it sees for\n              // each key, so these can be overridden in the session\n              ...pipeline.tags.map(onlyKeyAndValue),\n            ],\n            (tag) => tag.key,\n          ),\n        },\n      },\n    };\n  };\n\n  const saveTags = (tags: PipelineRunTag[]) => {\n    const tagDict = {};\n    const toSave: PipelineRunTag[] = [];\n    tags.forEach((tag: PipelineRunTag) => {\n      if (!(tag.key in tagDict)) {\n        tagDict[tag.key] = tag.value;\n        toSave.push(tag);\n      }\n    });\n    onSaveSession({tags: toSave});\n  };\n\n  const checkConfig = async (configYaml: string) => {\n    // Another request to preview a newer document may be made while this request\n    // is in flight, in which case completion of this async method should not set loading=false.\n    previewCounter.current += 1;\n    const currentPreviewCount = previewCounter.current;\n    const configYamlOrEmpty = sanitizeConfigYamlString(configYaml);\n\n    dispatch({type: 'preview-loading', payload: true});\n\n    const {data} = await client.query<PreviewConfigQuery, PreviewConfigQueryVariables>({\n      fetchPolicy: 'no-cache',\n      query: PREVIEW_CONFIG_QUERY,\n      variables: {\n        runConfigData: configYamlOrEmpty,\n        pipeline: pipelineSelector,\n        mode: currentSession.mode || 'default',\n      },\n    });\n\n    if (mounted.current) {\n      const isLatestRequest = currentPreviewCount === previewCounter.current;\n      dispatch({\n        type: 'set-preview',\n        payload: {\n          preview: data,\n          previewedDocument: configYamlOrEmpty,\n          previewLoading: isLatestRequest ? false : state.previewLoading,\n        },\n      });\n    }\n\n    return responseToYamlValidationResult(configYamlOrEmpty, data.isPipelineConfigValid);\n  };\n\n  const tagsApplyingNewBaseTags = (newBaseTags: PipelineRunTag[]) => {\n    // If you choose a new base (preset or partition), we want to make a best-effort to preserve\n    // the tags you've manually typed in, but remove:\n    // - Tags that were in your previous base and are unchanged\n    // - Tags that are specified in the new base\n    const preservedUserTags = currentSession.base\n      ? tagsFromSession.filter(\n          (t) =>\n            currentSession.base?.tags &&\n            !currentSession.base?.tags.some((bt) => bt.key === t.key && bt.value === t.value) &&\n            !newBaseTags.some((bt) => bt.key === t.key),\n        )\n      : [];\n\n    return [...newBaseTags, ...preservedUserTags];\n  };\n\n  const onSelectPreset = async (preset: Preset) => {\n    const newBaseTags = preset.tags.map(onlyKeyAndValue);\n\n    onSaveSession({\n      base: {presetName: preset.name, tags: newBaseTags},\n      name: preset.name,\n      runConfigYaml: preset.runConfigYaml || '',\n      solidSelection: preset.solidSelection,\n      solidSelectionQuery: preset.solidSelection === null ? '*' : preset.solidSelection.join(','),\n      mode: preset.mode,\n      tags: tagsApplyingNewBaseTags(newBaseTags),\n      needsRefresh: false,\n    });\n  };\n\n  const onSelectPartition = async (\n    repositorySelector: RepositorySelector,\n    partitionSetName: string,\n    partitionName: string,\n    sessionSolidSelection?: string[] | null,\n  ) => {\n    onConfigLoading();\n    try {\n      const {base} = currentSession;\n      const {data} = await client.query<\n        ConfigPartitionSelectionQuery,\n        ConfigPartitionSelectionQueryVariables\n      >({\n        query: CONFIG_PARTITION_SELECTION_QUERY,\n        variables: {repositorySelector, partitionSetName, partitionName},\n      });\n\n      if (\n        !data ||\n        !data.partitionSetOrError ||\n        data.partitionSetOrError.__typename !== 'PartitionSet' ||\n        !data.partitionSetOrError.partition\n      ) {\n        onConfigLoaded();\n        return;\n      }\n\n      const {partition} = data.partitionSetOrError;\n\n      let newBaseTags: {key: string; value: string}[] = [];\n      if (partition.tagsOrError.__typename === 'PythonError') {\n        showCustomAlert({\n          body: <PythonErrorInfo error={partition.tagsOrError} />,\n        });\n      } else {\n        newBaseTags = partition.tagsOrError.results.map(onlyKeyAndValue);\n      }\n\n      let runConfigYaml;\n      if (partition.runConfigOrError.__typename === 'PythonError') {\n        runConfigYaml = '';\n        showCustomAlert({\n          body: <PythonErrorInfo error={partition.runConfigOrError} />,\n        });\n      } else {\n        runConfigYaml = partition.runConfigOrError.yaml;\n      }\n\n      const solidSelection = sessionSolidSelection || partition.solidSelection;\n\n      onSaveSession({\n        name: partition.name,\n        base: Object.assign({}, base, {partitionName: partition.name, tags: newBaseTags}),\n        runConfigYaml,\n        solidSelection,\n        solidSelectionQuery: solidSelection === null ? '*' : solidSelection.join(','),\n        mode: partition.mode,\n        tags: tagsApplyingNewBaseTags(newBaseTags),\n        needsRefresh: false,\n      });\n    } catch {}\n    onConfigLoaded();\n  };\n\n  const onRefreshConfig = async (base: SessionBase) => {\n    // Handle preset-based configuration.\n    if ('presetName' in base) {\n      const {presetName} = base;\n      const matchingPreset = pipeline.presets.find((preset) => preset.name === presetName);\n      if (matchingPreset) {\n        onSelectPreset({\n          ...matchingPreset,\n          solidSelection: currentSession.solidSelection || matchingPreset.solidSelection,\n        });\n      }\n      return;\n    }\n\n    // Otherwise, handle partition-based configuration.\n    const {partitionName, partitionsSetName} = base;\n    const repositorySelector = repoAddressToSelector(repoAddress);\n\n    // It is expected that `partitionName` is set here, since we shouldn't be showing the\n    // button at all otherwise.\n    if (partitionName) {\n      onConfigLoading();\n      await onSelectPartition(\n        repositorySelector,\n        partitionsSetName,\n        partitionName,\n        currentSession.solidSelection,\n      );\n      onConfigLoaded();\n    }\n  };\n\n  const onDismissRefreshWarning = () => {\n    onSaveSession({needsRefresh: false});\n  };\n\n  const openTagEditor = () => dispatch({type: 'toggle-tag-editor', payload: true});\n  const closeTagEditor = () => dispatch({type: 'toggle-tag-editor', payload: false});\n\n  const onConfigLoading = () => dispatch({type: 'toggle-config-loading', payload: true});\n  const onConfigLoaded = () => dispatch({type: 'toggle-config-loading', payload: false});\n\n  const {\n    preview,\n    previewLoading,\n    previewedDocument,\n    configLoading,\n    editorHelpContext,\n    tagEditorOpen,\n  } = state;\n\n  const refreshableSessionBase = React.useMemo(() => {\n    const {base, needsRefresh} = currentSession;\n    if (\n      base &&\n      needsRefresh &&\n      ('presetName' in base || (base.partitionsSetName && base.partitionName))\n    ) {\n      return base;\n    }\n    return null;\n  }, [currentSession]);\n\n  let launchButtonTitle: string | undefined;\n  if (launchpadType === 'asset') {\n    launchButtonTitle = 'Materialize';\n  }\n\n  let launchButtonWarning: string | undefined;\n  if (\n    partitionSets.results.length &&\n    currentSession.base &&\n    'partitionsSetName' in currentSession.base &&\n    !currentSession.base.partitionName\n  ) {\n    launchButtonWarning =\n      'This job is partitioned. Are you sure you want to launch' +\n      ' a run without a partition specified?';\n  }\n\n  return (\n    <>\n      <SplitPanelContainer\n        axis=\"vertical\"\n        identifier=\"execution\"\n        firstMinSize={100}\n        firstInitialPercent={75}\n        first={\n          <>\n            <LoadingOverlay isLoading={configLoading} message={LOADING_CONFIG_FOR_PARTITION} />\n            <SessionSettingsBar>\n              <ConfigEditorConfigPicker\n                pipeline={pipeline}\n                partitionSets={partitionSets.results}\n                base={currentSession.base}\n                onSaveSession={onSaveSession}\n                onSelectPreset={onSelectPreset}\n                onSelectPartition={onSelectPartition}\n                repoAddress={repoAddress}\n              />\n              <SessionSettingsSpacer />\n              {launchpadType === 'asset' ? (\n                <TextInput\n                  readOnly\n                  value={\n                    currentSession.assetSelection\n                      ? currentSession.assetSelection\n                          .map((a) => tokenForAssetKey(a.assetKey))\n                          .join(', ')\n                      : '*'\n                  }\n                />\n              ) : (\n                <OpSelector\n                  serverProvidedSubsetError={\n                    preview?.isPipelineConfigValid.__typename === 'InvalidSubsetError'\n                      ? preview.isPipelineConfigValid\n                      : undefined\n                  }\n                  pipelineName={pipeline.name}\n                  value={currentSession.solidSelection || null}\n                  query={currentSession.solidSelectionQuery || null}\n                  onChange={onOpSelectionChange}\n                  flattenGraphs={currentSession.flattenGraphs}\n                  onFlattenGraphsChange={onFlattenGraphsChange}\n                  repoAddress={repoAddress}\n                />\n              )}\n\n              {isJob ? (\n                <span />\n              ) : (\n                <>\n                  <SessionSettingsSpacer />\n                  <ConfigEditorModePicker\n                    modes={pipeline.modes}\n                    modeError={modeError}\n                    onModeChange={onModeChange}\n                    modeName={currentSession.mode}\n                  />\n                </>\n              )}\n              <TagEditor\n                tagsFromDefinition={pipeline.tags}\n                tagsFromSession={tagsFromSession}\n                onChange={saveTags}\n                open={tagEditorOpen}\n                onRequestClose={closeTagEditor}\n              />\n              <div style={{flex: 1}} />\n              <ShortcutHandler\n                shortcutLabel=\"T\"\n                shortcutFilter={(e) => e.code === 'KeyT' && e.altKey}\n                onShortcut={openTagEditor}\n              >\n                <Button onClick={openTagEditor} icon={<Icon name=\"edit\" />}>\n                  Edit tags\n                </Button>\n              </ShortcutHandler>\n              <SessionSettingsSpacer />\n              <SecondPanelToggle axis=\"horizontal\" container={editorSplitPanelContainer} />\n            </SessionSettingsBar>\n            {pipeline.tags.length || tagsFromSession.length ? (\n              <Box\n                padding={{vertical: 8, left: 12, right: 0}}\n                border={{side: 'bottom', width: 1, color: Colors.Gray200}}\n              >\n                <TagContainer\n                  tagsFromDefinition={pipeline.tags}\n                  tagsFromSession={tagsFromSession}\n                  onRequestEdit={openTagEditor}\n                />\n              </Box>\n            ) : null}\n            {refreshableSessionBase ? (\n              <Box\n                padding={{vertical: 8, horizontal: 12}}\n                border={{side: 'bottom', width: 1, color: Colors.Gray200}}\n              >\n                <Group direction=\"row\" spacing={8} alignItems=\"center\">\n                  <Icon name=\"warning\" color={Colors.Yellow500} />\n                  <div>\n                    Your repository has been manually refreshed, and this configuration may now be\n                    out of date.\n                  </div>\n                  <Button\n                    intent=\"primary\"\n                    onClick={() => onRefreshConfig(refreshableSessionBase)}\n                    disabled={state.configLoading}\n                  >\n                    Refresh config\n                  </Button>\n                  <Button onClick={onDismissRefreshWarning}>Dismiss</Button>\n                </Group>\n              </Box>\n            ) : null}\n            <SplitPanelContainer\n              ref={editorSplitPanelContainer}\n              axis=\"horizontal\"\n              identifier=\"execution-editor\"\n              firstMinSize={100}\n              firstInitialPercent={70}\n              first={\n                <ConfigEditor\n                  ref={editor}\n                  readOnly={false}\n                  configSchema={runConfigSchema}\n                  configCode={currentSession.runConfigYaml}\n                  onConfigChange={onConfigChange}\n                  onHelpContextChange={(next) => {\n                    if (!isHelpContextEqual(editorHelpContext, next)) {\n                      dispatch({type: 'set-editor-help-context', payload: next});\n                    }\n                  }}\n                  checkConfig={checkConfig}\n                />\n              }\n              second={\n                <ConfigEditorHelp\n                  context={editorHelpContext}\n                  allInnerTypes={runConfigSchema?.allConfigTypes || []}\n                />\n              }\n            />\n          </>\n        }\n        second={\n          <>\n            <LoadingOverlay\n              isLoading={previewLoading}\n              message={!runConfigSchema ? LOADING_CONFIG_SCHEMA : LOADING_RUN_PREVIEW}\n            />\n            <RunPreview\n              launchpadType={launchpadType}\n              document={previewedDocument}\n              validation={preview ? preview.isPipelineConfigValid : null}\n              solidSelection={currentSession.solidSelection}\n              runConfigSchema={runConfigSchema}\n              onHighlightPath={(path) => editor.current?.moveCursorToPath(path)}\n              onRemoveExtraPaths={(paths) => onRemoveExtraPaths(paths)}\n              onScaffoldMissingConfig={onScaffoldMissingConfig}\n            />\n          </>\n        }\n      />\n\n      <LaunchButtonContainer launchpadType={launchpadType}>\n        <LaunchRootExecutionButton\n          title={launchButtonTitle}\n          warning={launchButtonWarning}\n          pipelineName={pipeline.name}\n          getVariables={buildExecutionVariables}\n          disabled={preview?.isPipelineConfigValid?.__typename !== 'PipelineConfigValidationValid'}\n          behavior=\"open\"\n        />\n      </LaunchButtonContainer>\n    </>\n  );\n};\n\n// Imported via React.lazy, which requires a default export.\n// eslint-disable-next-line import/no-default-export\nexport default LaunchpadSession;\n\n// This helper removes __typename, which prevents tags from being passed back to GraphQL\nconst onlyKeyAndValue = ({key, value}: {key: string; value: string}) => ({key, value});\n\nconst deletePropertyPath = (obj: any, path: string) => {\n  const parts = path.split('.');\n\n  // Here we iterate through the parts of the path to get to\n  // the second to last nested object. This is so we can call `delete` using\n  // this object and the last part of the path.\n  for (let i = 0; i < parts.length - 1; i++) {\n    obj = obj[parts[i]];\n    if (typeof obj === 'undefined') {\n      return;\n    }\n  }\n\n  const lastKey = parts.pop();\n  if (lastKey) {\n    delete obj[lastKey];\n  }\n};\n\nconst sanitizeConfigYamlString = (yamlString: string) => (yamlString || '').trim() || '{}';\n\nconst PREVIEW_CONFIG_QUERY = gql`\n  query PreviewConfigQuery(\n    $pipeline: PipelineSelector!\n    $runConfigData: RunConfigData!\n    $mode: String!\n  ) {\n    isPipelineConfigValid(pipeline: $pipeline, runConfigData: $runConfigData, mode: $mode) {\n      ...ConfigEditorValidationFragment\n      ...RunPreviewValidationFragment\n    }\n  }\n  ${RUN_PREVIEW_VALIDATION_FRAGMENT}\n  ${CONFIG_EDITOR_VALIDATION_FRAGMENT}\n`;\n\nconst SessionSettingsSpacer = styled.div`\n  width: 5px;\n`;\n\nconst RUN_CONFIG_SCHEMA_OR_ERROR_FRAGMENT = gql`\n  fragment LaunchpadSessionRunConfigSchemaFragment on RunConfigSchemaOrError {\n    __typename\n    ... on RunConfigSchema {\n      ...ConfigEditorRunConfigSchemaFragment\n    }\n    ... on ModeNotFoundError {\n      message\n    }\n  }\n  ${CONFIG_EDITOR_RUN_CONFIG_SCHEMA_FRAGMENT}\n`;\n\nexport const PIPELINE_EXECUTION_CONFIG_SCHEMA_QUERY = gql`\n  query PipelineExecutionConfigSchemaQuery($selector: PipelineSelector!, $mode: String) {\n    runConfigSchemaOrError(selector: $selector, mode: $mode) {\n      ...LaunchpadSessionRunConfigSchemaFragment\n    }\n  }\n\n  ${RUN_CONFIG_SCHEMA_OR_ERROR_FRAGMENT}\n`;\n","import {NonIdealState, NonIdealStateProps, Spinner, SplitPanelContainer} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {SessionSettingsBar} from './SessionSettingsBar';\n\nexport const LaunchpadSessionError: React.FC<NonIdealStateProps> = (props) => (\n  <SplitPanelContainer\n    axis=\"vertical\"\n    identifier=\"execution\"\n    firstInitialPercent={75}\n    firstMinSize={100}\n    first={\n      <>\n        <SessionSettingsBar>\n          <Spinner purpose=\"section\" />\n        </SessionSettingsBar>\n        <NonIdealState {...props} />\n      </>\n    }\n    second={<div />}\n  />\n);\n","import {SplitPanelContainer} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {LoadingOverlay} from './LoadingOverlay';\nimport {SessionSettingsBar} from './SessionSettingsBar';\n\nconst LOADING_PIPELINE = `Loading pipeline and partition sets...`;\n\nexport const LaunchpadSessionLoading = () => (\n  <SplitPanelContainer\n    axis=\"vertical\"\n    identifier=\"execution\"\n    firstInitialPercent={75}\n    firstMinSize={100}\n    first={\n      <>\n        <LoadingOverlay isLoading message={LOADING_PIPELINE} />\n        <SessionSettingsBar />\n      </>\n    }\n    second={<LoadingOverlay isLoading message=\"Loading pipeline and partition sets...\" />}\n  />\n);\n","import {Group, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nexport const LoadingOverlay: React.FC<{\n  isLoading: boolean;\n  message: string;\n}> = ({isLoading, message}) => (\n  <LoadingOverlayContainer isLoading={isLoading}>\n    <Group direction=\"row\" spacing={8} alignItems=\"center\">\n      <Spinner purpose=\"body-text\" />\n      <div>{message}</div>\n    </Group>\n  </LoadingOverlayContainer>\n);\n\nconst LoadingOverlayContainer = styled.div<{isLoading: boolean}>`\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background-color: #fff;\n  z-index: 20;\n  display: ${({isLoading}) => (!isLoading ? 'none' : 'flex')};\n  align-items: center;\n  justify-content: center;\n  opacity: ${({isLoading}) => (isLoading ? '0.7' : '0')};\n  transition: opacity 150ms linear;\n  transition-delay: 300ms;\n`;\n","import {Colors} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\nexport const SessionSettingsBar = styled.div`\n  color: white;\n  display: flex;\n  position: relative;\n  border-bottom: 1px solid ${Colors.Gray200};\n  background: ${Colors.White};\n  align-items: center;\n  height: 47px;\n  padding: 8px 10px;\n`;\n","import {\n  Box,\n  Button,\n  DialogBody,\n  DialogFooter,\n  Dialog,\n  Group,\n  Icon,\n  TextInput,\n  Tooltip,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {PipelineRunTag} from '../app/ExecutionSessionStorage';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\nimport {RunTag} from '../runs/RunTag';\n\ninterface ITagEditorProps {\n  tagsFromDefinition?: PipelineRunTag[];\n  tagsFromSession: PipelineRunTag[];\n  open: boolean;\n  onChange: (tags: PipelineRunTag[]) => void;\n  onRequestClose: () => void;\n}\n\ninterface ITagContainerProps {\n  tagsFromDefinition?: PipelineRunTag[];\n  tagsFromSession: PipelineRunTag[];\n  onRequestEdit: () => void;\n}\n\nexport const TagEditor: React.FC<ITagEditorProps> = ({\n  tagsFromDefinition = [],\n  tagsFromSession = [],\n  open,\n  onChange,\n  onRequestClose,\n}) => {\n  const [editState, setEditState] = React.useState(() =>\n    tagsFromSession.length ? tagsFromSession : [{key: '', value: ''}],\n  );\n\n  // Reset the edit state when you close and re-open the modal, or when\n  // tagsFromSession change while the modal is closed.\n  React.useEffect(() => {\n    if (!open) {\n      setEditState(tagsFromSession.length ? tagsFromSession : [{key: '', value: ''}]);\n    }\n  }, [tagsFromSession, open]);\n\n  const toSave: PipelineRunTag[] = editState\n    .map((tag: PipelineRunTag) => ({\n      key: tag.key.trim(),\n      value: tag.value.trim(),\n    }))\n    .filter((tag) => tag.key && tag.value);\n  const toError = editState\n    .map((tag: PipelineRunTag) => ({\n      key: tag.key.trim(),\n      value: tag.value.trim(),\n    }))\n    .filter((tag) => !tag.key !== !tag.value);\n\n  const onSave = () => {\n    if (!toError.length) {\n      onChange(toSave);\n      onRequestClose();\n    }\n  };\n\n  const disabled = editState === tagsFromSession || !!toError.length;\n\n  const onTagEdit = (key: string, value: string, idx: number) => {\n    setEditState((current) => [...current.slice(0, idx), {key, value}, ...current.slice(idx + 1)]);\n  };\n\n  const onRemove = (idx: number) => {\n    setEditState((current) => {\n      if (idx === 0 && current.length === 1) {\n        // If we're deleting the only item, just wipe it out.\n        return [{key: '', value: ''}];\n      }\n      return [...current.slice(0, idx), ...current.slice(idx + 1)];\n    });\n  };\n\n  const addTagEntry = () => {\n    setEditState((current) => [...current, {key: '', value: ''}]);\n  };\n\n  return (\n    <Dialog\n      icon=\"info\"\n      onClose={onRequestClose}\n      style={{minWidth: 700}}\n      title=\"Add tags to run\"\n      isOpen={open}\n    >\n      <DialogBody>\n        <Group spacing={16} direction=\"column\">\n          {tagsFromDefinition.length ? (\n            <Group direction=\"column\" spacing={8}>\n              <Box margin={{left: 2}} style={{fontSize: '13px', fontWeight: 500}}>\n                Tags from definition:\n              </Box>\n              <TagList>\n                {tagsFromDefinition.map((tag, idx) => {\n                  const {key} = tag;\n                  const anyOverride = editState.some((editable) => editable.key === key);\n                  if (anyOverride) {\n                    return (\n                      <Tooltip key={key} content=\"Overriden by custom tag value\" placement=\"top\">\n                        <span style={{opacity: 0.2}}>\n                          <RunTag tag={tag} key={idx} />\n                        </span>\n                      </Tooltip>\n                    );\n                  }\n                  return <RunTag tag={tag} key={key} />;\n                })}\n              </TagList>\n            </Group>\n          ) : null}\n          <Box flex={{direction: 'column', gap: 12}}>\n            <div>Custom tags:</div>\n            <Box flex={{direction: 'column', gap: 8}}>\n              {editState.map((tag, idx) => {\n                const {key, value} = tag;\n                return (\n                  <div\n                    key={idx}\n                    style={{\n                      display: 'flex',\n                      flexDirection: 'row',\n                      gap: 8,\n                    }}\n                  >\n                    <TextInput\n                      placeholder=\"Tag Key\"\n                      value={key}\n                      onChange={(e) => onTagEdit(e.target.value, value, idx)}\n                    />\n                    <TextInput\n                      placeholder=\"Tag Value\"\n                      value={value}\n                      onChange={(e) => onTagEdit(key, e.target.value, idx)}\n                    />\n                    <Button\n                      disabled={editState.length === 1 && !key.trim() && !value.trim()}\n                      onClick={() => onRemove(idx)}\n                      icon={<Icon name=\"delete\" />}\n                    >\n                      Remove\n                    </Button>\n                  </div>\n                );\n              })}\n            </Box>\n            <Box margin={{left: 2}} flex={{direction: 'row'}}>\n              <Button onClick={addTagEntry} icon={<Icon name=\"add_circle\" />}>\n                Add custom tag\n              </Button>\n            </Box>\n          </Box>\n        </Group>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={onRequestClose}>Cancel</Button>\n        <ShortcutHandler\n          shortcutLabel=\"Enter\"\n          shortcutFilter={(e) => e.code === 'Enter' && e.altKey}\n          onShortcut={onSave}\n        >\n          <Button intent=\"primary\" onClick={onSave} disabled={disabled}>\n            Apply\n          </Button>\n        </ShortcutHandler>\n      </DialogFooter>\n    </Dialog>\n  );\n};\n\nexport const TagContainer = ({tagsFromSession, tagsFromDefinition}: ITagContainerProps) => {\n  return (\n    <Container>\n      <TagList>\n        {tagsFromDefinition\n          ? tagsFromDefinition.map((tag, idx) => {\n              const {key} = tag;\n              const anyOverride = tagsFromSession.some((sessionTag) => sessionTag.key === key);\n              if (anyOverride) {\n                return (\n                  <Tooltip key={key} content=\"Overriden by custom tag value\" placement=\"top\">\n                    <span style={{opacity: 0.2}}>\n                      <RunTag tag={tag} key={idx} />\n                    </span>\n                  </Tooltip>\n                );\n              }\n              return <RunTag tag={tag} key={idx} />;\n            })\n          : undefined}\n        {tagsFromSession.map((tag, idx) => (\n          <RunTag tag={tag} key={idx} />\n        ))}\n      </TagList>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  align-items: flex-start;\n  display: flex;\n  flex-direction: row;\n`;\n\nconst TagList = styled.div`\n  display: flex;\n  flex: 1;\n  flex-wrap: wrap;\n  gap: 4px;\n`;\n","import {FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\n\nexport const showLaunchError = (error: Error) => {\n  console.error('Error launching run:', error);\n\n  const body =\n    error.message === 'Failed to fetch' ? (\n      <div style={{fontFamily: FontFamily.default}}>\n        Make sure the Dagit server is running and try again.\n      </div>\n    ) : (\n      <div>{error.message}</div>\n    );\n\n  showCustomAlert({\n    title: 'Could not launch run',\n    body,\n  });\n};\n","import {Box, Colors, Icon, IconWrapper, Spinner, Tooltip} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {usePermissions} from '../app/Permissions';\nimport {withMiddleTruncation} from '../app/Util';\nimport {repoAddressAsString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePathFromAddress} from '../workspace/workspacePath';\n\nimport {ReloadRepositoryLocationButton} from './ReloadRepositoryLocationButton';\n\nexport const RepositoryLink: React.FC<{\n  repoAddress: RepoAddress;\n  showIcon?: boolean;\n  showRefresh?: boolean;\n}> = ({repoAddress, showIcon = false, showRefresh = true}) => {\n  const {location} = repoAddress;\n  const {canReloadRepositoryLocation} = usePermissions();\n\n  const repoAddressTruncated = [\n    withMiddleTruncation(repoAddress.name, {maxLength: 19}),\n    withMiddleTruncation(repoAddress.location, {maxLength: 19}),\n  ].join('@');\n\n  return (\n    <Box\n      flex={{display: 'inline-flex', direction: 'row', alignItems: 'center'}}\n      title={repoAddressAsString(repoAddress)}\n    >\n      {showIcon && <Icon name=\"folder\" style={{marginRight: 8}} color={Colors.Gray400} />}\n      <RepositoryName to={workspacePathFromAddress(repoAddress)}>\n        {repoAddressTruncated}\n      </RepositoryName>\n      {canReloadRepositoryLocation.enabled && showRefresh ? (\n        <ReloadRepositoryLocationButton location={location}>\n          {({tryReload, reloading}) => (\n            <ReloadTooltip\n              content={\n                reloading ? (\n                  'Reloading'\n                ) : (\n                  <>\n                    Reload location <strong>{location}</strong>\n                  </>\n                )\n              }\n            >\n              {reloading ? (\n                <Spinner purpose=\"body-text\" />\n              ) : (\n                <StyledButton onClick={tryReload}>\n                  <Icon name=\"refresh\" color={Colors.Gray400} />\n                </StyledButton>\n              )}\n            </ReloadTooltip>\n          )}\n        </ReloadRepositoryLocationButton>\n      ) : null}\n    </Box>\n  );\n};\n\nconst RepositoryName = styled(Link)`\n  max-width: 280px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst ReloadTooltip = styled(Tooltip)`\n  margin-left: 4px;\n\n  && {\n    display: block;\n  }\n`;\n\nconst StyledButton = styled.button`\n  background-color: transparent;\n  border: 0;\n  cursor: pointer;\n  display: block;\n  padding: 0;\n  margin: 0;\n\n  :focus:not(:focus-visible) {\n    outline: none;\n  }\n\n  & ${IconWrapper} {\n    display: block;\n    transition: color 100ms linear;\n  }\n\n  :hover ${IconWrapper} {\n    color: ${Colors.Blue500};\n  }\n`;\n","import {Box, ButtonLink, Colors, Tag, Tooltip, FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {ScheduleSwitch} from '../schedules/ScheduleSwitch';\nimport {humanCronString} from '../schedules/humanCronString';\nimport {ScheduleSwitchFragment} from '../schedules/types/ScheduleSwitchFragment';\nimport {SensorSwitch} from '../sensors/SensorSwitch';\nimport {SensorSwitchFragment} from '../sensors/types/SensorSwitchFragment';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePathFromAddress} from '../workspace/workspacePath';\n\nimport {ScheduleAndSensorDialog} from './ScheduleAndSensorDialog';\n\nexport const ScheduleOrSensorTag: React.FC<{\n  schedules: ScheduleSwitchFragment[];\n  sensors: SensorSwitchFragment[];\n  repoAddress: RepoAddress;\n  showSwitch?: boolean;\n}> = ({schedules, sensors, repoAddress, showSwitch = true}) => {\n  const [open, setOpen] = React.useState(false);\n\n  const scheduleCount = schedules.length;\n  const sensorCount = sensors.length;\n\n  if (scheduleCount > 1 || sensorCount > 1 || (scheduleCount && sensorCount)) {\n    const buttonText =\n      scheduleCount && sensorCount\n        ? `View ${scheduleCount + sensorCount} schedules/sensors`\n        : scheduleCount\n        ? `View ${scheduleCount} schedules`\n        : `View ${sensorCount} sensors`;\n\n    const icon = scheduleCount > 1 ? 'schedule' : 'sensors';\n\n    return (\n      <>\n        <Tag icon={icon}>\n          <ButtonLink onClick={() => setOpen(true)} color={Colors.Link}>\n            {buttonText}\n          </ButtonLink>\n        </Tag>\n        <ScheduleAndSensorDialog\n          isOpen={open}\n          onClose={() => setOpen(false)}\n          repoAddress={repoAddress}\n          schedules={schedules}\n          sensors={sensors}\n          showSwitch={showSwitch}\n        />\n      </>\n    );\n  }\n\n  if (scheduleCount) {\n    return (\n      <MatchingSchedule schedule={schedules[0]} repoAddress={repoAddress} showSwitch={showSwitch} />\n    );\n  }\n\n  if (sensorCount) {\n    return <MatchingSensor sensor={sensors[0]} repoAddress={repoAddress} showSwitch={showSwitch} />;\n  }\n\n  return null;\n};\n\nconst MatchingSchedule: React.FC<{\n  schedule: ScheduleSwitchFragment;\n  repoAddress: RepoAddress;\n  showSwitch: boolean;\n}> = ({schedule, repoAddress, showSwitch}) => {\n  const {cronSchedule, executionTimezone, scheduleState} = schedule;\n  const running = scheduleState.status === 'RUNNING';\n  const tag = (\n    <Tag intent={running ? 'primary' : 'none'} icon=\"schedule\">\n      <Box flex={{direction: 'row', alignItems: 'center', gap: 4}}>\n        Schedule:\n        <Link to={workspacePathFromAddress(repoAddress, `/schedules/${schedule.name}`)}>\n          {humanCronString(cronSchedule, executionTimezone || 'UTC')}\n        </Link>\n        {showSwitch ? (\n          <ScheduleSwitch size=\"small\" repoAddress={repoAddress} schedule={schedule} />\n        ) : null}\n      </Box>\n    </Tag>\n  );\n\n  return schedule.cronSchedule ? (\n    <Tooltip\n      placement=\"bottom\"\n      content={\n        <Box flex={{direction: 'column', gap: 4}}>\n          <div>\n            Name: <strong>{schedule.name}</strong>\n          </div>\n          <div>\n            Cron:{' '}\n            <span style={{fontFamily: FontFamily.monospace, marginLeft: '4px'}}>\n              ({schedule.cronSchedule})\n            </span>\n          </div>\n          <div>\n            Timezone: <strong>{schedule.executionTimezone || 'UTC'}</strong>\n          </div>\n        </Box>\n      }\n    >\n      {tag}\n    </Tooltip>\n  ) : (\n    tag\n  );\n};\n\nconst MatchingSensor: React.FC<{\n  sensor: SensorSwitchFragment;\n  repoAddress: RepoAddress;\n  showSwitch: boolean;\n}> = ({sensor, repoAddress, showSwitch}) => {\n  const running = sensor.sensorState.status === 'RUNNING';\n  return (\n    <Tag intent={running ? 'primary' : 'none'} icon=\"sensors\">\n      <Box flex={{direction: 'row', alignItems: 'center', gap: 4}}>\n        Sensor:\n        <Link to={workspacePathFromAddress(repoAddress, `/sensors/${sensor.name}`)}>\n          {sensor.name}\n        </Link>\n        {showSwitch ? (\n          <SensorSwitch size=\"small\" repoAddress={repoAddress} sensor={sensor} />\n        ) : null}\n      </Box>\n    </Tag>\n  );\n};\n","import {gql} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {Code} from '@blueprintjs/core';\nimport {Colors, FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {breakOnUnderscores} from '../app/Util';\nimport {DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT, TypeWithTooltip} from '../typeexplorer/TypeWithTooltip';\n\nimport {OpTypeSignatureFragment} from './types/OpTypeSignatureFragment';\n\ninterface IOpTypeSignature {\n  definition: OpTypeSignatureFragment;\n}\n\nexport const OpTypeSignature: React.FC<IOpTypeSignature> = (props) => {\n  const {inputDefinitions, outputDefinitions} = props.definition;\n\n  const inputSide = inputDefinitions.map((input, i) => (\n    <span key={i}>\n      {breakOnUnderscores(input.name)}: <TypeWithTooltip type={input.type} />\n      {i < inputDefinitions.length - 1 ? ', ' : ''}\n    </span>\n  ));\n  const outputSide = outputDefinitions.map((output, i) => (\n    <span key={i}>\n      {breakOnUnderscores(output.name)}: <TypeWithTooltip type={output.type} />\n      {i < outputDefinitions.length - 1 ? ', ' : ''}\n    </span>\n  ));\n  return (\n    <TypeSignature>\n      ({inputSide})  ({outputSide})\n    </TypeSignature>\n  );\n};\n\nexport const OP_TYPE_SIGNATURE_FRAGMENT = gql`\n  fragment OpTypeSignatureFragment on ISolidDefinition {\n    outputDefinitions {\n      name\n      type {\n        ...DagsterTypeWithTooltipFragment\n      }\n    }\n    inputDefinitions {\n      name\n      type {\n        ...DagsterTypeWithTooltipFragment\n      }\n    }\n  }\n\n  ${DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT}\n`;\n\nconst TypeSignature = styled(Code)`\n  && {\n    background: ${Colors.Blue50};\n    font-family: ${FontFamily.monospace};\n    font-size: 14px;\n    padding: 4px;\n    box-shadow: none;\n    color: black;\n  }\n`;\n","import {TextInput} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\n\nexport const PartitionRangeInput: React.FC<{\n  value: string[];\n  onChange: (partitionNames: string[]) => void;\n  partitionNames: string[];\n}> = ({value, onChange, partitionNames}) => {\n  const [valueString, setValueString] = React.useState('');\n  const partitionNameJSON = React.useMemo(() => JSON.stringify(partitionNames), [partitionNames]);\n\n  React.useEffect(() => {\n    const partitionNameArr = JSON.parse(partitionNameJSON);\n    setValueString(partitionsToText(value, partitionNameArr));\n  }, [value, partitionNameJSON]);\n\n  const placeholder = React.useMemo(() => {\n    return placeholderForPartitions(partitionNames);\n  }, [partitionNames]);\n\n  const tryCommit = (e: React.SyntheticEvent<HTMLInputElement>) => {\n    try {\n      onChange(textToPartitions(valueString, partitionNames));\n    } catch (err: any) {\n      e.preventDefault();\n      showCustomAlert({body: err.message});\n    }\n  };\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      tryCommit(e);\n    }\n  };\n\n  return (\n    <TextInput\n      placeholder={placeholder}\n      value={valueString}\n      style={{display: 'flex', width: '100%', flex: 1, flexGrow: 1}}\n      onChange={(e) => setValueString(e.currentTarget.value)}\n      onKeyDown={onKeyDown}\n      onBlur={tryCommit}\n    />\n  );\n};\n\nexport function assembleIntoSpans(keys: string[], keyTestFn: (key: string) => boolean) {\n  const spans: {startIdx: number; endIdx: number; status: boolean}[] = [];\n\n  for (let ii = 0; ii < keys.length; ii++) {\n    const status = keyTestFn(keys[ii]);\n    if (!spans.length || spans[spans.length - 1].status !== status) {\n      spans.push({startIdx: ii, endIdx: ii, status});\n    } else {\n      spans[spans.length - 1].endIdx = ii;\n    }\n  }\n\n  return spans;\n}\n\nexport function stringForSpan(\n  {startIdx, endIdx}: {startIdx: number; endIdx: number},\n  all: string[],\n) {\n  return startIdx === endIdx ? all[startIdx] : `[${all[startIdx]}...${all[endIdx]}]`;\n}\n\nfunction placeholderForPartitions(names: string[]) {\n  if (names.length < 4) {\n    return `ex: ${names[0]}, ${names[1]}`;\n  }\n  return `ex: ${names[0]}, ${names[1]}, [${names[2]}...${names[names.length - 1]}]`;\n}\n\nfunction textToPartitions(selected: string, all: string[]) {\n  const terms = selected.split(',').map((s) => s.trim());\n  const result = [];\n  for (const term of terms) {\n    if (term.length === 0) {\n      continue;\n    }\n    const rangeMatch = /^\\[(.*)\\.\\.\\.(.*)\\]$/g.exec(term);\n    if (rangeMatch) {\n      const [, start, end] = rangeMatch;\n      const allStartIdx = all.indexOf(start);\n      const allEndIdx = all.indexOf(end);\n      if (allStartIdx === -1 || allEndIdx === -1) {\n        throw new Error(`Could not find partitions for provided range: ${start}...${end}`);\n      }\n      result.push(...all.slice(allStartIdx, allEndIdx + 1));\n    } else if (term.includes('*')) {\n      const [prefix, suffix] = term.split('*');\n      result.push(...all.filter((p) => p.startsWith(prefix) && p.endsWith(suffix)));\n    } else {\n      const idx = all.indexOf(term);\n      if (idx === -1) {\n        throw new Error(`Could not find partition: ${term}`);\n      }\n      result.push(term);\n    }\n  }\n  return result.sort((a, b) => all.indexOf(a) - all.indexOf(b));\n}\n\nfunction partitionsToText(selected: string[], all: string[]) {\n  return assembleIntoSpans(all, (key) => selected.includes(key))\n    .filter((s) => s.status)\n    .map((s) => stringForSpan(s, all))\n    .join(', ');\n}\n","import {Box, Tooltip, Colors} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {useViewport} from '../gantt/useViewport';\nimport {RunStatus} from '../types/globalTypes';\n\nimport {assembleIntoSpans} from './PartitionRangeInput';\n\ntype SelectionRange = {\n  start: string;\n  end: string;\n};\n\nconst MIN_SPAN_WIDTH = 8;\n\nexport const PartitionStatus: React.FC<{\n  partitionNames: string[];\n  partitionData: {[name: string]: RunStatus | null};\n  selected?: string[];\n  small?: boolean;\n  onClick?: (partitionName: string) => void;\n  onSelect?: (selection: string[]) => void;\n  splitPartitions?: boolean;\n  hideStatusTooltip?: boolean;\n  tooltipMessage?: string;\n  selectionWindowSize?: number;\n}> = ({\n  partitionNames,\n  partitionData,\n  selected,\n  onSelect,\n  onClick,\n  splitPartitions,\n  small,\n  selectionWindowSize,\n  hideStatusTooltip,\n  tooltipMessage,\n}) => {\n  const ref = React.useRef<HTMLDivElement>(null);\n  const [currentSelectionRange, setCurrentSelectionRange] = React.useState<\n    SelectionRange | undefined\n  >();\n  const {viewport, containerProps} = useViewport();\n\n  const toPartitionName = React.useCallback(\n    (e: MouseEvent) => {\n      if (!ref.current) {\n        return null;\n      }\n      const percentage =\n        (e.clientX - ref.current.getBoundingClientRect().left) / ref.current.clientWidth;\n      return partitionNames[Math.floor(percentage * partitionNames.length)];\n    },\n    [partitionNames, ref],\n  );\n  const getRangeSelection = React.useCallback(\n    (start: string, end: string) => {\n      const startIdx = partitionNames.indexOf(start);\n      const endIdx = partitionNames.indexOf(end);\n      return partitionNames.slice(Math.min(startIdx, endIdx), Math.max(startIdx, endIdx) + 1);\n    },\n    [partitionNames],\n  );\n\n  React.useEffect(() => {\n    if (!currentSelectionRange || !onSelect || !selected) {\n      return;\n    }\n    const setHoveredSelectionRange = (e: MouseEvent) => {\n      const end = toPartitionName(e) || currentSelectionRange.end;\n      setCurrentSelectionRange({start: currentSelectionRange?.start, end});\n    };\n    const setSelectionRange = (e: MouseEvent) => {\n      if (!currentSelectionRange) {\n        return;\n      }\n      const end = toPartitionName(e);\n      const currentSelection = getRangeSelection(\n        currentSelectionRange.start,\n        end || currentSelectionRange.end,\n      );\n      const allSelected = currentSelection.every((name) => selected.includes(name));\n      if (allSelected) {\n        onSelect(selected.filter((x) => !currentSelection.includes(x)));\n      } else {\n        const newSelected = new Set(selected);\n        currentSelection.forEach((name) => newSelected.add(name));\n        onSelect(Array.from(newSelected));\n      }\n      setCurrentSelectionRange(undefined);\n    };\n    window.addEventListener('mousemove', setHoveredSelectionRange);\n    window.addEventListener('mouseup', setSelectionRange);\n    return () => {\n      window.removeEventListener('mousemove', setHoveredSelectionRange);\n      window.removeEventListener('mouseup', setSelectionRange);\n    };\n  }, [onSelect, selected, currentSelectionRange, getRangeSelection, toPartitionName]);\n\n  const selectedSpans = selected\n    ? assembleIntoSpans(partitionNames, (key) => selected.includes(key)).filter((s) => s.status)\n    : [];\n  const spans = splitPartitions\n    ? partitionNames.map((name, idx) => ({startIdx: idx, endIdx: idx, status: partitionData[name]}))\n    : _partitionsToSpans(partitionNames, partitionData);\n  const highestIndex = spans.map((s) => s.endIdx).reduce((prev, cur) => Math.max(prev, cur), 0);\n  const indexToPct = (idx: number) => `${((idx * 100) / partitionNames.length).toFixed(3)}%`;\n  const showSeparators =\n    splitPartitions && viewport.width > MIN_SPAN_WIDTH * (partitionNames.length + 1);\n\n  const _onClick = onClick\n    ? (e: React.MouseEvent<any, MouseEvent>) => {\n        const partitionName = toPartitionName(e.nativeEvent);\n        partitionName && onClick(partitionName);\n      }\n    : undefined;\n\n  const _onMouseDown = onSelect\n    ? (e: React.MouseEvent<any, MouseEvent>) => {\n        const name = toPartitionName(e.nativeEvent);\n        if (!name) {\n          return;\n        }\n        setCurrentSelectionRange({start: name, end: name});\n      }\n    : undefined;\n\n  return (\n    <div {...containerProps}>\n      {selected && !selectionWindowSize ? (\n        <div style={{position: 'relative', width: '100%', overflowX: 'hidden', height: 10}}>\n          {selectedSpans.map((s) => (\n            <div\n              key={s.startIdx}\n              style={{\n                left: `min(calc(100% - 2px), ${indexToPct(s.startIdx)})`,\n                width: indexToPct(s.endIdx - s.startIdx + 1),\n                position: 'absolute',\n                top: 0,\n                height: 8,\n                border: `2px solid ${Colors.Blue500}`,\n                borderBottom: 0,\n              }}\n            />\n          ))}\n        </div>\n      ) : null}\n      <div\n        style={{\n          position: 'relative',\n          width: '100%',\n          height: small ? 12 : 24,\n          borderRadius: 4,\n          overflow: 'hidden',\n          cursor: 'pointer',\n        }}\n        ref={ref}\n        onClick={_onClick}\n        onMouseDown={_onMouseDown}\n      >\n        {spans.map((s) => (\n          <div\n            key={s.startIdx}\n            style={{\n              left: `min(calc(100% - 2px), ${indexToPct(s.startIdx)})`,\n              width: indexToPct(s.endIdx - s.startIdx + 1),\n              minWidth: s.status ? 2 : undefined,\n              position: 'absolute',\n              zIndex: s.startIdx === 0 || s.endIdx === highestIndex ? 3 : s.status ? 2 : 1, //End-caps, then statuses, then missing\n              top: 0,\n            }}\n          >\n            {hideStatusTooltip || tooltipMessage ? (\n              <div\n                style={{\n                  width: '100%',\n                  height: 24,\n                  outline: 'none',\n                  background: _statusToColor(s.status),\n                }}\n                title={tooltipMessage}\n              />\n            ) : (\n              <Tooltip\n                display=\"block\"\n                content={\n                  tooltipMessage\n                    ? tooltipMessage\n                    : s.startIdx === s.endIdx\n                    ? `Partition ${partitionNames[s.startIdx]} is ${_statusToText(s.status)}`\n                    : `Partitions ${partitionNames[s.startIdx]} through ${\n                        partitionNames[s.endIdx]\n                      } are ${_statusToText(s.status)}`\n                }\n              >\n                <div\n                  style={{\n                    width: '100%',\n                    height: 24,\n                    outline: 'none',\n                    background: _statusToColor(s.status),\n                  }}\n                />\n              </Tooltip>\n            )}\n          </div>\n        ))}\n        {showSeparators\n          ? spans.slice(1).map((s) => (\n              <div\n                key={`separator_${s.startIdx}`}\n                style={{\n                  left: `min(calc(100% - 2px), ${indexToPct(s.startIdx)})`,\n                  width: 1,\n                  height: small ? 14 : 24,\n                  position: 'absolute',\n                  zIndex: 4,\n                  background: Colors.KeylineGray,\n                  top: 0,\n                }}\n              />\n            ))\n          : null}\n        {currentSelectionRange ? (\n          <div\n            key=\"currentSelectionRange\"\n            style={{\n              left: `min(calc(100% - 2px), ${indexToPct(\n                Math.min(\n                  partitionNames.indexOf(currentSelectionRange.start),\n                  partitionNames.indexOf(currentSelectionRange.end),\n                ),\n              )})`,\n              width: indexToPct(\n                Math.abs(\n                  partitionNames.indexOf(currentSelectionRange.end) -\n                    partitionNames.indexOf(currentSelectionRange.start),\n                ) + 1,\n              ),\n              minWidth: 2,\n              height: small ? 14 : 24,\n              position: 'absolute',\n              zIndex: 4,\n              background: Colors.White,\n              opacity: 0.7,\n              top: 0,\n            }}\n          />\n        ) : null}\n        {selected && selected.length && selectionWindowSize ? (\n          <>\n            <div\n              key=\"selectionRangeBackgroundLeft\"\n              style={{\n                left: 0,\n                width: indexToPct(\n                  Math.min(\n                    partitionNames.indexOf(selected[selected.length - 1]),\n                    partitionNames.indexOf(selected[0]),\n                  ),\n                ),\n                height: small ? 14 : 24,\n                position: 'absolute',\n                zIndex: 5,\n                background: Colors.White,\n                opacity: 0.5,\n                top: 0,\n              }}\n            />\n            <div\n              key=\"selectionRange\"\n              style={{\n                left: `min(calc(100% - 3px), ${indexToPct(\n                  Math.min(\n                    partitionNames.indexOf(selected[0]),\n                    partitionNames.indexOf(selected[selected.length - 1]),\n                  ),\n                )})`,\n                width: indexToPct(\n                  Math.abs(\n                    partitionNames.indexOf(selected[selected.length - 1]) -\n                      partitionNames.indexOf(selected[0]),\n                  ) + 1,\n                ),\n                minWidth: 2,\n                height: small ? 14 : 24,\n                position: 'absolute',\n                zIndex: 5,\n                border: `3px solid ${Colors.Dark}`,\n                borderRadius: 4,\n                top: 0,\n              }}\n            />\n            <div\n              key=\"selectionRangeBackgroundRight\"\n              style={{\n                right: 0,\n                width: indexToPct(\n                  partitionNames.length -\n                    1 -\n                    Math.max(\n                      partitionNames.indexOf(selected[selected.length - 1]),\n                      partitionNames.indexOf(selected[0]),\n                    ),\n                ),\n                height: small ? 14 : 24,\n                position: 'absolute',\n                zIndex: 5,\n                background: Colors.White,\n                opacity: 0.5,\n                top: 0,\n              }}\n            />\n          </>\n        ) : null}\n      </div>\n      {!splitPartitions ? (\n        <Box\n          flex={{justifyContent: 'space-between'}}\n          margin={{top: 4}}\n          style={{fontSize: '0.8rem', color: Colors.Gray500}}\n        >\n          <span>{partitionNames[0]}</span>\n          <span>{partitionNames[partitionNames.length - 1]}</span>\n        </Box>\n      ) : null}\n    </div>\n  );\n};\n\nfunction _partitionsToSpans(keys: string[], keyStatus: {[key: string]: RunStatus | null}) {\n  const spans: {startIdx: number; endIdx: number; status: RunStatus | null}[] = [];\n\n  for (let ii = 0; ii < keys.length; ii++) {\n    const status: RunStatus | null = keys[ii] in keyStatus ? keyStatus[keys[ii]] : null;\n    if (!spans.length || spans[spans.length - 1].status !== status) {\n      spans.push({startIdx: ii, endIdx: ii, status});\n    } else {\n      spans[spans.length - 1].endIdx = ii;\n    }\n  }\n\n  return spans;\n}\n\nconst _statusToColor = (status: RunStatus | null) => {\n  switch (status) {\n    case RunStatus.SUCCESS:\n      return Colors.Green500;\n    case RunStatus.CANCELED:\n    case RunStatus.CANCELING:\n    case RunStatus.FAILURE:\n      return Colors.Red500;\n    case RunStatus.STARTED:\n      return Colors.Blue500;\n    case RunStatus.QUEUED:\n      return Colors.Blue200;\n    default:\n      return Colors.Gray200;\n  }\n};\n\nconst _statusToText = (status: RunStatus | null) => {\n  switch (status) {\n    case RunStatus.SUCCESS:\n      return 'complete';\n    case RunStatus.CANCELED:\n    case RunStatus.CANCELING:\n    case RunStatus.FAILURE:\n      return 'failed';\n    case RunStatus.STARTED:\n      return 'in progress';\n    case RunStatus.QUEUED:\n      return 'queued';\n    default:\n      return 'missing';\n  }\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {NonIdealState, Spinner} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {RunTable, RUN_TABLE_RUN_FRAGMENT} from '../runs/RunTable';\nimport {DagsterTag} from '../runs/RunTag';\nimport {StepEventStatus} from '../types/globalTypes';\n\nimport {\n  PartitionRunListForStepQuery,\n  PartitionRunListForStepQueryVariables,\n} from './types/PartitionRunListForStepQuery';\n\ninterface StepStats {\n  startTime: number | null;\n  endTime: number | null;\n  status: StepEventStatus | null;\n  materializations: Record<string, unknown>[];\n  expectationResults: {success: boolean}[];\n}\n\ninterface PartitionRunListForStepProps {\n  pipelineName: string;\n  partitionName: string;\n  stepName: string;\n  stepStatsByRunId: {\n    [runId: string]: StepStats;\n  };\n}\n\nexport const PartitionRunListForStep: React.FC<PartitionRunListForStepProps> = (props) => {\n  const {data, loading} = useQuery<\n    PartitionRunListForStepQuery,\n    PartitionRunListForStepQueryVariables\n  >(PARTITION_RUN_LIST_FOR_STEP_QUERY, {\n    variables: {\n      filter: {\n        pipelineName: props.pipelineName,\n        tags: [{key: DagsterTag.Partition, value: props.partitionName}],\n      },\n    },\n  });\n\n  if (loading || !data) {\n    return <Spinner purpose=\"section\" />;\n  }\n\n  if (data.pipelineRunsOrError.__typename !== 'Runs') {\n    return (\n      <NonIdealState\n        icon=\"error\"\n        title=\"Query Error\"\n        description={data.pipelineRunsOrError.message}\n      />\n    );\n  }\n  return (\n    <div>\n      <RunTable\n        runs={data.pipelineRunsOrError.results}\n        additionalColumnHeaders={[\n          <th key=\"context\" style={{maxWidth: 150}}>\n            Step Info\n          </th>,\n        ]}\n      />\n    </div>\n  );\n};\n\nconst PARTITION_RUN_LIST_FOR_STEP_QUERY = gql`\n  query PartitionRunListForStepQuery($filter: RunsFilter!) {\n    pipelineRunsOrError(filter: $filter, limit: 500) {\n      ... on PipelineRuns {\n        results {\n          ...RunTableRunFragment\n          id\n          runId\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ${RUN_TABLE_RUN_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  Colors,\n  DialogFooter,\n  Dialog,\n  Icon,\n  MenuItem,\n  Menu,\n  Popover,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {useViewport} from '../gantt/useViewport';\nimport {linkToRunEvent} from '../runs/RunUtils';\nimport {RunFilterToken} from '../runs/RunsFilterInput';\nimport {MenuLink} from '../ui/MenuLink';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {PartitionRunListForStep} from './PartitionRunListForStep';\nimport {\n  BOX_SIZE,\n  GridColumn,\n  GridFloatingContainer,\n  LeftLabel,\n  TopLabel,\n  topLabelHeightForLabels,\n  TopLabelTilted,\n} from './RunMatrixUtils';\nimport {PartitionMatrixStepRunFragment} from './types/PartitionMatrixStepRunFragment';\nimport {\n  PartitionStepStatusPipelineQuery,\n  PartitionStepStatusPipelineQueryVariables,\n} from './types/PartitionStepStatusPipelineQuery';\nimport {\n  PARTITION_MATRIX_SOLID_HANDLE_FRAGMENT,\n  isStepKeyForNode,\n  MatrixStep,\n  PartitionRuns,\n  StatusSquareFinalColor,\n  useMatrixData,\n} from './useMatrixData';\n\ninterface PartitionRunSelection {\n  partitionName: string;\n  stepName: string;\n}\n\ninterface PartitionStepStatusProps {\n  pipelineName: string;\n  partitionNames: string[];\n  partitions: PartitionRuns[];\n  repoAddress: RepoAddress;\n  runFilters?: RunFilterToken[];\n  setRunFilters?: (val: RunFilterToken[]) => void;\n  offset: number;\n  setOffset: (val: number) => void;\n  setPageSize: (val: number) => void;\n}\n\nconst timeboundsOfPartitions = (partitionColumns: {steps: {unix: number}[]}[]) => {\n  let [minUnix, maxUnix] = [Date.now() / 1000, 1];\n  for (const partition of partitionColumns) {\n    for (const step of partition.steps) {\n      if (step.unix === 0) {\n        continue;\n      }\n      [minUnix, maxUnix] = [Math.min(minUnix, step.unix), Math.max(maxUnix, step.unix)];\n    }\n  }\n  return [minUnix, maxUnix] as const;\n};\n\nexport const PartitionStepStatus: React.FC<PartitionStepStatusProps> = (props) => {\n  const {viewport, containerProps} = useViewport();\n  const [hovered, setHovered] = React.useState<PartitionRunSelection | null>(null);\n  const [focused, setFocused] = React.useState<PartitionRunSelection | null>(null);\n  const {setPageSize} = props;\n\n  React.useEffect(() => {\n    if (viewport.width) {\n      const pageSize = Math.ceil(viewport.width / BOX_SIZE) - BUFFER;\n      setPageSize(pageSize);\n    }\n  }, [viewport.width, setPageSize]);\n\n  // Retrieve the pipeline's structure\n  const repositorySelector = repoAddressToSelector(props.repoAddress);\n  const pipelineSelector = {...repositorySelector, pipelineName: props.pipelineName};\n  const pipeline = useQuery<\n    PartitionStepStatusPipelineQuery,\n    PartitionStepStatusPipelineQueryVariables\n  >(PARTITION_STEP_STATUS_PIPELINE_QUERY, {\n    variables: {pipelineSelector},\n  });\n\n  const solidHandles =\n    pipeline.data?.pipelineSnapshotOrError.__typename === 'PipelineSnapshot' &&\n    pipeline.data.pipelineSnapshotOrError.solidHandles;\n\n  const data = useMatrixData({\n    partitionNames: props.partitionNames,\n    partitions: props.partitions,\n    stepQuery: '',\n    solidHandles,\n  });\n\n  if (!data || !solidHandles) {\n    return <span />;\n  }\n\n  const {stepRows, partitionColumns} = data;\n\n  const sortPartitionSteps = (steps: MatrixStep[]) => {\n    const stepsByName = {};\n    steps.forEach((step) => (stepsByName[step.name] = step));\n    return stepRows.map((stepRow) => stepsByName[stepRow.name]);\n  };\n\n  const BUFFER = 3;\n  const visibleCount = Math.ceil(viewport.width / BOX_SIZE) - BUFFER;\n  const visibleStart = Math.max(0, partitionColumns.length - props.offset - visibleCount);\n  const visibleEnd = Math.max(visibleCount, partitionColumns.length - props.offset);\n  const visibleColumns = partitionColumns.slice(visibleStart, visibleEnd);\n  const [minUnix, maxUnix] = timeboundsOfPartitions(partitionColumns);\n  const topLabelHeight = topLabelHeightForLabels(partitionColumns.map((p) => p.name));\n\n  return (\n    <PartitionRunMatrixContainer>\n      <Dialog\n        isOpen={!!focused}\n        onClose={() => setFocused(null)}\n        style={{width: '90vw'}}\n        title={focused ? `${focused.partitionName} runs (${focused.stepName})` : ''}\n      >\n        <Box padding={{bottom: 12}}>\n          {focused && (\n            <PartitionRunListForStep\n              pipelineName={props.pipelineName}\n              partitionName={focused.partitionName}\n              stepName={focused.stepName}\n              stepStatsByRunId={Object.assign(\n                {},\n                ...(props.partitions.find((p) => p.name === focused.partitionName)?.runs || []).map(\n                  (run) => ({\n                    [run.runId]: run.stepStats.find((s) =>\n                      isStepKeyForNode(focused.stepName, s.stepKey),\n                    ),\n                  }),\n                ),\n              )}\n            />\n          )}\n        </Box>\n        <DialogFooter>\n          <Button intent=\"primary\" autoFocus={true} onClick={() => setFocused(null)}>\n            OK\n          </Button>\n        </DialogFooter>\n      </Dialog>\n      <div\n        style={{\n          position: 'relative',\n          display: 'flex',\n          borderBottom: `1px solid ${Colors.KeylineGray}`,\n        }}\n      >\n        <GridFloatingContainer floating={props.offset + visibleCount < props.partitionNames.length}>\n          <GridColumn disabled style={{flex: 1, flexShrink: 1, overflow: 'hidden'}}>\n            <TopLabel style={{height: topLabelHeight}} />\n            <LeftLabel style={{paddingLeft: 24}}>Number of Runs</LeftLabel>\n            <Divider />\n            {stepRows.map((step) => (\n              <LeftLabel\n                style={{paddingLeft: 8 + step.x}}\n                key={step.name}\n                data-tooltip={step.name}\n                hovered={step.name === hovered?.stepName}\n              >\n                {step.name}\n              </LeftLabel>\n            ))}\n          </GridColumn>\n        </GridFloatingContainer>\n\n        {props.offset + visibleCount < props.partitionNames.length ? (\n          <PagerControl\n            $direction=\"left\"\n            onClick={() =>\n              props.setOffset(\n                Math.max(\n                  0,\n                  Math.min(\n                    props.offset + visibleCount - 1,\n                    props.partitionNames.length - visibleCount,\n                  ),\n                ),\n              )\n            }\n          >\n            <Icon name=\"chevron_left\" />\n          </PagerControl>\n        ) : null}\n        <div style={{flex: 1, overflow: 'hidden', position: 'relative'}} {...containerProps}>\n          <div\n            style={{\n              width: partitionColumns.length * BOX_SIZE,\n              position: 'absolute',\n              height: '100%',\n              right: 0,\n              zIndex: 1,\n            }}\n          >\n            {visibleColumns.map((p, idx) => (\n              <GridColumn\n                key={p.name}\n                style={{\n                  zIndex: visibleColumns.length - idx,\n                  width: BOX_SIZE,\n                  position: 'absolute',\n                  right: (visibleCount - idx) * BOX_SIZE + 20,\n                }}\n              >\n                <TopLabelTilted $height={topLabelHeight} label={p.name} />\n                {p.runsLoaded ? (\n                  <LeftLabel style={{textAlign: 'center'}}>{p.runs.length}</LeftLabel>\n                ) : (\n                  <LeftLabel style={{textAlign: 'center', opacity: 0.2}}></LeftLabel>\n                )}\n                <Divider />\n                {sortPartitionSteps(p.steps).map((s) => (\n                  <PartitionStepSquare\n                    key={s.name}\n                    step={s}\n                    runs={p.runs}\n                    runsLoaded={p.runsLoaded}\n                    minUnix={minUnix}\n                    maxUnix={maxUnix}\n                    hovered={hovered}\n                    setHovered={setHovered}\n                    setFocused={setFocused}\n                    partitionName={p.name}\n                  />\n                ))}\n              </GridColumn>\n            ))}\n          </div>\n        </div>\n        {props.offset > 0 ? (\n          <PagerControl\n            $direction=\"right\"\n            onClick={() => props.setOffset(Math.max(0, props.offset - visibleCount))}\n          >\n            <Icon name=\"chevron_right\" />\n          </PagerControl>\n        ) : null}\n      </div>\n    </PartitionRunMatrixContainer>\n  );\n};\n\nconst PagerControl = styled.div<{$direction: 'left' | 'right'}>`\n  width: 30px;\n  position: absolute;\n  border: 1px solid ${Colors.KeylineGray};\n  border-radius: 3px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  top: calc(50% - 15px);\n  bottom: calc(50% - 15px);\n  ${({$direction}) => ($direction === 'left' ? 'left: 315px;' : 'right: 0;')}\n  background: white;\n  z-index: 10;\n\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  display: flex;\n  &:hover {\n    background: #ececec;\n  }\n`;\n\nconst PartitionRunMatrixContainer = styled.div`\n  display: block;\n`;\n\nconst Divider = styled.div`\n  height: 1px;\n  width: 100%;\n  margin-top: 5px;\n  border-top: 1px solid ${Colors.KeylineGray};\n`;\n\nexport const PARTITION_STEP_STATUS_RUN_FRAGMENT = gql`\n  fragment PartitionStepStatusRun on Run {\n    id\n    runId\n    tags {\n      key\n      value\n    }\n    stepStats {\n      __typename\n      stepKey\n      status\n    }\n  }\n`;\n\n// add in the explorer fragment, so we can reconstruct the faux-plan steps from the exploded plan\n// in the same way we construct the explorer graph\nconst PARTITION_STEP_STATUS_PIPELINE_QUERY = gql`\n  query PartitionStepStatusPipelineQuery($pipelineSelector: PipelineSelector) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          ...PartitionMatrixSolidHandleFragment\n        }\n      }\n    }\n  }\n  ${PARTITION_MATRIX_SOLID_HANDLE_FRAGMENT}\n`;\n\nconst PartitionStepSquare: React.FC<{\n  step: MatrixStep;\n  runs: PartitionMatrixStepRunFragment[];\n  runsLoaded: boolean;\n  hovered: PartitionRunSelection | null;\n  minUnix: number;\n  maxUnix: number;\n  partitionName: string;\n  setHovered: (hovered: PartitionRunSelection | null) => void;\n  setFocused: (hovered: PartitionRunSelection | null) => void;\n}> = ({step, runs, runsLoaded, hovered, setHovered, setFocused, partitionName}) => {\n  const [opened, setOpened] = React.useState(false);\n  const {name, color} = step;\n\n  const className = `square\n  ${!runsLoaded ? 'loading' : runs.length === 0 ? 'empty' : ''}\n  ${(StatusSquareFinalColor[color] || color).toLowerCase()}`;\n\n  const content = (\n    <div\n      className={className}\n      onMouseEnter={() => setHovered({stepName: name, partitionName})}\n      onMouseLeave={() => setHovered(null)}\n    />\n  );\n\n  if (\n    !opened &&\n    (!runs.length || hovered?.stepName !== name || hovered?.partitionName !== partitionName)\n  ) {\n    return content;\n  }\n\n  return (\n    <Popover\n      interactionKind=\"click\"\n      placement=\"bottom-start\"\n      onOpening={() => setOpened(true)}\n      onClosed={() => setOpened(false)}\n      content={\n        <Menu>\n          <MenuLink\n            icon=\"open_in_new\"\n            text=\"Show Logs From Last Run\"\n            to={linkToRunEvent(runs[runs.length - 1], {stepKey: name})}\n          />\n          <MenuItem\n            icon=\"settings_backup_restore\"\n            text={`View Runs (${runs.length})`}\n            onClick={() => setFocused({stepName: name, partitionName})}\n          />\n        </Menu>\n      }\n    >\n      {content}\n    </Popover>\n  );\n};\n","import {Colors} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nexport const BOX_SIZE = 32;\n\nexport const STEP_STATUS_COLORS = {\n  SUCCESS: Colors.Green500,\n  FAILURE: Colors.Red500,\n  SKIPPED: Colors.Yellow500,\n  IN_PROGRESS: '#eee',\n};\n\n// In CSS, you can layer multiple backgrounds on top of each other by comma-separating values in\n// `background`. However, this only works with gradients, not with primitive color values. To do\n// hovered + red without color math (?), just stack the colors as flat gradients.\nconst flatGradient = (color: string) => `linear-gradient(to left, ${color} 0%, ${color} 100%)`;\nconst flatGradientStack = (colors: string[]) => colors.map(flatGradient).join(',');\n\nexport const GridColumn = styled.div<{\n  disabled?: boolean;\n  hovered?: boolean;\n  focused?: boolean;\n  multiselectFocused?: boolean;\n}>`\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  line-height: 0;\n\n  ${({disabled, focused, multiselectFocused, hovered}) =>\n    !disabled &&\n    !focused &&\n    !multiselectFocused &&\n    `&${hovered ? '' : ':hover'} {\n      background: ${Colors.Gray100};\n      cursor: default;\n      ${TopLabelTiltedInner} {\n        background: ${Colors.White};\n        .tilted {\n          background: ${Colors.Gray100};\n        }\n      }\n      .square {\n        filter: brightness(95%);\n      }\n    }`}\n\n  ${({disabled}) =>\n    disabled &&\n    `\n      ${TopLabelTiltedInner} {\n        color: ${Colors.Gray400}\n      }\n    `}\n\n  ${({focused}) =>\n    focused &&\n    `background: ${Colors.Blue500};\n    ${LeftLabel} {\n      color: white;\n    }\n    ${TopLabelTiltedInner} {\n      background: ${Colors.White};\n      color: white;\n      .tilted {\n        background: ${Colors.Blue500};\n      }\n    }\n  }`}\n\n  ${({multiselectFocused}) =>\n    multiselectFocused &&\n    `background: ${Colors.Blue200};\n    ${LeftLabel} {\n      color: white;\n    }\n    ${TopLabelTiltedInner} {\n      background: ${Colors.White};\n      color: white;\n      .tilted {\n        background: ${Colors.Blue200};\n      }\n    }\n  }`}\n\n  .cell {\n    height: ${BOX_SIZE}px;\n    display: inline-block;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    font-size: 12px;\n    padding: 2px;\n    box-sizing: border-box;\n    line-height: initial;\n  }\n\n  .square {\n    width: 20px;\n    height: 20px;\n    margin: 6px;\n    display: inline-block;\n\n    &:hover:not(.empty):before {\n      box-shadow: ${Colors.Blue500} 0 0 0 3px;\n    }\n    &:before {\n      content: ' ';\n      background: rgba(248, 247, 245, 1);\n      border-radius: 10px;\n      display: inline-block;\n      width: 20px;\n      height: 20px;\n    }\n    &.loading {\n      &:before {\n        background: radial-gradient(white 0%, white 45%, rgba(248, 247, 245, 1) 60%);\n      }\n    }\n    &.success {\n      &:before {\n        background: ${STEP_STATUS_COLORS.SUCCESS};\n      }\n    }\n    &.success-skipped {\n      &:before {\n        background: linear-gradient(\n          135deg,\n          ${STEP_STATUS_COLORS.SUCCESS} 49%,\n          ${STEP_STATUS_COLORS.SKIPPED} 51%\n        );\n      }\n    }\n    &.success-failure {\n      &:before {\n        background: linear-gradient(\n          135deg,\n          ${STEP_STATUS_COLORS.SUCCESS} 49%,\n          ${STEP_STATUS_COLORS.FAILURE} 51%\n        );\n      }\n    }\n    &.failure {\n      &:before {\n        background: ${STEP_STATUS_COLORS.FAILURE};\n      }\n    }\n    &.failure-success {\n      &:before {\n        background: linear-gradient(\n          135deg,\n          ${STEP_STATUS_COLORS.FAILURE} 49%,\n          ${STEP_STATUS_COLORS.SUCCESS} 51%\n        );\n      }\n    }\n    &.failure-skipped {\n      &:before {\n        background: linear-gradient(\n          135deg,\n          ${STEP_STATUS_COLORS.FAILURE} 49%,\n          ${STEP_STATUS_COLORS.SKIPPED} 51%\n        );\n      }\n    }\n    &.failure-blank {\n      &:before {\n        background: linear-gradient(\n          135deg,\n          ${STEP_STATUS_COLORS.FAILURE} 49%,\n          rgba(150, 150, 150, 0.3) 51%\n        );\n      }\n    }\n    &.skipped {\n      &:before {\n        background: ${STEP_STATUS_COLORS.SKIPPED};\n      }\n    }\n    &.skipped-success {\n      &:before {\n        background: linear-gradient(\n          135deg,\n          ${STEP_STATUS_COLORS.SKIPPED} 49%,\n          ${STEP_STATUS_COLORS.SUCCESS} 51%\n        );\n      }\n    }\n    &.skipped-failure {\n      &:before {\n        background: linear-gradient(\n          135deg,\n          ${STEP_STATUS_COLORS.SKIPPED} 49%,\n          ${STEP_STATUS_COLORS.FAILURE} 51%\n        );\n      }\n    }\n  }\n`;\n\nexport const LeftLabel = styled.div<{hovered?: boolean}>`\n  height: ${BOX_SIZE}px;\n  line-height: ${BOX_SIZE}px;\n  font-size: 13px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  position: relative;\n  background: ${({hovered}) => flatGradientStack([hovered ? Colors.Gray100 : 'transparent'])};\n`;\n\nexport const TopLabel = styled.div`\n  position: relative;\n  height: 70px;\n  padding: 4px;\n  padding-bottom: 0;\n  min-width: 15px;\n  align-items: flex-end;\n  display: flex;\n`;\n\nconst TITLE_MARGIN_BOTTOM = 15;\nconst ROTATION_DEGREES = 41;\n\nexport function topLabelHeightForLabels(labels: string[]) {\n  const maxlength = Math.max(...labels.map((p) => p.length));\n  return (maxlength > 10 ? maxlength * 4.9 : 55) + TITLE_MARGIN_BOTTOM;\n}\n\nexport const TopLabelTilted: React.FC<{label: string; $height: number}> = ({label, $height}) => {\n  return (\n    <TopLabelTiltedInner style={{height: $height - TITLE_MARGIN_BOTTOM}}>\n      <div className=\"tilted\">{label}</div>\n    </TopLabelTiltedInner>\n  );\n};\n\nconst TopLabelTiltedInner = styled.div`\n  position: relative;\n  height: unset; /* provide via style tag */\n  padding: 4px;\n  padding-bottom: 0;\n  min-width: 15px;\n  margin-bottom: ${TITLE_MARGIN_BOTTOM}px;\n  align-items: end;\n  display: flex;\n  line-height: normal;\n\n  & > div.tilted {\n    font-size: 12px;\n    white-space: nowrap;\n    position: absolute;\n    bottom: -20px;\n    left: 0;\n    padding: 2px;\n    padding-right: 4px;\n    padding-left: 0;\n    transform: rotate(-${ROTATION_DEGREES}deg);\n    transform-origin: top left;\n  }\n`;\n\nexport const GridFloatingContainer = styled.div<{floating: boolean}>`\n  display: flex;\n  border-right: 1px solid ${Colors.Gray200};\n  padding-bottom: 16px;\n  width: 330px;\n  z-index: 1;\n  ${({floating}) => (floating ? 'box-shadow: 1px 0 4px rgba(0, 0, 0, 0.15)' : '')};\n`;\n\nexport const GridScrollContainer = styled.div`\n  padding-right: 60px;\n  padding-bottom: 16px;\n  overflow-x: scroll;\n  overscroll-behavior-x: contain;\n  z-index: 0;\n  background: ${Colors.White};\n  flex: 1;\n  scrollbar-color: ${Colors.Gray500} ${Colors.Gray100};\n  scrollbar-width: thin;\n\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n  }\n  &::-webkit-scrollbar:vertical {\n    width: 11px;\n  }\n  &::-webkit-scrollbar:horizontal {\n    height: 11px;\n  }\n  &::-webkit-scrollbar-thumb {\n    border-radius: 8px;\n    border: 2px solid ${Colors.Gray100};\n    background-color: ${Colors.Gray500};\n  }\n  &::-webkit-scrollbar-track {\n    background-color: ${Colors.Gray100};\n  }\n`;\n","import {gql} from '@apollo/client';\nimport {shallowCompareKeys} from '@blueprintjs/core/lib/cjs/common/utils';\nimport React from 'react';\n\nimport {filterByQuery} from '../app/GraphQueryImpl';\nimport {GanttChartLayout} from '../gantt/Constants';\nimport {GanttChartMode} from '../gantt/GanttChart';\nimport {buildLayout} from '../gantt/GanttChartLayout';\nimport {explodeCompositesInHandleGraph} from '../pipelines/CompositeSupport';\nimport {GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT} from '../pipelines/GraphExplorer';\nimport {StepEventStatus} from '../types/globalTypes';\n\nimport {PartitionMatrixSolidHandleFragment} from './types/PartitionMatrixSolidHandleFragment';\nimport {PartitionMatrixStepRunFragment} from './types/PartitionMatrixStepRunFragment';\n\ntype StatusSquareColor =\n  | 'SUCCESS'\n  | 'FAILURE'\n  | 'SKIPPED'\n  | 'MISSING'\n  | 'FAILURE-SUCCESS'\n  | 'FAILURE-SKIPPED'\n  | 'SUCCESS-FAILURE'\n  | 'SUCCESS-SKIPPED'\n  | 'SKIPPED-SUCCESS'\n  | 'SKIPPED-FAILURE';\n\nexport const StatusSquareFinalColor: {[key: string]: StatusSquareColor} = {\n  'FAILURE-SUCCESS': 'SUCCESS',\n  'SKIPPED-SUCCESS': 'SUCCESS',\n  'SUCCESS-FAILURE': 'FAILURE',\n  'SKIPPED-FAILURE': 'FAILURE',\n  'FAILURE-SKIPPED': 'SKIPPED',\n  'SUCCESS-SKIPPED': 'SKIPPED',\n};\n\nexport interface PartitionRuns {\n  name: string;\n  runsLoaded: boolean;\n  runs: PartitionMatrixStepRunFragment[];\n}\n\nexport interface DisplayOptions {\n  showFailuresAndGapsOnly: boolean;\n  showPrevious: boolean;\n  colorizeByAge: boolean;\n  colorizeSliceUnix: number;\n}\n\nconst DYNAMIC_STEP_REGEX_SUFFIX = '\\\\[.*\\\\]';\n\nexport interface MatrixStep {\n  name: string;\n  color: string;\n  unix: number;\n}\n\nfunction getStartTime(a: PartitionMatrixStepRunFragment) {\n  return a.startTime || 0;\n}\n\nfunction byStartTimeAsc(a: PartitionMatrixStepRunFragment, b: PartitionMatrixStepRunFragment) {\n  return getStartTime(a) - getStartTime(b);\n}\n\n// BG Note: Dagit 0.10.0 removed the .compute step key suffix, but the Run Matrix takes the current\n// step tree and looks up data for each step in historical runs. For continuity across 0.10.0, we\n// match historical step keys with the .compute format as well. We can remove safely after 120 days?\nexport function isStepKeyForNode(nodeName: string, stepKey: string) {\n  const dynamicRegex = new RegExp(nodeName + DYNAMIC_STEP_REGEX_SUFFIX);\n  return stepKey === nodeName || stepKey === `${nodeName}.compute` || stepKey.match(dynamicRegex);\n}\n\nfunction buildMatrixData(\n  layout: GanttChartLayout,\n  partitionNames: string[],\n  partitions: PartitionRuns[],\n  options?: DisplayOptions,\n) {\n  const partitionsByName = {};\n  partitions.forEach((p) => {\n    // Note this is sorting partition runs in place, I don't think it matters and\n    // seems better than cloning all the arrays.\n    p.runs.sort(byStartTimeAsc);\n    partitionsByName[p.name] = p;\n  });\n\n  const partitionColumns = partitionNames.map((name, idx) => {\n    const partition: PartitionRuns = partitionsByName[name] || {\n      name,\n      runsLoaded: false,\n      runs: [],\n    };\n    const steps = layout.boxes.map(({node}) => {\n      const blankState = {\n        name: node.name,\n        color: 'MISSING' as StatusSquareColor,\n        unix: 0,\n      };\n\n      if (!partition.runs.length) {\n        return blankState;\n      }\n\n      const lastRun = partition.runs[partition.runs.length - 1];\n      const lastRunStepStatus = lastRun.stepStats.find((stats) =>\n        isStepKeyForNode(node.name, stats.stepKey),\n      )?.status;\n\n      if (!lastRunStepStatus || lastRunStepStatus === StepEventStatus.IN_PROGRESS) {\n        return blankState;\n      }\n\n      return {\n        name: node.name,\n        unix: getStartTime(lastRun),\n        color: lastRunStepStatus,\n      };\n    });\n    return {\n      ...partition,\n      steps,\n      idx,\n    };\n  });\n\n  const partitionsWithARun = partitionColumns.filter((p) => p.runs.length > 0).length;\n\n  const stepRows = layout.boxes.map((box, idx) => {\n    const totalFailures = partitionColumns.filter((p) => p.steps[idx].color.includes('FAILURE'));\n    const finalFailures = partitionColumns.filter((p) => p.steps[idx].color.endsWith('FAILURE'));\n    return {\n      x: box.x,\n      name: box.node.name,\n      totalFailurePercent: partitionsWithARun\n        ? Math.round((totalFailures.length / partitionsWithARun) * 100)\n        : 0,\n      finalFailurePercent: partitionsWithARun\n        ? Math.round((finalFailures.length / partitionsWithARun) * 100)\n        : 0,\n    };\n  });\n\n  if (options?.showFailuresAndGapsOnly) {\n    for (let ii = stepRows.length - 1; ii >= 0; ii--) {\n      if (stepRows[ii].finalFailurePercent === 0) {\n        stepRows.splice(ii, 1);\n        partitionColumns.forEach((p) => p.steps.splice(ii, 1));\n      }\n    }\n    for (let ii = partitionColumns.length - 1; ii >= 0; ii--) {\n      if (\n        partitionColumns[ii].runs.length === 0 ||\n        partitionColumns[ii].steps.every((step) => step.color.includes('SUCCESS'))\n      ) {\n        partitionColumns.splice(ii, 1);\n      }\n    }\n  }\n\n  return {stepRows, partitions, partitionColumns};\n}\n\ninterface MatrixDataInputs {\n  solidHandles: PartitionMatrixSolidHandleFragment[] | false;\n  partitionNames: string[];\n  partitions: PartitionRuns[];\n  stepQuery: string;\n  options?: DisplayOptions;\n}\n\n/**\n * This hook uses the inputs provided to filter the data displayed and calls through to buildMatrixData.\n * It uses a React ref to cache the result and avoids re-computing when all inputs are shallow-equal.\n *\n * - This could alternatively be implemented via React.memo and an outer + inner component pair, but I\n *   didn't want to split <PartitionRunMatrix />\n * - This can't be a React useEffect with an array of deps because we want the cached value to be updated\n *   synchronously when the inputs are modified to avoid a double-render caused by an effect + state var.\n *\n * @param inputs\n */\nexport const useMatrixData = (inputs: MatrixDataInputs) => {\n  const cachedMatrixData = React.useRef<{\n    result: ReturnType<typeof buildMatrixData>;\n    inputs: MatrixDataInputs;\n  }>();\n  if (!inputs.solidHandles) {\n    return null;\n  }\n  if (cachedMatrixData.current && shallowCompareKeys(inputs, cachedMatrixData.current.inputs)) {\n    return cachedMatrixData.current.result;\n  }\n\n  const nodes = explodeCompositesInHandleGraph(inputs.solidHandles).map((h) => h.solid);\n\n  // Filter the pipeline's structure and build the flat gantt layout for the left hand side\n  const solidsFiltered = filterByQuery(nodes, inputs.stepQuery);\n\n  const layout = buildLayout({nodes: solidsFiltered.all, mode: GanttChartMode.FLAT});\n\n  // Build the matrix of step + partition squares - presorted to match the gantt layout\n  const result = buildMatrixData(layout, inputs.partitionNames, inputs.partitions, inputs.options);\n  cachedMatrixData.current = {result, inputs};\n  return result;\n};\n\nexport const PARTITION_MATRIX_STEP_RUN_FRAGMENT = gql`\n  fragment PartitionMatrixStepRunFragment on Run {\n    id\n    runId\n    status\n    startTime\n    endTime\n    stepStats {\n      stepKey\n      startTime\n      endTime\n      status\n    }\n    tags {\n      key\n      value\n    }\n  }\n`;\n\nexport const PARTITION_MATRIX_SOLID_HANDLE_FRAGMENT = gql`\n  fragment PartitionMatrixSolidHandleFragment on SolidHandle {\n    handleID\n    solid {\n      name\n      definition {\n        name\n      }\n      inputs {\n        dependsOn {\n          solid {\n            name\n          }\n        }\n      }\n      outputs {\n        dependedBy {\n          solid {\n            name\n          }\n        }\n      }\n    }\n    ...GraphExplorerSolidHandleFragment\n  }\n  ${GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT}\n`;\n","import {gql, useApolloClient, ApolloClient} from '@apollo/client';\nimport * as React from 'react';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {PythonErrorFragment} from '../app/types/PythonErrorFragment';\nimport {DagsterTag} from '../runs/RunTag';\nimport {RunFilterToken} from '../runs/RunsFilterInput';\nimport {RunStatus} from '../types/globalTypes';\n\nimport {PartitionMatrixStepRunFragment} from './types/PartitionMatrixStepRunFragment';\nimport {\n  PartitionStepLoaderQuery,\n  PartitionStepLoaderQueryVariables,\n} from './types/PartitionStepLoaderQuery';\nimport {PartitionRuns, PARTITION_MATRIX_STEP_RUN_FRAGMENT} from './useMatrixData';\n\ninterface DataState {\n  runs: PartitionMatrixStepRunFragment[];\n  partitionNames: string[];\n  loading: boolean;\n  loadingCursorIdx: number;\n  error?: PythonErrorFragment;\n}\n\nconst InitialDataState: DataState = {\n  runs: [],\n  partitionNames: [],\n  loading: false,\n  loadingCursorIdx: 0,\n};\n\n/**\n * This React hook mirrors `useCursorPaginatedQuery` but collects each page of partitions\n * in slices that are smaller than pageSize and cause the results to load incrementally.\n */\nexport function usePartitionStepQuery(\n  partitionSetName: string,\n  partitionNames: string[],\n  pageSize: number,\n  runsFilter: RunFilterToken[],\n  jobName?: string,\n  offset?: number,\n  skipQuery?: boolean,\n) {\n  const client = useApolloClient();\n\n  const version = React.useRef(0);\n  const [dataState, setDataState] = React.useState<DataState>(InitialDataState);\n  const _serializedRunTags = React.useMemo(\n    () =>\n      JSON.stringify(\n        runsFilter.map((token) => {\n          const [key, value] = token.value.split('=');\n          return {key, value};\n        }),\n      ),\n    [runsFilter],\n  );\n\n  React.useEffect(() => {\n    // Note: there are several async steps to the loading process - to cancel the previous\n    // invocation, we bump a version number that is captured in a local variable.\n    // eg: If version.current no longer === v, this should stop updating state and exit.\n    const v = version.current + 1;\n    version.current = v;\n\n    const runTags = JSON.parse(_serializedRunTags);\n    setDataState((dataState) => ({...dataState, runs: [], loading: true}));\n\n    const run = async () => {\n      if (version.current !== v) {\n        return;\n      }\n      let loadingCursorIdx = partitionNames.length - (offset || 0);\n      const stopIdx = Math.max(0, loadingCursorIdx - pageSize);\n      setDataState((state) => ({...state, partitionNames, loadingCursorIdx}));\n\n      // Load runs in each of these partitions incrementally, running several queries in parallel\n      // to maximize the throughput we can achieve from the GraphQL interface.\n      const parallelQueries = 5;\n\n      while (loadingCursorIdx > stopIdx) {\n        const nextCursorIdx = Math.max(loadingCursorIdx - parallelQueries, 0);\n        const sliceNames = partitionNames.slice(nextCursorIdx, loadingCursorIdx);\n        const fetched = await Promise.all(\n          sliceNames.map((partitionName) => {\n            const partitionSetTag = {key: DagsterTag.PartitionSet, value: partitionSetName};\n            const partitionTag = {key: DagsterTag.Partition, value: partitionName};\n            // for jobs, filter by pipelineName/jobName instead of by partition set tag.  This\n            // preserves partition run history across the pipeline => job transition\n            const runTagsFilter = jobName\n              ? {\n                  pipelineName: jobName,\n                  tags: [...runTags, partitionTag],\n                }\n              : {tags: [...runTags, partitionTag, partitionSetTag]};\n            return fetchRunsForFilter(client, {limit: 1000, filter: runTagsFilter});\n          }),\n        );\n        if (version.current !== v) {\n          return;\n        }\n\n        loadingCursorIdx = nextCursorIdx;\n        setDataState((state) => ({\n          ...state,\n          runs: [...state.runs].concat(...fetched),\n          loading: loadingCursorIdx > 0,\n          loadingCursorIdx,\n        }));\n      }\n\n      // Periodically refresh pending runs and look for new runs in the displayed partitions.\n      // Note: this timer is canceled when a subsequent invocation of the useEffect updates `version.current`,\n      // because we don't want to create this interval until the initial load completes.\n\n      const timer: NodeJS.Timeout = setInterval(async () => {\n        if (version.current !== v) {\n          return clearInterval(timer);\n        }\n\n        setDataState((state) => ({...state, loading: true}));\n\n        // Fetch the 10 most recent runs for the pipeline so we pick up on new runs being launched.\n        // Note: this may be insufficient but seems like it will handle the 99% case where runs\n        // are either all queued (at the backfill start) or queued sequentially / slowly.\n        const recent = await fetchRunsForFilter(client, {\n          limit: 10,\n          filter: {\n            tags: [...runTags, {key: DagsterTag.PartitionSet, value: partitionSetName}],\n          },\n        });\n\n        // Fetch runs in the partition set that are in the STARTED state, indicating active updates\n        const pending = await fetchRunsForFilter(client, {\n          filter: {\n            statuses: [RunStatus.STARTED],\n            tags: [...runTags, {key: DagsterTag.PartitionSet, value: partitionSetName}],\n          },\n        });\n\n        if (version.current !== v) {\n          return clearInterval(timer);\n        }\n\n        // Filter detected changes to just runs in our visible range of partitions, and then update\n        // local state if changes have been found.\n        const relevant = [...pending, ...recent].filter((run) =>\n          run.tags.find((t) => t.key === DagsterTag.Partition && partitionNames.includes(t.value)),\n        );\n        setDataState((state) => {\n          const updated = state.runs\n            .filter((r) => !relevant.some((o) => o.runId === r.runId))\n            .concat(relevant);\n          return {...state, loading: false, runs: updated};\n        });\n      }, 10 * 1000);\n    };\n\n    if (!skipQuery) {\n      run();\n    }\n\n    return () => {\n      version.current += 1;\n    };\n  }, [\n    pageSize,\n    client,\n    partitionSetName,\n    _serializedRunTags,\n    jobName,\n    offset,\n    partitionNames,\n    skipQuery,\n  ]);\n\n  return assemblePartitions(dataState);\n}\n\nasync function fetchRunsForFilter(\n  client: ApolloClient<any>,\n  variables: PartitionStepLoaderQueryVariables,\n) {\n  const result = await client.query<PartitionStepLoaderQuery, PartitionStepLoaderQueryVariables>({\n    fetchPolicy: 'network-only',\n    query: PARTITION_STEP_LOADER_QUERY,\n    variables,\n  });\n  return (\n    (result.data.pipelineRunsOrError.__typename === 'Runs' &&\n      result.data.pipelineRunsOrError.results) ||\n    []\n  );\n}\n\nfunction assemblePartitions(data: DataState) {\n  // Note: Partitions don't have any unique keys beside their names, so we use names\n  // extensively in our display layer as React keys. To create unique empty partitions\n  // we use different numbers of zero-width space characters\n  const results: PartitionRuns[] = [];\n  const byName: {[name: string]: PartitionRuns} = {};\n\n  data.partitionNames.forEach((name, idx) => {\n    byName[name] = {\n      name,\n      runsLoaded: idx >= data.loadingCursorIdx,\n      runs: [],\n    };\n    results.push(byName[name]);\n  });\n\n  data.runs.forEach((r) => {\n    const partitionName = r.tags.find((t) => t.key === DagsterTag.Partition)?.value || '';\n    byName[partitionName]?.runs.push(r);\n  });\n\n  return results;\n}\n\nconst PARTITION_STEP_LOADER_QUERY = gql`\n  query PartitionStepLoaderQuery($filter: RunsFilter!, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, cursor: $cursor, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ...PartitionMatrixStepRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ${PARTITION_MATRIX_STEP_RUN_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {GraphExplorerSolidHandleFragment} from './types/GraphExplorerSolidHandleFragment';\n\nfunction explodeComposite(\n  handles: GraphExplorerSolidHandleFragment[],\n  composite: GraphExplorerSolidHandleFragment,\n) {\n  if (composite.solid.definition.__typename !== 'CompositeSolidDefinition') {\n    throw new Error('explodeComposite takes a composite handle.');\n  }\n\n  // Find all the solid handles that are within this composite and prefix their\n  // names with the composite container's name, giving them names that should\n  // match their handleID. (Note: We can't assign them their real handleIDs\n  // because we'd have to dig through `handles` to find each solid based on it's\n  // name + parentHandleID and then get it's handleID - dependsOn, etc. provide\n  // Solid references not SolidHandle references.)\n  const nested = handles.filter((h) => h.handleID === `${composite.handleID}.${h.solid.name}`);\n  nested.forEach((n) => {\n    n.solid.name = n.handleID;\n    n.solid.inputs.forEach((i) => {\n      i.dependsOn.forEach((d) => {\n        d.solid.name = `${composite.handleID}.${d.solid.name}`;\n      });\n    });\n    n.solid.outputs.forEach((i) => {\n      i.dependedBy.forEach((d) => {\n        d.solid.name = `${composite.handleID}.${d.solid.name}`;\n      });\n    });\n  });\n\n  composite.solid.definition.inputMappings.forEach((inmap) => {\n    // For each input mapping on the composite, find the referenced parts of the graph:\n    // The composite input, mapped (interior) solid and interior solid input.\n    //\n    const compositeInput = composite.solid.inputs.find(\n      (i) => i.definition.name === inmap.definition.name,\n    );\n    if (!compositeInput) {\n      console.warn(`CompositeSupport: No composite input matching ${inmap.definition.name}`);\n      return;\n    }\n\n    const interiorTargetName = `${composite.solid.name}.${inmap.mappedInput.solid.name}`;\n    const [interiorTarget] = handles.filter((h) => h.handleID === interiorTargetName);\n    if (!interiorTarget) {\n      console.warn(`CompositeSupport: No interior solid matching ${interiorTargetName}`);\n      return;\n    }\n    const interiorTargetInput = interiorTarget.solid.inputs.find(\n      (i) => i.definition.name === inmap.mappedInput.definition.name,\n    );\n    if (!interiorTargetInput) {\n      console.warn(\n        `CompositeSupport: No interior solid input matching ${inmap.mappedInput.definition.name}`,\n      );\n      return;\n    }\n\n    // Ok! We need to update the input.dependsOn AND the output.dependedBy\n    // (both references to the relationship) to ensure correct graph rendering.\n\n    // Change #1: Give the interior solid input (the target of the input mapping)\n    // the \"dependsOn\" of the composite input, effectively \"applying\" the mapping.\n    interiorTargetInput.dependsOn.push(...compositeInput.dependsOn);\n\n    // Change #2: Find handles on the graph that were bound to this composite input\n    // and change their output.dependedBy[] to point to the interior solid.\n    handles.forEach((h) =>\n      h.solid.outputs.forEach((i) => {\n        i.dependedBy.forEach((dep) => {\n          if (\n            dep.solid.name === composite.solid.name &&\n            dep.definition.name === compositeInput.definition.name\n          ) {\n            dep.solid.name = interiorTargetName;\n            dep.definition.name = interiorTargetInput.definition.name;\n          }\n        });\n      }),\n    );\n  });\n\n  // Repeat the code above for outputs - this is just different enough that it's\n  // not worth abstracting to re-use code...\n\n  composite.solid.definition.outputMappings.forEach((outmap) => {\n    const compositeOutput = composite.solid.outputs.find(\n      (i) => i.definition.name === outmap.definition.name,\n    );\n    if (!compositeOutput) {\n      console.warn(`CompositeSupport: No composite input matching ${outmap.definition.name}`);\n      return;\n    }\n    const interiorTargetName = `${composite.solid.name}.${outmap.mappedOutput.solid.name}`;\n    const [interiorTarget] = handles.filter((h) => h.handleID === interiorTargetName);\n    if (!interiorTarget) {\n      console.warn(`CompositeSupport: No interior solid matching ${interiorTargetName}`);\n      return;\n    }\n    const interiorTargetOutput = interiorTarget.solid.outputs.find(\n      (i) => i.definition.name === outmap.mappedOutput.definition.name,\n    );\n    if (!interiorTargetOutput) {\n      console.warn(\n        `CompositeSupport: No interior solid output matching ${outmap.mappedOutput.definition.name}`,\n      );\n      return;\n    }\n    // Change #1: Give the interior solid output (the target of the output mapping)\n    // the \"dependedBy\" of the composite output, effectively \"applying\" the mapping.\n    interiorTargetOutput.dependedBy.push(...compositeOutput.dependedBy);\n\n    // Change #2: Find handles on the graph that were bound to this composite output\n    // and change their input.dependsOn[] to point to the interior solid.\n    handles.forEach((h) =>\n      h.solid.inputs.forEach((i) => {\n        i.dependsOn.forEach((dep) => {\n          if (\n            dep.solid.name === composite.solid.name &&\n            dep.definition.name === compositeOutput.definition.name\n          ) {\n            dep.solid.name = interiorTargetName;\n            dep.definition.name = interiorTargetOutput.definition.name;\n          }\n        });\n      }),\n    );\n  });\n\n  // Return the interior solids that replace the composite in the graph\n  return nested;\n}\n\n/**\n * Given a solid handle graph, returns a new solid handle graph with all of the\n * composites recursively replaced with their interior solids. Interior solids\n * are given their handle names (\"composite.inner\") to avoid name collisions.\n *\n * @param handles All the SolidHandles in the pipeline (NOT just current layer)\n */\nexport function explodeCompositesInHandleGraph(handles: GraphExplorerSolidHandleFragment[]) {\n  // Clone the entire graph so we can modify solid names in-place\n  handles = JSON.parse(JSON.stringify(handles));\n\n  // Reset the output to just the solids in the top layer of the graph\n  const results = handles.filter((h) => !h.handleID.includes('.'));\n\n  // Find composites in the output and replace the composite with it's content\n  // solids (renaming the content solids to include the composite's handle and\n  // linking them to the other solids via the composite's input/output mappings)\n  while (true) {\n    const idx = results.findIndex(\n      (h) => h.solid.definition.__typename === 'CompositeSolidDefinition',\n    );\n    if (idx === -1) {\n      break;\n    }\n    results.splice(idx, 1, ...explodeComposite(handles, results[idx]));\n  }\n\n  return results;\n}\n","import {Markdown} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\ninterface IDescriptionProps {\n  description: string | null;\n  maxHeight?: number;\n}\n\ninterface IDescriptionState {\n  hasMore: boolean;\n  expanded: boolean;\n}\n\nconst DEFAULT_MAX_HEIGHT = 320;\n\n/*\nIf `input` begins with whitespace and every line contains at least that whitespace,\nit removes it. Otherwise, return the original string.\n*/\nfunction removeLeadingSpaces(input: string) {\n  const leadingSpaces = /^\\n?( +)/.exec(input);\n  if (leadingSpaces == null) {\n    return input;\n  }\n\n  const lines = input.split('\\n');\n  if (!lines.every((l) => l.substr(0, leadingSpaces[1].length).trim() === '')) {\n    return input;\n  }\n\n  return lines.map((l) => l.substr(leadingSpaces[1].length)).join('\\n');\n}\n\nexport class Description extends React.Component<IDescriptionProps, IDescriptionState> {\n  private _container: React.RefObject<HTMLDivElement> = React.createRef();\n\n  public state: IDescriptionState = {\n    hasMore: false,\n    expanded: false,\n  };\n\n  componentDidMount() {\n    this.updateHandleState();\n  }\n\n  componentDidUpdate() {\n    this.updateHandleState();\n  }\n\n  updateHandleState() {\n    if (!this._container.current) {\n      return;\n    }\n    const hasMore =\n      this._container.current.clientHeight > (this.props.maxHeight || DEFAULT_MAX_HEIGHT);\n    if (hasMore !== this.state.hasMore) {\n      this.setState({hasMore});\n    }\n  }\n\n  render() {\n    if (!this.props.description || this.props.description.length === 0) {\n      return null;\n    }\n\n    const {expanded, hasMore} = this.state;\n    return (\n      <Container\n        onDoubleClick={() => {\n          const sel = document.getSelection();\n          if (!sel || !this._container.current) {\n            return;\n          }\n          const range = document.createRange();\n          range.selectNodeContents(this._container.current);\n          sel.removeAllRanges();\n          sel.addRange(range);\n        }}\n        style={{\n          maxHeight: expanded ? undefined : this.props.maxHeight || DEFAULT_MAX_HEIGHT,\n        }}\n      >\n        {!expanded && hasMore && <Mask />}\n        {hasMore && (\n          <ShowMoreHandle onClick={() => this.setState({expanded: !expanded})}>\n            {expanded ? 'Show Less' : 'Show More'}\n          </ShowMoreHandle>\n        )}\n\n        <div ref={this._container} style={{overflowX: 'auto'}}>\n          <Markdown>{removeLeadingSpaces(this.props.description)}</Markdown>\n        </div>\n      </Container>\n    );\n  }\n}\n\nconst Container = styled.div`\n  overflow: hidden;\n  font-size: 0.8rem;\n  position: relative;\n  p:last-child {\n    margin-bottom: 0;\n  }\n`;\n\nconst Mask = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(\n    to bottom,\n    rgba(255, 255, 255, 0) 0%,\n    rgba(255, 255, 255, 0) 70%,\n    rgba(255, 255, 255, 1)\n  );\n  pointer-events: none;\n  border-bottom: 1px solid #eee;\n`;\n\nconst ShowMoreHandle = styled.a`\n  line-height: 20px;\n  position: absolute;\n  padding: 0 14px;\n  bottom: 0;\n  left: 50%;\n  height: 20px;\n  transform: translate(-50%);\n  background: #eee;\n`;\n","import * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {weakmapMemoize} from '../app/Util';\nimport {buildSVGPath} from '../asset-graph/Utils';\n\nimport {OpGraphLayout, OpLayout, OpLayoutEdge} from './asyncGraphLayout';\nimport {OpLayoutEdgeSide, OpLayoutIO} from './layout';\nimport {OpGraphOpFragment} from './types/OpGraphOpFragment';\n\nexport type Edge = {a: string; b: string};\n\ntype Path = {\n  path: string;\n  sourceOutput: OpLayoutIO;\n  targetInput: OpLayoutIO;\n  from: OpLayoutEdgeSide;\n  to: OpLayoutEdgeSide;\n};\n\nconst buildSVGPaths = weakmapMemoize((edges: OpLayoutEdge[], nodes: {[name: string]: OpLayout}) =>\n  edges\n    .map(({from, to}) => {\n      const source = nodes[from.opName];\n      const sourceOutput =\n        source.outputs[from.edgeName] ||\n        Object.values(source.outputs).find((o) => o.collapsed.includes(from.edgeName));\n\n      const target = nodes[to.opName];\n      const targetInput =\n        target.inputs[to.edgeName] ||\n        Object.values(target.inputs).find((o) => o.collapsed.includes(to.edgeName));\n\n      if (!sourceOutput || !targetInput) {\n        console.log(`Unexpected error: An input or output is not reflected in the DAG layout`);\n        return null;\n      }\n      return {\n        // can also use from.point for the \"Dagre\" closest point on node\n        path: buildSVGPath({source: sourceOutput.port, target: targetInput.port}),\n        sourceOutput,\n        targetInput,\n        from,\n        to,\n      };\n    })\n    .filter((path): path is Path => !!path),\n);\n\nconst outputIsDynamic = (ops: OpGraphOpFragment[], from: {opName: string; edgeName: string}) => {\n  const op = ops.find((s) => s.name === from.opName);\n  const outDef = op?.definition.outputDefinitions.find((o) => o.name === from.edgeName);\n  return outDef?.isDynamic || false;\n};\n\nconst inputIsDynamicCollect = (\n  ops: OpGraphOpFragment[],\n  to: {opName: string; edgeName: string},\n) => {\n  const op = ops.find((s) => s.name === to.opName);\n  const inputDef = op?.inputs.find((o) => o.definition.name === to.edgeName);\n  return inputDef?.isDynamicCollect || false;\n};\n\nexport const OpEdges = React.memo(\n  (props: {\n    color: string;\n    ops: OpGraphOpFragment[];\n    layout: OpGraphLayout;\n    edges: OpLayoutEdge[];\n    onHighlight: (arr: Edge[]) => void;\n  }) => (\n    <g>\n      {buildSVGPaths(props.edges, props.layout.nodes).map(\n        ({path, from, sourceOutput, targetInput, to}, idx) => (\n          <g\n            key={idx}\n            onMouseLeave={() => props.onHighlight([])}\n            onMouseEnter={() => props.onHighlight([{a: from.opName, b: to.opName}])}\n          >\n            <StyledPath d={path} style={{stroke: props.color}} />\n            {outputIsDynamic(props.ops, from) && (\n              <DynamicMarker\n                color={props.color}\n                x={sourceOutput.layout.x}\n                y={sourceOutput.layout.y}\n                direction=\"output\"\n              />\n            )}\n            {inputIsDynamicCollect(props.ops, to) && (\n              <DynamicMarker\n                color={props.color}\n                x={targetInput.layout.x}\n                y={targetInput.layout.y}\n                direction=\"collect\"\n              />\n            )}\n          </g>\n        ),\n      )}\n    </g>\n  ),\n);\n\nOpEdges.displayName = 'OpEdges';\n\nconst DynamicMarker: React.FC<{\n  x: number;\n  y: number;\n  direction: 'output' | 'collect';\n  color: string;\n}> = ({x, y, direction, color}) => (\n  <g\n    fill={color}\n    transform={`translate(${x - 35}, ${y})${\n      direction === 'collect' ? ',rotate(180),translate(-20, -40)' : ''\n    }`}\n  >\n    <title>{direction === 'output' ? 'DynamicOutput' : 'DynamicCollect'}</title>\n    <polygon points=\"14.2050781 21 14.0400391 15.2236328 18.953125 18.2705078 20.984375 14.7285156 15.8935547 11.9736328 20.984375 9.21875 18.953125 5.68945312 14.0400391 8.72363281 14.2050781 2.95996094 10.1425781 2.95996094 10.2949219 8.72363281 5.38183594 5.68945312 3.36328125 9.21875 8.45410156 11.9736328 3.36328125 14.7285156 5.38183594 18.2705078 10.2949219 15.2236328 10.1425781 21\"></polygon>\n    <polygon points=\"18.6367188 35.1669922 20.8203125 32.9707031 12.0605469 24.2109375 3.28808594 32.9707031 5.47167969 35.1669922 12.0605469 28.5908203\"></polygon>\n  </g>\n);\n\nconst StyledPath = styled('path')`\n  stroke-width: 4;\n  fill: none;\n`;\n","import {FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\n\nconst PX_TO_UNITS = 0.53;\n\ninterface ISize {\n  width: number;\n  height: number;\n  compressionPriority?: number;\n}\n\ninterface ISVGMonospaceTextProps {\n  width?: number;\n  size: number;\n  text: string;\n  allowTwoLines?: boolean;\n}\n\nconst LINE_SPACING = 1.25;\n\nconst clipToLength = (str: string, len: number) => {\n  return str.length > len ? str.substr(0, len - 1) + '' : str;\n};\n\n/*\nWraps <text>, exposes an intrinsic size and automatically truncates with ellipsis\nif it's given a fixed width less than the space required for it's text.\n*/\nexport class SVGMonospaceText extends React.PureComponent<\n  ISVGMonospaceTextProps & React.SVGAttributes<SVGElement>\n> {\n  static intrinsicSizeForProps(props: ISVGMonospaceTextProps): ISize {\n    return {\n      width: Math.min(props.text.length * props.size * PX_TO_UNITS),\n      height: props.size,\n    };\n  }\n\n  render() {\n    const {y, width, size, text, allowTwoLines, ...rest} = this.props;\n\n    const lineChars = width ? Math.round(width / (size * PX_TO_UNITS)) : text.length;\n    let line1 = '';\n    let line2 = '';\n\n    if (allowTwoLines) {\n      const parts = text.split('_');\n      while (parts.length && line1.length + parts[0].length <= lineChars) {\n        line1 += parts.shift() + (parts.length > 0 ? '_' : '');\n      }\n      line2 = clipToLength(parts.join('_'), lineChars);\n    } else {\n      line1 = clipToLength(text, lineChars);\n    }\n\n    const line1Y = (Number(y) || 0) - (line2.length > 0 ? (Number(size) * LINE_SPACING) / 2 : 0);\n\n    const style: React.CSSProperties = {\n      fontFamily: FontFamily.monospace,\n      fontSize: `${size}px`,\n      pointerEvents: 'none',\n    };\n\n    return (\n      <>\n        <text\n          {...rest}\n          y={line1Y}\n          style={style}\n          width={line1.length * size * PX_TO_UNITS}\n          height={size}\n          dominantBaseline=\"hanging\"\n        >\n          {line1}\n        </text>\n        {line2 && (\n          <text\n            {...rest}\n            y={line1Y + Number(size) * LINE_SPACING}\n            style={style}\n            width={line2.length * size * PX_TO_UNITS}\n            height={size}\n            dominantBaseline=\"hanging\"\n          >\n            {line2}\n          </text>\n        )}\n      </>\n    );\n  }\n}\n\nexport const SVGLabeledRect: React.FC<{\n  x: number;\n  y: number;\n  minified: boolean;\n  width: number;\n  height: number;\n  label: string;\n  fill: string;\n  className?: string;\n}> = ({minified, label, fill, className, ...rect}) => (\n  <g>\n    <rect {...rect} fill={fill} stroke=\"#979797\" strokeWidth={1} className={className} />\n    <SVGMonospaceText\n      x={rect.x + (minified ? 10 : 5)}\n      y={rect.y + (minified ? 10 : 5)}\n      height={undefined}\n      size={minified ? 30 : 16}\n      text={label}\n      fill=\"#979797\"\n    />\n  </g>\n);\n","import {Colors} from '@dagster-io/ui';\nimport {LinkVertical as Link} from '@vx/shape';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Edge} from './OpEdges';\nimport {SVGMonospaceText} from './SVGComponents';\nimport {IPoint, isHighlighted} from './common';\n\ninterface ExternalConnectionNodeProps {\n  layout: IPoint;\n  target: IPoint;\n  labelAttachment: 'top' | 'bottom';\n  label: string;\n  minified: boolean;\n\n  // Passed through from Solid props\n  edges: Edge[];\n  highlightedEdges: Edge[];\n  onHighlightEdges: (edges: Edge[]) => void;\n  onDoubleClickLabel: () => void;\n}\n\nexport const ExternalConnectionNode: React.FC<ExternalConnectionNodeProps> = ({\n  layout,\n  target,\n  edges,\n  label,\n  labelAttachment,\n  minified,\n  highlightedEdges,\n  onHighlightEdges,\n  onDoubleClickLabel,\n}) => {\n  const textProps = {width: 0, size: minified ? 24 : 12, text: label};\n  const textSize = SVGMonospaceText.intrinsicSizeForProps(textProps);\n  const highlighted = edges.some((e) => isHighlighted(highlightedEdges, e));\n  const color = highlighted ? '#555' : '#C7CBCD';\n\n  // https://github.com/dagster-io/dagster/issues/1504\n  if (!layout) {\n    return null;\n  }\n\n  const textOrigin = {\n    x: layout.x - textSize.width / 2,\n    y: layout.y + (labelAttachment === 'top' ? -10 - textSize.height : 10),\n  };\n\n  return (\n    <g onMouseEnter={() => onHighlightEdges(edges)} onMouseLeave={() => onHighlightEdges([])}>\n      <BackingRect\n        {...textSize}\n        {...textOrigin}\n        onClick={(e) => e.stopPropagation()}\n        onDoubleClick={(e) => {\n          e.stopPropagation();\n          onDoubleClickLabel();\n        }}\n      />\n      <ellipse cx={layout.x} cy={layout.y} rx={7} ry={7} fill={color} />\n      <SVGMonospaceText {...textProps} {...textSize} {...textOrigin} />\n      <Link style={{stroke: color, strokeWidth: 6, fill: 'none'}} data={{source: layout, target}} />\n    </g>\n  );\n};\n\nconst BackingRect = styled('rect')`\n  stroke-width: 10px;\n  fill: ${Colors.Gray100};\n  stroke: ${Colors.Gray100};\n  &:hover {\n    fill: ${Colors.Gray200};\n    stroke: ${Colors.Gray200};\n  }\n`;\n","import * as React from 'react';\n\nimport {Edge} from './OpEdges';\nimport {IPoint, isHighlighted} from './common';\n\ninterface MappingLineProps {\n  source: IPoint;\n  target: IPoint;\n  leftEdgeX: number;\n  minified: boolean;\n  edge: Edge;\n\n  highlightedEdges: Edge[];\n  onHighlightEdges: (edges: Edge[]) => void;\n}\nexport const MappingLine: React.FC<MappingLineProps> = ({\n  source,\n  target,\n  minified,\n  leftEdgeX,\n  edge,\n  highlightedEdges,\n  onHighlightEdges,\n}) => {\n  const highlighted = isHighlighted(highlightedEdges, edge);\n\n  return (\n    <g onMouseEnter={() => onHighlightEdges([edge])} onMouseLeave={() => onHighlightEdges([])}>\n      <path\n        d={`M ${source.x} ${source.y} H ${leftEdgeX} V ${target.y} H ${target.x}`}\n        fill=\"none\"\n        strokeWidth={minified ? 6 : 5}\n        strokeLinecap=\"round\"\n        stroke={highlighted ? 'black' : 'rgb(137, 206, 206)'}\n      />\n      <path\n        d={`M ${source.x} ${source.y} H ${leftEdgeX} V ${target.y} H ${target.x}`}\n        fill=\"none\"\n        strokeWidth={4}\n        strokeLinecap=\"round\"\n        stroke=\"white\"\n      />\n    </g>\n  );\n};\n","import {Colors} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {titleOfIO} from '../app/titleOfIO';\nimport {OpNameOrPath} from '../ops/OpNameOrPath';\n\nimport {ExternalConnectionNode} from './ExternalConnectionNode';\nimport {MappingLine} from './MappingLine';\nimport {metadataForCompositeParentIO, PARENT_IN, PARENT_OUT, OpIOBox} from './OpIOBox';\nimport {SVGLabeledRect} from './SVGComponents';\nimport {OpGraphLayout} from './asyncGraphLayout';\nimport {Edge} from './common';\nimport {OpGraphOpFragment} from './types/OpGraphOpFragment';\n\ninterface ParentOpNodeProps {\n  layout: OpGraphLayout;\n  op: OpGraphOpFragment;\n  minified: boolean;\n\n  highlightedEdges: Edge[];\n  onDoubleClick: (opName: string) => void;\n  onClickOp: (arg: OpNameOrPath) => void;\n  onHighlightEdges: (edges: Edge[]) => void;\n}\n\nexport const ParentOpNode: React.FC<ParentOpNodeProps> = (props) => {\n  const {layout, op, minified} = props;\n\n  const def = props.op.definition;\n  if (def.__typename !== 'CompositeSolidDefinition') {\n    throw new Error('Parent op is not a composite - how did this happen?');\n  }\n\n  const parentLayout = layout.parent;\n  if (!parentLayout) {\n    throw new Error('Parent op rendered when no parent layout is present.');\n  }\n\n  const {bounds, mappingLeftEdge, mappingLeftSpacing} = parentLayout;\n  const highlightingProps = {\n    highlightedEdges: props.highlightedEdges,\n    onHighlightEdges: props.onHighlightEdges,\n    onDoubleClick: props.onDoubleClick,\n    onClickOp: props.onClickOp,\n  };\n\n  if (bounds.height < 0 || bounds.width < 0) {\n    return <g />;\n  }\n  return (\n    <>\n      <SVGLabeledParentRect\n        {...bounds}\n        label={op.definition.name}\n        fill={Colors.Gray50}\n        minified={minified}\n      />\n      {def.inputMappings.map(({definition, mappedInput}, idx) => {\n        const destination = layout.nodes[mappedInput.solid.name];\n        if (!destination) {\n          return <g />;\n        }\n        const sourcePort = parentLayout.inputs[definition.name].port;\n        const trgtPort = destination.inputs[mappedInput.definition.name].port;\n\n        return (\n          <MappingLine\n            {...highlightingProps}\n            key={`in-${idx}`}\n            target={trgtPort}\n            source={sourcePort}\n            minified={minified}\n            leftEdgeX={mappingLeftEdge - idx * mappingLeftSpacing}\n            edge={{a: titleOfIO(mappedInput), b: PARENT_IN}}\n          />\n        );\n      })}\n      {def.outputMappings.map(({definition, mappedOutput}, idx) => {\n        const destination = layout.nodes[mappedOutput.solid.name];\n        if (!destination) {\n          return <g />;\n        }\n        const sourcePort = parentLayout.outputs[definition.name].port;\n        const trgtPort = destination.outputs[mappedOutput.definition.name].port;\n\n        return (\n          <MappingLine\n            {...highlightingProps}\n            key={`out-${idx}`}\n            target={trgtPort}\n            source={sourcePort}\n            minified={minified}\n            leftEdgeX={mappingLeftEdge - idx * mappingLeftSpacing}\n            edge={{a: titleOfIO(mappedOutput), b: PARENT_OUT}}\n          />\n        );\n      })}\n      <foreignObject width={layout.width} height={layout.height} style={{pointerEvents: 'none'}}>\n        {op.definition.inputDefinitions.map((input, idx) => {\n          const metadata = metadataForCompositeParentIO(op.definition, input);\n          const invocationInput = op.inputs.find((i) => i.definition.name === input.name)!;\n\n          return (\n            <React.Fragment key={idx}>\n              {invocationInput.dependsOn.map((dependsOn, iidx) => (\n                <ExternalConnectionNode\n                  {...highlightingProps}\n                  {...metadata}\n                  key={iidx}\n                  labelAttachment=\"top\"\n                  label={titleOfIO(dependsOn)}\n                  minified={minified}\n                  layout={parentLayout.dependsOn[titleOfIO(dependsOn)]}\n                  target={parentLayout.inputs[input.name].port}\n                  onDoubleClickLabel={() => props.onClickOp({path: ['..', dependsOn.solid.name]})}\n                />\n              ))}\n              <OpIOBox\n                {...highlightingProps}\n                {...metadata}\n                minified={minified}\n                colorKey=\"input\"\n                item={input}\n                layoutInfo={parentLayout.inputs[input.name]}\n              />\n            </React.Fragment>\n          );\n        })}\n        {op.definition.outputDefinitions.map((output, idx) => {\n          const metadata = metadataForCompositeParentIO(op.definition, output);\n          const invocationOutput = op.outputs.find((i) => i.definition.name === output.name)!;\n\n          return (\n            <React.Fragment key={idx}>\n              {invocationOutput.dependedBy.map((dependedBy, iidx) => (\n                <ExternalConnectionNode\n                  {...highlightingProps}\n                  {...metadata}\n                  key={iidx}\n                  labelAttachment=\"bottom\"\n                  label={titleOfIO(dependedBy)}\n                  minified={minified}\n                  layout={parentLayout.dependedBy[titleOfIO(dependedBy)]}\n                  target={parentLayout.outputs[output.name].port}\n                  onDoubleClickLabel={() => props.onClickOp({path: ['..', dependedBy.solid.name]})}\n                />\n              ))}\n              <OpIOBox\n                {...highlightingProps}\n                {...metadata}\n                minified={minified}\n                colorKey=\"output\"\n                item={output}\n                layoutInfo={parentLayout.outputs[output.name]}\n              />\n            </React.Fragment>\n          );\n        })}\n      </foreignObject>\n    </>\n  );\n};\n\nexport const SVGLabeledParentRect = styled(SVGLabeledRect)`\n  transition: x 250ms ease-out, y 250ms ease-out, width 250ms ease-out, height 250ms ease-out;\n`;\n","import {gql} from '@apollo/client';\nimport {Colors} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {OpNameOrPath} from '../ops/OpNameOrPath';\n\nimport {OpEdges} from './OpEdges';\nimport {OpNode, OP_NODE_DEFINITION_FRAGMENT, OP_NODE_INVOCATION_FRAGMENT} from './OpNode';\nimport {ParentOpNode, SVGLabeledParentRect} from './ParentOpNode';\nimport {DETAIL_ZOOM, SVGViewport, SVGViewportInteractor} from './SVGViewport';\nimport {OpGraphLayout} from './asyncGraphLayout';\nimport {\n  Edge,\n  closestNodeInDirection,\n  computeNodeKeyPrefixBoundingBoxes,\n  isHighlighted,\n  isNodeOffscreen,\n  isOpHighlighted,\n} from './common';\nimport {OpGraphOpFragment} from './types/OpGraphOpFragment';\n\nconst NoOp = () => {};\n\ninterface OpGraphProps {\n  jobName: string;\n  layout: OpGraphLayout;\n  ops: OpGraphOpFragment[];\n  focusOps: OpGraphOpFragment[];\n  parentHandleID?: string;\n  parentOp?: OpGraphOpFragment;\n  selectedHandleID?: string;\n  selectedOp?: OpGraphOpFragment;\n  highlightedOps: Array<OpGraphOpFragment>;\n  interactor?: SVGViewportInteractor;\n  onClickOp?: (arg: OpNameOrPath) => void;\n  onDoubleClickOp?: (arg: OpNameOrPath) => void;\n  onEnterSubgraph?: (arg: OpNameOrPath) => void;\n  onLeaveSubgraph?: () => void;\n  onClickBackground?: () => void;\n}\n\ninterface OpGraphContentsProps extends OpGraphProps {\n  minified: boolean;\n  layout: OpGraphLayout;\n  viewportRect: {top: number; left: number; right: number; bottom: number};\n}\n\nconst OpGraphContents: React.FC<OpGraphContentsProps> = React.memo((props) => {\n  const [highlighted, setHighlighted] = React.useState<Edge[]>(() => []);\n\n  const {\n    layout,\n    minified,\n    ops,\n    viewportRect,\n    focusOps,\n    parentOp,\n    parentHandleID,\n    onClickOp = NoOp,\n    onDoubleClickOp = NoOp,\n    onEnterSubgraph = NoOp,\n    highlightedOps,\n    selectedOp,\n  } = props;\n\n  return (\n    <>\n      {parentOp && layout.parent && layout.parent.invocationBoundingBox.width > 0 && (\n        <SVGLabeledParentRect\n          {...layout.parent.invocationBoundingBox}\n          key={`composite-rect-${parentHandleID}`}\n          label=\"\"\n          fill={Colors.Yellow50}\n          minified={minified}\n        />\n      )}\n      {parentOp && (\n        <ParentOpNode\n          onClickOp={onClickOp}\n          onDoubleClick={(name) => onDoubleClickOp({name})}\n          onHighlightEdges={setHighlighted}\n          highlightedEdges={highlighted}\n          key={`composite-rect-${parentHandleID}-definition`}\n          minified={minified}\n          op={parentOp}\n          layout={layout}\n        />\n      )}\n      <OpEdges\n        ops={ops}\n        layout={layout}\n        color={Colors.KeylineGray}\n        edges={layout.edges}\n        onHighlight={setHighlighted}\n      />\n      <OpEdges\n        ops={ops}\n        layout={layout}\n        color={Colors.Blue500}\n        onHighlight={setHighlighted}\n        edges={layout.edges.filter(({from, to}) =>\n          isHighlighted(highlighted, {a: from.opName, b: to.opName}),\n        )}\n      />\n      {computeNodeKeyPrefixBoundingBoxes(layout).map((box, idx) => (\n        <rect\n          key={idx}\n          {...box}\n          stroke=\"rgb(230, 219, 238)\"\n          fill=\"rgba(230, 219, 238, 0.2)\"\n          strokeWidth={2}\n        />\n      ))}\n      <foreignObject width={layout.width} height={layout.height} style={{pointerEvents: 'none'}}>\n        {ops\n          .filter((op) => !isNodeOffscreen(layout.nodes[op.name].bounds, viewportRect))\n          .map((op) => (\n            <OpNode\n              key={op.name}\n              invocation={op}\n              definition={op.definition}\n              minified={minified}\n              onClick={() => onClickOp({name: op.name})}\n              onDoubleClick={() => onDoubleClickOp({name: op.name})}\n              onEnterComposite={() => onEnterSubgraph({name: op.name})}\n              onHighlightEdges={setHighlighted}\n              layout={layout.nodes[op.name]}\n              selected={selectedOp === op}\n              focused={focusOps.includes(op)}\n              highlightedEdges={\n                isOpHighlighted(highlighted, op.name) ? highlighted : EmptyHighlightedArray\n              }\n              dim={highlightedOps.length > 0 && highlightedOps.indexOf(op) === -1}\n            />\n          ))}\n      </foreignObject>\n    </>\n  );\n});\n\nOpGraphContents.displayName = 'OpGraphContents';\n\n// This is a specific empty array we pass to represent the common / empty case\n// so that OpNode can use shallow equality comparisons in shouldComponentUpdate.\nconst EmptyHighlightedArray: never[] = [];\n\nexport class OpGraph extends React.Component<OpGraphProps> {\n  viewportEl: React.RefObject<SVGViewport> = React.createRef();\n\n  argToOpLayout = (arg: OpNameOrPath) => {\n    const lastName = 'name' in arg ? arg.name : arg.path[arg.path.length - 1];\n    return this.props.layout.nodes[lastName];\n  };\n\n  centerOp = (arg: OpNameOrPath) => {\n    const opLayout = this.argToOpLayout(arg);\n    if (opLayout && this.viewportEl.current) {\n      this.viewportEl.current.zoomToSVGBox(opLayout.bounds, true);\n    }\n  };\n\n  focusOnOp = (arg: OpNameOrPath) => {\n    const opLayout = this.argToOpLayout(arg);\n    if (opLayout && this.viewportEl.current) {\n      this.viewportEl.current?.zoomToSVGBox(opLayout.bounds, true, DETAIL_ZOOM);\n    }\n  };\n\n  unfocus = (e: React.MouseEvent<any>) => {\n    this.viewportEl.current!.autocenter(true);\n    e.stopPropagation();\n  };\n\n  componentDidUpdate(prevProps: OpGraphProps) {\n    if (prevProps.parentOp !== this.props.parentOp) {\n      this.viewportEl.current!.cancelAnimations();\n      this.viewportEl.current!.autocenter();\n    }\n    if (prevProps.layout !== this.props.layout) {\n      this.viewportEl.current!.autocenter();\n    }\n    if (prevProps.selectedOp !== this.props.selectedOp && this.props.selectedOp) {\n      this.centerOp(this.props.selectedOp);\n    }\n  }\n\n  onArrowKeyDown = (_e: React.KeyboardEvent<any>, dir: string) => {\n    const nextOp = closestNodeInDirection(this.props.layout, this.props.selectedOp?.name, dir);\n    if (nextOp && this.props.onClickOp) {\n      this.props.onClickOp({name: nextOp});\n    }\n  };\n\n  render() {\n    const {layout, interactor, jobName, onClickBackground, onDoubleClickOp} = this.props;\n\n    return (\n      <SVGViewport\n        ref={this.viewportEl}\n        key={jobName}\n        maxZoom={1.2}\n        interactor={interactor || SVGViewport.Interactors.PanAndZoom}\n        graphWidth={layout.width}\n        graphHeight={layout.height}\n        onClick={onClickBackground}\n        onDoubleClick={this.unfocus}\n        onArrowKeyDown={this.onArrowKeyDown}\n      >\n        {({scale}, viewportRect) => (\n          <SVGContainer width={layout.width} height={layout.height + 200}>\n            <OpGraphContents\n              {...this.props}\n              layout={layout}\n              minified={scale < DETAIL_ZOOM - 0.01}\n              onDoubleClickOp={onDoubleClickOp || this.focusOnOp}\n              viewportRect={viewportRect}\n            />\n          </SVGContainer>\n        )}\n      </SVGViewport>\n    );\n  }\n}\n\nexport const OP_GRAPH_OP_FRAGMENT = gql`\n  fragment OpGraphOpFragment on Solid {\n    name\n    ...OpNodeInvocationFragment\n    definition {\n      name\n      ...OpNodeDefinitionFragment\n    }\n  }\n  ${OP_NODE_INVOCATION_FRAGMENT}\n  ${OP_NODE_DEFINITION_FRAGMENT}\n`;\n\nconst SVGContainer = styled.svg`\n  overflow: visible;\n  border-radius: 0;\n`;\n","import {gql} from '@apollo/client';\nimport {Box, ConfigTypeSchema} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {gqlTypePredicate} from '../app/Util';\nimport {dagsterTypeKind} from '../dagstertype/DagsterType';\nimport {METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {TableSchema} from '../metadata/TableSchema';\nimport {Description} from '../pipelines/Description';\nimport {SidebarSection, SidebarSubhead, SidebarTitle} from '../pipelines/SidebarComponents';\n\nimport {CONFIG_TYPE_SCHEMA_FRAGMENT} from './ConfigTypeSchema';\nimport {TypeExplorerFragment} from './types/TypeExplorerFragment';\n\ninterface ITypeExplorerProps {\n  isGraph: boolean;\n  type: TypeExplorerFragment;\n}\n\nexport const TypeExplorer: React.FC<ITypeExplorerProps> = (props) => {\n  const {name, metadataEntries, inputSchemaType, outputSchemaType, description} = props.type;\n  const typeKind = dagsterTypeKind(props.type);\n  const displayName = typeKind === 'standard' ? name : `${name} (${typeKind})`;\n  const tableSchema = metadataEntries.find(gqlTypePredicate('TableSchemaMetadataEntry'))?.schema;\n  return (\n    <div>\n      <SidebarSubhead />\n      <Box padding={{vertical: 16, horizontal: 24}}>\n        <SidebarTitle>\n          <Link to=\"?tab=types\">{props.isGraph ? 'Graph types' : 'Pipeline types'}</Link>\n          {' > '}\n          {displayName}\n        </SidebarTitle>\n      </Box>\n      <SidebarSection title=\"Description\">\n        <Box padding={{vertical: 16, horizontal: 24}}>\n          <Description description={description || 'No Description Provided'} />\n        </Box>\n      </SidebarSection>\n      {tableSchema && (\n        <SidebarSection title=\"Columns\">\n          <TableSchema schema={tableSchema} itemHorizontalPadding={24} />\n        </SidebarSection>\n      )}\n      {inputSchemaType && (\n        <SidebarSection title=\"Input\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <ConfigTypeSchema\n              type={inputSchemaType}\n              typesInScope={inputSchemaType.recursiveConfigTypes}\n            />\n          </Box>\n        </SidebarSection>\n      )}\n      {outputSchemaType && (\n        <SidebarSection title=\"Output\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <ConfigTypeSchema\n              type={outputSchemaType}\n              typesInScope={outputSchemaType.recursiveConfigTypes}\n            />\n          </Box>\n        </SidebarSection>\n      )}\n    </div>\n  );\n};\n\nexport const TYPE_EXPLORER_FRAGMENT = gql`\n  fragment TypeExplorerFragment on DagsterType {\n    name\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    inputSchemaType {\n      ...ConfigTypeSchemaFragment\n      recursiveConfigTypes {\n        ...ConfigTypeSchemaFragment\n      }\n    }\n    outputSchemaType {\n      ...ConfigTypeSchemaFragment\n      recursiveConfigTypes {\n        ...ConfigTypeSchemaFragment\n      }\n    }\n  }\n  ${METADATA_ENTRY_FRAGMENT}\n  ${CONFIG_TYPE_SCHEMA_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport * as React from 'react';\n\nimport {ExplorerPath} from '../pipelines/PipelinePathUtils';\nimport {Loading} from '../ui/Loading';\nimport {buildPipelineSelector} from '../workspace/WorkspaceContext';\nimport {RepoAddress} from '../workspace/types';\n\nimport {TypeExplorer, TYPE_EXPLORER_FRAGMENT} from './TypeExplorer';\nimport {\n  TypeExplorerContainerQuery,\n  TypeExplorerContainerQueryVariables,\n} from './types/TypeExplorerContainerQuery';\n\ninterface ITypeExplorerContainerProps {\n  explorerPath: ExplorerPath;\n  typeName: string;\n  repoAddress?: RepoAddress;\n}\n\nexport const TypeExplorerContainer: React.FC<ITypeExplorerContainerProps> = ({\n  explorerPath,\n  typeName,\n  repoAddress,\n}) => {\n  const pipelineSelector = buildPipelineSelector(repoAddress || null, explorerPath.pipelineName);\n  const queryResult = useQuery<TypeExplorerContainerQuery, TypeExplorerContainerQueryVariables>(\n    TYPE_EXPLORER_CONTAINER_QUERY,\n    {\n      fetchPolicy: 'cache-and-network',\n      variables: {\n        pipelineSelector,\n        dagsterTypeName: typeName,\n      },\n    },\n  );\n  return (\n    <Loading queryResult={queryResult}>\n      {(data) => {\n        if (\n          data.pipelineOrError &&\n          data.pipelineOrError.__typename === 'Pipeline' &&\n          data.pipelineOrError.dagsterTypeOrError &&\n          data.pipelineOrError.dagsterTypeOrError.__typename === 'RegularDagsterType'\n        ) {\n          return (\n            <TypeExplorer\n              isGraph={data.pipelineOrError.isJob}\n              type={data.pipelineOrError.dagsterTypeOrError}\n            />\n          );\n        } else {\n          return <div>Type Not Found</div>;\n        }\n      }}\n    </Loading>\n  );\n};\n\nconst TYPE_EXPLORER_CONTAINER_QUERY = gql`\n  query TypeExplorerContainerQuery(\n    $pipelineSelector: PipelineSelector!\n    $dagsterTypeName: String!\n  ) {\n    pipelineOrError(params: $pipelineSelector) {\n      __typename\n      ... on Pipeline {\n        id\n        isJob\n        dagsterTypeOrError(dagsterTypeName: $dagsterTypeName) {\n          __typename\n          ... on RegularDagsterType {\n            ...TypeExplorerFragment\n          }\n        }\n      }\n    }\n  }\n  ${TYPE_EXPLORER_FRAGMENT}\n`;\n","import {gql} from '@apollo/client';\nimport {Box, Colors} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {SidebarSection, SidebarSubhead, SidebarTitle} from '../pipelines/SidebarComponents';\n\nimport {DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT, TypeWithTooltip} from './TypeWithTooltip';\nimport {TypeListFragment} from './types/TypeListFragment';\n\ninterface ITypeListProps {\n  isGraph: boolean;\n  types: Array<TypeListFragment>;\n}\n\nfunction groupTypes(types: TypeListFragment[]): {[key: string]: TypeListFragment[]} {\n  const groups = {\n    Custom: Array<TypeListFragment>(),\n    'Built-in': Array<TypeListFragment>(),\n  };\n  types.forEach((type) => {\n    if (type.isBuiltin) {\n      groups['Built-in'].push(type);\n    } else {\n      groups['Custom'].push(type);\n    }\n  });\n  return groups;\n}\n\nexport const TypeList: React.FC<ITypeListProps> = (props) => {\n  const groups = groupTypes(props.types);\n  return (\n    <>\n      <SidebarSubhead />\n      <Box padding={{vertical: 16, horizontal: 24}}>\n        <SidebarTitle>{props.isGraph ? 'Graph types' : 'Pipeline types'}</SidebarTitle>\n      </Box>\n      {Object.keys(groups).map((title, idx) => {\n        const typesForSection = groups[title];\n        const collapsedByDefault = idx !== 0 || groups[title].length === 0;\n\n        return (\n          <SidebarSection key={idx} title={title} collapsedByDefault={collapsedByDefault}>\n            <Box padding={{vertical: 16, horizontal: 24}}>\n              {typesForSection.length ? (\n                <StyledUL>\n                  {groups[title].map((type, i) => (\n                    <TypeLI key={i}>\n                      <TypeWithTooltip type={type} />\n                    </TypeLI>\n                  ))}\n                </StyledUL>\n              ) : (\n                <div style={{color: Colors.Gray500, fontSize: '12px'}}>None</div>\n              )}\n            </Box>\n          </SidebarSection>\n        );\n      })}\n    </>\n  );\n};\n\nexport const TYPE_LIST_FRAGMENT = gql`\n  fragment TypeListFragment on DagsterType {\n    name\n    isBuiltin\n    ...DagsterTypeWithTooltipFragment\n  }\n\n  ${DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT}\n`;\n\nconst StyledUL = styled.ul`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin: 0;\n  padding: 0;\n`;\n\nconst TypeLI = styled.li`\n  list-style-type: none;\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, NonIdealState} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {ExplorerPath} from '../pipelines/PipelinePathUtils';\nimport {Loading} from '../ui/Loading';\nimport {\n  buildPipelineSelector,\n  optionToRepoAddress,\n  useRepositoryOptions,\n} from '../workspace/WorkspaceContext';\nimport {findRepoContainingPipeline} from '../workspace/findRepoContainingPipeline';\nimport {RepoAddress} from '../workspace/types';\n\nimport {TypeList, TYPE_LIST_FRAGMENT} from './TypeList';\nimport {\n  TypeListContainerQuery,\n  TypeListContainerQueryVariables,\n} from './types/TypeListContainerQuery';\n\ninterface ITypeListContainerProps {\n  explorerPath: ExplorerPath;\n  repoAddress?: RepoAddress;\n}\n\nexport const TypeListContainer: React.FC<ITypeListContainerProps> = ({\n  explorerPath,\n  repoAddress,\n}) => {\n  const {pipelineName, snapshotId} = explorerPath;\n  const {options} = useRepositoryOptions();\n\n  const pipelineSelector = React.useMemo(() => {\n    if (!repoAddress) {\n      const reposWithMatch = findRepoContainingPipeline(options, pipelineName, snapshotId);\n      return reposWithMatch.length\n        ? buildPipelineSelector(optionToRepoAddress(reposWithMatch[0]), pipelineName)\n        : null;\n    }\n    return buildPipelineSelector(repoAddress, pipelineName);\n  }, [options, pipelineName, repoAddress, snapshotId]);\n\n  const queryResult = useQuery<TypeListContainerQuery, TypeListContainerQueryVariables>(\n    TYPE_LIST_CONTAINER_QUERY,\n    {\n      fetchPolicy: 'cache-and-network',\n      variables: {pipelineSelector: pipelineSelector!},\n      skip: !pipelineSelector,\n    },\n  );\n\n  if (!pipelineSelector) {\n    return (\n      <Box margin={48}>\n        <NonIdealState icon=\"error\" title=\"Could not fetch types for snapshot\" />\n      </Box>\n    );\n  }\n\n  return (\n    <Loading queryResult={queryResult}>\n      {(data) => {\n        if (data.pipelineOrError.__typename === 'Pipeline') {\n          return (\n            <TypeList\n              types={data.pipelineOrError.dagsterTypes}\n              isGraph={data.pipelineOrError.isJob}\n            />\n          );\n        } else {\n          return null;\n        }\n      }}\n    </Loading>\n  );\n};\n\nconst TYPE_LIST_CONTAINER_QUERY = gql`\n  query TypeListContainerQuery($pipelineSelector: PipelineSelector!) {\n    pipelineOrError(params: $pipelineSelector) {\n      __typename\n      ... on Pipeline {\n        id\n        isJob\n        name\n        dagsterTypes {\n          ...TypeListFragment\n        }\n      }\n    }\n  }\n\n  ${TYPE_LIST_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, Spinner, Tooltip} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {AssetValueGraph, AssetValueGraphData} from '../assets/AssetValueGraph';\nimport {StepStatusDot} from '../gantt/GanttStatusPanel';\nimport {linkToRunEvent} from '../runs/RunUtils';\nimport {RepoAddress} from '../workspace/types';\n\nimport {SidebarSection} from './SidebarComponents';\nimport {SidebarOpGraphsQuery, SidebarOpGraphsQueryVariables} from './types/SidebarOpGraphsQuery';\n\nexport const StateColors = {\n  SUCCESS: Colors.Green500,\n  FAILURE: Colors.Red500,\n  SKIPPED: Colors.Gray500,\n};\n\nexport const SidebarOpExecutionGraphs: React.FC<{\n  handleID: string;\n  solidName: string;\n  pipelineName: string;\n  repoAddress: RepoAddress;\n}> = ({repoAddress, handleID, pipelineName, solidName}) => {\n  const [highlightedStartTime, setHighlightedStartTime] = React.useState<number | null>(null);\n  const result = useQuery<SidebarOpGraphsQuery, SidebarOpGraphsQueryVariables>(\n    SIDEBAR_OP_GRAPHS_QUERY,\n    {\n      variables: {\n        handleID,\n        selector: {\n          repositoryName: repoAddress.name,\n          repositoryLocationName: repoAddress.location,\n          pipelineName,\n        },\n      },\n      fetchPolicy: 'cache-and-network',\n    },\n  );\n  const stepStats =\n    result.data?.pipelineOrError.__typename === 'Pipeline'\n      ? result.data.pipelineOrError.solidHandle?.stepStats\n      : undefined;\n\n  const nodes =\n    stepStats && stepStats.__typename === 'SolidStepStatsConnection' ? stepStats.nodes : null;\n\n  const executionTime = React.useMemo(() => {\n    const values = nodes\n      ? nodes\n          .filter((s) => s.startTime && s.endTime)\n          .map((s) => ({\n            x: Number(s.startTime) * 1000,\n            xNumeric: Number(s.startTime) * 1000,\n            y: s.endTime! - s.startTime!,\n          }))\n      : [];\n\n    const xs = values.map((v) => v.xNumeric);\n    const ys = values.map((v) => v.y).filter((v) => !isNaN(v));\n    const data: AssetValueGraphData = {\n      xAxis: 'time',\n      values,\n      minXNumeric: Math.min(...xs),\n      maxXNumeric: Math.max(...xs),\n      minY: Math.min(...ys),\n      maxY: Math.max(...ys),\n    };\n    return data;\n  }, [nodes]);\n\n  if (stepStats?.__typename === 'SolidStepStatusUnavailableError') {\n    return <span />;\n  }\n\n  const displayed = (nodes || []).slice(0, 10);\n\n  return (\n    <>\n      <SidebarSection title=\"Execution Time\">\n        <Box flex={{alignItems: 'center', justifyContent: 'center'}}>\n          {result.loading ? (\n            <Spinner purpose=\"section\" />\n          ) : (\n            <AssetValueGraph\n              label=\"Step Execution Time\"\n              yAxisLabel=\"Seconds\"\n              width=\"100%\"\n              data={executionTime}\n              xHover={highlightedStartTime}\n              onHoverX={(v) => setHighlightedStartTime(v ? Number(v) : null)}\n            />\n          )}\n        </Box>\n      </SidebarSection>\n      <SidebarSection title=\"Execution Status\">\n        <Box padding={{left: 24, right: 16, vertical: 12}}>\n          <Box flex={{gap: 16}} style={{fontSize: '0.8rem'}}>\n            <div style={{flex: 1}}>{`Last ${displayed.length} Run${\n              displayed.length !== 1 ? 's' : ''\n            }`}</div>\n            <Box style={{overflowX: 'auto'}} flex={{gap: 2}}>\n              {displayed.reverse().map(({runId, status, startTime}) => (\n                <Tooltip\n                  key={runId}\n                  placement=\"bottom-end\"\n                  content={`View Run ${runId.slice(0, 8)} `}\n                >\n                  <Link to={linkToRunEvent({runId}, {stepKey: solidName})}>\n                    <StepStatusDot\n                      onMouseEnter={() => startTime && setHighlightedStartTime(startTime * 1000)}\n                      onMouseLeave={() => setHighlightedStartTime(null)}\n                      style={{\n                        border: `2px solid ${\n                          startTime && startTime * 1000 === highlightedStartTime\n                            ? Colors.Blue500\n                            : 'transparent'\n                        }`,\n                        backgroundColor: status ? StateColors[status] : Colors.Gray200,\n                      }}\n                    />\n                  </Link>\n                </Tooltip>\n              ))}\n            </Box>\n          </Box>\n        </Box>\n      </SidebarSection>\n    </>\n  );\n};\n\nconst SIDEBAR_OP_GRAPHS_QUERY = gql`\n  query SidebarOpGraphsQuery($selector: PipelineSelector!, $handleID: String!) {\n    pipelineOrError(params: $selector) {\n      __typename\n      ... on Pipeline {\n        id\n        name\n        solidHandle(handleID: $handleID) {\n          stepStats(limit: 20) {\n            __typename\n\n            ... on SolidStepStatsConnection {\n              nodes {\n                runId\n                startTime\n                endTime\n                status\n              }\n            }\n            ... on SolidStepStatusUnavailableError {\n              __typename\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n","import {gql} from '@apollo/client';\nimport {Box, Button, Icon} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {breakOnUnderscores} from '../app/Util';\nimport {OpNameOrPath} from '../ops/OpNameOrPath';\nimport {DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT} from '../typeexplorer/TypeWithTooltip';\n\nimport {SidebarSection, SidebarTitle} from './SidebarComponents';\nimport {DependencyHeaderRow, DependencyRow, DependencyTable} from './SidebarOpHelpers';\nimport {SidebarOpInvocationFragment} from './types/SidebarOpInvocationFragment';\n\ninterface ISidebarOpInvocationProps {\n  solid: SidebarOpInvocationFragment;\n  onEnterSubgraph?: (arg: OpNameOrPath) => void;\n}\n\nexport const SidebarOpInvocation: React.FC<ISidebarOpInvocationProps> = (props) => {\n  const {solid, onEnterSubgraph} = props;\n  const showInputs = solid.inputs.some((o) => o.dependsOn.length);\n  const showOutputs = solid.outputs.some((o) => o.dependedBy.length);\n\n  return (\n    <div>\n      <SidebarSection title=\"Invocation\">\n        <Box padding={{vertical: 16, horizontal: 24}}>\n          <SidebarTitle>{breakOnUnderscores(solid.name)}</SidebarTitle>\n          {showInputs || showOutputs ? (\n            <DependencyTable>\n              <tbody>\n                {showInputs ? (\n                  <>\n                    <DependencyHeaderRow label=\"Inputs\" />\n                    {solid.inputs.map(({definition, dependsOn, isDynamicCollect}) =>\n                      dependsOn.map((source, idx) => (\n                        <DependencyRow\n                          key={idx}\n                          from={source}\n                          to={definition.name}\n                          isDynamic={isDynamicCollect}\n                        />\n                      )),\n                    )}\n                  </>\n                ) : null}\n                {showOutputs ? (\n                  <>\n                    <DependencyHeaderRow label=\"Outputs\" />\n                    {solid.outputs.map(({definition, dependedBy}) =>\n                      dependedBy.map((target, idx) => (\n                        <DependencyRow\n                          key={idx}\n                          from={definition.name}\n                          to={target}\n                          isDynamic={definition.isDynamic}\n                        />\n                      )),\n                    )}\n                  </>\n                ) : null}\n              </tbody>\n            </DependencyTable>\n          ) : null}\n          {onEnterSubgraph && (\n            <Box margin={{top: 12}}>\n              <Button\n                icon={<Icon name=\"zoom_in\" />}\n                onClick={() => onEnterSubgraph({name: solid.name})}\n              >\n                Expand graph\n              </Button>\n            </Box>\n          )}\n        </Box>\n      </SidebarSection>\n    </div>\n  );\n};\n\nexport const SIDEBAR_OP_INVOCATION_FRAGMENT = gql`\n  fragment SidebarOpInvocationFragment on Solid {\n    name\n    inputs {\n      isDynamicCollect\n      definition {\n        name\n        description\n        type {\n          ...DagsterTypeWithTooltipFragment\n        }\n      }\n      dependsOn {\n        definition {\n          name\n        }\n        solid {\n          name\n        }\n      }\n    }\n    outputs {\n      definition {\n        name\n        description\n        isDynamic\n        type {\n          ...DagsterTypeWithTooltipFragment\n        }\n      }\n      dependedBy {\n        definition {\n          name\n        }\n        solid {\n          name\n        }\n      }\n    }\n  }\n\n  ${DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, NonIdealState} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {OpNameOrPath} from '../ops/OpNameOrPath';\nimport {LoadingSpinner} from '../ui/Loading';\nimport {RepoAddress} from '../workspace/types';\n\nimport {ExplorerPath} from './PipelinePathUtils';\nimport {SidebarOpDefinition, SIDEBAR_OP_DEFINITION_FRAGMENT} from './SidebarOpDefinition';\nimport {SidebarOpExecutionGraphs} from './SidebarOpExecutionGraphs';\nimport {SidebarOpInvocation, SIDEBAR_OP_INVOCATION_FRAGMENT} from './SidebarOpInvocation';\nimport {SidebarGraphOpQuery, SidebarGraphOpQueryVariables} from './types/SidebarGraphOpQuery';\nimport {SidebarOpFragment} from './types/SidebarOpFragment';\nimport {\n  SidebarPipelineOpQuery,\n  SidebarPipelineOpQueryVariables,\n} from './types/SidebarPipelineOpQuery';\n\ninterface SidebarOpProps {\n  handleID: string;\n  explorerPath: ExplorerPath;\n  showingSubgraph: boolean;\n  parentOpHandleID?: string;\n  getInvocations?: (definitionName: string) => {handleID: string}[];\n  onEnterSubgraph?: (arg: OpNameOrPath) => void;\n  onClickOp: (arg: OpNameOrPath) => void;\n  repoAddress?: RepoAddress;\n  isGraph: boolean;\n}\n\nconst useSidebarOpQuery = (\n  name: string,\n  handleID: string,\n  isGraph: boolean,\n  repoAddress?: RepoAddress,\n) => {\n  const pipelineResult = useQuery<SidebarPipelineOpQuery, SidebarPipelineOpQueryVariables>(\n    SIDEBAR_PIPELINE_OP_QUERY,\n    {\n      variables: {\n        selector: {\n          repositoryName: repoAddress?.name || '',\n          repositoryLocationName: repoAddress?.location || '',\n          pipelineName: name,\n        },\n        handleID,\n      },\n      fetchPolicy: 'cache-and-network',\n      skip: isGraph,\n    },\n  );\n\n  const graphResult = useQuery<SidebarGraphOpQuery, SidebarGraphOpQueryVariables>(\n    SIDEBAR_GRAPH_OP_QUERY,\n    {\n      variables: {\n        selector: {\n          repositoryName: repoAddress?.name || '',\n          repositoryLocationName: repoAddress?.location || '',\n          graphName: name,\n        },\n        handleID,\n      },\n      fetchPolicy: 'cache-and-network',\n      skip: !isGraph,\n    },\n  );\n\n  if (isGraph) {\n    const {error, data, loading} = graphResult;\n    const solidContainer: SidebarOpFragment | undefined =\n      data?.graphOrError.__typename === 'Graph' ? data.graphOrError : undefined;\n    return {\n      error,\n      solidContainer,\n      isLoading: !!loading,\n    };\n  }\n\n  const {error, data, loading} = pipelineResult;\n  const solidContainer: SidebarOpFragment | undefined =\n    data?.pipelineOrError.__typename === 'Pipeline' ? data.pipelineOrError : undefined;\n  return {\n    error,\n    solidContainer,\n    isLoading: !!loading,\n  };\n};\n\nexport const SidebarOp: React.FC<SidebarOpProps> = ({\n  handleID,\n  explorerPath,\n  getInvocations,\n  showingSubgraph,\n  onEnterSubgraph,\n  onClickOp,\n  repoAddress,\n  isGraph,\n}) => {\n  const {error, solidContainer, isLoading} = useSidebarOpQuery(\n    explorerPath.pipelineName,\n    handleID,\n    isGraph,\n    repoAddress,\n  );\n  if (error) {\n    return (\n      <Box padding={64} flex={{justifyContent: 'center'}}>\n        <NonIdealState icon=\"error\" title=\"GraphQL Error - see console for details\" />\n      </Box>\n    );\n  }\n\n  if (isLoading) {\n    return <LoadingSpinner purpose=\"section\" />;\n  }\n\n  if (!solidContainer) {\n    return (\n      <Box padding={{vertical: 16, horizontal: 24}} style={{color: Colors.Gray500}}>\n        Could not load ops.\n      </Box>\n    );\n  }\n\n  return (\n    <>\n      <SidebarOpInvocation\n        key={`${handleID}-inv`}\n        solid={solidContainer!.solidHandle!.solid}\n        onEnterSubgraph={\n          solidContainer!.solidHandle!.solid.definition.__typename === 'CompositeSolidDefinition'\n            ? onEnterSubgraph\n            : undefined\n        }\n      />\n      {!isGraph && repoAddress && (\n        <SidebarOpExecutionGraphs\n          key={`${handleID}-graphs`}\n          handleID={handleID}\n          solidName={solidContainer!.solidHandle!.solid.name}\n          pipelineName={explorerPath.pipelineName}\n          repoAddress={repoAddress}\n        />\n      )}\n      <SidebarOpDefinition\n        key={`${handleID}-def`}\n        showingSubgraph={showingSubgraph}\n        definition={solidContainer!.solidHandle!.solid.definition}\n        getInvocations={getInvocations}\n        onClickInvocation={({handleID}) => onClickOp({path: handleID.split('.')})}\n        repoAddress={repoAddress}\n      />\n    </>\n  );\n};\n\nconst SIDEBAR_OP_FRAGMENT = gql`\n  fragment SidebarOpFragment on SolidContainer {\n    id\n    name\n    solidHandle(handleID: $handleID) {\n      solid {\n        ...SidebarOpInvocationFragment\n\n        definition {\n          __typename\n          ...SidebarOpDefinitionFragment\n        }\n      }\n    }\n  }\n  ${SIDEBAR_OP_INVOCATION_FRAGMENT}\n  ${SIDEBAR_OP_DEFINITION_FRAGMENT}\n`;\n\nconst SIDEBAR_PIPELINE_OP_QUERY = gql`\n  query SidebarPipelineOpQuery($selector: PipelineSelector!, $handleID: String!) {\n    pipelineOrError(params: $selector) {\n      __typename\n      ... on Pipeline {\n        id\n        ...SidebarOpFragment\n      }\n    }\n  }\n  ${SIDEBAR_OP_FRAGMENT}\n`;\n\nconst SIDEBAR_GRAPH_OP_QUERY = gql`\n  query SidebarGraphOpQuery($selector: GraphSelector!, $handleID: String!) {\n    graphOrError(selector: $selector) {\n      __typename\n      ... on Graph {\n        id\n        ...SidebarOpFragment\n      }\n    }\n  }\n  ${SIDEBAR_OP_FRAGMENT}\n`;\n","import {Box, Colors, Tabs} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {OpNameOrPath} from '../ops/OpNameOrPath';\nimport {TypeExplorerContainer} from '../typeexplorer/TypeExplorerContainer';\nimport {TypeListContainer} from '../typeexplorer/TypeListContainer';\nimport {TabLink} from '../ui/TabLink';\nimport {RepoAddress} from '../workspace/types';\n\nimport {RightInfoPanelContent} from './GraphExplorer';\nimport {ExplorerPath} from './PipelinePathUtils';\nimport {SidebarContainerOverview} from './SidebarContainerOverview';\nimport {SidebarOp} from './SidebarOp';\nimport {SidebarRootContainerFragment} from './types/SidebarRootContainerFragment';\n\ntype TabKey = 'types' | 'info';\n\ninterface TabDefinition {\n  name: string;\n  key: TabKey;\n  content: () => React.ReactNode;\n}\n\ninterface SidebarRootProps {\n  tab?: TabKey;\n  typeName?: string;\n  container: SidebarRootContainerFragment;\n  explorerPath: ExplorerPath;\n  opHandleID?: string;\n  parentOpHandleID?: string;\n  getInvocations?: (definitionName: string) => {handleID: string}[];\n  onEnterSubgraph: (arg: OpNameOrPath) => void;\n  onClickOp: (arg: OpNameOrPath) => void;\n  repoAddress?: RepoAddress;\n}\n\nexport const SidebarRoot: React.FC<SidebarRootProps> = (props) => {\n  const {\n    tab,\n    typeName,\n    container,\n    repoAddress,\n    explorerPath,\n    opHandleID,\n    getInvocations,\n    parentOpHandleID,\n    onEnterSubgraph,\n    onClickOp,\n  } = props;\n\n  const activeTab = tab || 'info';\n\n  const TabDefinitions: Array<TabDefinition> = [\n    {\n      name: 'Info',\n      key: 'info',\n      content: () =>\n        opHandleID ? (\n          <SidebarOp\n            key={opHandleID}\n            explorerPath={explorerPath}\n            handleID={opHandleID}\n            showingSubgraph={false}\n            getInvocations={getInvocations}\n            onEnterSubgraph={onEnterSubgraph}\n            onClickOp={onClickOp}\n            repoAddress={repoAddress}\n            isGraph={container.__typename === 'Graph'}\n          />\n        ) : parentOpHandleID ? (\n          <SidebarOp\n            key={parentOpHandleID}\n            explorerPath={explorerPath}\n            handleID={parentOpHandleID}\n            showingSubgraph={true}\n            getInvocations={getInvocations}\n            onClickOp={onClickOp}\n            repoAddress={repoAddress}\n            isGraph={container.__typename === 'Graph'}\n          />\n        ) : (\n          <SidebarContainerOverview repoAddress={repoAddress} container={container} />\n        ),\n    },\n    {\n      name: 'Types',\n      key: 'types',\n      content: () =>\n        typeName ? (\n          <TypeExplorerContainer\n            explorerPath={explorerPath}\n            repoAddress={repoAddress}\n            typeName={typeName}\n          />\n        ) : (\n          <TypeListContainer repoAddress={repoAddress} explorerPath={explorerPath} />\n        ),\n    },\n  ];\n\n  return (\n    <>\n      <Box\n        padding={{horizontal: 24}}\n        border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n      >\n        <Tabs selectedTabId={activeTab}>\n          {TabDefinitions.map(({name, key}) => (\n            <TabLink id={key} key={key} to={{search: `?tab=${key}`}} title={name} />\n          ))}\n        </Tabs>\n      </Box>\n      <RightInfoPanelContent>\n        {TabDefinitions.find((t) => t.key === activeTab)?.content()}\n      </RightInfoPanelContent>\n    </>\n  );\n};\n","import {gql} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {Breadcrumbs} from '@blueprintjs/core';\nimport {Checkbox, Colors, SplitPanelContainer, TextInput} from '@dagster-io/ui';\nimport Color from 'color';\nimport qs from 'qs';\nimport * as React from 'react';\nimport {Route} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {filterByQuery} from '../app/GraphQueryImpl';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {OpGraph, OP_GRAPH_OP_FRAGMENT} from '../graph/OpGraph';\nimport {useOpLayout} from '../graph/asyncGraphLayout';\nimport {OpNameOrPath} from '../ops/OpNameOrPath';\nimport {GraphQueryInput} from '../ui/GraphQueryInput';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  EmptyDAGNotice,\n  EntirelyFilteredDAGNotice,\n  LargeDAGNotice,\n  LoadingNotice,\n} from './GraphNotices';\nimport {ExplorerPath} from './PipelinePathUtils';\nimport {SIDEBAR_ROOT_CONTAINER_FRAGMENT} from './SidebarContainerOverview';\nimport {SidebarRoot} from './SidebarRoot';\nimport {GraphExplorerFragment} from './types/GraphExplorerFragment';\nimport {GraphExplorerSolidHandleFragment} from './types/GraphExplorerSolidHandleFragment';\n\nexport interface GraphExplorerOptions {\n  explodeComposites: boolean;\n  preferAssetRendering: boolean;\n}\n\ninterface GraphExplorerProps {\n  explorerPath: ExplorerPath;\n  onChangeExplorerPath: (path: ExplorerPath, mode: 'replace' | 'push') => void;\n  options: GraphExplorerOptions;\n  setOptions: (options: GraphExplorerOptions) => void;\n  container: GraphExplorerFragment;\n  repoAddress?: RepoAddress;\n  handles: GraphExplorerSolidHandleFragment[];\n  parentHandle?: GraphExplorerSolidHandleFragment;\n  getInvocations?: (definitionName: string) => {handleID: string}[];\n  isGraph: boolean;\n}\n\nexport const GraphExplorer: React.FC<GraphExplorerProps> = (props) => {\n  const {\n    getInvocations,\n    handles,\n    options,\n    container,\n    explorerPath,\n    onChangeExplorerPath,\n    parentHandle,\n    setOptions,\n    repoAddress,\n    isGraph,\n  } = props;\n  const [nameMatch, setNameMatch] = React.useState('');\n\n  const handleQueryChange = (opsQuery: string) => {\n    onChangeExplorerPath({...explorerPath, opsQuery}, 'replace');\n  };\n\n  const handleAdjustPath = React.useMemo(\n    () => (fn: (opNames: string[]) => void) => {\n      const opNames = [...explorerPath.opNames];\n      const retValue = fn(opNames);\n      if (retValue !== undefined) {\n        throw new Error(\n          'handleAdjustPath function is expected to mutate the array and return nothing',\n        );\n      }\n      onChangeExplorerPath({...explorerPath, opNames}, 'push');\n    },\n    [onChangeExplorerPath, explorerPath],\n  );\n\n  // Note: this method handles relative solid paths, eg: {path: ['..', 'OtherSolid']}.\n  // This is important because the DAG component tree doesn't always have access to a handleID,\n  // and we sometimes want to be able to jump to a solid in the parent layer.\n  //\n  const handleClickOp = (arg: OpNameOrPath) => {\n    handleAdjustPath((opNames) => {\n      if ('name' in arg) {\n        opNames[opNames.length ? opNames.length - 1 : 0] = arg.name;\n      } else {\n        if (arg.path[0] !== '..') {\n          opNames.length = 0;\n        }\n        if (arg.path[0] === '..' && opNames[opNames.length - 1] !== '') {\n          opNames.pop(); // remove the last path component indicating selection\n        }\n        while (arg.path[0] === '..') {\n          arg.path.shift();\n          opNames.pop();\n        }\n        opNames.push(...arg.path);\n      }\n    });\n  };\n\n  const handleEnterCompositeSolid = (arg: OpNameOrPath) => {\n    // To animate the rect of the composite solid expanding correctly, we need\n    // to select it before entering it so we can draw the \"initial state\" of the\n    // labeled rectangle.\n    handleClickOp(arg);\n\n    window.requestAnimationFrame(() => {\n      handleAdjustPath((opNames) => {\n        const last = 'name' in arg ? arg.name : arg.path[arg.path.length - 1];\n        opNames[opNames.length - 1] = last;\n        opNames.push('');\n      });\n    });\n  };\n\n  const handleLeaveCompositeSolid = () => {\n    handleAdjustPath((opNames) => {\n      opNames.pop();\n    });\n  };\n\n  const handleClickBackground = () => {\n    handleClickOp({name: ''});\n  };\n\n  const {opsQuery, opNames} = explorerPath;\n\n  const selectedName = opNames[opNames.length - 1];\n  const selectedHandle = handles.find((h) => selectedName === h.solid.name);\n\n  // Run a few assertions on the state of the world and redirect the user\n  // back to safety if they've landed in an invalid place. Note that we can\n  // pop one layer at a time and this renders recursively until we reach a\n  // valid parent.\n  const invalidSelection = selectedName && !selectedHandle;\n  const invalidParent =\n    parentHandle && parentHandle.solid.definition.__typename !== 'CompositeSolidDefinition';\n\n  React.useEffect(() => {\n    if (invalidSelection || invalidParent) {\n      handleAdjustPath((opNames) => {\n        opNames.pop();\n      });\n    }\n  }, [handleAdjustPath, invalidSelection, invalidParent]);\n\n  const solids = React.useMemo(() => handles.map((h) => h.solid), [handles]);\n  const solidsQueryEnabled = !parentHandle && !explorerPath.snapshotId;\n  const showAssetRenderingOption =\n    !isGraph && solids.some((s) => s.definition.assetNodes.length > 0);\n  const explodeCompositesEnabled =\n    !parentHandle &&\n    (options.explodeComposites ||\n      solids.some((f) => f.definition.__typename === 'CompositeSolidDefinition'));\n\n  const queryResultOps = React.useMemo(\n    () =>\n      solidsQueryEnabled\n        ? filterByQuery(solids, opsQuery)\n        : {all: solids, focus: [], applyingEmptyDefault: false},\n    [opsQuery, solids, solidsQueryEnabled],\n  );\n\n  const highlightedOps = React.useMemo(\n    () => queryResultOps.all.filter((s) => s.name.toLowerCase().includes(nameMatch.toLowerCase())),\n    [nameMatch, queryResultOps.all],\n  );\n\n  const parentOp = parentHandle && parentHandle.solid;\n  const {layout, loading, async} = useOpLayout(queryResultOps.all, parentOp);\n\n  const breadcrumbs = React.useMemo(() => {\n    const opNames = explorerPath.opNames;\n    const breadcrumbs = opNames.map((name, idx) => ({\n      text: name,\n      onClick: () => {\n        onChangeExplorerPath({...explorerPath, opNames: opNames.slice(0, idx + 1)}, 'push');\n      },\n    }));\n    // If you're viewing a graph that is part of an asset job, we don't want to let you view\n    // the \"root\" graph becacuse it's not something you defined explicitly. Remove the first item.\n    if (isHiddenAssetGroupJob(explorerPath.pipelineName)) {\n      breadcrumbs.shift();\n    }\n    return breadcrumbs;\n  }, [explorerPath, onChangeExplorerPath]);\n\n  return (\n    <SplitPanelContainer\n      identifier=\"explorer\"\n      firstInitialPercent={70}\n      first={\n        <>\n          {solidsQueryEnabled ? (\n            <QueryOverlay>\n              <GraphQueryInput\n                items={solids}\n                value={explorerPath.opsQuery}\n                placeholder=\"Type an op subset\"\n                popoverPosition=\"bottom-left\"\n                onChange={handleQueryChange}\n              />\n            </QueryOverlay>\n          ) : breadcrumbs.length > 1 ? (\n            <BreadcrumbsOverlay>\n              <Breadcrumbs currentBreadcrumbRenderer={() => <span />} items={breadcrumbs} />\n            </BreadcrumbsOverlay>\n          ) : null}\n\n          {(showAssetRenderingOption || explodeCompositesEnabled) && (\n            <OptionsOverlay>\n              {showAssetRenderingOption && (\n                <Checkbox\n                  format=\"switch\"\n                  label=\"View as Asset Graph\"\n                  checked={options.preferAssetRendering}\n                  onChange={() => {\n                    onChangeExplorerPath({...explorerPath, opNames: []}, 'replace');\n                    setOptions({\n                      ...options,\n                      preferAssetRendering: !options.preferAssetRendering,\n                    });\n                  }}\n                />\n              )}\n              {explodeCompositesEnabled && (\n                <Checkbox\n                  format=\"switch\"\n                  label=\"Explode graphs\"\n                  checked={options.explodeComposites}\n                  onChange={() => {\n                    handleQueryChange('');\n                    setOptions({\n                      ...options,\n                      explodeComposites: !options.explodeComposites,\n                    });\n                  }}\n                />\n              )}\n            </OptionsOverlay>\n          )}\n\n          <HighlightOverlay>\n            <TextInput\n              name=\"highlighted\"\n              icon=\"search\"\n              value={nameMatch}\n              placeholder=\"Highlight\"\n              onChange={(e) => setNameMatch(e.target.value)}\n            />\n          </HighlightOverlay>\n\n          {solids.length === 0 ? (\n            <EmptyDAGNotice nodeType=\"op\" isGraph={isGraph} />\n          ) : queryResultOps.applyingEmptyDefault ? (\n            <LargeDAGNotice nodeType=\"op\" />\n          ) : Object.keys(queryResultOps.all).length === 0 ? (\n            <EntirelyFilteredDAGNotice nodeType=\"op\" />\n          ) : undefined}\n\n          {loading || !layout ? (\n            <LoadingNotice async={async} nodeType=\"op\" />\n          ) : (\n            <OpGraph\n              jobName={container.name}\n              ops={queryResultOps.all}\n              focusOps={queryResultOps.focus}\n              highlightedOps={highlightedOps}\n              selectedHandleID={selectedHandle && selectedHandle.handleID}\n              selectedOp={selectedHandle && selectedHandle.solid}\n              parentHandleID={parentHandle && parentHandle.handleID}\n              parentOp={parentOp}\n              onClickOp={handleClickOp}\n              onClickBackground={handleClickBackground}\n              onEnterSubgraph={handleEnterCompositeSolid}\n              onLeaveSubgraph={handleLeaveCompositeSolid}\n              layout={layout}\n            />\n          )}\n        </>\n      }\n      second={\n        <RightInfoPanel>\n          <Route\n            // eslint-disable-next-line react/no-children-prop\n            children={({location}: {location: any}) => (\n              <SidebarRoot\n                container={container}\n                explorerPath={explorerPath}\n                opHandleID={selectedHandle && selectedHandle.handleID}\n                parentOpHandleID={parentHandle && parentHandle.handleID}\n                getInvocations={getInvocations}\n                onEnterSubgraph={handleEnterCompositeSolid}\n                onClickOp={handleClickOp}\n                repoAddress={repoAddress}\n                {...qs.parse(location.search || '', {ignoreQueryPrefix: true})}\n              />\n            )}\n          />\n        </RightInfoPanel>\n      }\n    />\n  );\n};\n\nexport const GRAPH_EXPLORER_FRAGMENT = gql`\n  fragment GraphExplorerFragment on SolidContainer {\n    id\n    name\n    description\n    ...SidebarRootContainerFragment\n  }\n  ${SIDEBAR_ROOT_CONTAINER_FRAGMENT}\n`;\n\nexport const GRAPH_EXPLORER_ASSET_NODE_FRAGMENT = gql`\n  fragment GraphExplorerAssetNodeFragment on AssetNode {\n    id\n    opNames\n    assetKey {\n      path\n    }\n  }\n`;\n\nexport const GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT = gql`\n  fragment GraphExplorerSolidHandleFragment on SolidHandle {\n    handleID\n    solid {\n      name\n      ...OpGraphOpFragment\n    }\n  }\n  ${OP_GRAPH_OP_FRAGMENT}\n`;\n\nexport const RightInfoPanel = styled.div`\n  // Fixes major perofmance hit. To reproduce, add enough content to\n  // the sidebar that it scrolls (via overflow-y below) and then try\n  // to pan the DAG.\n  position: relative;\n\n  height: 100%;\n  min-height: 0;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  background: ${Colors.White};\n`;\n\nexport const RightInfoPanelContent = styled.div`\n  flex: 1;\n  overflow-y: auto;\n`;\n\nexport const OptionsOverlay = styled.div`\n  background-color: ${Color(Colors.White).fade(0.6).toString()};\n  z-index: 2;\n  padding: 15px 20px;\n  display: inline-flex;\n  align-items: stretch;\n  white-space: nowrap;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  gap: 8px;\n`;\n\nexport const HighlightOverlay = styled.div`\n  background-color: ${Color(Colors.White).fade(0.6).toString()};\n  z-index: 2;\n  padding: 8px 12px 0 0;\n  display: inline-flex;\n  align-items: stretch;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n\nexport const QueryOverlay = styled.div`\n  z-index: 2;\n  position: absolute;\n  top: 8px;\n  left: 24px;\n  white-space: nowrap;\n  display: flex;\n  gap: 10px;\n`;\n\nexport const BreadcrumbsOverlay = styled.div`\n  background-color: ${Color(Colors.White).fade(0.6).toString()};\n  z-index: 2;\n  padding: 12px 0 0 20px;\n  height: 42px;\n  max-width: calc(100% - 250px);\n  display: inline-flex;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n","import {Box, Colors, Icon, NonIdealState, Spinner} from '@dagster-io/ui';\nimport capitalize from 'lodash/capitalize';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nexport const LargeDAGNotice = ({nodeType}: {nodeType: 'op' | 'asset'}) => (\n  <LargeDAGContainer>\n    <Icon name=\"arrow_upward\" size={24} />\n    <LargeDAGInstructionBox>\n      <p>\n        This is a large DAG that may be difficult to visualize. Type <code>*</code> in the graph\n        filter bar to render the entire thing, or type {nodeType} names and use:\n      </p>\n      <ul style={{marginBottom: 0}}>\n        <li>\n          <code>+</code> to expand a single layer before or after the {nodeType}.\n        </li>\n        <li>\n          <code>*</code> to expand recursively before or after the {nodeType}.\n        </li>\n        <li>\n          <code>AND</code> to render another disconnected fragment.\n        </li>\n      </ul>\n    </LargeDAGInstructionBox>\n  </LargeDAGContainer>\n);\n\nexport const EmptyDAGNotice: React.FC<{isGraph: boolean; nodeType: 'asset' | 'op'}> = ({\n  isGraph,\n  nodeType,\n}) => {\n  return (\n    <CenteredContainer>\n      <NonIdealState\n        icon=\"no-results\"\n        title={isGraph ? 'Empty graph' : 'Empty pipeline'}\n        description={\n          <div>\n            This {isGraph ? 'graph' : 'pipeline'} is empty. {capitalize(nodeType)}s will appear here\n            when they are added to loaded repositories.\n          </div>\n        }\n      />\n    </CenteredContainer>\n  );\n};\n\nexport const EntirelyFilteredDAGNotice: React.FC<{nodeType: 'asset' | 'op'}> = ({nodeType}) => {\n  return (\n    <CenteredContainer>\n      <NonIdealState\n        icon=\"no-results\"\n        title=\"Nothing to display\"\n        description={\n          <div>\n            No {nodeType}s match your query filter. Try removing your filter, typing <code>*</code>{' '}\n            to render the entire graph, or entering another filter string.\n          </div>\n        }\n      />\n    </CenteredContainer>\n  );\n};\n\nexport const LoadingNotice: React.FC<{async: boolean; nodeType: 'asset' | 'op'}> = (props) => {\n  const {async} = props;\n  return (\n    <LoadingContainer>\n      {async ? (\n        <Box margin={{bottom: 24}}>Rendering a large number of {props.nodeType}s, please wait</Box>\n      ) : null}\n      <Spinner purpose=\"page\" />\n    </LoadingContainer>\n  );\n};\n\nconst LoadingContainer = styled.div`\n  background-color: ${Colors.White};\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  z-index: 2;\n`;\n\nconst CenteredContainer = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 2;\n`;\n\nconst LargeDAGContainer = styled.div`\n  width: 45vw;\n  position: absolute;\n  left: 40px;\n  top: 60px;\n  z-index: 2;\n  max-width: 500px;\n  display: flex;\n  flex-direction: column;\n  [role='img'] {\n    opacity: 0.5;\n    margin-left: 10vw;\n  }\n`;\n\nconst LargeDAGInstructionBox = styled.div`\n  padding: 15px 20px;\n  border: 1px solid #fff5c3;\n  margin-top: 20px;\n  color: ${Colors.Gray800};\n  background: #fffbe5;\n  text-align: left;\n  line-height: 1.4rem;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  code {\n    background: #f8ebad;\n    font-weight: 500;\n    padding: 0 4px;\n  }\n`;\n","import {NonIdealState} from '@dagster-io/ui';\nimport React from 'react';\n\ninterface Props {\n  isGraph: boolean;\n  result:\n    | {\n        __typename: 'PipelineSnapshotNotFoundError';\n        message: string;\n      }\n    | {\n        __typename: 'PipelineNotFoundError';\n        message: string;\n      }\n    | {\n        __typename: 'RepositoryNotFoundError';\n        message: string;\n      }\n    | {\n        __typename: 'PythonError';\n        message: string;\n      };\n}\n\nexport const NonIdealPipelineQueryResult: React.FC<Props> = ({isGraph, result}) => {\n  if (result.__typename === 'PipelineSnapshotNotFoundError') {\n    return (\n      <NonIdealState\n        icon=\"error\"\n        title={isGraph ? 'Graph snapshot not found' : 'Pipeline snapshot not found'}\n        description={result.message}\n      />\n    );\n  }\n  if (result.__typename === 'PipelineNotFoundError') {\n    return (\n      <NonIdealState\n        icon=\"error\"\n        title={isGraph ? 'Graph not found' : 'Pipeline not found'}\n        description={result.message}\n      />\n    );\n  }\n  if (result.__typename === 'RepositoryNotFoundError') {\n    return <NonIdealState icon=\"error\" title=\"Repository not found\" description={result.message} />;\n  }\n  if (result.__typename === 'PythonError') {\n    return <NonIdealState icon=\"error\" title=\"Query Error\" description={result.message} />;\n  }\n  return <span />;\n};\n","import {gql, useQuery} from '@apollo/client';\nimport * as React from 'react';\nimport {useHistory, useParams} from 'react-router-dom';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {useTrackPageView} from '../app/analytics';\nimport {AssetGraphExplorer} from '../asset-graph/AssetGraphExplorer';\nimport {AssetLocation} from '../asset-graph/useFindAssetLocation';\nimport {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {Loading} from '../ui/Loading';\nimport {buildPipelineSelector} from '../workspace/WorkspaceContext';\nimport {RepoAddress} from '../workspace/types';\n\nimport {explodeCompositesInHandleGraph} from './CompositeSupport';\nimport {\n  GraphExplorer,\n  GraphExplorerOptions,\n  GRAPH_EXPLORER_ASSET_NODE_FRAGMENT,\n  GRAPH_EXPLORER_FRAGMENT,\n  GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT,\n} from './GraphExplorer';\nimport {NonIdealPipelineQueryResult} from './NonIdealPipelineQueryResult';\nimport {ExplorerPath, explorerPathFromString, explorerPathToString} from './PipelinePathUtils';\nimport {\n  PipelineExplorerRootQuery,\n  PipelineExplorerRootQueryVariables,\n} from './types/PipelineExplorerRootQuery';\n\nexport const PipelineExplorerSnapshotRoot = () => {\n  useTrackPageView();\n\n  const params = useParams();\n  const explorerPath = explorerPathFromString(params['0']);\n  const {pipelineName, snapshotId} = explorerPath;\n  const history = useHistory();\n\n  useDocumentTitle(`Snapshot: ${pipelineName}${snapshotId ? `@${snapshotId.slice(0, 8)}` : ''}`);\n\n  return (\n    <PipelineExplorerContainer\n      explorerPath={explorerPath}\n      onChangeExplorerPath={(path, mode) => {\n        history[mode](`/instance/snapshots/${explorerPathToString(path)}`);\n      }}\n      onNavigateToForeignNode={({assetKey}) => {\n        history.push(assetDetailsPathForKey(assetKey));\n      }}\n    />\n  );\n};\n\nexport const PipelineExplorerContainer: React.FC<{\n  explorerPath: ExplorerPath;\n  onChangeExplorerPath: (path: ExplorerPath, mode: 'replace' | 'push') => void;\n  onNavigateToForeignNode: (node: AssetLocation) => void;\n  repoAddress?: RepoAddress;\n  isGraph?: boolean;\n}> = ({\n  explorerPath,\n  repoAddress,\n  onChangeExplorerPath,\n  onNavigateToForeignNode,\n  isGraph = false,\n}) => {\n  const [options, setOptions] = React.useState<GraphExplorerOptions>({\n    explodeComposites: explorerPath.explodeComposites ?? false,\n    preferAssetRendering: true,\n  });\n\n  const parentNames = explorerPath.opNames.slice(0, explorerPath.opNames.length - 1);\n  const pipelineSelector = buildPipelineSelector(repoAddress || null, explorerPath.pipelineName);\n\n  const pipelineResult = useQuery<PipelineExplorerRootQuery, PipelineExplorerRootQueryVariables>(\n    PIPELINE_EXPLORER_ROOT_QUERY,\n    {\n      variables: {\n        snapshotPipelineSelector: explorerPath.snapshotId ? undefined : pipelineSelector,\n        snapshotId: explorerPath.snapshotId ? explorerPath.snapshotId : undefined,\n        rootHandleID: parentNames.join('.'),\n        requestScopeHandleID: options.explodeComposites ? undefined : parentNames.join('.'),\n      },\n    },\n  );\n\n  return (\n    <Loading<PipelineExplorerRootQuery> queryResult={pipelineResult}>\n      {({pipelineSnapshotOrError: result}) => {\n        if (result.__typename !== 'PipelineSnapshot') {\n          return <NonIdealPipelineQueryResult isGraph={isGraph} result={result} />;\n        }\n\n        const parentHandle = result.solidHandle;\n        const displayedHandles = options.explodeComposites\n          ? explodeCompositesInHandleGraph(result.solidHandles)\n          : result.solidHandles;\n        const assetNodesPresent = result.solidHandles.some(\n          (h) => h.solid.definition.assetNodes.length > 0,\n        );\n        if (options.preferAssetRendering && assetNodesPresent) {\n          return (\n            <AssetGraphExplorer\n              options={options}\n              setOptions={setOptions}\n              fetchOptions={{pipelineSelector}}\n              explorerPath={explorerPath}\n              onChangeExplorerPath={onChangeExplorerPath}\n              onNavigateToForeignNode={onNavigateToForeignNode}\n            />\n          );\n        }\n\n        return (\n          <GraphExplorer\n            options={options}\n            setOptions={setOptions}\n            explorerPath={explorerPath}\n            onChangeExplorerPath={onChangeExplorerPath}\n            container={result}\n            repoAddress={repoAddress}\n            handles={displayedHandles}\n            parentHandle={parentHandle ? parentHandle : undefined}\n            isGraph={isGraph}\n            getInvocations={(definitionName) =>\n              displayedHandles\n                .filter((s) => s.solid.definition.name === definitionName)\n                .map((s) => ({handleID: s.handleID}))\n            }\n          />\n        );\n      }}\n    </Loading>\n  );\n};\n\nexport const PIPELINE_EXPLORER_ROOT_QUERY = gql`\n  query PipelineExplorerRootQuery(\n    $snapshotPipelineSelector: PipelineSelector\n    $snapshotId: String\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    pipelineSnapshotOrError(\n      snapshotId: $snapshotId\n      activePipelineSelector: $snapshotPipelineSelector\n    ) {\n      ... on PipelineSnapshot {\n        id\n        name\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n        ...GraphExplorerFragment\n\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n            definition {\n              assetNodes {\n                id\n                ...GraphExplorerAssetNodeFragment\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ${METADATA_ENTRY_FRAGMENT}\n  ${GRAPH_EXPLORER_FRAGMENT}\n  ${GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT}\n  ${GRAPH_EXPLORER_ASSET_NODE_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {Box, Colors, Icon} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePipelinePath, workspacePipelinePathGuessRepo} from '../workspace/workspacePath';\n\nimport {PipelineSnapshotLink} from './PipelinePathUtils';\n\nexport interface Props {\n  pipelineName: string;\n  pipelineHrefContext: 'repo-unknown' | RepoAddress | 'no-link';\n  isJob: boolean;\n  snapshotId?: string | null;\n  showIcon?: boolean;\n  truncationThreshold?: number;\n  size?: 'small' | 'normal';\n}\n\nconst DEFAULT_TRUNCATION_THRESHOLD = 40;\nconst TRUNCATION_BUFFER = 5;\n\nexport const PipelineReference: React.FC<Props> = ({\n  pipelineName,\n  pipelineHrefContext,\n  isJob,\n  snapshotId,\n  showIcon,\n  truncationThreshold = DEFAULT_TRUNCATION_THRESHOLD,\n  size = 'normal',\n}) => {\n  const truncatedName =\n    truncationThreshold > 0 && pipelineName.length > truncationThreshold\n      ? `${pipelineName.slice(0, truncationThreshold - TRUNCATION_BUFFER)}`\n      : pipelineName;\n\n  const pipeline =\n    pipelineHrefContext === 'repo-unknown' ? (\n      <Link to={workspacePipelinePathGuessRepo(pipelineName, isJob)}>{truncatedName}</Link>\n    ) : pipelineHrefContext === 'no-link' ? (\n      <>{truncatedName}</>\n    ) : (\n      <Link\n        to={workspacePipelinePath({\n          repoName: pipelineHrefContext.name,\n          repoLocation: pipelineHrefContext.location,\n          pipelineName,\n          isJob,\n        })}\n      >\n        {truncatedName}\n      </Link>\n    );\n\n  return (\n    <Box flex={{direction: 'row', alignItems: 'center', display: 'inline-flex'}}>\n      {showIcon && (\n        <Box margin={{right: 8}}>\n          <Icon color={Colors.Gray400} name=\"job\" />\n        </Box>\n      )}\n      <span>\n        {pipeline}\n        {snapshotId && ' @ '}\n        {snapshotId && (\n          <PipelineSnapshotLink snapshotId={snapshotId} pipelineName={pipelineName} size={size} />\n        )}\n      </span>\n    </Box>\n  );\n};\n","import {gql} from '@apollo/client';\nimport {\n  Box,\n  CursorHistoryControls,\n  NonIdealState,\n  Page,\n  Tag,\n  TokenizingFieldValue,\n  tokenToString,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {useParams} from 'react-router-dom';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {\n  FIFTEEN_SECONDS,\n  QueryRefreshCountdown,\n  useQueryRefreshAtInterval,\n} from '../app/QueryRefresh';\nimport {useTrackPageView} from '../app/analytics';\nimport {RunTable, RUN_TABLE_RUN_FRAGMENT} from '../runs/RunTable';\nimport {DagsterTag} from '../runs/RunTag';\nimport {RunsQueryRefetchContext} from '../runs/RunUtils';\nimport {\n  RunFilterTokenType,\n  RunsFilterInput,\n  runsFilterForSearchTokens,\n  useQueryPersistedRunFilters,\n  RunFilterToken,\n} from '../runs/RunsFilterInput';\nimport {useCursorPaginatedQuery} from '../runs/useCursorPaginatedQuery';\nimport {Loading} from '../ui/Loading';\nimport {StickyTableContainer} from '../ui/StickyTableContainer';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {RepoAddress} from '../workspace/types';\n\nimport {explorerPathFromString} from './PipelinePathUtils';\nimport {PipelineRunsRootQuery, PipelineRunsRootQueryVariables} from './types/PipelineRunsRootQuery';\nimport {useJobTitle} from './useJobTitle';\n\nconst PAGE_SIZE = 25;\nconst ENABLED_FILTERS: RunFilterTokenType[] = ['status', 'tag'];\n\ninterface Props {\n  repoAddress?: RepoAddress;\n}\n\nexport const PipelineRunsRoot: React.FC<Props> = (props) => {\n  useTrackPageView();\n\n  const {pipelinePath} = useParams<{pipelinePath: string}>();\n  const {repoAddress = null} = props;\n  const explorerPath = explorerPathFromString(pipelinePath);\n  const {pipelineName, snapshotId} = explorerPath;\n\n  const repo = useRepository(repoAddress);\n  const isJob = isThisThingAJob(repo, pipelineName);\n\n  useJobTitle(explorerPath, isJob);\n\n  const [filterTokens, setFilterTokens] = useQueryPersistedRunFilters(ENABLED_FILTERS);\n  const permanentTokens = React.useMemo(() => {\n    return [\n      isJob ? {token: 'job', value: pipelineName} : {token: 'pipeline', value: pipelineName},\n      snapshotId ? {token: 'snapshotId', value: snapshotId} : null,\n    ].filter(Boolean) as TokenizingFieldValue[];\n  }, [isJob, pipelineName, snapshotId]);\n\n  const repoToken = {\n    token: 'tag',\n    value: `${DagsterTag.RepositoryLabelTag}=${repoAddress?.name}@${repoAddress?.location}`,\n  };\n  const allTokens = [...filterTokens, ...permanentTokens, repoToken];\n\n  const {queryResult, paginationProps} = useCursorPaginatedQuery<\n    PipelineRunsRootQuery,\n    PipelineRunsRootQueryVariables\n  >({\n    query: PIPELINE_RUNS_ROOT_QUERY,\n    pageSize: PAGE_SIZE,\n    variables: {\n      filter: {...runsFilterForSearchTokens(allTokens), pipelineName, snapshotId},\n    },\n    nextCursorForResult: (runs) => {\n      if (runs.pipelineRunsOrError.__typename !== 'Runs') {\n        return undefined;\n      }\n      return runs.pipelineRunsOrError.results[PAGE_SIZE - 1]?.runId;\n    },\n    getResultArray: (data) => {\n      if (!data || data.pipelineRunsOrError.__typename !== 'Runs') {\n        return [];\n      }\n      return data.pipelineRunsOrError.results;\n    },\n  });\n\n  const onAddTag = React.useCallback(\n    (token: RunFilterToken) => {\n      const tokenAsString = tokenToString(token);\n      if (!filterTokens.some((token) => tokenToString(token) === tokenAsString)) {\n        setFilterTokens([...filterTokens, token]);\n      }\n    },\n    [filterTokens, setFilterTokens],\n  );\n\n  const refreshState = useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);\n\n  return (\n    <RunsQueryRefetchContext.Provider value={{refetch: queryResult.refetch}}>\n      <Page>\n        <Loading queryResult={queryResult} allowStaleData={true}>\n          {({pipelineRunsOrError}) => {\n            if (pipelineRunsOrError.__typename !== 'Runs') {\n              return (\n                <Box padding={{vertical: 64}}>\n                  <NonIdealState\n                    icon=\"error\"\n                    title=\"Query Error\"\n                    description={pipelineRunsOrError.message}\n                  />\n                </Box>\n              );\n            }\n            const runs = pipelineRunsOrError.results;\n            const displayed = runs.slice(0, PAGE_SIZE);\n            const {hasNextCursor, hasPrevCursor} = paginationProps;\n            return (\n              <>\n                <Box\n                  flex={{alignItems: 'flex-start', justifyContent: 'space-between'}}\n                  padding={{top: 8, horizontal: 24}}\n                >\n                  <Box flex={{direction: 'row', gap: 8}}>\n                    {permanentTokens.map(({token, value}) => (\n                      <Tag key={token}>{`${token}:${value}`}</Tag>\n                    ))}\n                  </Box>\n                  <QueryRefreshCountdown refreshState={refreshState} />\n                </Box>\n                <StickyTableContainer $top={0}>\n                  <RunTable\n                    runs={displayed}\n                    onAddTag={onAddTag}\n                    actionBarComponents={\n                      <RunsFilterInput\n                        enabledFilters={ENABLED_FILTERS}\n                        tokens={filterTokens}\n                        onChange={setFilterTokens}\n                        loading={queryResult.loading}\n                      />\n                    }\n                  />\n                </StickyTableContainer>\n                {hasNextCursor || hasPrevCursor ? (\n                  <div style={{marginTop: '20px'}}>\n                    <CursorHistoryControls {...paginationProps} />\n                  </div>\n                ) : null}\n              </>\n            );\n          }}\n        </Loading>\n      </Page>\n    </RunsQueryRefetchContext.Provider>\n  );\n};\n\nconst PIPELINE_RUNS_ROOT_QUERY = gql`\n  query PipelineRunsRootQuery($limit: Int, $cursor: String, $filter: RunsFilter!) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${RUN_TABLE_RUN_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","// eslint-disable-next-line no-restricted-imports\nimport {Collapse} from '@blueprintjs/core';\nimport {Colors, Icon, FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {useStateWithStorage} from '../hooks/useStateWithStorage';\n\ninterface ISidebarSectionProps {\n  title: string;\n  collapsedByDefault?: boolean;\n}\n\nexport const SidebarSection: React.FC<ISidebarSectionProps> = (props) => {\n  const {title, collapsedByDefault, children} = props;\n  const [open, setOpen] = useStateWithStorage<boolean>(`sidebar-${title}`, (storedValue) =>\n    storedValue === true || storedValue === false ? storedValue : !collapsedByDefault,\n  );\n\n  const onToggle = React.useCallback(() => {\n    setOpen((o) => !o);\n  }, [setOpen]);\n\n  return (\n    <>\n      <CollapsingHeaderBar onClick={onToggle}>\n        {title}\n        <Icon\n          size={24}\n          name=\"arrow_drop_down\"\n          style={{transform: open ? 'rotate(0)' : 'rotate(-90deg)'}}\n        />\n      </CollapsingHeaderBar>\n      <Collapse isOpen={open}>\n        <div>{children}</div>\n      </Collapse>\n    </>\n  );\n};\n\nexport const SidebarTitle = styled.h3`\n  font-family: ${FontFamily.monospace};\n  font-size: 16px;\n  margin: 0 0 12px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  :first-child:last-child {\n    margin-bottom: 0;\n  }\n`;\n\nexport const SectionHeader = styled.h4`\n  font-family: ${FontFamily.monospace};\n  font-size: 16px;\n  margin: 2px 0 0 0;\n`;\n\nexport const SectionSmallHeader = styled.h4`\n  font-family: ${FontFamily.monospace};\n  font-size: 14px;\n  font-weight: 500;\n  margin: 2px 0;\n`;\n\nexport const SidebarSubhead = styled.div`\n  color: ${Colors.Gray400};\n  font-size: 0.7rem;\n`;\n\nexport const SectionItemContainer = styled.div`\n  border-bottom: 1px solid ${Colors.KeylineGray};\n  margin-bottom: 12px;\n  padding-bottom: 12px;\n  font-size: 0.8rem;\n  &:last-child {\n    border-bottom: none;\n    margin-bottom: 0;\n    padding-bottom: 0;\n  }\n`;\n\nconst CollapsingHeaderBar = styled.div`\n  height: 32px;\n  padding-left: 24px;\n  padding-right: 8px;\n  background: ${Colors.White};\n  border-top: 1px solid ${Colors.KeylineGray};\n  border-bottom: 1px solid ${Colors.KeylineGray};\n  color: ${Colors.Gray900};\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 12px;\n  font-weight: 700;\n  user-select: none;\n`;\n","import {gql} from '@apollo/client';\nimport {Colors, ConfigTypeSchema, Icon, IconWrapper, Box} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {CONFIG_TYPE_SCHEMA_FRAGMENT} from '../typeexplorer/ConfigTypeSchema';\n\nimport {Description} from './Description';\nimport {SectionHeader, SectionItemContainer} from './SidebarComponents';\nimport {SidebarResourcesSectionFragment} from './types/SidebarResourcesSectionFragment';\n\nconst NO_DESCRIPTION = '';\n\nexport const SidebarResourcesSection: React.FC<{\n  mode: SidebarResourcesSectionFragment;\n  showModeName?: boolean;\n}> = ({mode, showModeName}) => {\n  return (\n    <SectionItemContainer key={mode.name}>\n      {showModeName && (\n        <Box padding={{bottom: 16}}>\n          <SectionHeader>{mode.name}</SectionHeader>\n          <Description description={mode.description || NO_DESCRIPTION} />\n        </Box>\n      )}\n      <Box flex={{direction: 'column', gap: 16}}>\n        {[...mode.resources, ...mode.loggers].map((resource) => (\n          <ContextResourceContainer key={resource.name}>\n            <Icon name=\"resource\" color={Colors.Gray700} />\n            <div>\n              <ContextResourceHeader>{resource.name}</ContextResourceHeader>\n              <Description description={resource.description || NO_DESCRIPTION} />\n              {resource.configField && (\n                <ConfigTypeSchema\n                  type={resource.configField.configType}\n                  typesInScope={resource.configField.configType.recursiveConfigTypes}\n                />\n              )}\n            </div>\n          </ContextResourceContainer>\n        ))}\n      </Box>\n    </SectionItemContainer>\n  );\n};\n\nexport const SIDEBAR_RESOURCES_SECTION_FRAGMENT = gql`\n  fragment SidebarResourcesSectionFragment on Mode {\n    id\n    name\n    description\n    resources {\n      name\n      description\n      configField {\n        configType {\n          ...ConfigTypeSchemaFragment\n          recursiveConfigTypes {\n            ...ConfigTypeSchemaFragment\n          }\n        }\n      }\n    }\n    loggers {\n      name\n      description\n      configField {\n        configType {\n          ...ConfigTypeSchemaFragment\n          recursiveConfigTypes {\n            ...ConfigTypeSchemaFragment\n          }\n        }\n      }\n    }\n  }\n\n  ${CONFIG_TYPE_SCHEMA_FRAGMENT}\n`;\n\nconst ContextResourceHeader = styled(SectionHeader)`\n  font-size: 16px;\n  margin: 4px 0;\n`;\n\nconst ContextResourceContainer = styled.div`\n  display: flex;\n  align-items: flex-start;\n\n  & h4 {\n    margin-top: -2px;\n  }\n  & ${IconWrapper} {\n    margin-right: 8px;\n  }\n`;\n","import {gql} from '@apollo/client';\nimport {Box, MetadataTable} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {breakOnUnderscores} from '../app/Util';\nimport {MetadataEntry, METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {useRepositoryOptions, findRepositoryAmongOptions} from '../workspace/WorkspaceContext';\nimport {repoContainsPipeline} from '../workspace/findRepoContainingPipeline';\nimport {RepoAddress} from '../workspace/types';\n\nimport {Description} from './Description';\nimport {SidebarSubhead, SidebarTitle, SidebarSection} from './SidebarComponents';\nimport {\n  SidebarResourcesSection,\n  SIDEBAR_RESOURCES_SECTION_FRAGMENT,\n} from './SidebarResourcesSection';\nimport {SidebarRootContainerFragment} from './types/SidebarRootContainerFragment';\n\nexport const SidebarContainerOverview: React.FC<{\n  container: SidebarRootContainerFragment;\n  repoAddress?: RepoAddress;\n}> = ({container, repoAddress}) => {\n  const {options} = useRepositoryOptions();\n\n  // Determine if the pipeline or job snapshot is tied to a legacy pipeline. This is annoying\n  // because snapshots only have a pipeline name + snapshotId, not a repository, but if a repo\n  // is passed in we want to use that one.\n  let isLegacy = false;\n  let isPastSnapshot = false;\n\n  if (container.__typename === 'PipelineSnapshot') {\n    const {pipelineSnapshotId, parentSnapshotId} = container;\n\n    const repo = repoAddress\n      ? findRepositoryAmongOptions(options, repoAddress)\n      : options.find((repo) => repoContainsPipeline(repo, container.name));\n    const match = repo && repoContainsPipeline(repo, container.name);\n\n    isLegacy = match ? !match.isJob : false;\n    isPastSnapshot =\n      match?.pipelineSnapshotId !== pipelineSnapshotId &&\n      match?.pipelineSnapshotId !== parentSnapshotId;\n  }\n\n  return (\n    <div>\n      <Box padding={{vertical: 16, horizontal: 24}}>\n        <SidebarSubhead>\n          {container.__typename === 'Graph' ? 'Graph' : isLegacy ? 'Pipeline' : 'Job'}\n          {isPastSnapshot ? ' Snapshot' : ''}\n        </SidebarSubhead>\n        <SidebarTitle>{breakOnUnderscores(container.name)}</SidebarTitle>\n      </Box>\n\n      <SidebarSection title=\"Description\">\n        <Box padding={{vertical: 16, horizontal: 24}}>\n          <Description description={container.description || 'No description provided'} />\n        </Box>\n      </SidebarSection>\n\n      {container.__typename === 'PipelineSnapshot' && (\n        <SidebarSection title={isLegacy ? 'Modes' : 'Resources'} collapsedByDefault={true}>\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            {container.modes.map((mode) => (\n              <SidebarResourcesSection key={mode.name} mode={mode} showModeName={isLegacy} />\n            ))}\n          </Box>\n        </SidebarSection>\n      )}\n\n      {container.__typename === 'PipelineSnapshot' && (\n        <SidebarSection title=\"Metadata\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <MetadataTable\n              rows={container.metadataEntries.map((entry) => ({\n                key: entry.label,\n                value: <MetadataEntry entry={entry} />,\n              }))}\n            />\n          </Box>\n        </SidebarSection>\n      )}\n    </div>\n  );\n};\n\nexport const SIDEBAR_ROOT_CONTAINER_FRAGMENT = gql`\n  fragment SidebarRootContainerFragment on SolidContainer {\n    id\n    name\n    description\n    modes {\n      id\n      ...SidebarResourcesSectionFragment\n    }\n    ... on PipelineSnapshot {\n      pipelineSnapshotId\n      parentSnapshotId\n      metadataEntries {\n        ...MetadataEntryFragment\n      }\n    }\n  }\n  ${METADATA_ENTRY_FRAGMENT}\n  ${SIDEBAR_RESOURCES_SECTION_FRAGMENT}\n`;\n","import {gql} from '@apollo/client';\nimport {Box, Colors, ConfigTypeSchema, FontFamily, Icon} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {breakOnUnderscores} from '../app/Util';\nimport {displayNameForAssetKey, isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';\nimport {OpTypeSignature, OP_TYPE_SIGNATURE_FRAGMENT} from '../ops/OpTypeSignature';\nimport {pluginForMetadata} from '../plugins';\nimport {CONFIG_TYPE_SCHEMA_FRAGMENT} from '../typeexplorer/ConfigTypeSchema';\nimport {DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT, TypeWithTooltip} from '../typeexplorer/TypeWithTooltip';\nimport {RepoAddress} from '../workspace/types';\n\nimport {Description} from './Description';\nimport {\n  SectionItemContainer,\n  SectionSmallHeader,\n  SidebarSection,\n  SidebarSubhead,\n  SidebarTitle,\n} from './SidebarComponents';\nimport {\n  Invocation,\n  ResourceContainer,\n  ResourceHeader,\n  ShowAllButton,\n  SidebarOpInvocationInfo,\n  OpEdges,\n  OpMappingTable,\n  TypeWrapper,\n} from './SidebarOpHelpers';\nimport {SidebarOpDefinitionFragment} from './types/SidebarOpDefinitionFragment';\n\ninterface SidebarOpDefinitionProps {\n  definition: SidebarOpDefinitionFragment;\n  getInvocations?: (definitionName: string) => {handleID: string}[];\n  showingSubgraph: boolean;\n  onClickInvocation: (arg: SidebarOpInvocationInfo) => void;\n  repoAddress?: RepoAddress;\n}\n\nconst DEFAULT_INVOCATIONS_SHOWN = 20;\n\nexport const SidebarOpDefinition: React.FC<SidebarOpDefinitionProps> = (props) => {\n  const {definition, getInvocations, showingSubgraph, onClickInvocation, repoAddress} = props;\n  const Plugin = pluginForMetadata(definition.metadata);\n  const isComposite = definition.__typename === 'CompositeSolidDefinition';\n  const configField = definition.__typename === 'SolidDefinition' ? definition.configField : null;\n\n  const inputMappings: OpMappingTable = {};\n  const outputMappings: OpMappingTable = {};\n\n  if (showingSubgraph && definition.__typename === 'CompositeSolidDefinition') {\n    definition.inputMappings.forEach(\n      (m) =>\n        (inputMappings[m.definition.name] = [\n          ...(inputMappings[m.definition.name] || []),\n          m.mappedInput,\n        ]),\n    );\n    definition.outputMappings.forEach(\n      (m) =>\n        (outputMappings[m.definition.name] = [\n          ...(outputMappings[m.definition.name] || []),\n          m.mappedOutput,\n        ]),\n    );\n  }\n\n  let requiredResources = null;\n  if (definition.__typename === 'SolidDefinition') {\n    requiredResources = definition.requiredResources;\n  }\n\n  return (\n    <div>\n      <SidebarSection title=\"Definition\">\n        <Box padding={{vertical: 16, horizontal: 24}}>\n          <SidebarSubhead>{isComposite ? 'Graph' : 'Op'}</SidebarSubhead>\n          <SidebarTitle>{breakOnUnderscores(definition.name)}</SidebarTitle>\n          <OpTypeSignature definition={definition} />\n        </Box>\n      </SidebarSection>\n      {definition.description && (\n        <SidebarSection title=\"Description\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <Description description={definition.description} />\n          </Box>\n        </SidebarSection>\n      )}\n      {definition.metadata && Plugin && Plugin.SidebarComponent && (\n        <SidebarSection title=\"Metadata\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <Plugin.SidebarComponent definition={definition} repoAddress={repoAddress} />\n          </Box>\n        </SidebarSection>\n      )}\n      {configField && (\n        <SidebarSection title=\"Config\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <ConfigTypeSchema\n              type={configField.configType}\n              typesInScope={configField.configType.recursiveConfigTypes}\n            />\n          </Box>\n        </SidebarSection>\n      )}\n      {requiredResources && (\n        <SidebarSection title=\"Required Resources\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            {[...requiredResources].sort().map((requirement) => (\n              <ResourceContainer key={requirement.resourceKey}>\n                <Icon name=\"resource\" color={Colors.Gray700} />\n                <ResourceHeader>{requirement.resourceKey}</ResourceHeader>\n              </ResourceContainer>\n            ))}\n          </Box>\n        </SidebarSection>\n      )}\n      <SidebarSection title=\"Inputs\">\n        <Box padding={{vertical: 16, horizontal: 24}}>\n          {definition.inputDefinitions.map((inputDef, idx) => (\n            <SectionItemContainer key={idx}>\n              <SectionSmallHeader>{breakOnUnderscores(inputDef.name)}</SectionSmallHeader>\n              <TypeWrapper>\n                <TypeWithTooltip type={inputDef.type} />\n              </TypeWrapper>\n              <Description description={inputDef.description} />\n              <OpEdges title=\"Mapped to:\" items={inputMappings[inputDef.name]} />\n            </SectionItemContainer>\n          ))}\n        </Box>\n      </SidebarSection>\n      <SidebarSection title=\"Outputs\">\n        <Box padding={{vertical: 16, horizontal: 24}}>\n          {definition.outputDefinitions.map((outputDef, idx) => (\n            <SectionItemContainer key={idx}>\n              <SectionSmallHeader>\n                {breakOnUnderscores(outputDef.name)}\n                {outputDef.isDynamic && <span title=\"DynamicOutput\">[*]</span>}\n              </SectionSmallHeader>\n              <TypeWrapper>\n                <TypeWithTooltip type={outputDef.type} />\n              </TypeWrapper>\n              <OpEdges title=\"Mapped from:\" items={outputMappings[outputDef.name]} />\n              <Description description={outputDef.description} />\n            </SectionItemContainer>\n          ))}\n        </Box>\n      </SidebarSection>\n      {definition.assetNodes.length > 0 && (\n        <SidebarSection title=\"Yielded Assets\">\n          {definition.assetNodes.map((node) => (\n            <AssetNodeListItem key={node.id} to={assetDetailsPathForKey(node.assetKey)}>\n              <Icon name=\"asset\" /> {displayNameForAssetKey(node.assetKey)}\n            </AssetNodeListItem>\n          ))}\n        </SidebarSection>\n      )}\n      {getInvocations && (\n        <SidebarSection title=\"All Invocations\">\n          <InvocationList\n            invocations={getInvocations(definition.name)}\n            onClickInvocation={onClickInvocation}\n          />\n        </SidebarSection>\n      )}\n    </div>\n  );\n};\n\nexport const SIDEBAR_OP_DEFINITION_FRAGMENT = gql`\n  fragment SidebarOpDefinitionFragment on ISolidDefinition {\n    ...OpTypeSignatureFragment\n    __typename\n    name\n    description\n    metadata {\n      key\n      value\n    }\n    assetNodes {\n      id\n      assetKey {\n        path\n      }\n    }\n    outputDefinitions {\n      name\n      description\n      isDynamic\n      type {\n        ...DagsterTypeWithTooltipFragment\n      }\n    }\n    inputDefinitions {\n      name\n      description\n      type {\n        ...DagsterTypeWithTooltipFragment\n      }\n    }\n    ... on SolidDefinition {\n      requiredResources {\n        resourceKey\n      }\n      configField {\n        configType {\n          ...ConfigTypeSchemaFragment\n          recursiveConfigTypes {\n            ...ConfigTypeSchemaFragment\n          }\n        }\n      }\n    }\n    ... on CompositeSolidDefinition {\n      id\n      inputMappings {\n        definition {\n          name\n        }\n        mappedInput {\n          definition {\n            name\n          }\n          solid {\n            name\n          }\n        }\n      }\n      outputMappings {\n        definition {\n          name\n        }\n        mappedOutput {\n          definition {\n            name\n          }\n          solid {\n            name\n          }\n        }\n      }\n    }\n  }\n\n  ${DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT}\n  ${OP_TYPE_SIGNATURE_FRAGMENT}\n  ${CONFIG_TYPE_SCHEMA_FRAGMENT}\n`;\n\nconst InvocationList: React.FC<{\n  invocations: SidebarOpInvocationInfo[];\n  onClickInvocation: (arg: SidebarOpInvocationInfo) => void;\n}> = ({invocations, onClickInvocation}) => {\n  const [showAll, setShowAll] = React.useState<boolean>(false);\n  const visible = invocations.filter((i) => !isHiddenAssetGroupJob(i.pipelineName || ''));\n  const clipped = showAll ? visible : visible.slice(0, DEFAULT_INVOCATIONS_SHOWN);\n\n  return (\n    <>\n      {clipped.map((invocation, idx) => (\n        <Invocation\n          key={idx}\n          invocation={invocation}\n          onClick={() => onClickInvocation(invocation)}\n        />\n      ))}\n      {clipped.length < visible.length && (\n        <ShowAllButton onClick={() => setShowAll(true)}>\n          {`Show ${invocations.length - clipped.length} More Invocations`}\n        </ShowAllButton>\n      )}\n    </>\n  );\n};\n\nconst AssetNodeListItem = styled(Link)`\n  user-select: none;\n  padding: 12px 24px;\n  cursor: pointer;\n  border-bottom: 1px solid ${Colors.KeylineGray};\n  display: flex;\n  gap: 6px;\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  &:hover {\n    background: ${Colors.Gray50};\n  }\n\n  font-family: ${FontFamily.monospace};\n`;\n","// eslint-disable-next-line no-restricted-imports\nimport {Text} from '@blueprintjs/core';\nimport {Colors, Group, Icon, IconWrapper, Code, FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {titleOfIO} from '../app/titleOfIO';\nimport {OpColumn, OpColumnContainer} from '../runs/LogsRowComponents';\n\nimport {SectionHeader} from './SidebarComponents';\n\ntype OpLinkInfo = {\n  solid: {name: string};\n  definition: {name: string};\n};\n\nexport interface SidebarOpInvocationInfo {\n  handleID: string;\n  pipelineName?: string;\n}\n\nexport type OpMappingTable = {\n  [key: string]: OpLinkInfo[];\n};\n\nexport const ShowAllButton = styled.button`\n  background: transparent;\n  border: none;\n  color: ${Colors.Blue500};\n  text-decoration: underline;\n  padding-top: 10px;\n  font-size: 0.9rem;\n`;\n\nexport const TypeWrapper = styled.div`\n  margin-bottom: 10px;\n`;\n\nconst OpLink = (props: OpLinkInfo) => (\n  <Link to={`./${props.solid.name}`}>\n    <Code>{titleOfIO(props)}</Code>\n  </Link>\n);\n\nexport const OpEdges = (props: {title: string; items: OpLinkInfo[]}) =>\n  props.items && props.items.length ? (\n    <Text>\n      {props.title}\n      {props.items.map((i, idx) => (\n        <OpLink key={idx} {...i} />\n      ))}\n    </Text>\n  ) : null;\n\nexport const Invocation = (props: {invocation: SidebarOpInvocationInfo; onClick: () => void}) => {\n  const {handleID, pipelineName} = props.invocation;\n  const handlePath = handleID.split('.');\n  return (\n    <InvocationContainer onClick={props.onClick}>\n      {pipelineName && <div style={{color: Colors.Blue700}}>{pipelineName}</div>}\n      <OpColumn stepKey={handlePath.join('.')} />\n    </InvocationContainer>\n  );\n};\n\nexport const DependencyRow = ({\n  from,\n  to,\n  isDynamic,\n}: {\n  from: OpLinkInfo | string;\n  to: OpLinkInfo | string;\n  isDynamic: boolean | null;\n}) => {\n  return (\n    <tr>\n      <Cell>{typeof from === 'string' ? <Code>{from}</Code> : <OpLink {...from} />}</Cell>\n      <td style={{whiteSpace: 'nowrap', textAlign: 'right'}}>\n        <Group direction=\"row\" spacing={2} alignItems=\"center\">\n          {isDynamic && <Icon name=\"op_dynamic\" color={Colors.Gray700} />}\n          <Icon name=\"arrow_forward\" color={Colors.Gray700} />\n        </Group>\n      </td>\n      <Cell>{typeof to === 'string' ? <Code>{to}</Code> : <OpLink {...to} />}</Cell>\n    </tr>\n  );\n};\n\ninterface DependencyHeaderRowProps {\n  label: string;\n  style?: React.CSSProperties;\n}\n\nexport const DependencyHeaderRow: React.FC<DependencyHeaderRowProps> = ({label, ...rest}) => (\n  <tr>\n    <DependencyHeaderCell {...rest}>{label}</DependencyHeaderCell>\n  </tr>\n);\n\nexport const ResourceHeader = styled(SectionHeader)`\n  font-size: 14px;\n`;\n\nconst Cell = styled.td`\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  max-width: 0;\n  width: 48%;\n`;\n\nexport const ResourceContainer = styled.div`\n  display: flex;\n  align-items: flex-start;\n  & h4 {\n    margin-top: 0;\n  }\n  & ${IconWrapper} {\n    margin-right: 8px;\n  }\n`;\n\nexport const DependencyTable = styled.table`\n  width: 100%;\n`;\n\nconst DependencyHeaderCell = styled.td`\n  font-size: 0.7rem;\n  color: ${Colors.Gray400};\n`;\n\nconst InvocationContainer = styled.div`\n  user-select: none;\n  padding: 12px 24px;\n  cursor: pointer;\n  border-bottom: 1px solid ${Colors.KeylineGray};\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  &:hover {\n    background: ${Colors.Gray50};\n  }\n\n  font-family: ${FontFamily.monospace};\n\n  ${OpColumnContainer} {\n    margin-left: -12px;\n  }\n`;\n","import * as React from 'react';\n\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\n\nimport {ExplorerPath} from './PipelinePathUtils';\n\nexport const useJobTitle = (explorerPath: ExplorerPath, isJob: boolean) => {\n  const {pipelineName} = explorerPath;\n\n  const value = React.useMemo(() => {\n    if (isJob) {\n      return `Job: ${pipelineName}`;\n    }\n    return `Pipeline: ${pipelineName}`;\n  }, [isJob, pipelineName]);\n\n  useDocumentTitle(value);\n};\n","import {Button, DialogBody, DialogFooter, Dialog, Icon} from '@dagster-io/ui';\nimport startCase from 'lodash/startCase';\nimport * as React from 'react';\n\nimport {IPluginSidebarProps} from '../plugins';\n\nexport const SidebarComponent: React.FC<IPluginSidebarProps> = (props) => {\n  const [open, setOpen] = React.useState(false);\n\n  React.useEffect(() => {\n    const onOpen = () => setOpen(true);\n    document.addEventListener('show-kind-info', onOpen);\n    return () => document.removeEventListener('show-kind-info', onOpen);\n  }, []);\n\n  const metadata = props.definition.metadata\n    .filter((m) => m.key !== 'kind')\n    .sort((a, b) => a.key.localeCompare(b.key));\n\n  if (metadata.length === 0) {\n    return <span />;\n  }\n\n  return (\n    <div>\n      <Button icon={<Icon name=\"content_copy\" />} onClick={() => setOpen(true)}>\n        View metadata\n      </Button>\n      <Dialog\n        title={`Metadata: ${props.definition.name}`}\n        isOpen={open}\n        onClose={() => setOpen(false)}\n      >\n        <DialogBody>\n          <div\n            style={{\n              maxHeight: 400,\n              overflow: 'scroll',\n            }}\n          >\n            <table className=\"bp3-html-table bp3-html-table-striped\" style={{width: '100%'}}>\n              <thead>\n                <tr>\n                  <th>Key</th>\n                  <th>Value</th>\n                </tr>\n              </thead>\n              <tbody>\n                {metadata.map(({key, value}) => (\n                  <tr key={key}>\n                    <td>{startCase(key)}</td>\n                    <td>\n                      <code style={{whiteSpace: 'pre-wrap'}}>{value}</code>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </DialogBody>\n        <DialogFooter>\n          <Button onClick={() => setOpen(false)}>Close</Button>\n        </DialogFooter>\n      </Dialog>\n    </div>\n  );\n};\n","import {Button, DialogBody, DialogFooter, Dialog, Icon} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {AppContext} from '../app/AppContext';\nimport {IPluginSidebarProps} from '../plugins';\n\nexport const SidebarComponent: React.FC<IPluginSidebarProps> = (props) => {\n  const {rootServerURI} = React.useContext(AppContext);\n  const [open, setOpen] = React.useState(false);\n\n  React.useEffect(() => {\n    const onOpen = () => setOpen(true);\n    document.addEventListener('show-kind-info', onOpen);\n    return () => document.removeEventListener('show-kind-info', onOpen);\n  }, []);\n\n  const metadata = props.definition.metadata;\n  const notebookPath = metadata.find((m) => m.key === 'notebook_path');\n  const repoLocName = props.repoAddress?.location;\n\n  if (!notebookPath) {\n    return <span />;\n  }\n\n  return (\n    <div>\n      <Button icon={<Icon name=\"content_copy\" />} onClick={() => setOpen(true)}>\n        View Notebook\n      </Button>\n      <Dialog\n        icon=\"info\"\n        onClose={() => setOpen(false)}\n        style={{width: '80vw', maxWidth: 900}}\n        title={notebookPath.value.split('/').pop()}\n        usePortal={true}\n        isOpen={open}\n      >\n        <DialogBody>\n          <iframe\n            title={notebookPath.value}\n            src={`${rootServerURI}/dagit/notebook?path=${encodeURIComponent(\n              notebookPath.value,\n            )}&repoLocName=${repoLocName}`}\n            sandbox=\"\"\n            style={{border: 0, background: 'white'}}\n            seamless={true}\n            width=\"100%\"\n            height={500}\n          />\n        </DialogBody>\n        <DialogFooter>\n          <Button onClick={() => setOpen(false)}>Close</Button>\n        </DialogFooter>\n      </Dialog>\n    </div>\n  );\n};\n","import {Button, DialogFooter, Dialog, Icon, StyledReadOnlyCodeMirror} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {IPluginSidebarProps} from '../plugins';\n\nexport const SidebarComponent: React.FC<IPluginSidebarProps> = (props) => {\n  const [open, setOpen] = React.useState(false);\n\n  React.useEffect(() => {\n    const onClose = () => setOpen(true);\n    document.addEventListener('show-kind-info', onClose);\n    return () => document.removeEventListener('show-kind-info', onClose);\n  }, []);\n\n  const metadata = props.definition.metadata;\n  const sql = metadata.find((m) => m.key === 'sql');\n  if (!sql) {\n    return <span />;\n  }\n\n  return (\n    <div>\n      <Button icon={<Icon name=\"content_copy\" />} onClick={() => setOpen(true)}>\n        View SQL\n      </Button>\n      <Dialog\n        icon=\"info\"\n        onClose={() => setOpen(false)}\n        style={{width: '80vw', maxWidth: 900}}\n        title={`SQL: ${props.definition.name}`}\n        isOpen={open}\n      >\n        <StyledReadOnlyCodeMirror options={{lineNumbers: true, mode: 'sql'}} value={sql.value} />\n        <DialogFooter topBorder>\n          <Button intent=\"primary\" onClick={() => setOpen(false)}>\n            Close\n          </Button>\n        </DialogFooter>\n      </Dialog>\n    </div>\n  );\n};\n","import * as generic from '../plugins/generic';\nimport * as ipynb from '../plugins/ipynb';\nimport * as sql from '../plugins/sql';\nimport {RepoAddress} from '../workspace/types';\n\nconst plugins = {\n  sql,\n  ipynb,\n  snowflake: sql,\n};\n\nexport interface IPluginSidebarProps {\n  definition: {\n    name: string;\n    metadata: {\n      key: string;\n      value: string;\n    }[];\n  };\n  repoAddress?: RepoAddress;\n}\n\ninterface IPluginInterface {\n  SidebarComponent: React.ComponentClass<IPluginSidebarProps> | React.SFC<IPluginSidebarProps>;\n}\n\nexport function pluginForMetadata(\n  metadata: {key: string; value: string}[],\n): IPluginInterface | null {\n  const kindMetadata = metadata.find((m) => m.key === 'kind');\n  if (!kindMetadata) {\n    return null;\n  }\n  return plugins[kindMetadata.value] || generic;\n}\n","export enum LogLevel {\n  DEBUG = 'DEBUG',\n  INFO = 'INFO',\n  WARNING = 'WARNING',\n  ERROR = 'ERROR',\n  CRITICAL = 'CRITICAL',\n  EVENT = 'EVENT', // structured events\n}\n\nexport const DefaultLogLevels = ['INFO', 'WARNING', 'ERROR', 'CRITICAL', 'EVENT'];\n","import {Colors, FontFamily, MetadataTable, Tooltip} from '@dagster-io/ui';\nimport qs from 'qs';\nimport * as React from 'react';\nimport {Link, useLocation} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {formatElapsedTimeWithMsec} from '../app/Util';\nimport {TimezoneContext} from '../app/time/TimezoneContext';\nimport {browserTimezone} from '../app/time/browserTimezone';\n\nimport {LogLevel} from './LogLevel';\nimport {ColumnWidthsContext} from './LogsScrollingTableHeader';\n\nconst bgcolorForLevel = (level: LogLevel) =>\n  ({\n    [LogLevel.DEBUG]: Colors.White,\n    [LogLevel.INFO]: Colors.White,\n    [LogLevel.EVENT]: Colors.White,\n    [LogLevel.WARNING]: Colors.Yellow50,\n    [LogLevel.ERROR]: Colors.Red50,\n    [LogLevel.CRITICAL]: Colors.Red50,\n  }[level]);\n\nexport const Row = styled.div<{level: LogLevel; highlighted: boolean}>`\n  font-size: 0.9em;\n  width: 100%;\n  height: 100%;\n  max-height: 17em;\n  word-break: break-word;\n  white-space: pre-wrap;\n  font-family: ${FontFamily.monospace};\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n  overflow: hidden;\n  border-top: 1px solid ${Colors.KeylineGray};\n  background: ${({highlighted, level}) => (highlighted ? '#ffe39f' : bgcolorForLevel(level))};\n  &:hover {\n    background: ${({highlighted}) => (highlighted ? '#ffe39f' : 'white')};\n  }\n  color: ${(props) =>\n    ({\n      [LogLevel.DEBUG]: Colors.Gray400,\n      [LogLevel.INFO]: Colors.Gray900,\n      [LogLevel.EVENT]: Colors.Gray900,\n      [LogLevel.WARNING]: Colors.Yellow700,\n      [LogLevel.ERROR]: Colors.Red500,\n      [LogLevel.CRITICAL]: Colors.Red500,\n    }[props.level])};\n`;\n\nexport const StructuredContent = styled.div`\n  background: rgba(255, 255, 255, 0.5);\n  color: ${Colors.Gray900};\n  box-sizing: border-box;\n  border-left: 1px solid ${Colors.KeylineGray};\n  word-break: break-word;\n  white-space: pre-wrap;\n  font-family: ${FontFamily.monospace};\n  flex: 1;\n  align-self: stretch;\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n`;\n\n// Step Key Column\n//\n// Renders the left column with the step key broken into hierarchical components.\n// Manually implements middle text truncation since we can count on monospace font\n// rendering being fairly consistent.\n//\nexport const OpColumn = (props: {stepKey: string | false | null}) => {\n  const widths = React.useContext(ColumnWidthsContext);\n  const parts = String(props.stepKey).split('.');\n  return (\n    <OpColumnContainer style={{width: widths.solid}}>\n      {props.stepKey\n        ? parts.map((p, idx) => (\n            <div\n              key={idx}\n              data-tooltip={p}\n              data-tooltip-style={OpColumnTooltipStyle}\n              style={{\n                marginLeft: Math.max(0, idx * 15 - 9),\n                fontWeight: idx === parts.length - 1 ? 600 : 300,\n              }}\n            >\n              {idx > 0 ? '' : ''}\n              {p.length > 30 - idx * 2\n                ? `${p.substr(0, 16 - idx * 2)}${p.substr(p.length - 14)}`\n                : p}\n            </div>\n          ))\n        : '-'}\n    </OpColumnContainer>\n  );\n};\n\nexport const OpColumnContainer = styled.div`\n  width: 250px;\n  flex-shrink: 0;\n  padding: 4px 12px;\n`;\n\nconst OpColumnTooltipStyle = JSON.stringify({\n  fontSize: '0.9em',\n  fontFamily: FontFamily.monospace,\n  color: Colors.Dark,\n  background: Colors.White,\n  border: `1px solid ${Colors.Gray100}`,\n  top: -8,\n  left: 1,\n});\n\n// Timestamp Column\n\nexport const TimestampColumn: React.FC<{\n  time: string | null;\n  runStartTime?: number;\n  stepStartTime?: number;\n}> = React.memo((props) => {\n  const {time, runStartTime, stepStartTime} = props;\n  const location = useLocation();\n  const widths = React.useContext(ColumnWidthsContext);\n  const [timezone] = React.useContext(TimezoneContext);\n  const canShowTooltip = typeof time === 'string' && typeof runStartTime === 'number';\n\n  const timeString = () => {\n    if (time) {\n      const timeNumber = Number(time);\n      const locale = navigator.language;\n      const main = new Date(timeNumber).toLocaleTimeString(locale, {\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit',\n        hourCycle: 'h23',\n        timeZone: timezone === 'Automatic' ? browserTimezone() : timezone,\n      });\n      const fractionalSec = (timeNumber % 1000) / 1000;\n      return `${main}${fractionalSec\n        .toLocaleString(locale, {\n          minimumFractionDigits: 3,\n          maximumFractionDigits: 3,\n        })\n        .slice(1)}`;\n    }\n    return '';\n  };\n\n  const href = `${location.pathname}?${qs.stringify({focusedTime: props.time})}`;\n  const runElapsedTime = formatElapsedTimeWithMsec(Number(time) - (runStartTime || 0));\n  const stepElapsedTime = formatElapsedTimeWithMsec(Number(time) - (stepStartTime || 0));\n\n  return (\n    <TimestampColumnContainer style={{width: widths.timestamp}}>\n      <Tooltip\n        canShow={canShowTooltip}\n        content={\n          <MetadataTable\n            spacing={0}\n            dark\n            rows={[\n              {\n                key: 'Since start of run',\n                value: (\n                  <span style={{fontFamily: FontFamily.monospace, fontSize: '13px'}}>\n                    {runElapsedTime}\n                  </span>\n                ),\n              },\n              stepStartTime\n                ? {\n                    key: 'Since start of step',\n                    value: (\n                      <span style={{fontFamily: FontFamily.monospace, fontSize: '13px'}}>\n                        {stepElapsedTime}\n                      </span>\n                    ),\n                  }\n                : null,\n            ]}\n          />\n        }\n        placement=\"left\"\n      >\n        <Link to={href}>{timeString()}</Link>\n      </Tooltip>\n    </TimestampColumnContainer>\n  );\n});\n\nconst TimestampColumnContainer = styled.div`\n  flex-shrink: 0;\n  padding: 4px 4px 4px 12px;\n\n  a:link,\n  a:visited,\n  a:hover,\n  a:active {\n    color: ${Colors.Gray400};\n  }\n\n  a:hover,\n  a:active {\n    text-decoration: underline;\n  }\n`;\n\nexport const EventTypeColumn: React.FC = (props) => {\n  const widths = React.useContext(ColumnWidthsContext);\n  return (\n    <EventTypeColumnContainer style={{width: widths.eventType}}>\n      {props.children}\n    </EventTypeColumnContainer>\n  );\n};\n\nconst EventTypeColumnContainer = styled.div`\n  flex-shrink: 0;\n  color: ${Colors.Gray400};\n  padding: 4px;\n`;\n","import {Colors} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\n\nconst OverflowFade = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  user-select: none;\n  pointer-events: none;\n  background: linear-gradient(to bottom, rgba(245, 248, 250, 0) 0%, rgba(245, 248, 250, 255) 100%);\n`;\n\nconst OverflowButtonContainer = styled.div`\n  position: absolute;\n  bottom: 6px;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n`;\n\nconst OverflowButton = styled.button`\n  border: 0;\n  cursor: pointer;\n  user-select: none;\n  font-size: 12px;\n  font-weight: 500;\n  background: rgba(100, 100, 100, 0.7);\n  border-radius: 4px;\n  line-height: 32px;\n  padding: 0 12px;\n  color: ${Colors.White};\n  &:hover {\n    background: rgba(100, 100, 100, 0.85);\n  }\n\n  &:focus,\n  &:active {\n    outline: none;\n  }\n\n  &:active {\n    background: rgba(0, 0, 0, 0.7);\n  }\n`;\n\nexport class CellTruncationProvider extends React.Component<\n  {\n    style: React.CSSProperties;\n    onExpand?: () => void;\n    forceExpandability?: boolean;\n  },\n  {isOverflowing: boolean}\n> {\n  state = {\n    isOverflowing: false,\n  };\n\n  private contentContainerRef: React.RefObject<HTMLDivElement> = React.createRef();\n\n  componentDidMount() {\n    this.detectOverflow();\n  }\n\n  componentDidUpdate() {\n    this.detectOverflow();\n  }\n\n  detectOverflow() {\n    const child =\n      this.contentContainerRef.current && this.contentContainerRef.current.firstElementChild;\n\n    if (!child) {\n      return;\n    }\n\n    const isOverflowing = child.scrollHeight > this.props.style.height!;\n    if (isOverflowing !== this.state.isOverflowing) {\n      this.setState({isOverflowing});\n    }\n  }\n\n  defaultExpand() {\n    const message =\n      this.contentContainerRef.current && this.contentContainerRef.current.textContent;\n    message &&\n      showCustomAlert({\n        body: <div style={{whiteSpace: 'pre-wrap'}}>{message}</div>,\n      });\n  }\n\n  onView = () => {\n    const {onExpand} = this.props;\n    onExpand ? onExpand() : this.defaultExpand();\n  };\n\n  render() {\n    const style = {...this.props.style, overflow: 'hidden'};\n\n    return (\n      <div style={style}>\n        <div ref={this.contentContainerRef}>{this.props.children}</div>\n        {(this.state.isOverflowing || this.props.forceExpandability) && (\n          <>\n            <OverflowFade />\n            <OverflowButtonContainer>\n              <OverflowButton onClick={this.onView}>View full message</OverflowButton>\n            </OverflowButtonContainer>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {Intent} from '@blueprintjs/core';\nimport {Box, Colors, Tag} from '@dagster-io/ui';\nimport qs from 'qs';\nimport * as React from 'react';\nimport {Link, useLocation} from 'react-router-dom';\n\nimport {assertUnreachable} from '../app/Util';\nimport {PythonErrorFragment} from '../app/types/PythonErrorFragment';\nimport {displayNameForAssetKey} from '../asset-graph/Utils';\nimport {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';\nimport {AssetKey} from '../assets/types';\nimport {\n  LogRowStructuredContentTable,\n  MetadataEntries,\n  MetadataEntryLink,\n} from '../metadata/MetadataEntry';\nimport {MetadataEntryFragment} from '../metadata/types/MetadataEntryFragment';\nimport {DagsterEventType, ErrorSource} from '../types/globalTypes';\n\nimport {EventTypeColumn} from './LogsRowComponents';\nimport {IRunMetadataDict} from './RunMetadataProvider';\nimport {eventTypeToDisplayType} from './getRunFilterProviders';\nimport {LogsRowStructuredFragment} from './types/LogsRowStructuredFragment';\n\ninterface IStructuredContentProps {\n  node: LogsRowStructuredFragment;\n  metadata: IRunMetadataDict;\n}\n\nexport const LogsRowStructuredContent: React.FC<IStructuredContentProps> = ({node, metadata}) => {\n  const location = useLocation();\n  const eventType = node.eventType as string;\n  switch (node.__typename) {\n    case 'ExecutionStepFailureEvent':\n      return (\n        <FailureContent\n          eventType={eventType}\n          error={node.error}\n          metadataEntries={node?.failureMetadata?.metadataEntries}\n          errorSource={node.errorSource}\n          message={node.error ? undefined : node.message}\n        />\n      );\n\n    case 'ExecutionStepUpForRetryEvent':\n      return <StepUpForRetryContent error={node.error} message={node.message} />;\n\n    case 'ExecutionStepStartEvent':\n      if (!node.stepKey || metadata.logCaptureSteps) {\n        return <DefaultContent message={node.message} eventType={eventType} />;\n      } else {\n        const currentQuery = qs.parse(location.search);\n        const updatedQuery = {\n          ...currentQuery,\n          logType: 'stdout',\n          logs: `query:${node.stepKey}`,\n          selection: node.stepKey,\n        };\n        const href = `${location.pathname}?${qs.stringify(updatedQuery)}`;\n        return (\n          <DefaultContent message={node.message} eventType={eventType}>\n            <LogRowStructuredContentTable\n              rows={[\n                {\n                  label: 'step_logs',\n                  item: (\n                    <Link to={href} style={{color: 'inherit'}}>\n                      View Raw Step Output\n                    </Link>\n                  ),\n                },\n              ]}\n            />\n          </DefaultContent>\n        );\n      }\n    case 'ExecutionStepSkippedEvent':\n      return (\n        <DefaultContent\n          message={node.message}\n          eventType={eventType}\n          eventColor=\"rgba(173, 185, 152, 0.3)\"\n        />\n      );\n\n    case 'ExecutionStepRestartEvent':\n      return <DefaultContent message={node.message} eventType={eventType} />;\n\n    case 'ExecutionStepSuccessEvent':\n      return <DefaultContent message={node.message} eventType={eventType} eventIntent=\"success\" />;\n    case 'ExecutionStepInputEvent':\n      return (\n        <DefaultContent\n          message={\n            node.message + (node.typeCheck.description ? ' ' + node.typeCheck.description : '')\n          }\n          eventType={eventType}\n          eventIntent={node.typeCheck.success ? 'success' : 'warning'}\n        >\n          <MetadataEntries entries={node.typeCheck.metadataEntries} />\n        </DefaultContent>\n      );\n    case 'ExecutionStepOutputEvent':\n      return (\n        <DefaultContent\n          message={\n            node.message + (node.typeCheck.description ? ' ' + node.typeCheck.description : '')\n          }\n          eventType={eventType}\n          eventIntent={node.typeCheck.success ? 'success' : 'warning'}\n        >\n          <>\n            <MetadataEntries entries={node.typeCheck.metadataEntries} />\n            <MetadataEntries entries={node.metadataEntries} />\n          </>\n        </DefaultContent>\n      );\n    case 'StepExpectationResultEvent':\n      return (\n        <DefaultContent\n          message={node.message}\n          eventType={eventType}\n          eventIntent={node.expectationResult.success ? 'success' : 'warning'}\n        >\n          <MetadataEntries entries={node.expectationResult.metadataEntries} />\n        </DefaultContent>\n      );\n    case 'MaterializationEvent':\n      return (\n        <AssetMetadataContent\n          message={node.message}\n          assetKey={node.assetKey}\n          metadataEntries={node.metadataEntries}\n          eventType={eventType}\n          timestamp={node.timestamp}\n        />\n      );\n    case 'ObservationEvent':\n      return (\n        <AssetMetadataContent\n          message=\"\"\n          assetKey={node.assetKey}\n          metadataEntries={node.metadataEntries}\n          eventType={eventType}\n          timestamp={node.timestamp}\n        />\n      );\n    case 'AssetMaterializationPlannedEvent':\n      return <DefaultContent eventType={eventType} message={node.message} />;\n    case 'ObjectStoreOperationEvent':\n      return (\n        <DefaultContent message={node.message} eventType={eventType}>\n          <MetadataEntries entries={node.operationResult.metadataEntries} />\n        </DefaultContent>\n      );\n    case 'HandledOutputEvent':\n      return (\n        <DefaultContent message={node.message} eventType={eventType}>\n          <MetadataEntries entries={node.metadataEntries} />\n        </DefaultContent>\n      );\n    case 'LoadedInputEvent':\n      return (\n        <DefaultContent message={node.message} eventType={eventType}>\n          <MetadataEntries entries={node.metadataEntries} />\n        </DefaultContent>\n      );\n    case 'HookCompletedEvent':\n      return <DefaultContent eventType={eventType} message={node.message} />;\n    case 'HookSkippedEvent':\n      return <DefaultContent eventType={eventType} message={node.message} />;\n    case 'HookErroredEvent':\n      return <FailureContent eventType={eventType} error={node.error} />;\n    case 'AlertStartEvent':\n      return <DefaultContent eventType={eventType} message={node.message} />;\n    case 'AlertSuccessEvent':\n      return <DefaultContent eventType={eventType} message={node.message} />;\n    case 'AlertFailureEvent':\n      return <DefaultContent eventType={eventType} message={node.message} eventIntent=\"warning\" />;\n    case 'ResourceInitFailureEvent':\n    case 'RunFailureEvent':\n      if (node.error) {\n        return <FailureContent message={node.message} error={node.error} eventType={eventType} />;\n      }\n      return <DefaultContent message={node.message} eventType={eventType} eventIntent=\"danger\" />;\n    case 'RunSuccessEvent':\n      return <DefaultContent message={node.message} eventType={eventType} eventIntent=\"success\" />;\n    case 'RunStartEvent':\n    case 'RunEnqueuedEvent':\n    case 'RunDequeuedEvent':\n    case 'RunStartingEvent':\n    case 'RunCancelingEvent':\n    case 'ResourceInitStartedEvent':\n    case 'ResourceInitSuccessEvent':\n    case 'StepWorkerStartedEvent':\n    case 'StepWorkerStartingEvent':\n      return <DefaultContent message={node.message} eventType={eventType} />;\n    case 'RunCanceledEvent':\n      return <FailureContent message={node.message} eventType={eventType} />;\n    case 'EngineEvent':\n      if (node.error) {\n        return <FailureContent message={node.message} error={node.error} eventType={eventType} />;\n      }\n      return (\n        <DefaultContent\n          message={node.message}\n          eventType={eventType}\n          eventColor=\"rgba(27,164,206,0.2)\"\n        >\n          <MetadataEntries entries={node.metadataEntries} />\n        </DefaultContent>\n      );\n    case 'LogMessageEvent':\n      return <DefaultContent message={node.message} />;\n    case 'LogsCapturedEvent':\n      const currentQuery = qs.parse(location.search, {ignoreQueryPrefix: true});\n      const updatedQuery = {...currentQuery, logType: 'stdout', logKey: node.stepKey};\n      const rawLogsUrl = `${location.pathname}?${qs.stringify(updatedQuery)}`;\n      const rawLogsLink = (\n        <Link to={rawLogsUrl} style={{color: 'inherit'}}>\n          View stdout / stderr\n        </Link>\n      );\n      const rows = node.stepKey\n        ? [\n            {\n              label: 'captured_logs',\n              item: rawLogsLink,\n            },\n          ]\n        : [\n            {\n              label: 'step_keys',\n              item: <>{JSON.stringify(node.stepKeys)}</>,\n            },\n            {\n              label: 'captured_logs',\n              item: rawLogsLink,\n            },\n          ];\n      return (\n        <DefaultContent eventType={eventType} message={node.message}>\n          <LogRowStructuredContentTable rows={rows} />\n        </DefaultContent>\n      );\n    default:\n      // This allows us to check that the switch is exhaustive because the union type should\n      // have been narrowed following each successive case to `never` at this point.\n      return assertUnreachable(node);\n  }\n};\n\n// Structured Content Renderers\n\nconst DefaultContent: React.FC<{\n  message: string;\n  eventType?: string;\n  eventColor?: string;\n  eventIntent?: Intent;\n  metadataEntries?: MetadataEntryFragment[];\n  children?: React.ReactElement;\n}> = ({message, eventType, eventColor, eventIntent, children}) => {\n  return (\n    <>\n      <EventTypeColumn>\n        {eventType && (\n          <Tag\n            intent={eventIntent}\n            style={\n              eventColor\n                ? {\n                    fontSize: '0.9em',\n                    color: 'black',\n                    background: eventColor,\n                  }\n                : {\n                    fontSize: '0.9em',\n                  }\n            }\n          >\n            {eventTypeToDisplayType(eventType)}\n          </Tag>\n        )}\n      </EventTypeColumn>\n      <Box padding={{horizontal: 12}} style={{flex: 1}}>\n        {message}\n        {children}\n      </Box>\n    </>\n  );\n};\n\nconst FailureContent: React.FC<{\n  message?: string;\n  eventType: string;\n  error?: PythonErrorFragment | null;\n  errorSource?: ErrorSource | null;\n  metadataEntries?: MetadataEntryFragment[];\n}> = ({message, error, errorSource, eventType, metadataEntries}) => {\n  let contextMessage = null;\n  let errorMessage = null;\n  let errorStack = null;\n  let errorCause = null;\n\n  if (message) {\n    contextMessage = (\n      <>\n        <span>{message}</span>\n        <br />\n      </>\n    );\n  }\n\n  if (error) {\n    errorMessage = <span style={{color: Colors.Red500}}>{`${error.message}`}</span>;\n\n    // omit the outer stack for user code errors with a cause\n    // as the outer stack is just framework code\n    if (\n      error.stack.length &&\n      !(errorSource === ErrorSource.USER_CODE_ERROR && error.causes.length)\n    ) {\n      errorStack = <span style={{color: Colors.Red500}}>{`\\nStack Trace:\\n${error.stack}`}</span>;\n    }\n\n    if (error.causes.length) {\n      errorCause = error.causes.map((cause) => (\n        <>\n          {`The above exception was caused by the following exception:\\n`}\n          <span style={{color: Colors.Red500}}>{`${cause.message}`}</span>\n          {cause?.stack.length ? (\n            <span style={{color: Colors.Red500}}>{`\\nStack Trace:\\n${cause.stack}`}</span>\n          ) : null}\n        </>\n      ));\n    }\n  }\n\n  return (\n    <>\n      <EventTypeColumn>\n        <Tag minimal intent=\"danger\">\n          {eventTypeToDisplayType(eventType)}\n        </Tag>\n      </EventTypeColumn>\n      <Box padding={{horizontal: 12}} style={{flex: 1}}>\n        {contextMessage}\n        {errorMessage}\n        <MetadataEntries entries={metadataEntries} />\n        {errorStack}\n        {errorCause}\n      </Box>\n    </>\n  );\n};\n\nconst StepUpForRetryContent: React.FC<{\n  message?: string;\n  error?: PythonErrorFragment | null;\n}> = ({message, error}) => {\n  let contextMessage = null;\n  let errorCause = null;\n  let errorMessage = null;\n  let errorStack = null;\n\n  if (message) {\n    contextMessage = (\n      <>\n        <span>{message}</span>\n        <br />\n      </>\n    );\n  }\n\n  if (error) {\n    // If no cause, this was a `raise RetryRequest` inside the op. Show the trace for the main error.\n    if (!error.causes.length) {\n      errorMessage = <span style={{color: Colors.Red500}}>{`${error.message}`}</span>;\n      errorStack = <span style={{color: Colors.Red500}}>{`\\nStack Trace:\\n${error.stack}`}</span>;\n    } else {\n      // If there is a cause, this was a different exception. Show that instead.\n      errorCause = (\n        <>\n          {error.causes.map((cause, index) => (\n            <>\n              {index === 0\n                ? `The retry request was caused by the following exception:\\n`\n                : `The above exception was caused by the following exception:\\n`}\n              <span style={{color: Colors.Red500}}>{`${cause.message}`}</span>\n              <span style={{color: Colors.Red500}}>{`\\nStack Trace:\\n${cause.stack}`}</span>\n            </>\n          ))}\n        </>\n      );\n    }\n  }\n\n  return (\n    <>\n      <EventTypeColumn>\n        <Tag minimal intent=\"warning\">\n          {eventTypeToDisplayType(DagsterEventType.STEP_UP_FOR_RETRY)}\n        </Tag>\n      </EventTypeColumn>\n      <Box padding={{horizontal: 12}} style={{flex: 1}}>\n        {contextMessage}\n        {errorMessage}\n        {errorStack}\n        {errorCause}\n      </Box>\n    </>\n  );\n};\n\nconst AssetMetadataContent: React.FC<{\n  message: string;\n  assetKey: AssetKey | null;\n  metadataEntries: MetadataEntryFragment[];\n  eventType: string;\n  timestamp: string;\n}> = ({message, assetKey, metadataEntries, eventType, timestamp}) => {\n  if (!assetKey) {\n    return (\n      <DefaultContent message={message} eventType={eventType}>\n        <MetadataEntries entries={metadataEntries} />\n      </DefaultContent>\n    );\n  }\n\n  const to = assetDetailsPathForKey(assetKey, {asOf: timestamp});\n\n  const assetDashboardLink = (\n    <span style={{marginLeft: 10}}>\n      [<MetadataEntryLink to={to}>View Asset</MetadataEntryLink>]\n    </span>\n  );\n\n  return (\n    <DefaultContent message={message} eventType={eventType}>\n      <>\n        <LogRowStructuredContentTable\n          rows={[\n            {\n              label: 'asset_key',\n              item: (\n                <>\n                  {displayNameForAssetKey(assetKey)}\n                  {assetDashboardLink}\n                </>\n              ),\n            },\n          ]}\n          styles={{paddingBottom: 0}}\n        />\n        <MetadataEntries entries={metadataEntries} />\n      </>\n    </DefaultContent>\n  );\n};\n","import {gql} from '@apollo/client';\nimport {Box} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {setHighlightedGanttChartTime} from '../gantt/GanttChart';\nimport {METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {LogLevel} from '../types/globalTypes';\n\nimport {CellTruncationProvider} from './CellTruncationProvider';\nimport {\n  EventTypeColumn,\n  Row,\n  OpColumn,\n  StructuredContent,\n  TimestampColumn,\n} from './LogsRowComponents';\nimport {LogsRowStructuredContent} from './LogsRowStructuredContent';\nimport {IRunMetadataDict} from './RunMetadataProvider';\nimport {LogsRowStructuredFragment} from './types/LogsRowStructuredFragment';\nimport {LogsRowUnstructuredFragment} from './types/LogsRowUnstructuredFragment';\n\ninterface StructuredProps {\n  node: LogsRowStructuredFragment;\n  metadata: IRunMetadataDict;\n  style: React.CSSProperties;\n  highlighted: boolean;\n}\n\ninterface StructuredState {\n  expanded: boolean;\n}\n\nexport class Structured extends React.Component<StructuredProps, StructuredState> {\n  onExpand = () => {\n    const {node, metadata} = this.props;\n\n    if (node.__typename === 'ExecutionStepFailureEvent') {\n      showCustomAlert({\n        title: 'Error',\n        body: (\n          <PythonErrorInfo\n            error={node.error ? node.error : node}\n            failureMetadata={node.failureMetadata}\n            errorSource={node.errorSource}\n          />\n        ),\n      });\n    } else if (node.__typename === 'ExecutionStepUpForRetryEvent') {\n      showCustomAlert({\n        title: 'Step Retry',\n        body: <PythonErrorInfo error={node.error ? node.error : node} />,\n      });\n    } else if (\n      (node.__typename === 'EngineEvent' && node.error) ||\n      (node.__typename === 'RunFailureEvent' && node.error) ||\n      node.__typename === 'HookErroredEvent' ||\n      node.__typename === 'ResourceInitFailureEvent'\n    ) {\n      showCustomAlert({\n        title: 'Error',\n        body: <PythonErrorInfo error={node.error ? node.error : node} />,\n      });\n    } else {\n      showCustomAlert({\n        title: node.stepKey || 'Info',\n        body: (\n          <StructuredContent>\n            <LogsRowStructuredContent node={node} metadata={metadata} />\n          </StructuredContent>\n        ),\n      });\n    }\n  };\n\n  render() {\n    return (\n      <CellTruncationProvider style={this.props.style} onExpand={this.onExpand}>\n        <StructuredMemoizedContent\n          node={this.props.node}\n          metadata={this.props.metadata}\n          highlighted={this.props.highlighted}\n        />\n      </CellTruncationProvider>\n    );\n  }\n}\n\nexport const LOGS_ROW_STRUCTURED_FRAGMENT = gql`\n  fragment LogsRowStructuredFragment on DagsterRunEvent {\n    __typename\n    ... on MessageEvent {\n      message\n      eventType\n      timestamp\n      level\n      stepKey\n    }\n    ... on DisplayableEvent {\n      label\n      description\n      metadataEntries {\n        ...MetadataEntryFragment\n      }\n    }\n    ... on MarkerEvent {\n      markerStart\n      markerEnd\n    }\n    ... on ErrorEvent {\n      error {\n        ...PythonErrorFragment\n      }\n    }\n    ... on MaterializationEvent {\n      assetKey {\n        path\n      }\n    }\n    ... on ObservationEvent {\n      assetKey {\n        path\n      }\n    }\n    ... on ExecutionStepFailureEvent {\n      errorSource\n      failureMetadata {\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n      }\n    }\n    ... on ExecutionStepInputEvent {\n      inputName\n      typeCheck {\n        label\n        description\n        success\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n      }\n    }\n    ... on ExecutionStepOutputEvent {\n      outputName\n      typeCheck {\n        label\n        description\n        success\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n      }\n    }\n    ... on StepExpectationResultEvent {\n      expectationResult {\n        success\n        label\n        description\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n      }\n    }\n    ... on ObjectStoreOperationEvent {\n      operationResult {\n        op\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n      }\n    }\n    ... on HandledOutputEvent {\n      outputName\n      managerKey\n    }\n    ... on LoadedInputEvent {\n      inputName\n      managerKey\n      upstreamOutputName\n      upstreamStepKey\n    }\n    ... on LogsCapturedEvent {\n      logKey\n      stepKeys\n    }\n  }\n  ${METADATA_ENTRY_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nconst StructuredMemoizedContent: React.FC<{\n  node: LogsRowStructuredFragment;\n  metadata: IRunMetadataDict;\n  highlighted: boolean;\n}> = React.memo(({node, metadata, highlighted}) => {\n  const stepKey = node.stepKey;\n  const step = stepKey ? metadata.steps[stepKey] : null;\n  const stepStartTime = step?.start;\n\n  return (\n    <Row\n      level={LogLevel.INFO}\n      onMouseEnter={() => setHighlightedGanttChartTime(node.timestamp)}\n      onMouseLeave={() => setHighlightedGanttChartTime(null)}\n      highlighted={highlighted}\n    >\n      <OpColumn stepKey={'stepKey' in node && node.stepKey} />\n      <StructuredContent>\n        <LogsRowStructuredContent node={node} metadata={metadata} />\n      </StructuredContent>\n      <TimestampColumn\n        time={'timestamp' in node ? node.timestamp : null}\n        runStartTime={metadata.startedPipelineAt}\n        stepStartTime={stepStartTime}\n      />\n    </Row>\n  );\n});\n\nStructuredMemoizedContent.displayName = 'StructuredMemoizedContent';\n\ninterface UnstructuredProps {\n  node: LogsRowUnstructuredFragment;\n  style: React.CSSProperties;\n  highlighted: boolean;\n  metadata: IRunMetadataDict;\n}\n\nexport class Unstructured extends React.Component<UnstructuredProps> {\n  onExpand = () => {\n    showCustomAlert({\n      title: 'Log',\n      body: <div style={{whiteSpace: 'pre-wrap'}}>{this.props.node.message}</div>,\n    });\n  };\n\n  render() {\n    return (\n      <CellTruncationProvider style={this.props.style} onExpand={this.onExpand}>\n        <UnstructuredMemoizedContent\n          node={this.props.node}\n          highlighted={this.props.highlighted}\n          metadata={this.props.metadata}\n        />\n      </CellTruncationProvider>\n    );\n  }\n}\n\nexport const LOGS_ROW_UNSTRUCTURED_FRAGMENT = gql`\n  fragment LogsRowUnstructuredFragment on DagsterRunEvent {\n    __typename\n    ... on MessageEvent {\n      message\n      timestamp\n      level\n      stepKey\n    }\n  }\n`;\n\nconst UnstructuredMemoizedContent: React.FC<{\n  node: LogsRowUnstructuredFragment;\n  metadata: IRunMetadataDict;\n  highlighted: boolean;\n}> = React.memo(({node, highlighted, metadata}) => {\n  const stepKey = node.stepKey;\n  const step = stepKey ? metadata.steps[stepKey] : null;\n  const stepStartTime = step?.start;\n\n  return (\n    <Row\n      level={node.level}\n      onMouseEnter={() => setHighlightedGanttChartTime(node.timestamp)}\n      onMouseLeave={() => setHighlightedGanttChartTime(null)}\n      highlighted={highlighted}\n    >\n      <OpColumn stepKey={node.stepKey} />\n      <EventTypeColumn>\n        <span style={{marginLeft: 8}}>{node.level}</span>\n      </EventTypeColumn>\n      <Box padding={{horizontal: 12}} style={{flex: 1}}>\n        {node.message}\n      </Box>\n      <TimestampColumn\n        time={node.timestamp}\n        runStartTime={metadata.startedPipelineAt}\n        stepStartTime={stepStartTime}\n      />\n    </Row>\n  );\n});\n\nUnstructuredMemoizedContent.displayName = 'UnstructuredMemoizedContent';\n","import {gql} from '@apollo/client';\nimport {Colors, NonIdealState} from '@dagster-io/ui';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport {CellMeasurer, CellMeasurerCache, List, ListRowProps, ScrollParams} from 'react-virtualized';\nimport styled from 'styled-components/macro';\n\nimport {LogFilter, LogsProviderLogs} from './LogsProvider';\nimport {\n  LOGS_ROW_STRUCTURED_FRAGMENT,\n  LOGS_ROW_UNSTRUCTURED_FRAGMENT,\n  Structured,\n  Unstructured,\n} from './LogsRow';\nimport {ColumnWidthsProvider, Headers} from './LogsScrollingTableHeader';\nimport {IRunMetadataDict} from './RunMetadataProvider';\nimport {eventTypeToDisplayType} from './getRunFilterProviders';\nimport {logNodeLevel} from './logNodeLevel';\nimport {RunDagsterRunEventFragment} from './types/RunDagsterRunEventFragment';\n\nconst LOGS_PADDING_BOTTOM = 50;\n\ninterface ILogsScrollingTableProps {\n  logs: LogsProviderLogs;\n  filter: LogFilter;\n  filterStepKeys: string[];\n\n  // We use this string to know whether the changes to `nodes` require us to\n  // re-layout the entire table. Appending new rows can be done very fast, but\n  // removing some rows requires the whole list be \"reflowed\" again. Checking\n  // `nodes` for equality doesn't let us optimize for the append- case.\n  filterKey: string;\n  metadata: IRunMetadataDict;\n}\n\ninterface ILogsScrollingTableSizedProps {\n  width: number;\n  height: number;\n\n  filteredNodes: (RunDagsterRunEventFragment & {clientsideKey: string})[];\n  textMatchNodes: (RunDagsterRunEventFragment & {clientsideKey: string})[];\n\n  filterKey: string;\n  loading: boolean;\n  focusedTime: number;\n  metadata: IRunMetadataDict;\n}\n\nfunction filterLogs(logs: LogsProviderLogs, filter: LogFilter, filterStepKeys: string[]) {\n  const filteredNodes = logs.allNodes.filter((node) => {\n    // These events are used to determine which assets a run will materialize and are not intended\n    // to be displayed in Dagit. Pagination is offset based, so we remove these logs client-side.\n    if (node.__typename === 'AssetMaterializationPlannedEvent') {\n      return false;\n    }\n    const l = logNodeLevel(node);\n    if (!filter.levels[l]) {\n      return false;\n    }\n    if (filter.sinceTime && Number(node.timestamp) < filter.sinceTime) {\n      return false;\n    }\n    return true;\n  });\n\n  const hasTextFilter = !!(filter.logQuery.length && filter.logQuery[0].value !== '');\n\n  const textMatchNodes = hasTextFilter\n    ? filteredNodes.filter((node) => {\n        return (\n          filter.logQuery.length > 0 &&\n          filter.logQuery.every((f) => {\n            if (f.token === 'query') {\n              return node.stepKey && filterStepKeys.includes(node.stepKey);\n            }\n            if (f.token === 'step') {\n              return node.stepKey && node.stepKey === f.value;\n            }\n            if (f.token === 'type') {\n              return node.eventType && f.value === eventTypeToDisplayType(node.eventType);\n            }\n            return node.message.toLowerCase().includes(f.value.toLowerCase());\n          })\n        );\n      })\n    : [];\n\n  return {\n    filteredNodes: hasTextFilter && filter.hideNonMatches ? textMatchNodes : filteredNodes,\n    textMatchNodes,\n  };\n}\n\nexport const LogsScrollingTable: React.FC<ILogsScrollingTableProps> = (props) => {\n  const {filterKey, filterStepKeys, metadata, filter, logs} = props;\n  const table = React.useRef<LogsScrollingTableSized>(null);\n\n  return (\n    <ColumnWidthsProvider onWidthsChanged={() => table.current && table.current.didResize()}>\n      <Headers />\n      <div style={{flex: 1, minHeight: 0, marginTop: -1}}>\n        <AutoSizer>\n          {({width, height}) => (\n            <LogsScrollingTableSized\n              width={width}\n              height={height}\n              ref={table}\n              filterKey={filterKey}\n              loading={logs.loading}\n              metadata={metadata}\n              focusedTime={filter.focusedTime}\n              {...filterLogs(logs, filter, filterStepKeys)}\n            />\n          )}\n        </AutoSizer>\n      </div>\n    </ColumnWidthsProvider>\n  );\n};\n\nexport const LOGS_SCROLLING_TABLE_MESSAGE_FRAGMENT = gql`\n  fragment LogsScrollingTableMessageFragment on DagsterRunEvent {\n    __typename\n    ...LogsRowStructuredFragment\n    ...LogsRowUnstructuredFragment\n  }\n\n  ${LOGS_ROW_STRUCTURED_FRAGMENT}\n  ${LOGS_ROW_UNSTRUCTURED_FRAGMENT}\n`;\n\nclass LogsScrollingTableSized extends React.Component<ILogsScrollingTableSizedProps> {\n  list = React.createRef<List>();\n\n  get listEl() {\n    // eslint-disable-next-line react/no-find-dom-node\n    const el = this.list.current && ReactDOM.findDOMNode(this.list.current);\n    if (!(el instanceof HTMLElement)) {\n      return null;\n    }\n    return el;\n  }\n\n  cache = new CellMeasurerCache({\n    defaultHeight: 30,\n    fixedWidth: true,\n    keyMapper: (rowIndex) =>\n      this.props.filteredNodes ? this.props.filteredNodes[rowIndex].clientsideKey : '',\n  });\n\n  isAtBottomOrZero = true;\n  scrollToBottomObserver: MutationObserver | null = null;\n\n  componentDidMount() {\n    this.attachScrollToBottomObserver();\n    if (this.props.focusedTime) {\n      window.requestAnimationFrame(() => {\n        this.scrollToTime(this.props.focusedTime);\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps: ILogsScrollingTableSizedProps) {\n    if (!this.list.current) {\n      return;\n    }\n\n    if (this.props.width !== prevProps.width) {\n      this.didResize();\n    }\n    if (this.props.filterKey !== prevProps.filterKey) {\n      this.list.current.recomputeGridSize();\n    }\n\n    if (\n      this.props.focusedTime &&\n      this.props.filteredNodes?.length !== prevProps.filteredNodes?.length\n    ) {\n      window.requestAnimationFrame(() => {\n        this.scrollToTime(this.props.focusedTime);\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.scrollToBottomObserver) {\n      this.scrollToBottomObserver.disconnect();\n    }\n  }\n\n  didResize() {\n    this.cache.clearAll();\n    this.forceUpdate();\n  }\n\n  attachScrollToBottomObserver() {\n    const el = this.listEl;\n    if (!el) {\n      console.warn(`No container, LogsScrollingTable must render listEl`);\n      return;\n    }\n\n    let lastHeight: string | null = null;\n\n    this.scrollToBottomObserver = new MutationObserver(() => {\n      const rowgroupEl = el.querySelector('[role=rowgroup]') as HTMLElement;\n      if (!rowgroupEl) {\n        lastHeight = null;\n        return;\n      }\n      if (rowgroupEl.style.height === lastHeight) {\n        return;\n      }\n      if (!this.isAtBottomOrZero) {\n        return;\n      }\n\n      lastHeight = rowgroupEl.style.height;\n      el.scrollTop = el.scrollHeight - el.clientHeight;\n    });\n\n    this.scrollToBottomObserver.observe(el, {\n      attributes: true,\n      subtree: true,\n    });\n  }\n\n  onScroll = ({scrollTop, scrollHeight, clientHeight}: ScrollParams) => {\n    const atTopAndStarting = scrollTop === 0 && scrollHeight <= clientHeight;\n\n    // Note: The distance to the bottom can go negative if you scroll into the padding at the bottom of the list.\n    // react-virtualized seems to be faking these numbers (they're different than what you get if you inspect the el)\n    const distanceToBottom = scrollHeight - clientHeight - scrollTop;\n    const atBottom = distanceToBottom < 5;\n\n    this.isAtBottomOrZero = atTopAndStarting || atBottom;\n  };\n\n  scrollToTime = (ms: number) => {\n    if (!this.props.filteredNodes || !this.list.current) {\n      return;\n    }\n\n    // Stop the table from attempting to return to the bottom-of-feed\n    // if more logs arrive.\n    this.isAtBottomOrZero = false;\n\n    // Find the row immediately at or after the provided timestamp\n    const target: {index: number; alignment: 'center'} = {\n      index: this.props.filteredNodes.findIndex((n) => Number(n.timestamp) >= ms),\n      alignment: 'center',\n    };\n    if (target.index === -1) {\n      target.index = this.props.filteredNodes.length - 1;\n    }\n\n    // Move to the offset. For some reason, this takes multiple iterations but not multiple renders.\n    // It seems react-virtualized may be using default row height for rows more than X rows away and\n    // the number gets more accurate as we scroll, which is very annoying.\n    let offset = 0;\n    let iterations = 0;\n    while (offset !== this.list.current.getOffsetForRow(target)) {\n      offset = this.list.current.getOffsetForRow(target);\n      this.list.current.scrollToPosition(offset);\n      iterations += 1;\n      if (iterations > 20) {\n        break;\n      }\n    }\n  };\n\n  rowRenderer = ({parent, index, style}: ListRowProps) => {\n    if (!this.props.filteredNodes) {\n      return;\n    }\n    const node = this.props.filteredNodes[index];\n    const focusedTimeMatch = Number(node.timestamp) === this.props.focusedTime;\n    const textMatch = !!this.props.textMatchNodes?.includes(node);\n\n    const metadata = this.props.metadata;\n    if (!node) {\n      return <span />;\n    }\n    const isLastRow = index === this.props.filteredNodes.length - 1;\n    const lastRowStyles = isLastRow\n      ? {\n          borderBottom: `1px solid ${Colors.Gray100}`,\n        }\n      : {};\n\n    return (\n      <CellMeasurer cache={this.cache} index={index} parent={parent} key={node.clientsideKey}>\n        {node.__typename === 'LogMessageEvent' ? (\n          <Unstructured\n            node={node}\n            metadata={metadata}\n            style={{...style, width: this.props.width, ...lastRowStyles}}\n            highlighted={textMatch || focusedTimeMatch}\n          />\n        ) : (\n          <Structured\n            node={node}\n            metadata={metadata}\n            style={{...style, width: this.props.width, ...lastRowStyles}}\n            highlighted={textMatch || focusedTimeMatch}\n          />\n        )}\n      </CellMeasurer>\n    );\n  };\n\n  noContentRenderer = () => {\n    if (this.props.filteredNodes) {\n      return <NonIdealState icon=\"no-results\" title=\"No logs to display\" />;\n    }\n    return <span />;\n  };\n\n  render() {\n    const {filteredNodes, height, loading, width} = this.props;\n    return (\n      <div>\n        {loading ? (\n          <ListEmptyState>\n            <NonIdealState icon=\"spinner\" title=\"Fetching logs...\" />\n          </ListEmptyState>\n        ) : null}\n        <List\n          ref={this.list}\n          deferredMeasurementCache={this.cache}\n          rowCount={filteredNodes?.length || 0}\n          noContentRenderer={this.noContentRenderer}\n          rowHeight={this.cache.rowHeight}\n          rowRenderer={this.rowRenderer}\n          width={width}\n          height={height}\n          overscanRowCount={10}\n          style={{paddingBottom: LOGS_PADDING_BOTTOM}}\n          onScroll={this.onScroll}\n        />\n      </div>\n    );\n  }\n}\n\nclass AutoSizer extends React.Component<{\n  children: (size: {width: number; height: number}) => React.ReactNode;\n}> {\n  state = {\n    width: 0,\n    height: 0,\n  };\n\n  resizeObserver: any | undefined;\n\n  componentDidMount() {\n    this.measure();\n\n    // eslint-disable-next-line react/no-find-dom-node\n    const el = ReactDOM.findDOMNode(this);\n    if (el && el instanceof HTMLElement && 'ResizeObserver' in window) {\n      const RO = window['ResizeObserver'] as any;\n      this.resizeObserver = new RO((entries: any) => {\n        this.setState({\n          width: entries[0].contentRect.width,\n          height: entries[0].contentRect.height,\n        });\n      });\n      this.resizeObserver.observe(el);\n    }\n  }\n\n  componentDidUpdate() {\n    this.measure();\n  }\n\n  componentWillUnmount() {\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n    }\n  }\n\n  measure() {\n    // eslint-disable-next-line react/no-find-dom-node\n    const el = ReactDOM.findDOMNode(this);\n    if (!el || !(el instanceof HTMLElement)) {\n      return;\n    }\n    if (el.clientWidth !== this.state.width || el.clientHeight !== this.state.height) {\n      this.setState({width: el.clientWidth, height: el.clientHeight});\n    }\n  }\n\n  render() {\n    return <div style={{width: '100%', height: '100%'}}>{this.props.children(this.state)}</div>;\n  }\n}\n\nconst ListEmptyState = styled.div`\n  background-color: rgba(255, 255, 255, 0.7);\n  z-index: 100;\n  position: absolute;\n  width: 100%;\n  height: calc(100% - 50px);\n`;\n","import {Colors} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {getJSONForKey} from '../hooks/useStateWithStorage';\n\nconst ColumnWidthsStorageKey = 'ColumnWidths';\nconst ColumnWidths = Object.assign(\n  {\n    eventType: 140,\n    solid: 150,\n    timestamp: 117,\n  },\n  getJSONForKey(ColumnWidthsStorageKey),\n);\n\nconst MIN_COLUMN_WIDTH = 40;\n\nexport const ColumnWidthsContext = React.createContext({\n  ...ColumnWidths,\n  onChange: (_: typeof ColumnWidths) => {},\n});\n\nexport class ColumnWidthsProvider extends React.Component<\n  {onWidthsChanged: (widths: typeof ColumnWidths) => void},\n  typeof ColumnWidths\n> {\n  state = ColumnWidths;\n\n  onWidthsChangedFromContext = (columnWidths: typeof ColumnWidths) => {\n    window.localStorage.setItem(ColumnWidthsStorageKey, JSON.stringify(columnWidths));\n    this.props.onWidthsChanged(columnWidths);\n    this.setState(columnWidths);\n  };\n\n  render() {\n    return (\n      <ColumnWidthsContext.Provider\n        value={{\n          ...this.state,\n          onChange: this.onWidthsChangedFromContext,\n        }}\n      >\n        {this.props.children}\n      </ColumnWidthsContext.Provider>\n    );\n  }\n}\n\ninterface HeaderProps extends React.HTMLProps<HTMLDivElement> {\n  width: number;\n  handleSide?: 'left' | 'right';\n  onResize?: (width: number) => void;\n}\n\ninterface HeaderState {\n  isDragging: boolean;\n  width: number;\n  screenX: number;\n}\n\nclass Header extends React.Component<HeaderProps, HeaderState> {\n  state = {\n    isDragging: false,\n    width: 0,\n    screenX: 0,\n  };\n\n  componentWillUnmount() {\n    document.removeEventListener('mousemove', this.onMouseMove);\n    document.removeEventListener('mouseup', this.onMouseUp);\n  }\n\n  onMouseDown = (m: React.MouseEvent<HTMLDivElement>) => {\n    const {width} = this.props;\n    this.setState({\n      isDragging: true,\n      screenX: m.screenX,\n      width,\n    });\n    document.addEventListener('mousemove', this.onMouseMove);\n    document.addEventListener('mouseup', this.onMouseUp);\n  };\n\n  onMouseMove = (evt: MouseEvent) => {\n    const {onResize, handleSide} = this.props;\n    const {isDragging, width, screenX} = this.state;\n    if (!evt.screenX || !isDragging || !onResize) {\n      return;\n    }\n    const dir = handleSide === 'left' ? -1 : 1;\n    onResize(Math.max(MIN_COLUMN_WIDTH, width + (evt.screenX - screenX) * dir));\n  };\n\n  onMouseUp = () => {\n    const {isDragging} = this.state;\n    isDragging && this.setState({isDragging: false});\n    document.removeEventListener('mousemove', this.onMouseMove);\n    document.removeEventListener('mouseup', this.onMouseUp);\n  };\n\n  render() {\n    const isDraggable = !!this.props.onResize;\n\n    return (\n      <HeaderContainer style={{width: this.props.width}}>\n        <HeaderDragHandle\n          onMouseDown={isDraggable ? this.onMouseDown : undefined}\n          isDraggable={isDraggable}\n          isDragging={this.state.isDragging}\n          side={this.props.handleSide || 'right'}\n        >\n          <div />\n        </HeaderDragHandle>\n        <HeaderLabel>{this.props.children}</HeaderLabel>\n      </HeaderContainer>\n    );\n  }\n}\n\nexport const Headers = () => {\n  const widths = React.useContext(ColumnWidthsContext);\n  return (\n    <HeadersContainer>\n      <Header width={widths.solid} onResize={(width) => widths.onChange({...widths, solid: width})}>\n        Op\n      </Header>\n      <Header\n        width={widths.eventType}\n        onResize={(width) => widths.onChange({...widths, eventType: width})}\n      >\n        Event Type\n      </Header>\n      <HeaderContainer style={{flex: 1}}>Info</HeaderContainer>\n      <Header\n        handleSide=\"left\"\n        width={widths.timestamp}\n        onResize={(width) => widths.onChange({...widths, timestamp: width})}\n      >\n        Timestamp\n      </Header>\n    </HeadersContainer>\n  );\n};\n\nconst HeadersContainer = styled.div`\n  display: flex;\n  color: ${Colors.Gray400};\n  text-transform: uppercase;\n  font-size: 12px;\n  border-bottom: 1px solid ${Colors.KeylineGray};\n  z-index: 2;\n`;\n\nconst HeaderContainer = styled.div`\n  flex-shrink: 0;\n  position: relative;\n  user-select: none;\n  display: inline-block;\n  padding: 0 12px;\n  line-height: 32px;\n`;\n\n// eslint-disable-next-line no-unexpected-multiline\nconst HeaderDragHandle = styled.div<{\n  side: 'left' | 'right';\n  isDraggable: boolean;\n  isDragging: boolean;\n}>`\n  width: 1px;\n  height: 20000px;\n  position: absolute;\n  cursor: ${({isDraggable}) => (isDraggable ? 'ew-resize' : 'default')};\n  z-index: 2;\n  ${({side}) => (side === 'right' ? `right: -2px;` : `left: -2px;`)}\n  padding: 0 2px;\n  & > div {\n    width: 1px;\n    height: 100%;\n    background: ${({isDragging}) => (isDragging ? Colors.Gray400 : Colors.KeylineGray)};\n  }\n`;\n\nconst HeaderLabel = styled.div`\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n`;\n","import * as React from 'react';\nimport {Prompt} from 'react-router-dom';\n\nimport {useOnBeforeUnload} from '../hooks/useOnBeforeUnload';\n\ninterface Props {\n  message: string;\n}\n\nexport const NavigationBlock = (props: Props) => {\n  useOnBeforeUnload();\n  return <Prompt message={props.message} />;\n};\n","import * as React from 'react';\n\nexport const useOnBeforeUnload = () => {\n  React.useEffect(() => {\n    const handler = (e: BeforeUnloadEvent) => {\n      e.preventDefault();\n      e.returnValue = '';\n    };\n\n    window.addEventListener('beforeunload', handler);\n    return () => {\n      window.removeEventListener('beforeunload', handler);\n    };\n  }, []);\n};\n","export interface RunWithTime {\n  startTime: number;\n  endTime: number;\n}\n\nexport type RunBatch<R extends RunWithTime> = {\n  runs: R[];\n  startTime: number;\n  endTime: number;\n  left: number;\n  width: number;\n};\n\ntype Config<R extends RunWithTime> = {\n  runs: R[];\n  start: number;\n  end: number;\n  width: number;\n  minChunkWidth: number;\n  minMultipleWidth: number;\n};\n\nexport const overlap = (a: {start: number; end: number}, b: {start: number; end: number}) =>\n  !(a.end < b.start || b.end < a.start);\n\n/**\n * Given a list of runs, batch any that overlap. Calculate `left` and `width` values for rendering\n * purposes, using minimum widths for very brief runs and overlapping batches.\n */\nexport const batchRunsForTimeline = <R extends RunWithTime>(config: Config<R>) => {\n  const {runs, start, end, width, minChunkWidth, minMultipleWidth} = config;\n  const rangeLength = end - start;\n\n  const now = Date.now();\n  const nowLeft = ((now - start) / (end - start)) * width;\n\n  const batches: RunBatch<R>[] = runs\n    .map((run) => {\n      const startTime = run.startTime;\n      const endTime = run.endTime || Date.now();\n      const left = Math.max(0, Math.floor(((startTime - start) / rangeLength) * width));\n      const runWidth = Math.max(\n        minChunkWidth,\n        Math.min(\n          Math.ceil(((endTime - startTime) / rangeLength) * width),\n          Math.ceil(((endTime - start) / rangeLength) * width),\n        ),\n      );\n\n      return {\n        runs: [run],\n        startTime,\n        endTime,\n        left,\n        width: runWidth,\n      };\n    })\n    .sort((a, b) => b.left - a.left);\n\n  const consolidated = [];\n\n  while (batches.length) {\n    const current = batches.shift();\n    const next = batches[0];\n    if (current) {\n      if (next && canBatch(current, next, minMultipleWidth, nowLeft)) {\n        // Remove `next`, consolidate it with `current`, and unshift it back on.\n        // This way, we keep looking for batches to consolidate with.\n        batches.shift();\n        current.runs = [...current.runs, ...next.runs];\n        current.startTime = Math.min(current.startTime, next.startTime);\n        current.endTime = Math.max(current.endTime, next.endTime);\n\n        // Identify the rightmost point for these two items.\n        const right = Math.max(\n          current.left + minMultipleWidth,\n          current.left + current.width,\n          next.left + next.width,\n        );\n\n        // Using the leftmost point, calculate the new width using the rightmost point\n        // determined above.\n        const minLeft = Math.min(current.left, next.left);\n        current.width = right - minLeft;\n        current.left = minLeft;\n\n        batches.unshift(current);\n      } else {\n        // If the next batch doesn't overlap, we've consolidated this batch\n        // all we can. Move on!\n        consolidated.push(current);\n      }\n    }\n  }\n\n  return consolidated;\n};\n\nconst canBatch = (\n  current: RunBatch<RunWithTime>,\n  next: RunBatch<RunWithTime>,\n  minMultipleWidth: number,\n  nowLeft: number,\n) => {\n  const currentStart = current.left;\n  const currentEnd = current.left + Math.max(current.width, minMultipleWidth);\n  const nextStart = next.left;\n  const nextEnd = next.left + Math.max(next.width, minMultipleWidth);\n\n  const minStart = Math.min(current.left, next.left);\n  const maxEnd = Math.max(\n    current.left + Math.max(current.width, minMultipleWidth),\n    next.left + Math.max(next.width, minMultipleWidth),\n  );\n\n  // If the batches overlap with each other but do NOT visually overlap with the \"now\"\n  // time marker, they can be batched.\n  return (\n    overlap({start: currentStart, end: currentEnd}, {start: nextStart, end: nextEnd}) &&\n    // ...and they do not combine to cross over the \"now\" marker\n    (minStart > nowLeft || maxEnd < nowLeft)\n  );\n};\n","import {Box, Colors, Popover, Mono, FontFamily, Tooltip, Tag, NonIdealState} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {TimezoneContext} from '../app/time/TimezoneContext';\nimport {browserTimezone} from '../app/time/browserTimezone';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {RunStatus} from '../types/globalTypes';\nimport {findDuplicateRepoNames} from '../ui/findDuplicateRepoNames';\nimport {useRepoExpansionState} from '../ui/useRepoExpansionState';\nimport {repoAddressAsString} from '../workspace/repoAddressAsString';\nimport {repoAddressFromPath} from '../workspace/repoAddressFromPath';\nimport {RepoAddress} from '../workspace/types';\n\nimport {RepoSectionHeader, SECTION_HEADER_HEIGHT} from './RepoSectionHeader';\nimport {RunStatusDot} from './RunStatusDots';\nimport {failedStatuses, inProgressStatuses, queuedStatuses, successStatuses} from './RunStatuses';\nimport {TimeElapsed} from './TimeElapsed';\nimport {batchRunsForTimeline, RunBatch} from './batchRunsForTimeline';\n\nconst ROW_HEIGHT = 32;\nconst TIME_HEADER_HEIGHT = 42;\nconst EMPTY_STATE_HEIGHT = 140;\nconst LABEL_WIDTH = 320;\n\nconst ONE_HOUR_MSEC = 60 * 60 * 1000;\n\nexport type TimelineRun = {\n  id: string;\n  status: RunStatus | 'SCHEDULED';\n  startTime: number;\n  endTime: number;\n};\n\nexport type TimelineJob = {\n  key: string;\n  repoAddress: RepoAddress;\n  jobName: string;\n  path: string;\n  runs: TimelineRun[];\n};\n\ninterface Props {\n  bucketByRepo?: boolean;\n  jobs: TimelineJob[];\n  range: [number, number];\n}\n\nconst EXPANSION_STATE_STORAGE_KEY = 'timeline-expansion-state';\n\nexport const RunTimeline = (props: Props) => {\n  const {bucketByRepo = false, jobs, range} = props;\n  const [width, setWidth] = React.useState<number | null>(null);\n  const {expandedKeys, onToggle} = useRepoExpansionState(EXPANSION_STATE_STORAGE_KEY);\n\n  const observer = React.useRef<ResizeObserver | null>(null);\n\n  const containerRef = React.useCallback((node) => {\n    if (node) {\n      observer.current = new ResizeObserver((entries) => {\n        const entry = entries[0];\n        setWidth(entry.contentRect.width);\n      });\n      observer.current.observe(node);\n    } else {\n      observer.current?.disconnect();\n    }\n  }, []);\n\n  if (!width || !jobs.length) {\n    return (\n      <Timeline $height={TIME_HEADER_HEIGHT + EMPTY_STATE_HEIGHT} ref={containerRef}>\n        {width ? <NoRunsTimeline /> : null}\n      </Timeline>\n    );\n  }\n\n  if (!bucketByRepo) {\n    const height = ROW_HEIGHT * (jobs.length || 1);\n    return (\n      <Timeline $height={TIME_HEADER_HEIGHT + height} ref={containerRef}>\n        <TimeDividers interval={ONE_HOUR_MSEC} range={range} height={height} />\n        <div>\n          {jobs.map((job, ii) => (\n            <RunTimelineRow\n              key={job.key}\n              job={job}\n              top={ii * ROW_HEIGHT + TIME_HEADER_HEIGHT}\n              range={range}\n              width={width}\n            />\n          ))}\n        </div>\n      </Timeline>\n    );\n  }\n\n  const buckets = jobs.reduce((accum, job) => {\n    const {repoAddress} = job;\n    const repoKey = repoAddressAsString(repoAddress);\n    const jobsForRepo = accum[repoKey] || [];\n    return {...accum, [repoKey]: [...jobsForRepo, job]};\n  }, {});\n\n  const repoOrder = Object.keys(buckets).sort((a, b) =>\n    a.toLocaleLowerCase().localeCompare(b.toLocaleLowerCase()),\n  );\n\n  let nextTop = TIME_HEADER_HEIGHT;\n  const expandedRepos = repoOrder.filter((repoKey) => expandedKeys.includes(repoKey));\n  const expandedJobCount = expandedRepos.reduce(\n    (accum, repoKey) => accum + buckets[repoKey].length,\n    0,\n  );\n  const height = repoOrder.length * SECTION_HEADER_HEIGHT + ROW_HEIGHT * expandedJobCount;\n  const duplicateRepoNames = findDuplicateRepoNames(\n    repoOrder.map((repoKey) => repoAddressFromPath(repoKey)?.name || ''),\n  );\n\n  return (\n    <Timeline $height={TIME_HEADER_HEIGHT + height} ref={containerRef}>\n      <TimeDividers interval={ONE_HOUR_MSEC} range={range} height={height} />\n      {repoOrder.map((repoKey) => {\n        const name = repoAddressFromPath(repoKey)?.name;\n        const jobs = buckets[repoKey];\n        const top = nextTop;\n        const expanded = expandedKeys.includes(repoKey);\n        nextTop = top + SECTION_HEADER_HEIGHT + (expanded ? jobs.length * ROW_HEIGHT : 0);\n        return (\n          <TimelineSection\n            expanded={expanded}\n            range={range}\n            top={top}\n            key={repoKey}\n            repoKey={repoKey}\n            isDuplicateRepoName={!!(name && duplicateRepoNames.has(name))}\n            jobs={buckets[repoKey]}\n            onToggle={onToggle}\n            width={width}\n          />\n        );\n      })}\n    </Timeline>\n  );\n};\n\ninterface TimelineSectionProps {\n  expanded: boolean;\n  repoKey: string;\n  isDuplicateRepoName: boolean;\n  jobs: TimelineJob[];\n  top: number;\n  range: [number, number];\n  width: number;\n  onToggle: (repoAddress: RepoAddress) => void;\n}\n\nconst TimelineSection = (props: TimelineSectionProps) => {\n  const {expanded, onToggle, repoKey, isDuplicateRepoName, jobs, range, top, width} = props;\n  const repoAddress = repoAddressFromPath(repoKey);\n  const repoName = repoAddress?.name || 'Unknown repo';\n  const repoLocation = repoAddress?.location || 'Unknown location';\n  const onClick = React.useCallback(() => {\n    repoAddress && onToggle(repoAddress);\n  }, [onToggle, repoAddress]);\n\n  return (\n    <div>\n      <SectionHeaderContainer $top={top}>\n        <RepoSectionHeader\n          expanded={expanded}\n          repoName={repoName}\n          repoLocation={repoLocation}\n          onClick={onClick}\n          showLocation={isDuplicateRepoName}\n          rightElement={<RunStatusTags jobs={jobs} />}\n        />\n      </SectionHeaderContainer>\n      {expanded\n        ? jobs.map((job, ii) => (\n            <RunTimelineRow\n              key={job.key}\n              job={job}\n              top={top + SECTION_HEADER_HEIGHT + ii * ROW_HEIGHT}\n              range={range}\n              width={width}\n            />\n          ))\n        : null}\n    </div>\n  );\n};\n\nconst RunStatusTags = React.memo(({jobs}: {jobs: TimelineJob[]}) => {\n  const {inProgressCount, failedCount, succeededCount} = React.useMemo(() => {\n    let inProgressCount = 0;\n    let failedCount = 0;\n    let succeededCount = 0;\n    jobs.forEach(({runs}) => {\n      runs.forEach(({status}) => {\n        // Refine `SCHEDULED` out so that our Set checks below pass TypeScript.\n        if (status === 'SCHEDULED') {\n          return;\n        }\n        if (inProgressStatuses.has(status)) {\n          inProgressCount++;\n        } else if (failedStatuses.has(status)) {\n          failedCount++;\n        } else if (successStatuses.has(status)) {\n          succeededCount++;\n        }\n      });\n    });\n    return {inProgressCount, failedCount, succeededCount};\n  }, [jobs]);\n\n  const inProgressText =\n    inProgressCount === 1 ? '1 run in progress' : `${inProgressCount} runs in progress`;\n  const succeededText =\n    succeededCount === 1 ? '1 run succeeded' : `${succeededCount} runs succeeded`;\n  const failedText = failedCount === 1 ? '1 run failed' : `${failedCount} runs failed`;\n\n  return (\n    <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n      {inProgressCount > 0 ? (\n        <Tooltip content={<StatusSpan>{inProgressText}</StatusSpan>} placement=\"top\">\n          <Tag intent=\"primary\">{inProgressCount}</Tag>\n        </Tooltip>\n      ) : null}\n      {succeededCount > 0 ? (\n        <Tooltip content={<StatusSpan>{succeededText}</StatusSpan>} placement=\"top\">\n          <Tag intent=\"success\">{succeededCount}</Tag>\n        </Tooltip>\n      ) : null}\n      {failedCount > 0 ? (\n        <Tooltip content={<StatusSpan>{failedText}</StatusSpan>} placement=\"top\">\n          <Tag intent=\"danger\">{failedCount}</Tag>\n        </Tooltip>\n      ) : null}\n    </Box>\n  );\n});\n\nconst StatusSpan = styled.span`\n  white-space: nowrap;\n`;\n\nconst SectionHeaderContainer = styled.div<{$top: number}>`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n\n  ${({$top}) => `transform: translateY(${$top}px);`}\n`;\n\ntype TimeMarker = {\n  key: string;\n  label: React.ReactNode;\n  left: number;\n};\n\ninterface TimeDividersProps {\n  height: number;\n  interval: number;\n  range: [number, number];\n}\n\nconst TimeDividers = (props: TimeDividersProps) => {\n  const {interval, range, height} = props;\n  const [start, end] = range;\n  const locale = navigator.language;\n  const [timezone] = React.useContext(TimezoneContext);\n\n  const timeMarkers: TimeMarker[] = React.useMemo(() => {\n    const totalTime = end - start;\n    const startGap = start % interval;\n    const firstMarker = start - startGap;\n    const markerCount = Math.ceil(totalTime / interval) + 1;\n    return [...new Array(markerCount)]\n      .map((_, ii) => {\n        const time = firstMarker + ii * interval;\n        const date = new Date(time);\n        const label = date.toLocaleString(locale, {\n          hour: '2-digit',\n          timeZone: timezone === 'Automatic' ? browserTimezone() : timezone,\n        });\n        return {\n          label,\n          key: date.toString(),\n          left: ((time - start) / totalTime) * 100,\n        };\n      })\n      .filter((marker) => marker.left > 0);\n  }, [end, start, interval, locale, timezone]);\n\n  const now = Date.now();\n  const nowLeft = `${(((now - start) / (end - start)) * 100).toPrecision(3)}%`;\n\n  return (\n    <DividerContainer style={{height: `${height}px`}}>\n      <DividerLabels>\n        {timeMarkers.map((marker) => (\n          <DividerLabel key={marker.key} style={{left: `${marker.left.toPrecision(3)}%`}}>\n            {marker.label}\n          </DividerLabel>\n        ))}\n      </DividerLabels>\n      <DividerLines>\n        <DividerLine style={{left: 0, backgroundColor: Colors.Gray200}} />\n        {timeMarkers.map((marker) => (\n          <DividerLine key={marker.key} style={{left: `${marker.left.toPrecision(3)}%`}} />\n        ))}\n        {now >= start && now <= end ? (\n          <>\n            <NowMarker style={{left: nowLeft}}>Now</NowMarker>\n            <DividerLine style={{left: nowLeft, backgroundColor: Colors.Blue500, zIndex: 1}} />\n          </>\n        ) : null}\n      </DividerLines>\n    </DividerContainer>\n  );\n};\n\nconst DividerContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: ${LABEL_WIDTH}px;\n  right: 0;\n  font-family: ${FontFamily.monospace};\n  color: ${Colors.Gray400};\n`;\n\nconst DividerLabels = styled.div`\n  display: flex;\n  align-items: center;\n  height: ${TIME_HEADER_HEIGHT}px;\n  position: relative;\n  user-select: none;\n  width: 100%;\n`;\n\nconst DividerLabel = styled.div`\n  position: absolute;\n  transform: translateX(-50%);\n  white-space: nowrap;\n`;\n\nconst DividerLines = styled.div`\n  height: 100%;\n  position: relative;\n  width: 100%;\n  box-shadow: inset 1px 0 0 ${Colors.KeylineGray}, inset -1px 0 0 ${Colors.KeylineGray};\n`;\n\nconst DividerLine = styled.div`\n  background-color: ${Colors.KeylineGray};\n  height: 100%;\n  position: absolute;\n  top: 0;\n  width: 1px;\n`;\n\nconst NowMarker = styled.div`\n  background-color: ${Colors.Blue500};\n  border-radius: 1px;\n  color: ${Colors.White};\n  cursor: default;\n  font-size: 12px;\n  line-height: 12px;\n  margin-left: -12px;\n  padding: 1px 4px;\n  position: absolute;\n  top: -14px;\n  user-select: none;\n`;\n\nconst mergeStatusToColor = (runs: TimelineRun[]) => {\n  let anyInProgress = false;\n  let anyQueued = false;\n  let anyFailed = false;\n  let anySucceeded = false;\n  let anyScheduled = false;\n\n  runs.forEach(({status}) => {\n    if (status === 'SCHEDULED') {\n      anyScheduled = true;\n    } else if (queuedStatuses.has(status)) {\n      anyQueued = true;\n    } else if (inProgressStatuses.has(status)) {\n      anyInProgress = true;\n    } else if (failedStatuses.has(status)) {\n      anyFailed = true;\n    } else if (successStatuses.has(status)) {\n      anySucceeded = true;\n    }\n  });\n\n  if (anyQueued) {\n    return Colors.Blue200;\n  }\n  if (anyInProgress) {\n    return Colors.Blue500;\n  }\n  if (anyFailed) {\n    return Colors.Red500;\n  }\n  if (anySucceeded) {\n    return Colors.Green500;\n  }\n  if (anyScheduled) {\n    return Colors.Blue200;\n  }\n\n  return Colors.Gray500;\n};\n\nconst MIN_CHUNK_WIDTH = 2;\nconst MIN_WIDTH_FOR_MULTIPLE = 16;\n\nconst RunTimelineRow = ({\n  job,\n  top,\n  range,\n  width: containerWidth,\n}: {\n  job: TimelineJob;\n  top: number;\n  range: [number, number];\n  width: number;\n}) => {\n  // const {jobKey, jobLabel, jobPath, runs, top, range, width: containerWidth} = props;\n  const [start, end] = range;\n  const width = containerWidth - LABEL_WIDTH;\n  const {runs} = job;\n\n  // Batch overlapping runs in this row.\n  const batched = React.useMemo(() => {\n    const batches: RunBatch<TimelineRun>[] = batchRunsForTimeline({\n      runs,\n      start,\n      end,\n      width,\n      minChunkWidth: MIN_CHUNK_WIDTH,\n      minMultipleWidth: MIN_WIDTH_FOR_MULTIPLE,\n    });\n\n    return batches;\n  }, [runs, start, end, width]);\n\n  if (!job.runs.length) {\n    return null;\n  }\n\n  return (\n    <Row $top={top}>\n      <JobName>\n        <Link to={job.path}>{job.jobName}</Link>\n      </JobName>\n      <RunChunks>\n        {batched.map((batch) => {\n          const {left, width, runs} = batch;\n          const runCount = runs.length;\n          return (\n            <RunChunk\n              key={batch.runs[0].id}\n              $color={mergeStatusToColor(batch.runs)}\n              $multiple={runCount > 1}\n              style={{\n                left: `${left}px`,\n                width: `${width}px`,\n              }}\n            >\n              <Popover\n                content={<RunHoverContent job={job} batch={batch} />}\n                position=\"top\"\n                interactionKind=\"hover\"\n                className=\"chunk-popover-target\"\n              >\n                <Box\n                  flex={{direction: 'row', justifyContent: 'center', alignItems: 'center'}}\n                  style={{height: '100%'}}\n                >\n                  {runCount > 1 ? <BatchCount>{batch.runs.length}</BatchCount> : null}\n                </Box>\n              </Popover>\n            </RunChunk>\n          );\n        })}\n      </RunChunks>\n    </Row>\n  );\n};\n\nconst NoRunsTimeline = () => (\n  <Box padding={48}>\n    <NonIdealState\n      icon=\"schedule\"\n      title=\"No runs found\"\n      description=\"No runs or upcoming runs found for this time window\"\n    />\n  </Box>\n);\n\nconst Timeline = styled.div<{$height: number}>`\n  ${({$height}) => `height: ${$height}px;`}\n  position: relative;\n`;\n\nconst Row = styled.div<{$top: number}>`\n  align-items: center;\n  box-shadow: inset 0 -1px 0 ${Colors.KeylineGray};\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: ${ROW_HEIGHT + 1}px;\n  padding: 1px 0;\n  position: absolute;\n  left: 0;\n  top: 0;\n\n  ${({$top}) => `transform: translateY(${$top}px);`}\n\n  :first-child, :hover {\n    box-shadow: inset 0 1px 0 ${Colors.KeylineGray}, inset 0 -1px 0 ${Colors.KeylineGray};\n  }\n\n  :hover {\n    background-color: ${Colors.Gray10};\n  }\n`;\n\nconst JobName = styled.div`\n  align-items: center;\n  display: flex;\n  font-size: 13px;\n  justify-content: space-between;\n  line-height: 16px;\n  overflow: hidden;\n  padding: 0 12px 0 24px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: ${LABEL_WIDTH}px;\n`;\n\nconst RunChunks = styled.div`\n  flex: 1;\n  position: relative;\n  height: ${ROW_HEIGHT}px;\n`;\n\ninterface ChunkProps {\n  $color: string;\n  $multiple: boolean;\n}\n\nconst RunChunk = styled.div<ChunkProps>`\n  align-items: center;\n  background-color: ${({$color}) => $color};\n  border-radius: 2px;\n  height: ${ROW_HEIGHT - 4}px;\n  position: absolute;\n  top: 2px;\n  ${({$multiple}) => ($multiple ? `min-width: ${MIN_WIDTH_FOR_MULTIPLE}px` : null)};\n\n  transition: background-color 300ms linear, width 300ms ease-in-out;\n\n  .chunk-popover-target {\n    display: block;\n    height: 100%;\n    width: 100%;\n  }\n`;\n\nconst BatchCount = styled.div`\n  color: ${Colors.White};\n  cursor: default;\n  font-family: ${FontFamily.monospace};\n  font-size: 12px;\n  user-select: none;\n`;\n\ninterface RunHoverContentProps {\n  job: TimelineJob;\n  batch: RunBatch<TimelineRun>;\n}\n\nconst RunHoverContent = (props: RunHoverContentProps) => {\n  const {job, batch} = props;\n  const sliced = batch.runs.slice(0, 50);\n  const remaining = batch.runs.length - sliced.length;\n\n  return (\n    <Box style={{width: '260px'}}>\n      <Box padding={12} border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}>\n        <HoverContentJobName>{job.jobName}</HoverContentJobName>\n      </Box>\n      <div style={{maxHeight: '240px', overflowY: 'auto'}}>\n        {sliced.map((run, ii) => (\n          <Box\n            key={run.id}\n            border={ii > 0 ? {side: 'top', width: 1, color: Colors.KeylineGray} : null}\n            flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'center'}}\n            padding={{vertical: 8, horizontal: 12}}\n          >\n            <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n              <RunStatusDot status={run.status} size={8} />\n              {run.status === 'SCHEDULED' ? (\n                'Scheduled'\n              ) : (\n                <Link to={`/instance/runs/${run.id}`}>\n                  <Mono>{run.id.slice(0, 8)}</Mono>\n                </Link>\n              )}\n            </Box>\n            <Mono>\n              {run.status === 'SCHEDULED' ? (\n                <TimestampDisplay timestamp={run.startTime / 1000} />\n              ) : (\n                <TimeElapsed startUnix={run.startTime / 1000} endUnix={run.endTime / 1000} />\n              )}\n            </Mono>\n          </Box>\n        ))}\n      </div>\n      {remaining > 0 ? (\n        <Box padding={12} border={{side: 'top', width: 1, color: Colors.KeylineGray}}>\n          <Link to={`${job.path}runs`}>+ {remaining} more</Link>\n        </Box>\n      ) : null}\n    </Box>\n  );\n};\n\nconst HoverContentJobName = styled.strong`\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n`;\n","export const findDuplicateRepoNames = (repoNames: string[]) => {\n  const uniques = new Set<string>();\n  const duplicates = new Set<string>();\n  repoNames.forEach((repoName) => {\n    if (uniques.has(repoName)) {\n      duplicates.add(repoName);\n    } else {\n      uniques.add(repoName);\n    }\n  });\n  return duplicates;\n};\n","import {gql, useQuery} from '@apollo/client';\nimport * as React from 'react';\n\nimport {useFeatureFlags} from '../app/Flags';\nimport {SCHEDULE_FUTURE_TICKS_FRAGMENT} from '../instance/NextTick';\nimport {InstigationStatus, RunStatus} from '../types/globalTypes';\nimport {LoadingSpinner} from '../ui/Loading';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePipelinePath} from '../workspace/workspacePath';\n\nimport {doneStatuses} from './RunStatuses';\nimport {RunTimeline, TimelineJob, TimelineRun} from './RunTimeline';\nimport {RUN_TIME_FRAGMENT} from './RunUtils';\nimport {overlap} from './batchRunsForTimeline';\nimport {RunTimelineQuery, RunTimelineQueryVariables} from './types/RunTimelineQuery';\n\nexport type HourWindow = '1' | '6' | '12' | '24';\n\nexport const makeJobKey = (repoAddress: RepoAddress, jobName: string) =>\n  `${jobName}-${repoAddressAsString(repoAddress)}`;\n\nexport const QueryfulRunTimeline = ({\n  range,\n  jobs,\n  hourWindow,\n}: {\n  range: [number, number];\n  jobs: TimelineJob[];\n  hourWindow: HourWindow;\n}) => {\n  const [start, end] = range;\n  const [jobsWithRuns, setJobsWithRuns] = React.useState<TimelineJob[]>([]);\n  const [loadedWindow, setLoadedWindow] = React.useState<HourWindow>();\n\n  const {flagRunBucketing} = useFeatureFlags();\n\n  const {data, loading} = useQuery<RunTimelineQuery, RunTimelineQueryVariables>(\n    RUN_TIMELINE_QUERY,\n    {\n      fetchPolicy: 'network-only',\n      notifyOnNetworkStatusChange: true,\n      variables: {\n        inProgressFilter: {\n          statuses: [RunStatus.CANCELING, RunStatus.STARTED],\n          createdBefore: end / 1000.0,\n        },\n        terminatedFilter: {\n          statuses: Array.from(doneStatuses),\n          createdBefore: end / 1000.0,\n          updatedAfter: start / 1000.0,\n        },\n      },\n    },\n  );\n\n  const jobsByKey = React.useMemo(() => {\n    return jobs.reduce((accum, job: TimelineJob) => {\n      return {...accum, [job.key]: job};\n    }, {} as {[key: string]: TimelineJob});\n  }, [jobs]);\n\n  React.useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    const {unterminated, terminated, workspaceOrError} = data || {};\n\n    const runsByJob: {[jobName: string]: TimelineRun[]} = {};\n    const now = Date.now();\n\n    // fetch all the runs in the given range\n    [\n      ...(unterminated?.__typename === 'Runs' ? unterminated.results : []),\n      ...(terminated?.__typename === 'Runs' ? terminated.results : []),\n    ].forEach((run) => {\n      if (!run.startTime) {\n        return;\n      }\n      if (\n        !overlap(\n          {start, end},\n          {\n            start: run.startTime * 1000,\n            end: run.endTime ? run.endTime * 1000 : now,\n          },\n        )\n      ) {\n        return;\n      }\n      runsByJob[run.pipelineName] = [\n        ...(runsByJob[run.pipelineName] || []),\n        {\n          id: run.id,\n          status: run.status,\n          startTime: run.startTime * 1000,\n          endTime: run.endTime ? run.endTime * 1000 : now,\n        },\n      ];\n    });\n\n    const jobs = [];\n    if (workspaceOrError && workspaceOrError.__typename === 'Workspace') {\n      for (const locationEntry of workspaceOrError.locationEntries) {\n        if (\n          locationEntry.__typename === 'WorkspaceLocationEntry' &&\n          locationEntry.locationOrLoadError?.__typename === 'RepositoryLocation'\n        ) {\n          for (const repository of locationEntry.locationOrLoadError.repositories) {\n            const repoAddress = buildRepoAddress(\n              repository.name,\n              locationEntry.locationOrLoadError.name,\n            );\n            for (const pipeline of repository.pipelines) {\n              const jobKey = makeJobKey(repoAddress, pipeline.name);\n              if (!(jobKey in jobsByKey)) {\n                continue;\n              }\n\n              const schedules = (repository.schedules || []).filter(\n                (schedule) => schedule.pipelineName === pipeline.name,\n              );\n\n              const jobTicks: TimelineRun[] = [];\n              for (const schedule of schedules) {\n                if (schedule.scheduleState.status === InstigationStatus.RUNNING) {\n                  schedule.futureTicks.results.forEach(({timestamp}) => {\n                    const startTime = timestamp * 1000;\n                    if (overlap({start, end}, {start: startTime, end: startTime})) {\n                      jobTicks.push({\n                        id: `${schedule.pipelineName}-future-run-${timestamp}`,\n                        status: 'SCHEDULED',\n                        startTime,\n                        endTime: startTime + 10 * 1000,\n                      });\n                    }\n                  });\n                }\n              }\n\n              const jobRuns = runsByJob[pipeline.name] || [];\n              if (jobTicks.length || jobRuns.length) {\n                jobs.push({\n                  key: jobKey,\n                  jobName: pipeline.name,\n                  repoAddress,\n                  path: workspacePipelinePath({\n                    repoName: repoAddress.name,\n                    repoLocation: repoAddress.location,\n                    pipelineName: pipeline.name,\n                    isJob: pipeline.isJob,\n                  }),\n                  runs: [...jobRuns, ...jobTicks],\n                });\n              }\n            }\n          }\n        }\n      }\n    }\n\n    const earliest = jobs.reduce((accum, job) => {\n      const startTimes = job.runs.map((job) => job.startTime);\n      return {...accum, [job.key]: Math.min(...startTimes)};\n    }, {} as {[jobKey: string]: number});\n\n    setJobsWithRuns(jobs.sort((a, b) => earliest[a.key] - earliest[b.key]));\n    setLoadedWindow(hourWindow);\n  }, [data, start, end, loading, jobsByKey, hourWindow]);\n\n  if (loading && hourWindow !== loadedWindow) {\n    return <LoadingSpinner purpose=\"section\" />;\n  }\n\n  return <RunTimeline range={[start, end]} jobs={jobsWithRuns} bucketByRepo={flagRunBucketing} />;\n};\n\nconst RUN_TIMELINE_QUERY = gql`\n  query RunTimelineQuery($inProgressFilter: RunsFilter!, $terminatedFilter: RunsFilter!) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ${RUN_TIME_FRAGMENT}\n  ${SCHEDULE_FUTURE_TICKS_FRAGMENT}\n`;\n","import {Box, Colors, Icon, IconWrapper} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nexport const SECTION_HEADER_HEIGHT = 32;\n\ninterface Props {\n  expanded: boolean;\n  onClick: () => void;\n  repoName: string;\n  repoLocation: string;\n  showLocation: boolean;\n  rightElement?: React.ReactNode;\n}\n\nexport const RepoSectionHeader = (props: Props) => {\n  const {expanded, onClick, repoName, repoLocation, showLocation, rightElement} = props;\n  return (\n    <SectionHeaderButton $open={expanded} onClick={onClick}>\n      <Box\n        flex={{alignItems: 'center', justifyContent: 'space-between'}}\n        padding={{left: 20, right: 20}}\n      >\n        <Box flex={{alignItems: 'center', gap: 8}}>\n          <Icon name=\"folder\" color={Colors.Dark} />\n          <div>\n            <RepoName>{repoName}</RepoName>\n            {showLocation ? <RepoLocation>{`@${repoLocation}`}</RepoLocation> : null}\n          </div>\n        </Box>\n        <Box flex={{alignItems: 'center', gap: 8}}>\n          {rightElement}\n          <Box margin={{top: 2}}>\n            <Icon name=\"arrow_drop_down\" />\n          </Box>\n        </Box>\n      </Box>\n    </SectionHeaderButton>\n  );\n};\n\nconst SectionHeaderButton = styled.button<{$open: boolean}>`\n  background-color: ${Colors.Gray50};\n  border: 0;\n  box-shadow: inset 0px -1px 0 ${Colors.KeylineGray}, inset 0px 1px 0 ${Colors.KeylineGray};\n  cursor: pointer;\n  display: block;\n  width: 100%;\n  margin: 0;\n  height: ${SECTION_HEADER_HEIGHT}px;\n  text-align: left;\n\n  :focus,\n  :active {\n    outline: none;\n  }\n\n  :hover {\n    background-color: ${Colors.Gray100};\n  }\n\n  ${IconWrapper}[aria-label=\"arrow_drop_down\"] {\n    transition: transform 100ms linear;\n    ${({$open}) => ($open ? null : `transform: rotate(-90deg);`)}\n  }\n`;\n\nconst RepoName = styled.span`\n  font-weight: 600;\n`;\n\nconst RepoLocation = styled.span`\n  font-weight: 400;\n  color: ${Colors.Gray700};\n`;\n","import {Box, Button, Group, IconName, Icon} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {SharedToaster} from '../app/DomUtils';\nimport {filterByQuery, GraphQueryItem} from '../app/GraphQueryImpl';\nimport {usePermissions} from '../app/Permissions';\nimport {LaunchButtonConfiguration, LaunchButtonDropdown} from '../launchpad/LaunchButton';\nimport {buildRepoPath} from '../workspace/buildRepoAddress';\nimport {useRepositoryForRun} from '../workspace/useRepositoryForRun';\n\nimport {IRunMetadataDict, IStepState} from './RunMetadataProvider';\nimport {doneStatuses, failedStatuses} from './RunStatuses';\nimport {DagsterTag} from './RunTag';\nimport {ReExecutionStyle} from './RunUtils';\nimport {StepSelection} from './StepSelection';\nimport {TerminationDialog, TerminationState} from './TerminationDialog';\nimport {RunFragment} from './types/RunFragment';\n\ninterface RunActionButtonsProps {\n  run: RunFragment;\n  selection: StepSelection;\n  graph: GraphQueryItem[];\n  metadata: IRunMetadataDict;\n  onLaunch: (style: ReExecutionStyle) => Promise<void>;\n}\n\nexport const CancelRunButton: React.FC<{run: RunFragment}> = ({run}) => {\n  const {id: runId, canTerminate} = run;\n  const [showDialog, setShowDialog] = React.useState<boolean>(false);\n  const closeDialog = React.useCallback(() => setShowDialog(false), []);\n\n  const onComplete = React.useCallback(\n    (terminationState: TerminationState) => {\n      const {errors} = terminationState;\n      const error = runId && errors[runId];\n      if (error && 'message' in error) {\n        SharedToaster.show({\n          message: error.message,\n          icon: 'error',\n          intent: 'danger',\n        });\n      }\n    },\n    [runId],\n  );\n\n  if (!runId) {\n    return null;\n  }\n\n  return (\n    <>\n      <Button\n        icon={<Icon name=\"cancel\" />}\n        intent=\"danger\"\n        disabled={showDialog}\n        onClick={() => setShowDialog(true)}\n      >\n        Terminate\n      </Button>\n      <TerminationDialog\n        isOpen={showDialog}\n        onClose={closeDialog}\n        onComplete={onComplete}\n        selectedRuns={{[runId]: canTerminate}}\n      />\n    </>\n  );\n};\n\nfunction stepSelectionWithState(selection: StepSelection, metadata: IRunMetadataDict) {\n  const stepStates = selection.keys.map(\n    (key) => (key && metadata.steps[key]?.state) || IStepState.PREPARING,\n  );\n\n  return {\n    ...selection,\n    present: selection.keys.length > 0,\n    failed: selection.keys.length && stepStates.includes(IStepState.FAILED),\n    finished: stepStates.every((stepState) =>\n      [IStepState.FAILED, IStepState.SUCCEEDED].includes(stepState),\n    ),\n  };\n}\n\nfunction stepSelectionFromRunTags(\n  run: RunFragment,\n  graph: GraphQueryItem[],\n  metadata: IRunMetadataDict,\n) {\n  const tag = run.tags.find((t) => t.key === DagsterTag.StepSelection);\n  if (!tag) {\n    return null;\n  }\n  return stepSelectionWithState(\n    {keys: filterByQuery(graph, tag.value).all.map((k) => k.name), query: tag.value},\n    metadata,\n  );\n}\n\nexport const canRunAllSteps = (run: RunFragment) => doneStatuses.has(run.status);\nexport const canRunFromFailure = (run: RunFragment) =>\n  run.executionPlan && failedStatuses.has(run.status);\n\nexport const RunActionButtons: React.FC<RunActionButtonsProps> = (props) => {\n  const {metadata, graph, onLaunch, run} = props;\n  const artifactsPersisted = run?.executionPlan?.artifactsPersisted;\n  const {canLaunchPipelineReexecution} = usePermissions();\n  const pipelineError = usePipelineAvailabilityErrorForRun(run);\n\n  const selection = stepSelectionWithState(props.selection, metadata);\n\n  const currentRunSelection = stepSelectionFromRunTags(run, graph, metadata);\n  const currentRunIsFromFailure = run.tags?.some(\n    (t) => t.key === DagsterTag.IsResumeRetry && t.value === 'true',\n  );\n\n  const full: LaunchButtonConfiguration = {\n    icon: 'cached',\n    scope: '*',\n    title: 'All steps in root run',\n    tooltip: 'Re-execute the pipeline run from scratch',\n    disabled: !canRunAllSteps(run),\n    onClick: () => onLaunch({type: 'all'}),\n  };\n\n  const same: LaunchButtonConfiguration = {\n    icon: 'linear_scale',\n    scope: currentRunSelection?.query || '*',\n    title: 'Same steps',\n    disabled: !currentRunSelection || !(currentRunSelection.finished || currentRunSelection.failed),\n    tooltip: (\n      <div>\n        {!currentRunSelection || !currentRunSelection.present\n          ? 'Re-executes the same step subset used for this run if one was present.'\n          : !currentRunSelection.finished\n          ? 'Wait for all of the steps to finish to re-execute the same subset.'\n          : 'Re-execute the same step subset used for this run:'}\n        <StepSelectionDescription selection={currentRunSelection} />\n      </div>\n    ),\n    onClick: () => onLaunch({type: 'selection', selection: currentRunSelection!}),\n  };\n\n  const selected: LaunchButtonConfiguration = {\n    icon: 'op',\n    scope: selection.query,\n    title: selection.keys.length > 1 ? 'Selected steps' : 'Selected step',\n    disabled: !selection.present || !(selection.finished || selection.failed),\n    tooltip: (\n      <div>\n        {!selection.present\n          ? 'Select a step or type a step subset to re-execute.'\n          : !selection.finished\n          ? 'Wait for the steps to finish to re-execute them.'\n          : 'Re-execute the selected steps with existing configuration:'}\n        <StepSelectionDescription selection={selection} />\n      </div>\n    ),\n    onClick: () => onLaunch({type: 'selection', selection}),\n  };\n\n  const fromSelected: LaunchButtonConfiguration = {\n    icon: 'arrow_forward',\n    title: 'From selected',\n    disabled: !canRunAllSteps(run) || selection.keys.length !== 1,\n    tooltip: 'Re-execute the pipeline downstream from the selected steps',\n    onClick: () => {\n      if (!run.executionPlan) {\n        console.warn('Run execution plan must be present to launch from-selected execution');\n        return Promise.resolve();\n      }\n      const selectionAndDownstreamQuery = selection.keys.map((k) => `${k}*`).join(',');\n      const selectionKeys = filterByQuery(graph, selectionAndDownstreamQuery).all.map(\n        (node) => node.name,\n      );\n\n      return onLaunch({\n        type: 'selection',\n        selection: {\n          keys: selectionKeys,\n          query: selectionAndDownstreamQuery,\n        },\n      });\n    },\n  };\n\n  const fromFailureEnabled = canRunFromFailure(run);\n\n  const fromFailure: LaunchButtonConfiguration = {\n    icon: 'arrow_forward',\n    title: 'From failure',\n    disabled: !fromFailureEnabled,\n    tooltip: !fromFailureEnabled\n      ? 'Retry is only enabled when the pipeline has failed.'\n      : 'Retry the pipeline run, skipping steps that completed successfully',\n    onClick: () => onLaunch({type: 'from-failure'}),\n  };\n\n  if (!artifactsPersisted) {\n    [selected, same, fromFailure, fromSelected].forEach((option) => {\n      option.disabled = true;\n      option.title =\n        'Retry and re-execute are only enabled on persistent storage. Try rerunning with a different storage configuration.';\n    });\n  }\n\n  const options = [full, same, selected, fromSelected, fromFailure];\n  const preferredRerun = selection.present\n    ? selected\n    : fromFailureEnabled && currentRunIsFromFailure\n    ? fromFailure\n    : currentRunSelection?.present\n    ? same\n    : null;\n\n  const primary = artifactsPersisted && preferredRerun ? preferredRerun : full;\n\n  const tooltip = () => {\n    if (pipelineError?.tooltip) {\n      return pipelineError?.tooltip;\n    }\n    return canLaunchPipelineReexecution.enabled\n      ? undefined\n      : canLaunchPipelineReexecution.disabledReason;\n  };\n\n  return (\n    <Group direction=\"row\" spacing={8}>\n      <Box flex={{direction: 'row'}}>\n        <LaunchButtonDropdown\n          runCount={1}\n          primary={primary}\n          options={options}\n          title={\n            primary.scope === '*'\n              ? `Re-execute all (*)`\n              : primary.scope\n              ? `Re-execute (${primary.scope})`\n              : `Re-execute ${primary.title}`\n          }\n          tooltip={tooltip()}\n          icon={pipelineError?.icon}\n          disabled={pipelineError?.disabled || !canLaunchPipelineReexecution.enabled}\n        />\n      </Box>\n      {!doneStatuses.has(run.status) ? <CancelRunButton run={run} /> : null}\n    </Group>\n  );\n};\n\nfunction usePipelineAvailabilityErrorForRun(\n  run: RunFragment | null | undefined,\n): null | {tooltip?: string | JSX.Element; icon?: IconName; disabled: boolean} {\n  const repoMatch = useRepositoryForRun(run);\n\n  // The run hasn't loaded, so no error.\n  if (!run) {\n    return null;\n  }\n\n  if (!run.pipelineSnapshotId) {\n    return {\n      icon: 'error',\n      tooltip: `\"${run.pipelineName}\" could not be found.`,\n      disabled: true,\n    };\n  }\n\n  if (repoMatch) {\n    const {type: matchType} = repoMatch;\n\n    // The run matches the repository and active snapshot ID for the pipeline. This is the best\n    // we can do, so consider it safe to run as-is.\n    if (matchType === 'origin-and-snapshot') {\n      return null;\n    }\n\n    // Beyond this point, we're just trying our best. Warn the user that behavior might not be what\n    // they expect.\n\n    if (matchType === 'origin-only') {\n      // Only the repo is a match.\n      return {\n        icon: 'warning',\n        tooltip: `The workspace version of \"${run.pipelineName}\" may be different than the one used for the original run.`,\n        disabled: false,\n      };\n    }\n\n    if (matchType === 'snapshot-only') {\n      // Only the snapshot ID matched, but not the repo.\n      return {\n        icon: 'warning',\n        tooltip: (\n          <Group direction=\"column\" spacing={4}>\n            <div>{`The original run loaded \"${run.pipelineName}\" from a different repository.`}</div>\n            {run.repositoryOrigin ? (\n              <div>\n                Original repository:{' '}\n                <strong>\n                  {run.repositoryOrigin.repositoryName}@\n                  {run.repositoryOrigin.repositoryLocationName}\n                </strong>\n              </div>\n            ) : null}\n          </Group>\n        ),\n        disabled: false,\n      };\n    }\n\n    // Only the pipeline name matched. This could be from any repo in the workspace.\n    return {\n      icon: 'warning',\n      tooltip: `The pipeline \"${run.pipelineName}\" may be a different version from the original pipeline run.`,\n      disabled: false,\n    };\n  }\n\n  // We could not find a repo that contained this pipeline. Inform the user that they should\n  // load the missing repository.\n  const repoForRun = run.repositoryOrigin?.repositoryName;\n  const repoLocationForRun = run.repositoryOrigin?.repositoryLocationName;\n\n  const tooltip = (\n    <Group direction=\"column\" spacing={8}>\n      <div>{`\"${run.pipelineName}\" is not available in the current workspace.`}</div>\n      {repoForRun && repoLocationForRun ? (\n        <div>{`Load repository ${buildRepoPath(\n          repoForRun,\n          repoLocationForRun,\n        )} and try again.`}</div>\n      ) : null}\n    </Group>\n  );\n\n  return {\n    icon: 'error',\n    tooltip,\n    disabled: true,\n  };\n}\n\nconst StepSelectionDescription: React.FC<{selection: StepSelection | null}> = ({selection}) => (\n  <div style={{paddingLeft: '10px'}}>\n    {(selection?.keys || []).map((step) => (\n      <span key={step} style={{display: 'block'}}>{`* ${step}`}</span>\n    ))}\n  </div>\n);\n","import {\n  Box,\n  Button,\n  ButtonLink,\n  Colors,\n  Dialog,\n  DialogFooter,\n  Icon,\n  Table,\n  Tag,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {displayNameForAssetKey, tokenForAssetKey} from '../asset-graph/Utils';\nimport {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';\nimport {AssetKey} from '../assets/types';\n\nconst MAX_ASSET_TAGS = 3;\n\nexport const RunAssetKeyTags: React.FC<{\n  assetKeys: AssetKey[] | null;\n  clickableTags?: boolean;\n}> = React.memo(({assetKeys, clickableTags}) => {\n  const [showMore, setShowMore] = React.useState(false);\n\n  if (!assetKeys || !assetKeys.length) {\n    return null;\n  }\n\n  const assetCount = assetKeys.length;\n  const displayed = assetCount <= MAX_ASSET_TAGS ? assetKeys : [];\n  const hidden = assetCount - displayed.length;\n\n  if (clickableTags) {\n    return (\n      <>\n        {displayed.map((assetKey, ii) => (\n          <Link to={assetDetailsPathForKey(assetKey)} key={`${tokenForAssetKey(assetKey)}-${ii}`}>\n            <Tag intent=\"none\" interactive icon=\"asset\">\n              {displayNameForAssetKey(assetKey)}\n            </Tag>\n          </Link>\n        ))}\n        {hidden > 0 && (\n          <ButtonLink onClick={() => setShowMore(true)}>\n            <Tag intent=\"none\" icon=\"asset\">\n              {hidden} assets\n            </Tag>\n          </ButtonLink>\n        )}\n        <Dialog\n          title=\"Assets in Run\"\n          onClose={() => setShowMore(false)}\n          style={{minWidth: '400px', maxWidth: '80vw', maxHeight: '70vh'}}\n          isOpen={showMore}\n        >\n          {showMore ? (\n            <Box\n              padding={{bottom: 12}}\n              border={{side: 'bottom', color: Colors.KeylineGray, width: 1}}\n              style={{overflowY: 'auto'}}\n              background={Colors.White}\n            >\n              <Table>\n                <thead>\n                  <tr>\n                    <th>Asset key</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {assetKeys.map((assetKey, ii) => (\n                    <tr key={`${tokenForAssetKey(assetKey)}-${ii}`}>\n                      <td>\n                        <Link\n                          to={assetDetailsPathForKey(assetKey)}\n                          key={tokenForAssetKey(assetKey)}\n                        >\n                          {displayNameForAssetKey(assetKey)}\n                        </Link>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </Table>\n            </Box>\n          ) : null}\n          <DialogFooter>\n            <Button intent=\"primary\" autoFocus onClick={() => setShowMore(false)}>\n              OK\n            </Button>\n          </DialogFooter>\n        </Dialog>\n      </>\n    );\n  }\n\n  return (\n    <Box flex={{direction: 'row', gap: 8, wrap: 'wrap', alignItems: 'center'}}>\n      <Icon color={Colors.Gray400} name=\"asset\" size={16} />\n      {`${displayed.map(displayNameForAssetKey).join(', ')}${\n        hidden > 0 ? ` + ${hidden} more` : ''\n      }`}\n    </Box>\n  );\n});\n","import * as React from 'react';\n\nimport {RunFragment} from './types/RunFragment';\n\nconst initialContext = undefined;\nexport const RunContext = React.createContext<RunFragment | undefined>(initialContext);\n","import {gql} from '@apollo/client';\nimport {\n  Button,\n  Colors,\n  DialogFooter,\n  Dialog,\n  Group,\n  Icon,\n  MenuItem,\n  Menu,\n  MetadataTable,\n  Popover,\n  Tooltip,\n  Subheading,\n  Box,\n  StyledReadOnlyCodeMirror,\n} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {AppContext} from '../app/AppContext';\nimport {SharedToaster} from '../app/DomUtils';\nimport {useCopyToClipboard} from '../app/browser';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {RunStatus} from '../types/globalTypes';\nimport {AnchorButton} from '../ui/AnchorButton';\nimport {workspacePathFromRunDetails} from '../workspace/workspacePath';\n\nimport {RunTags} from './RunTags';\nimport {TimeElapsed} from './TimeElapsed';\nimport {RunDetailsFragment} from './types/RunDetailsFragment';\nimport {RunFragment} from './types/RunFragment';\n\nexport const timingStringForStatus = (status?: RunStatus) => {\n  switch (status) {\n    case RunStatus.QUEUED:\n      return 'Queued';\n    case RunStatus.CANCELED:\n      return 'Canceled';\n    case RunStatus.CANCELING:\n      return 'Canceling';\n    case RunStatus.FAILURE:\n      return 'Failed';\n    case RunStatus.NOT_STARTED:\n      return 'Waiting to start';\n    case RunStatus.STARTED:\n      return 'Started';\n    case RunStatus.STARTING:\n      return 'Starting';\n    case RunStatus.SUCCESS:\n      return 'Succeeded';\n    default:\n      return 'None';\n  }\n};\n\nconst LoadingOrValue: React.FC<{\n  loading: boolean;\n  children: () => React.ReactNode;\n}> = ({loading, children}) =>\n  loading ? <div style={{color: Colors.Gray400}}>Loading</div> : <div>{children()}</div>;\n\nconst TIME_FORMAT = {showSeconds: true, showTimezone: false};\n\nexport const RunDetails: React.FC<{\n  loading: boolean;\n  run: RunDetailsFragment | undefined;\n}> = ({loading, run}) => {\n  return (\n    <MetadataTable\n      spacing={0}\n      rows={[\n        {\n          key: 'Started',\n          value: (\n            <LoadingOrValue loading={loading}>\n              {() => {\n                if (run?.startTime) {\n                  return <TimestampDisplay timestamp={run.startTime} timeFormat={TIME_FORMAT} />;\n                }\n                return (\n                  <div style={{color: Colors.Gray400}}>{timingStringForStatus(run?.status)}</div>\n                );\n              }}\n            </LoadingOrValue>\n          ),\n        },\n        {\n          key: 'Ended',\n          value: (\n            <LoadingOrValue loading={loading}>\n              {() => {\n                if (run?.endTime) {\n                  return <TimestampDisplay timestamp={run.endTime} timeFormat={TIME_FORMAT} />;\n                }\n                return (\n                  <div style={{color: Colors.Gray400}}>{timingStringForStatus(run?.status)}</div>\n                );\n              }}\n            </LoadingOrValue>\n          ),\n        },\n        {\n          key: 'Duration',\n          value: (\n            <LoadingOrValue loading={loading}>\n              {() => {\n                if (run?.startTime) {\n                  return <TimeElapsed startUnix={run.startTime} endUnix={run.endTime} />;\n                }\n                return (\n                  <div style={{color: Colors.Gray400}}>{timingStringForStatus(run?.status)}</div>\n                );\n              }}\n            </LoadingOrValue>\n          ),\n        },\n      ]}\n    />\n  );\n};\n\nexport const RunConfigDialog: React.FC<{run: RunFragment; isJob: boolean}> = ({run, isJob}) => {\n  const [showDialog, setShowDialog] = React.useState(false);\n  const {rootServerURI} = React.useContext(AppContext);\n  const {runConfigYaml} = run;\n  const copy = useCopyToClipboard();\n\n  const copyConfig = () => {\n    copy(runConfigYaml);\n    SharedToaster.show({\n      intent: 'success',\n      icon: 'copy_to_clipboard_done',\n      message: 'Copied!',\n    });\n  };\n\n  return (\n    <div>\n      <Group direction=\"row\" spacing={8}>\n        <AnchorButton\n          icon={<Icon name=\"edit\" />}\n          to={workspacePathFromRunDetails({\n            id: run.id,\n            repositoryName: run.repositoryOrigin?.repositoryName,\n            repositoryLocationName: run.repositoryOrigin?.repositoryLocationName,\n            pipelineName: run.pipelineName,\n            isJob,\n          })}\n        >\n          Open in Launchpad\n        </AnchorButton>\n        <Button icon={<Icon name=\"tag\" />} onClick={() => setShowDialog(true)}>\n          View tags and config\n        </Button>\n        <Popover\n          position=\"bottom-right\"\n          content={\n            <Menu>\n              <Tooltip\n                content=\"Loadable in dagit-debug\"\n                position=\"bottom-right\"\n                targetTagName=\"div\"\n              >\n                <MenuItem\n                  text=\"Download debug file\"\n                  icon={<Icon name=\"download_for_offline\" />}\n                  onClick={() => window.open(`${rootServerURI}/download_debug/${run.runId}`)}\n                />\n              </Tooltip>\n            </Menu>\n          }\n        >\n          <Button icon={<Icon name=\"expand_more\" />} />\n        </Popover>\n      </Group>\n      <Dialog\n        isOpen={showDialog}\n        onClose={() => setShowDialog(false)}\n        style={{width: '800px'}}\n        title=\"Run configuration\"\n      >\n        <Box flex={{direction: 'column', gap: 20}}>\n          <Box flex={{direction: 'column', gap: 12}} padding={{top: 16, horizontal: 24}}>\n            <Subheading>Tags</Subheading>\n            <div>\n              <RunTags tags={run.tags} mode={isJob ? null : run.mode} />\n            </div>\n          </Box>\n          <div>\n            <Box\n              border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n              padding={{left: 24, bottom: 16}}\n            >\n              <Subheading>Config</Subheading>\n            </Box>\n            <StyledReadOnlyCodeMirror\n              value={runConfigYaml}\n              options={{lineNumbers: true, mode: 'yaml'}}\n            />\n          </div>\n        </Box>\n        <DialogFooter topBorder>\n          <Button onClick={() => copyConfig()} intent=\"none\">\n            Copy config\n          </Button>\n          <Button onClick={() => setShowDialog(false)} intent=\"primary\">\n            OK\n          </Button>\n        </DialogFooter>\n      </Dialog>\n    </div>\n  );\n};\n\nexport const RUN_DETAILS_FRAGMENT = gql`\n  fragment RunDetailsFragment on Run {\n    id\n    startTime\n    endTime\n    status\n  }\n`;\n","import {gql} from '@apollo/client';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {EXECUTION_PLAN_TO_GRAPH_FRAGMENT} from '../gantt/toGraphQueryItems';\n\nimport {LOGS_SCROLLING_TABLE_MESSAGE_FRAGMENT} from './LogsScrollingTable';\nimport {RUN_DETAILS_FRAGMENT} from './RunDetails';\nimport {RUN_METADATA_PROVIDER_MESSAGE_FRAGMENT} from './RunMetadataProvider';\n\nexport const RUN_FRAGMENT_FOR_REPOSITORY_MATCH = gql`\n  fragment RunFragmentForRepositoryMatch on Run {\n    id\n    pipelineName\n    pipelineSnapshotId\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n  }\n`;\n\nexport const RunFragments = {\n  RunFragment: gql`\n    fragment RunFragment on Run {\n      id\n      runConfigYaml\n      runId\n      canTerminate\n      status\n      mode\n      tags {\n        key\n        value\n      }\n      assets {\n        id\n        key {\n          path\n        }\n      }\n      rootRunId\n      parentRunId\n      pipelineName\n      solidSelection\n      assetSelection {\n        ... on AssetKey {\n          path\n        }\n      }\n      pipelineSnapshotId\n      executionPlan {\n        artifactsPersisted\n        ...ExecutionPlanToGraphFragment\n      }\n      stepKeysToExecute\n      ...RunFragmentForRepositoryMatch\n      ...RunDetailsFragment\n      updateTime\n      stepStats {\n        stepKey\n        status\n        startTime\n        endTime\n        attempts {\n          startTime\n          endTime\n        }\n        markers {\n          startTime\n          endTime\n        }\n      }\n    }\n\n    ${EXECUTION_PLAN_TO_GRAPH_FRAGMENT}\n    ${RUN_FRAGMENT_FOR_REPOSITORY_MATCH}\n    ${RUN_DETAILS_FRAGMENT}\n  `,\n  RunDagsterRunEventFragment: gql`\n    fragment RunDagsterRunEventFragment on DagsterRunEvent {\n      ... on MessageEvent {\n        message\n        timestamp\n        level\n        stepKey\n      }\n\n      ...LogsScrollingTableMessageFragment\n      ...RunMetadataProviderMessageFragment\n    }\n\n    ${RUN_METADATA_PROVIDER_MESSAGE_FRAGMENT}\n    ${LOGS_SCROLLING_TABLE_MESSAGE_FRAGMENT}\n    ${PYTHON_ERROR_FRAGMENT}\n  `,\n};\n","import {gql} from '@apollo/client';\nimport * as React from 'react';\n\nimport {METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {StepEventStatus} from '../types/globalTypes';\n\nimport {LogsProviderLogs} from './LogsProvider';\nimport {RunContext} from './RunContext';\nimport {RunFragment} from './types/RunFragment';\nimport {RunMetadataProviderMessageFragment} from './types/RunMetadataProviderMessageFragment';\n\nexport enum IStepState {\n  PREPARING = 'preparing',\n  RETRY_REQUESTED = 'retry-requested',\n  RUNNING = 'running',\n  SUCCEEDED = 'succeeded',\n  SKIPPED = 'skipped',\n  FAILED = 'failed',\n  UNKNOWN = 'unknown', // run exited without step reaching a final state\n}\n\nconst BOX_EXIT_STATES = [\n  IStepState.RETRY_REQUESTED,\n  IStepState.SUCCEEDED,\n  IStepState.FAILED,\n  IStepState.UNKNOWN,\n];\n\ninterface IMarker {\n  key: string;\n  start?: number;\n  end?: number;\n}\n\nexport interface IStepAttempt {\n  start: number;\n  end?: number;\n  exitState?: IStepState;\n}\n\nexport interface IStepMetadata {\n  // current state\n  state: IStepState;\n\n  // execution start and stop (user-code) inclusive of all retries\n  start?: number;\n  end?: number;\n\n  // current state + prev state transition times\n  transitions: {\n    state: IStepState;\n    time: number;\n  }[];\n\n  // transition times organized into start+stop+exit state pairs.\n  // This is the metadata used to render boxes on the realtime vi.z\n  attempts: IStepAttempt[];\n\n  // accumulated metadata\n  markers: IMarker[];\n}\n\nexport interface ILogCaptureInfo {\n  logKey: string;\n  stepKeys: string[];\n  pid?: string;\n}\n\nexport interface IRunMetadataDict {\n  firstLogAt: number;\n  mostRecentLogAt: number;\n  startingProcessAt?: number;\n  startedProcessAt?: number;\n  startedPipelineAt?: number;\n  exitedAt?: number;\n  processId?: number;\n  globalMarkers: IMarker[];\n  steps: {\n    [stepKey: string]: IStepMetadata;\n  };\n  logCaptureSteps?: {\n    [logKey: string]: ILogCaptureInfo;\n  };\n}\n\nexport const EMPTY_RUN_METADATA: IRunMetadataDict = {\n  firstLogAt: 0,\n  mostRecentLogAt: 0,\n  globalMarkers: [],\n  steps: {},\n};\n\nexport const extractLogCaptureStepsFromLegacySteps = (stepKeys: string[]) => {\n  const logCaptureSteps = {};\n  stepKeys.forEach(\n    (stepKey) => (logCaptureSteps[stepKey] = {logKey: stepKey, stepKeys: [stepKey]}),\n  );\n  return logCaptureSteps;\n};\n\nconst fromTimestamp = (ts: number | null) => (ts ? Math.floor(ts * 1000) : undefined);\nfunction extractMetadataFromRun(run?: RunFragment): IRunMetadataDict {\n  const metadata: IRunMetadataDict = {\n    firstLogAt: 0,\n    mostRecentLogAt: 0,\n    globalMarkers: [],\n    steps: {},\n  };\n  if (!run) {\n    return metadata;\n  }\n  if (run.startTime) {\n    metadata.startedPipelineAt = fromTimestamp(run.startTime);\n  }\n  if (run.endTime) {\n    metadata.exitedAt = fromTimestamp(run.endTime);\n  }\n\n  run.stepStats.forEach((stepStat) => {\n    metadata.steps[stepStat.stepKey] = {\n      // state:\n      // current state\n      state: stepStatusToStepState(stepStat.status),\n\n      // execution start and stop (user-code) inclusive of all retries\n      start: fromTimestamp(stepStat.startTime),\n      end: fromTimestamp(stepStat.endTime),\n\n      // current state + prev state transition times\n      transitions: [],\n\n      // transition times organized into start+stop+exit state pairs.\n      // This is the metadata used to render boxes on the realtime vi.z\n      attempts: stepStat.attempts.map(\n        (attempt, idx) =>\n          ({\n            start: fromTimestamp(attempt.startTime),\n            end: fromTimestamp(attempt.endTime),\n            exitState:\n              idx === stepStat.attempts.length - 1\n                ? stepStatusToStepState(stepStat.status)\n                : IStepState.RETRY_REQUESTED,\n          } as IStepAttempt),\n      ),\n\n      // accumulated metadata\n      markers: stepStat.markers.map((marker, idx) => ({\n        start: fromTimestamp(marker.startTime),\n        end: fromTimestamp(marker.endTime),\n        key: `marker_${idx}`,\n      })),\n    };\n  });\n\n  return metadata;\n}\n\nconst stepStatusToStepState = (status: StepEventStatus | null) => {\n  switch (status) {\n    case StepEventStatus.SUCCESS:\n      return IStepState.SUCCEEDED;\n    case StepEventStatus.FAILURE:\n      return IStepState.FAILED;\n    case StepEventStatus.SKIPPED:\n      return IStepState.SKIPPED;\n    default:\n      return IStepState.UNKNOWN;\n  }\n};\n\nexport function extractMetadataFromLogs(\n  logs: RunMetadataProviderMessageFragment[],\n): IRunMetadataDict {\n  const metadata: IRunMetadataDict = {\n    firstLogAt: 0,\n    mostRecentLogAt: 0,\n    globalMarkers: [],\n    steps: {},\n  };\n\n  // Returns the most recent marker with the given `key` without an end time\n  const upsertMarker = (set: IMarker[], key: string) => {\n    let marker = set.find((f) => f.key === key && !f.end);\n    if (!marker) {\n      marker = {key};\n      set.unshift(marker);\n    }\n    return marker;\n  };\n\n  const upsertState = (step: IStepMetadata, time: number, state: IStepState) => {\n    step.transitions.push({time, state});\n    step.state = state;\n    step.attempts = [];\n  };\n\n  logs.forEach((log) => {\n    const timestamp = Number.parseInt(log.timestamp, 10);\n\n    metadata.firstLogAt = metadata.firstLogAt\n      ? Math.min(metadata.firstLogAt, timestamp)\n      : timestamp;\n    metadata.mostRecentLogAt = Math.max(metadata.mostRecentLogAt, timestamp);\n\n    if (log.__typename === 'RunStartEvent') {\n      metadata.startedPipelineAt = timestamp;\n    }\n    if (\n      log.__typename === 'RunFailureEvent' ||\n      log.__typename === 'RunSuccessEvent' ||\n      log.__typename === 'RunCanceledEvent'\n    ) {\n      metadata.exitedAt = timestamp;\n      for (const step of Object.values(metadata.steps)) {\n        if (step.state === IStepState.RUNNING) {\n          upsertState(step, timestamp, IStepState.UNKNOWN);\n        }\n      }\n    }\n\n    if (\n      log.__typename === 'EngineEvent' ||\n      log.__typename === 'ResourceInitFailureEvent' ||\n      log.__typename === 'ResourceInitStartedEvent' ||\n      log.__typename === 'ResourceInitSuccessEvent' ||\n      log.__typename === 'StepWorkerStartedEvent' ||\n      log.__typename === 'StepWorkerStartingEvent'\n    ) {\n      if (log.markerStart) {\n        upsertMarker(metadata.globalMarkers, log.markerStart).start = timestamp;\n      }\n      if (log.markerEnd) {\n        upsertMarker(metadata.globalMarkers, log.markerEnd).end = timestamp;\n      }\n    }\n\n    if (log.__typename === 'LogsCapturedEvent') {\n      if (!metadata.logCaptureSteps) {\n        metadata.logCaptureSteps = {};\n      }\n      metadata.logCaptureSteps[log.logKey] = {\n        logKey: log.logKey,\n        stepKeys: log.stepKeys || [],\n        pid: String(log.pid),\n      };\n    }\n\n    if (log.stepKey) {\n      const stepKey = log.stepKey;\n      const step =\n        metadata.steps[stepKey] ||\n        ({\n          state: IStepState.PREPARING,\n          attempts: [],\n          transitions: [\n            {\n              state: IStepState.PREPARING,\n              time: timestamp,\n            },\n          ],\n          start: undefined,\n          end: undefined,\n          markers: [],\n        } as IStepMetadata);\n\n      if (log.__typename === 'ExecutionStepStartEvent') {\n        upsertState(step, timestamp, IStepState.RUNNING);\n        step.start = timestamp;\n      } else if (log.__typename === 'ExecutionStepSuccessEvent') {\n        upsertState(step, timestamp, IStepState.SUCCEEDED);\n        step.end = Math.max(timestamp, step.end || 0);\n      } else if (log.__typename === 'ExecutionStepSkippedEvent') {\n        upsertState(step, timestamp, IStepState.SKIPPED);\n      } else if (log.__typename === 'ExecutionStepFailureEvent') {\n        upsertState(step, timestamp, IStepState.FAILED);\n        step.end = Math.max(timestamp, step.end || 0);\n      } else if (log.__typename === 'ExecutionStepUpForRetryEvent') {\n        // We only get one event when the step fails/aborts and is queued for retry,\n        // but we create an \"exit\" state separate from the \"preparing for retry\" state\n        // so that the box representing the attempt doesn't have a final state = preparing.\n        // That'd be more confusing.\n        upsertState(step, timestamp, IStepState.RETRY_REQUESTED);\n        upsertState(step, timestamp + 1, IStepState.PREPARING);\n      } else if (log.__typename === 'ExecutionStepRestartEvent') {\n        upsertState(step, timestamp, IStepState.RUNNING);\n      } else if (log.__typename === 'ObjectStoreOperationEvent') {\n        // this indicates the step was skipped and its previous intermediates were copied\n        // so we will drop the step because we didn't execute it\n        if (log.operationResult.op === 'CP_OBJECT') {\n          return;\n        }\n      }\n\n      metadata.steps[stepKey] = step;\n    }\n  });\n\n  // Post processing\n\n  for (const step of Object.values(metadata.steps)) {\n    // Sort step transitions because logs may not arrive in order\n    step.transitions = step.transitions.sort((a, b) => a.time - b.time);\n\n    // Build step \"attempts\" from transitions\n    // - Each time we see a \"RUNNING\" step transition, we create a new attempt box unless one is open already.\n    // - Each time we see a final step transition, we set it as the end state of the current attempt.\n\n    let attempt: IStepAttempt | null = null;\n    for (const t of step.transitions) {\n      if ((!attempt || attempt.end) && t.state === IStepState.RUNNING) {\n        attempt = {start: t.time};\n        step.attempts.push(attempt);\n      }\n      if (attempt && BOX_EXIT_STATES.includes(t.state)) {\n        attempt.end = t.time;\n        attempt.exitState = t.state;\n      }\n    }\n  }\n  return metadata;\n}\n\ninterface IRunMetadataProviderProps {\n  logs: LogsProviderLogs;\n  children: (metadata: IRunMetadataDict) => React.ReactElement<any>;\n}\n\nexport const RunMetadataProvider: React.FC<IRunMetadataProviderProps> = ({logs, children}) => {\n  const run = React.useContext(RunContext);\n  const runMetadata = React.useMemo(() => extractMetadataFromRun(run), [run]);\n  const metadata = React.useMemo(\n    () => (logs.loading ? runMetadata : extractMetadataFromLogs(logs.allNodes)),\n    [logs, runMetadata],\n  );\n  return <>{children(metadata)}</>;\n};\n\nexport const RUN_METADATA_PROVIDER_MESSAGE_FRAGMENT = gql`\n  fragment RunMetadataProviderMessageFragment on DagsterRunEvent {\n    __typename\n    ... on MessageEvent {\n      message\n      timestamp\n      stepKey\n    }\n    ... on MarkerEvent {\n      markerStart\n      markerEnd\n    }\n    ... on ObjectStoreOperationEvent {\n      operationResult {\n        op\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n      }\n    }\n    ... on LogsCapturedEvent {\n      logKey\n      stepKeys\n      pid\n    }\n  }\n  ${METADATA_ENTRY_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\n\nimport {RunStatsQuery, RunStatsQueryVariables} from './types/RunStatsQuery';\n\nexport const RunStats = ({runId}: {runId: string}) => {\n  const stats = useQuery<RunStatsQuery, RunStatsQueryVariables>(RUN_STATS_QUERY, {\n    variables: {runId},\n  });\n\n  if (stats.loading || !stats.data) {\n    return (\n      <RunStatsDetailsContainer>\n        <Box padding={24} flex={{justifyContent: 'center'}}>\n          <Spinner purpose=\"section\" />\n        </Box>\n      </RunStatsDetailsContainer>\n    );\n  }\n\n  const result = stats.data.pipelineRunOrError;\n\n  if (result.__typename !== 'Run') {\n    return <PythonErrorInfo error={result} />;\n  }\n  if (result.stats.__typename !== 'RunStatsSnapshot') {\n    return <PythonErrorInfo error={result.stats} />;\n  }\n\n  const runPath = `/instance/runs/${runId}`;\n  return (\n    <RunStatsDetailsContainer>\n      <Link\n        to={`${runPath}?logs=type:STEP_SUCCESS`}\n      >{`${result.stats.stepsSucceeded} steps succeeded`}</Link>\n      <Link to={`${runPath}?logs=type:STEP_FAILURE`}>\n        {`${result.stats.stepsFailed} steps failed`}\n      </Link>\n      <Link\n        to={`${runPath}?logs=type:ASSET_MATERIALIZATION`}\n      >{`${result.stats.materializations} materializations`}</Link>\n      <Link\n        to={`${runPath}?logs=type:STEP_EXPECTATION_RESULT`}\n      >{`${result.stats.expectations} expectations passed`}</Link>\n    </RunStatsDetailsContainer>\n  );\n};\n\nconst RUN_STATS_QUERY = gql`\n  query RunStatsQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      __typename\n      ...PythonErrorFragment\n      ... on RunNotFoundError {\n        message\n      }\n      ... on Run {\n        id\n        runId\n        pipelineName\n        stats {\n          ... on RunStatsSnapshot {\n            id\n            stepsSucceeded\n            stepsFailed\n            expectations\n            materializations\n          }\n          ...PythonErrorFragment\n        }\n      }\n    }\n  }\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nconst RunStatsDetailsContainer = styled.div`\n  min-width: 200px;\n  padding: 12px;\n  color: white;\n  font-size: 12px;\n  & > a {\n    display: block;\n  }\n`;\n","import {Colors, Popover, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled, {css, keyframes} from 'styled-components/macro';\n\nimport {RunStatus} from '../types/globalTypes';\n\nimport {RunStats} from './RunStats';\nimport {inProgressStatuses, queuedStatuses} from './RunStatuses';\n\nconst RUN_STATUS_COLORS = {\n  QUEUED: Colors.Blue200,\n  NOT_STARTED: Colors.Gray600,\n  STARTING: Colors.Gray400,\n  MANAGED: Colors.Gray400,\n  STARTED: Colors.Blue500,\n  SUCCESS: Colors.Green500,\n  FAILURE: Colors.Red500,\n  CANCELING: Colors.Red500,\n  CANCELED: Colors.Red500,\n\n  // Not technically a RunStatus, but useful.\n  SCHEDULED: Colors.Blue200,\n};\n\nexport const RunStatusWithStats: React.FC<RunStatusProps & {runId: string}> = React.memo(\n  ({runId, ...rest}) => (\n    <Popover\n      position=\"bottom\"\n      interactionKind=\"hover\"\n      content={<RunStats runId={runId} />}\n      hoverOpenDelay={100}\n    >\n      <RunStatusIndicator {...rest} />\n    </Popover>\n  ),\n);\n\ninterface RunStatusProps {\n  status: RunStatus | 'SCHEDULED';\n  size?: number;\n}\n\nexport const RunStatusIndicator: React.FC<RunStatusProps> = React.memo(({status, size}) => {\n  if (status === 'STARTED') {\n    return <Spinner purpose=\"caption-text\" />;\n  }\n  if (status === 'SCHEDULED') {\n    return <RunStatusDot status={status} size={size || 12} />;\n  }\n  return (\n    <RunStatusDot\n      status={status}\n      size={size || 12}\n      pulse={inProgressStatuses.has(status) || queuedStatuses.has(status)}\n    />\n  );\n});\n\nconst pulseAnimation = keyframes`\n  0% {\n    filter: brightness(1);\n  }\n\n  50% {\n    filter: brightness(0.7);\n  }\n\n  100% {\n    filter: brightness(1);\n  }\n`;\n\nexport const RunStatusDot = styled.div<{\n  status: RunStatus | 'SCHEDULED';\n  size: number;\n  pulse?: boolean;\n}>`\n  width: ${({size}) => size}px;\n  height: ${({size}) => size}px;\n  border-radius: ${({size}) => size / 2}px;\n  transition: filter 200ms linear;\n  ${({pulse}) =>\n    pulse\n      ? css`\n          animation: ${pulseAnimation} 2s infinite;\n        `\n      : null}\n\n  background: ${({status}) => RUN_STATUS_COLORS[status]};\n  &:hover {\n    animation: none;\n    filter: brightness(0.7);\n  }\n`;\n","import {Box, Popover, Tag} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {assertUnreachable} from '../app/Util';\nimport {RunStatus} from '../types/globalTypes';\n\nimport {RunStats} from './RunStats';\nimport {RunStatusIndicator} from './RunStatusDots';\n\nconst statusToIntent = (status: RunStatus) => {\n  switch (status) {\n    case RunStatus.QUEUED:\n    case RunStatus.NOT_STARTED:\n    case RunStatus.MANAGED:\n    case RunStatus.CANCELING:\n      return 'none';\n    case RunStatus.SUCCESS:\n      return 'success';\n    case RunStatus.STARTING:\n      return 'none';\n    case RunStatus.FAILURE:\n    case RunStatus.CANCELED:\n      return 'danger';\n    case RunStatus.STARTED:\n      return 'primary';\n    default:\n      return assertUnreachable(status);\n  }\n};\n\nconst statusToString = (status: RunStatus) => {\n  switch (status) {\n    case RunStatus.QUEUED:\n      return 'Queued';\n    case RunStatus.SUCCESS:\n      return 'Success';\n    case RunStatus.STARTING:\n      return 'Starting';\n    case RunStatus.NOT_STARTED:\n      return 'Not started';\n    case RunStatus.FAILURE:\n      return 'Failure';\n    case RunStatus.STARTED:\n      return 'Started';\n    case RunStatus.MANAGED:\n      return 'Managed';\n    case RunStatus.CANCELING:\n      return 'Canceling';\n    case RunStatus.CANCELED:\n      return 'Canceled';\n    default:\n      return assertUnreachable(status);\n  }\n};\n\nexport const RunStatusTag = (props: {status: RunStatus}) => {\n  const {status} = props;\n  return (\n    <Tag intent={statusToIntent(status)}>\n      <Box flex={{direction: 'row', alignItems: 'center', gap: 4}}>\n        <RunStatusIndicator status={status} size={10} />\n        <div>{statusToString(status)}</div>\n      </Box>\n    </Tag>\n  );\n};\n\ninterface Props {\n  runId: string;\n  status: RunStatus;\n}\n\nexport const RunStatusTagWithStats = (props: Props) => {\n  const {runId, status} = props;\n  return (\n    <Popover\n      position=\"bottom-left\"\n      interactionKind=\"hover\"\n      content={<RunStats runId={runId} />}\n      hoverOpenDelay={100}\n      usePortal\n    >\n      <RunStatusTag status={status} />\n    </Popover>\n  );\n};\n","import {RunStatus} from '../types/globalTypes';\n\nexport const queuedStatuses = new Set([RunStatus.QUEUED]);\n\nexport const inProgressStatuses = new Set([\n  RunStatus.STARTED,\n  RunStatus.STARTING,\n  RunStatus.CANCELING,\n]);\n\nexport const successStatuses = new Set([RunStatus.SUCCESS]);\nexport const failedStatuses = new Set([RunStatus.FAILURE, RunStatus.CANCELED]);\nexport const canceledStatuses = new Set([RunStatus.CANCELING, RunStatus.CANCELED]);\n\nexport const doneStatuses = new Set([RunStatus.FAILURE, RunStatus.SUCCESS, RunStatus.CANCELED]);\n\nexport const cancelableStatuses = new Set([RunStatus.QUEUED, RunStatus.STARTED]);\n","import {useMutation} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {ProgressBar} from '@blueprintjs/core';\nimport {Button, Colors, DialogBody, DialogFooter, Dialog, Group, Icon, Mono} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {NavigationBlock} from './NavitationBlock';\nimport {DELETE_MUTATION} from './RunUtils';\nimport {\n  Delete,\n  Delete_deletePipelineRun_RunNotFoundError,\n  Delete_deletePipelineRun_PythonError,\n  Delete_deletePipelineRun_UnauthorizedError,\n  DeleteVariables,\n} from './types/Delete';\n\nexport interface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onComplete: () => void;\n  onTerminateInstead: () => void;\n  selectedRuns: SelectedRuns;\n}\n\ntype SelectedRuns = {[id: string]: boolean};\n\ntype Error =\n  | Delete_deletePipelineRun_PythonError\n  | Delete_deletePipelineRun_UnauthorizedError\n  | Delete_deletePipelineRun_RunNotFoundError\n  | undefined;\n\ntype DeletionDialogState = {\n  step: 'initial' | 'deleting' | 'completed';\n  frozenRuns: SelectedRuns;\n  deletion: {completed: number; errors: {[id: string]: Error}};\n};\n\ntype DeletionDialogAction =\n  | {type: 'reset'; frozenRuns: SelectedRuns}\n  | {type: 'start'}\n  | {type: 'deletion-success'}\n  | {type: 'deletion-error'; id: string; error: Error}\n  | {type: 'complete'};\n\nconst initializeState = (frozenRuns: SelectedRuns): DeletionDialogState => {\n  return {\n    step: 'initial',\n    frozenRuns,\n    deletion: {completed: 0, errors: {}},\n  };\n};\n\nconst deletionDialogReducer = (\n  prevState: DeletionDialogState,\n  action: DeletionDialogAction,\n): DeletionDialogState => {\n  switch (action.type) {\n    case 'reset':\n      return initializeState(action.frozenRuns);\n    case 'start':\n      return {...prevState, step: 'deleting'};\n    case 'deletion-success': {\n      const {deletion} = prevState;\n      return {\n        ...prevState,\n        step: 'deleting',\n        deletion: {...deletion, completed: deletion.completed + 1},\n      };\n    }\n    case 'deletion-error': {\n      const {deletion} = prevState;\n      return {\n        ...prevState,\n        step: 'deleting',\n        deletion: {\n          ...deletion,\n          completed: deletion.completed + 1,\n          errors: {...deletion.errors, [action.id]: action.error},\n        },\n      };\n    }\n    case 'complete':\n      return {...prevState, step: 'completed'};\n  }\n};\n\nexport const DeletionDialog = (props: Props) => {\n  const {isOpen, onClose, onComplete, onTerminateInstead, selectedRuns} = props;\n  const frozenRuns = React.useRef<SelectedRuns>(selectedRuns);\n\n  const [state, dispatch] = React.useReducer(\n    deletionDialogReducer,\n    frozenRuns.current,\n    initializeState,\n  );\n\n  const runIDs = Object.keys(state.frozenRuns);\n  const count = runIDs.length;\n  const terminatableCount = runIDs.filter((id) => state.frozenRuns[id]).length;\n\n  // If the dialog is newly open, update state to match the frozen list.\n  React.useEffect(() => {\n    if (isOpen) {\n      dispatch({type: 'reset', frozenRuns: frozenRuns.current});\n    }\n  }, [isOpen]);\n\n  // If the dialog is not open, update the ref so that the frozen list will be entered\n  // into state the next time the dialog opens.\n  React.useEffect(() => {\n    if (!isOpen) {\n      frozenRuns.current = selectedRuns;\n    }\n  }, [isOpen, selectedRuns]);\n\n  const [destroy] = useMutation<Delete, DeleteVariables>(DELETE_MUTATION);\n\n  const mutate = async () => {\n    dispatch({type: 'start'});\n\n    const runList = Object.keys(state.frozenRuns);\n    for (let ii = 0; ii < runList.length; ii++) {\n      const runId = runList[ii];\n      const {data} = await destroy({variables: {runId}});\n\n      if (data?.deletePipelineRun.__typename === 'DeletePipelineRunSuccess') {\n        dispatch({type: 'deletion-success'});\n      } else {\n        dispatch({type: 'deletion-error', id: runId, error: data?.deletePipelineRun});\n      }\n    }\n\n    dispatch({type: 'complete'});\n    onComplete();\n  };\n\n  const progressContent = () => {\n    switch (state.step) {\n      case 'initial':\n        return (\n          <Group direction=\"column\" spacing={8}>\n            <div>{`${count} ${count === 1 ? 'run' : 'runs'} will be deleted.`}</div>\n            <div>\n              Deleting runs will not prevent them from continuing to execute, and may result in\n              unexpected behavior.\n            </div>\n            {terminatableCount ? (\n              <div>\n                {terminatableCount > 1 ? (\n                  <>\n                    {`${terminatableCount} of these runs can be terminated. `}\n                    <strong>\n                      Please consider terminating these runs instead of deleting them.\n                    </strong>\n                  </>\n                ) : (\n                  <>\n                    {`1 run can be terminated instead. `}\n                    <strong>Please consider terminating this run instead of deleting it.</strong>\n                  </>\n                )}\n              </div>\n            ) : null}\n            <div>Do you wish to continue with deletion?</div>\n          </Group>\n        );\n      case 'deleting':\n      case 'completed':\n        const value = count > 0 ? state.deletion.completed / count : 1;\n        return (\n          <Group direction=\"column\" spacing={8}>\n            <div>Deleting</div>\n            <ProgressBar intent=\"primary\" value={Math.max(0.1, value)} animate={value < 1} />\n            {state.step === 'deleting' ? (\n              <NavigationBlock message=\"Deletion in progress, please do not navigate away yet.\" />\n            ) : null}\n          </Group>\n        );\n      default:\n        return null;\n    }\n  };\n\n  const buttons = () => {\n    switch (state.step) {\n      case 'initial':\n        return (\n          <>\n            <Button intent=\"none\" onClick={onClose}>\n              Cancel\n            </Button>\n            <Button intent=\"danger\" onClick={mutate}>\n              {`Yes, delete ${`${count} ${count === 1 ? 'run' : 'runs'}`}`}\n            </Button>\n            {terminatableCount ? (\n              <Button intent=\"primary\" onClick={onTerminateInstead}>\n                {`Terminate ${`${terminatableCount} ${\n                  terminatableCount === 1 ? 'run' : 'runs'\n                }`} instead`}\n              </Button>\n            ) : null}\n          </>\n        );\n      case 'deleting':\n        return (\n          <Button intent=\"danger\" disabled>\n            Deleting\n          </Button>\n        );\n      case 'completed':\n        return (\n          <Button intent=\"primary\" onClick={onClose}>\n            Done\n          </Button>\n        );\n    }\n  };\n\n  const completionContent = () => {\n    if (state.step === 'initial') {\n      return null;\n    }\n\n    if (state.step === 'deleting') {\n      return <div>Please do not close the window or navigate away during deletion.</div>;\n    }\n\n    const errors = state.deletion.errors;\n    const errorCount = Object.keys(errors).length;\n    const successCount = state.deletion.completed - errorCount;\n\n    return (\n      <Group direction=\"column\" spacing={8}>\n        {successCount ? (\n          <Group direction=\"row\" spacing={8} alignItems=\"center\">\n            <Icon name=\"check_circle\" color={Colors.Green500} />\n            <div>{`Successfully deleted ${successCount} ${\n              successCount === 1 ? 'run' : 'runs'\n            }.`}</div>\n          </Group>\n        ) : null}\n        {errorCount ? (\n          <Group direction=\"column\" spacing={8}>\n            <Group direction=\"row\" spacing={8} alignItems=\"center\">\n              <Icon name=\"warning\" color={Colors.Yellow500} />\n              <div>{`Could not delete ${errorCount} ${errorCount === 1 ? 'run' : 'runs'}.`}</div>\n            </Group>\n            <ul>\n              {Object.keys(errors).map((runId) => (\n                <li key={runId}>\n                  <Group direction=\"row\" spacing={8}>\n                    <Mono>{runId.slice(0, 8)}</Mono>\n                    {errors[runId] ? <div>{errors[runId]?.message}</div> : null}\n                  </Group>\n                </li>\n              ))}\n            </ul>\n          </Group>\n        ) : null}\n      </Group>\n    );\n  };\n\n  const canQuicklyClose = state.step !== 'deleting';\n\n  return (\n    <Dialog\n      isOpen={isOpen}\n      title=\"Delete runs\"\n      canEscapeKeyClose={canQuicklyClose}\n      canOutsideClickClose={canQuicklyClose}\n      onClose={onClose}\n    >\n      <DialogBody>\n        <Group direction=\"column\" spacing={24}>\n          {progressContent()}\n          {completionContent()}\n        </Group>\n      </DialogBody>\n      <DialogFooter>{buttons()}</DialogFooter>\n    </Dialog>\n  );\n};\n","import {useMutation} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {ProgressBar} from '@blueprintjs/core';\nimport {Button, Colors, DialogBody, DialogFooter, Dialog, Group, Icon, Mono} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {ReexecutionStrategy} from '../types/globalTypes';\n\nimport {NavigationBlock} from './NavitationBlock';\nimport {LAUNCH_PIPELINE_REEXECUTION_MUTATION} from './RunUtils';\nimport {\n  LaunchPipelineReexecution,\n  LaunchPipelineReexecutionVariables,\n  LaunchPipelineReexecution_launchPipelineReexecution_InvalidStepError,\n  LaunchPipelineReexecution_launchPipelineReexecution_PipelineNotFoundError,\n  LaunchPipelineReexecution_launchPipelineReexecution_PythonError,\n  LaunchPipelineReexecution_launchPipelineReexecution_RunConfigValidationInvalid,\n  LaunchPipelineReexecution_launchPipelineReexecution_InvalidSubsetError,\n} from './types/LaunchPipelineReexecution';\n\nexport interface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onComplete: (reexecutionState: ReexecutionState) => void;\n  selectedRuns: {[id: string]: string};\n  reexecutionStrategy: ReexecutionStrategy;\n}\n\ntype Error =\n  | LaunchPipelineReexecution_launchPipelineReexecution_InvalidStepError\n  | LaunchPipelineReexecution_launchPipelineReexecution_PipelineNotFoundError\n  | LaunchPipelineReexecution_launchPipelineReexecution_RunConfigValidationInvalid\n  | LaunchPipelineReexecution_launchPipelineReexecution_InvalidSubsetError\n  | LaunchPipelineReexecution_launchPipelineReexecution_PythonError\n  | undefined;\n\nconst errorText = (error: Error) => {\n  if (!error) {\n    return 'Unknown error';\n  }\n  switch (error.__typename) {\n    case 'ConflictingExecutionParamsError':\n      return 'Conflicting execution parameters';\n    case 'InvalidOutputError':\n      return 'Invalid output';\n    case 'InvalidStepError':\n      return 'Invalid step';\n    case 'NoModeProvidedError':\n      return 'No mode provided';\n    case 'PipelineNotFoundError':\n      return 'Job not found in workspace';\n    case 'PresetNotFoundError':\n      return 'Preset not found';\n    case 'PythonError':\n      return error.message;\n    case 'RunConfigValidationInvalid':\n      return 'Run config invalid';\n    case 'RunConflict':\n      return 'Run conflict';\n    case 'UnauthorizedError':\n      return 'Re-execution not authorized';\n    case 'InvalidSubsetError':\n      return 'Invalid op subset: ' + error.message;\n    default:\n      return 'Unknown error';\n  }\n};\n\nexport type ReexecutionState = {completed: number; errors: {[id: string]: Error}};\n\ntype ReexecutionDialogState = {\n  frozenRuns: SelectedRuns;\n  step: 'initial' | 'reexecuting' | 'completed';\n  reexecution: ReexecutionState;\n};\n\ntype SelectedRuns = {[id: string]: string};\n\nconst initializeState = (selectedRuns: SelectedRuns): ReexecutionDialogState => {\n  return {\n    frozenRuns: selectedRuns,\n    step: 'initial',\n    reexecution: {completed: 0, errors: {}},\n  };\n};\n\ntype ReexecutionDialogAction =\n  | {type: 'reset'; frozenRuns: SelectedRuns}\n  | {type: 'start'}\n  | {type: 'reexecution-success'}\n  | {type: 'reexecution-error'; id: string; error: Error}\n  | {type: 'complete'};\n\nconst reexecutionDialogReducer = (\n  prevState: ReexecutionDialogState,\n  action: ReexecutionDialogAction,\n): ReexecutionDialogState => {\n  switch (action.type) {\n    case 'reset':\n      return initializeState(action.frozenRuns);\n    case 'start':\n      return {...prevState, step: 'reexecuting'};\n    case 'reexecution-success': {\n      const {reexecution} = prevState;\n      return {\n        ...prevState,\n        step: 'reexecuting',\n        reexecution: {...reexecution, completed: reexecution.completed + 1},\n      };\n    }\n    case 'reexecution-error': {\n      const {reexecution} = prevState;\n      return {\n        ...prevState,\n        step: 'reexecuting',\n        reexecution: {\n          ...reexecution,\n          completed: reexecution.completed + 1,\n          errors: {...reexecution.errors, [action.id]: action.error},\n        },\n      };\n    }\n    case 'complete':\n      return {...prevState, step: 'completed'};\n  }\n};\n\nexport const ReexecutionDialog = (props: Props) => {\n  const {isOpen, onClose, onComplete, reexecutionStrategy, selectedRuns} = props;\n\n  // Freeze the selected IDs, since the list may change as runs continue processing and\n  // re-executing. We want to preserve the list we're given.\n  const frozenRuns = React.useRef<SelectedRuns>(selectedRuns);\n\n  const [state, dispatch] = React.useReducer(\n    reexecutionDialogReducer,\n    frozenRuns.current,\n    initializeState,\n  );\n\n  const count = Object.keys(state.frozenRuns).length;\n\n  // If the dialog is newly open, update state to match the frozen list.\n  React.useEffect(() => {\n    if (isOpen) {\n      dispatch({type: 'reset', frozenRuns: frozenRuns.current});\n    }\n  }, [isOpen]);\n\n  // If the dialog is not open, update the ref so that the frozen list will be entered\n  // into state the next time the dialog opens.\n  React.useEffect(() => {\n    if (!isOpen) {\n      frozenRuns.current = selectedRuns;\n    }\n  }, [isOpen, selectedRuns]);\n\n  const [reexecute] = useMutation<LaunchPipelineReexecution, LaunchPipelineReexecutionVariables>(\n    LAUNCH_PIPELINE_REEXECUTION_MUTATION,\n  );\n\n  const mutate = async () => {\n    dispatch({type: 'start'});\n\n    const runList = Object.keys(state.frozenRuns);\n    for (let ii = 0; ii < runList.length; ii++) {\n      const runId = runList[ii];\n      const {data} = await reexecute({\n        variables: {\n          reexecutionParams: {\n            parentRunId: runId,\n            strategy: reexecutionStrategy,\n          },\n        },\n      });\n\n      if (data?.launchPipelineReexecution.__typename === 'LaunchRunSuccess') {\n        dispatch({type: 'reexecution-success'});\n      } else {\n        dispatch({type: 'reexecution-error', id: runId, error: data?.launchPipelineReexecution});\n      }\n    }\n\n    dispatch({type: 'complete'});\n    onComplete(state.reexecution);\n  };\n\n  const progressContent = () => {\n    switch (state.step) {\n      case 'initial':\n        if (!count) {\n          return (\n            <Group direction=\"column\" spacing={16}>\n              <div>No runs selected for re-execution.</div>\n              <div>The runs you selected may already have finished executing.</div>\n            </Group>\n          );\n        }\n\n        const message = () => {\n          if (reexecutionStrategy === ReexecutionStrategy.ALL_STEPS) {\n            return (\n              <span>\n                {`${count} ${count === 1 ? 'run' : 'runs'} will be re-executed `}\n                <strong>with all steps</strong>. Do you wish to continue?\n              </span>\n            );\n          }\n          return (\n            <span>\n              {`${count} ${count === 1 ? 'run' : 'runs'} will be re-executed `}\n              <strong>from failure</strong>. Do you wish to continue?\n            </span>\n          );\n        };\n\n        return (\n          <Group direction=\"column\" spacing={16}>\n            <div>{message()}</div>\n          </Group>\n        );\n      case 'reexecuting':\n      case 'completed':\n        const value = count > 0 ? state.reexecution.completed / count : 1;\n        return (\n          <Group direction=\"column\" spacing={8}>\n            <ProgressBar intent=\"primary\" value={Math.max(0.1, value)} animate={value < 1} />\n            {state.step === 'reexecuting' ? (\n              <NavigationBlock message=\"Re-execution in progress, please do not navigate away yet.\" />\n            ) : null}\n          </Group>\n        );\n      default:\n        return null;\n    }\n  };\n\n  const buttons = () => {\n    switch (state.step) {\n      case 'initial':\n        if (!count) {\n          return (\n            <Button intent=\"none\" onClick={onClose}>\n              OK\n            </Button>\n          );\n        }\n\n        return (\n          <>\n            <Button intent=\"none\" onClick={onClose}>\n              Cancel\n            </Button>\n            <Button intent=\"primary\" onClick={mutate}>\n              {`Re-execute ${`${count} ${count === 1 ? 'run' : 'runs'}`}`}\n            </Button>\n          </>\n        );\n      case 'reexecuting':\n        return (\n          <Button intent=\"primary\" disabled>\n            {`Re-executing ${`${count} ${count === 1 ? 'run' : 'runs'}...`}`}\n          </Button>\n        );\n      case 'completed':\n        return (\n          <Button intent=\"primary\" onClick={onClose}>\n            Done\n          </Button>\n        );\n    }\n  };\n\n  const completionContent = () => {\n    if (state.step === 'initial') {\n      return null;\n    }\n\n    if (state.step === 'reexecuting') {\n      return <div>Please do not close the window or navigate away during re-execution.</div>;\n    }\n\n    const errors = state.reexecution.errors;\n    const errorCount = Object.keys(errors).length;\n    const successCount = state.reexecution.completed - errorCount;\n\n    return (\n      <Group direction=\"column\" spacing={8}>\n        {successCount ? (\n          <Group direction=\"row\" spacing={8} alignItems=\"flex-start\">\n            <Icon name=\"check_circle\" color={Colors.Green500} />\n            <div>\n              {`Successfully requested re-execution for ${successCount} ${\n                successCount === 1 ? 'run' : `runs`\n              }.`}\n            </div>\n          </Group>\n        ) : null}\n        {errorCount ? (\n          <Group direction=\"column\" spacing={8}>\n            <Group direction=\"row\" spacing={8} alignItems=\"flex-start\">\n              <Icon name=\"warning\" color={Colors.Yellow500} />\n              <div>\n                {`Could not request re-execution for ${errorCount} ${\n                  errorCount === 1 ? 'run' : 'runs'\n                }:`}\n              </div>\n            </Group>\n            <ul>\n              {Object.keys(errors).map((runId) => (\n                <li key={runId}>\n                  <Group direction=\"row\" spacing={8} alignItems=\"baseline\">\n                    <Mono>{runId.slice(0, 8)}</Mono>\n                    {errors[runId] ? <div>{errorText(errors[runId])}</div> : null}\n                  </Group>\n                </li>\n              ))}\n            </ul>\n          </Group>\n        ) : null}\n      </Group>\n    );\n  };\n\n  const canQuicklyClose = state.step !== 'reexecuting';\n\n  return (\n    <Dialog\n      isOpen={isOpen}\n      title={\n        reexecutionStrategy === ReexecutionStrategy.ALL_STEPS\n          ? 'Re-execute runs'\n          : 'Re-execute runs from failure'\n      }\n      canEscapeKeyClose={canQuicklyClose}\n      canOutsideClickClose={canQuicklyClose}\n      onClose={onClose}\n    >\n      <DialogBody>\n        <Group direction=\"column\" spacing={24}>\n          {progressContent()}\n          {completionContent()}\n        </Group>\n      </DialogBody>\n      <DialogFooter>{buttons()}</DialogFooter>\n    </Dialog>\n  );\n};\n","import {gql, useLazyQuery, useMutation} from '@apollo/client';\nimport {\n  Button,\n  Icon,\n  MenuDivider,\n  MenuExternalLink,\n  MenuItem,\n  Menu,\n  Popover,\n  Tooltip,\n  DialogFooter,\n  Dialog,\n  StyledReadOnlyCodeMirror,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport {AppContext} from '../app/AppContext';\nimport {SharedToaster} from '../app/DomUtils';\nimport {usePermissions} from '../app/Permissions';\nimport {useCopyToClipboard} from '../app/browser';\nimport {ReexecutionStrategy} from '../types/globalTypes';\nimport {MenuLink} from '../ui/MenuLink';\nimport {isThisThingAJob} from '../workspace/WorkspaceContext';\nimport {useRepositoryForRun} from '../workspace/useRepositoryForRun';\nimport {workspacePathFromRunDetails} from '../workspace/workspacePath';\n\nimport {DeletionDialog} from './DeletionDialog';\nimport {ReexecutionDialog} from './ReexecutionDialog';\nimport {RUN_FRAGMENT_FOR_REPOSITORY_MATCH} from './RunFragments';\nimport {doneStatuses, failedStatuses} from './RunStatuses';\nimport {\n  LAUNCH_PIPELINE_REEXECUTION_MUTATION,\n  RunsQueryRefetchContext,\n  getReexecutionVariables,\n  handleLaunchResult,\n} from './RunUtils';\nimport {TerminationDialog} from './TerminationDialog';\nimport {\n  LaunchPipelineReexecution,\n  LaunchPipelineReexecutionVariables,\n} from './types/LaunchPipelineReexecution';\nimport {\n  PipelineEnvironmentYamlQuery,\n  PipelineEnvironmentYamlQueryVariables,\n} from './types/PipelineEnvironmentYamlQuery';\nimport {RunTableRunFragment} from './types/RunTableRunFragment';\n\nexport const RunActionsMenu: React.FC<{\n  run: RunTableRunFragment;\n}> = React.memo(({run}) => {\n  const {refetch} = React.useContext(RunsQueryRefetchContext);\n  const [visibleDialog, setVisibleDialog] = React.useState<\n    'none' | 'terminate' | 'delete' | 'config'\n  >('none');\n\n  const {rootServerURI} = React.useContext(AppContext);\n  const {canTerminatePipelineExecution, canDeletePipelineRun} = usePermissions();\n  const history = useHistory();\n\n  const copyConfig = useCopyToClipboard();\n\n  const [reexecute] = useMutation<LaunchPipelineReexecution, LaunchPipelineReexecutionVariables>(\n    LAUNCH_PIPELINE_REEXECUTION_MUTATION,\n    {\n      onCompleted: refetch,\n    },\n  );\n\n  const [loadEnv, {called, loading, data}] = useLazyQuery<\n    PipelineEnvironmentYamlQuery,\n    PipelineEnvironmentYamlQueryVariables\n  >(PIPELINE_ENVIRONMENT_YAML_QUERY, {\n    variables: {runId: run.runId},\n  });\n\n  const closeDialogs = () => {\n    setVisibleDialog('none');\n  };\n\n  const onComplete = () => {\n    refetch();\n  };\n\n  const pipelineRun =\n    data?.pipelineRunOrError?.__typename === 'Run' ? data?.pipelineRunOrError : null;\n  const runConfigYaml = pipelineRun?.runConfigYaml;\n\n  const repoMatch = useRepositoryForRun(pipelineRun);\n  const isFinished = doneStatuses.has(run.status);\n  const isJob = !!(repoMatch && isThisThingAJob(repoMatch?.match, run.pipelineName));\n\n  const infoReady = called ? !loading : false;\n  return (\n    <>\n      <Popover\n        content={\n          <Menu>\n            <MenuItem\n              text={loading ? 'Loading Configuration...' : 'View Configuration...'}\n              disabled={!runConfigYaml}\n              icon=\"open_in_new\"\n              onClick={() => setVisibleDialog('config')}\n            />\n            <MenuDivider />\n            <>\n              <Tooltip\n                content={OPEN_LAUNCHPAD_UNKNOWN}\n                position=\"bottom\"\n                disabled={infoReady}\n                targetTagName=\"div\"\n              >\n                <MenuLink\n                  text=\"Open in Launchpad...\"\n                  disabled={!infoReady}\n                  icon=\"edit\"\n                  to={workspacePathFromRunDetails({\n                    id: run.id,\n                    pipelineName: run.pipelineName,\n                    repositoryName: repoMatch?.match.repository.name,\n                    repositoryLocationName: repoMatch?.match.repositoryLocation.name,\n                    isJob,\n                  })}\n                />\n              </Tooltip>\n              <Tooltip\n                content=\"Re-execute is unavailable because the pipeline is not present in the current workspace.\"\n                position=\"bottom\"\n                disabled={infoReady && !!repoMatch}\n                targetTagName=\"div\"\n              >\n                <MenuItem\n                  text=\"Re-execute\"\n                  disabled={!infoReady || !repoMatch}\n                  icon=\"refresh\"\n                  onClick={async () => {\n                    if (repoMatch && runConfigYaml) {\n                      const result = await reexecute({\n                        variables: getReexecutionVariables({\n                          run: {...run, runConfigYaml},\n                          style: {type: 'all'},\n                          repositoryLocationName: repoMatch.match.repositoryLocation.name,\n                          repositoryName: repoMatch.match.repository.name,\n                        }),\n                      });\n                      handleLaunchResult(run.pipelineName, result, history, {\n                        behavior: 'open',\n                      });\n                    }\n                  }}\n                />\n              </Tooltip>\n              {isFinished || !canTerminatePipelineExecution.enabled ? null : (\n                <MenuItem\n                  icon=\"cancel\"\n                  text=\"Terminate\"\n                  onClick={() => setVisibleDialog('terminate')}\n                />\n              )}\n              <MenuDivider />\n            </>\n            <MenuExternalLink\n              text=\"Download Debug File\"\n              icon=\"download_for_offline\"\n              download\n              href={`${rootServerURI}/download_debug/${run.runId}`}\n            />\n            {canDeletePipelineRun.enabled ? (\n              <MenuItem\n                icon=\"delete\"\n                text=\"Delete\"\n                intent=\"danger\"\n                onClick={() => setVisibleDialog('delete')}\n              />\n            ) : null}\n          </Menu>\n        }\n        position=\"bottom-right\"\n        onOpening={() => {\n          if (!called) {\n            loadEnv();\n          }\n        }}\n      >\n        <Button icon={<Icon name=\"expand_more\" />} />\n      </Popover>\n      {canTerminatePipelineExecution.enabled ? (\n        <TerminationDialog\n          isOpen={visibleDialog === 'terminate'}\n          onClose={closeDialogs}\n          onComplete={onComplete}\n          selectedRuns={{[run.id]: run.canTerminate}}\n        />\n      ) : null}\n      {canDeletePipelineRun.enabled ? (\n        <DeletionDialog\n          isOpen={visibleDialog === 'delete'}\n          onClose={closeDialogs}\n          onComplete={onComplete}\n          onTerminateInstead={() => setVisibleDialog('terminate')}\n          selectedRuns={{[run.id]: run.canTerminate}}\n        />\n      ) : null}\n      <Dialog\n        isOpen={visibleDialog === 'config'}\n        title=\"Config\"\n        canOutsideClickClose\n        canEscapeKeyClose\n        onClose={closeDialogs}\n      >\n        <StyledReadOnlyCodeMirror\n          value={runConfigYaml || ''}\n          options={{lineNumbers: true, mode: 'yaml'}}\n        />\n        <DialogFooter topBorder>\n          <Button\n            intent=\"none\"\n            onClick={() => {\n              copyConfig(runConfigYaml || '');\n              SharedToaster.show({\n                intent: 'success',\n                icon: 'copy_to_clipboard_done',\n                message: 'Copied!',\n              });\n            }}\n          >\n            Copy config\n          </Button>\n          <Button intent=\"primary\" onClick={closeDialogs}>\n            OK\n          </Button>\n        </DialogFooter>\n      </Dialog>\n    </>\n  );\n});\n\nexport const RunBulkActionsMenu: React.FC<{\n  selected: RunTableRunFragment[];\n  clearSelection: () => void;\n}> = React.memo(({selected, clearSelection}) => {\n  const {refetch} = React.useContext(RunsQueryRefetchContext);\n  const {\n    canTerminatePipelineExecution,\n    canDeletePipelineRun,\n    canLaunchPipelineReexecution,\n  } = usePermissions();\n  const [visibleDialog, setVisibleDialog] = React.useState<\n    'none' | 'terminate' | 'delete' | 'reexecute-from-failure' | 'reexecute'\n  >('none');\n\n  if (!canTerminatePipelineExecution.enabled && !canDeletePipelineRun.enabled) {\n    return null;\n  }\n\n  const unfinishedRuns = selected.filter((r) => !doneStatuses.has(r?.status));\n  const unfinishedIDs = unfinishedRuns.map((r) => r.id);\n  const unfinishedMap = unfinishedRuns.reduce(\n    (accum, run) => ({...accum, [run.id]: run.canTerminate}),\n    {},\n  );\n\n  const selectedIDs = selected.map((run) => run.runId);\n  const deletionMap = selected.reduce((accum, run) => ({...accum, [run.id]: run.canTerminate}), {});\n\n  const failedRuns = selected.filter((r) => failedStatuses.has(r?.status));\n  const failedMap = failedRuns.reduce((accum, run) => ({...accum, [run.id]: run.id}), {});\n\n  const reexecutableRuns = selected.filter((r) => doneStatuses.has(r?.status));\n  const reexecutableMap = reexecutableRuns.reduce(\n    (accum, run) => ({...accum, [run.id]: run.id}),\n    {},\n  );\n\n  const closeDialogs = () => {\n    setVisibleDialog('none');\n  };\n\n  const onComplete = () => {\n    clearSelection();\n    refetch();\n  };\n\n  return (\n    <>\n      <Popover\n        content={\n          <Menu>\n            {canTerminatePipelineExecution.enabled ? (\n              <MenuItem\n                icon=\"cancel\"\n                text={`Terminate ${unfinishedIDs.length} ${\n                  unfinishedIDs.length === 1 ? 'run' : 'runs'\n                }`}\n                disabled={unfinishedIDs.length === 0}\n                onClick={() => {\n                  setVisibleDialog('terminate');\n                }}\n              />\n            ) : null}\n            {canDeletePipelineRun.enabled ? (\n              <MenuItem\n                icon=\"delete\"\n                intent=\"danger\"\n                text={`Delete ${selectedIDs.length} ${selectedIDs.length === 1 ? 'run' : 'runs'}`}\n                disabled={selectedIDs.length === 0}\n                onClick={() => {\n                  setVisibleDialog('delete');\n                }}\n              />\n            ) : null}\n            {canLaunchPipelineReexecution.enabled ? (\n              <>\n                <MenuItem\n                  icon=\"refresh\"\n                  text={`Re-execute ${reexecutableRuns.length} ${\n                    reexecutableRuns.length === 1 ? 'run' : 'runs'\n                  }`}\n                  disabled={reexecutableRuns.length === 0}\n                  onClick={() => {\n                    setVisibleDialog('reexecute');\n                  }}\n                />\n                <MenuItem\n                  icon=\"refresh\"\n                  text={`Re-execute ${failedRuns.length} ${\n                    failedRuns.length === 1 ? 'run' : 'runs'\n                  } from failure`}\n                  disabled={failedRuns.length === 0}\n                  onClick={() => {\n                    setVisibleDialog('reexecute-from-failure');\n                  }}\n                />\n              </>\n            ) : null}\n          </Menu>\n        }\n        position=\"bottom-right\"\n      >\n        <Button disabled={selected.length === 0} rightIcon={<Icon name=\"expand_more\" />}>\n          Actions\n        </Button>\n      </Popover>\n      <TerminationDialog\n        isOpen={visibleDialog === 'terminate'}\n        onClose={closeDialogs}\n        onComplete={onComplete}\n        selectedRuns={unfinishedMap}\n      />\n      <DeletionDialog\n        isOpen={visibleDialog === 'delete'}\n        onClose={closeDialogs}\n        onComplete={onComplete}\n        onTerminateInstead={() => setVisibleDialog('terminate')}\n        selectedRuns={deletionMap}\n      />\n      <ReexecutionDialog\n        isOpen={visibleDialog === 'reexecute-from-failure'}\n        onClose={closeDialogs}\n        onComplete={onComplete}\n        selectedRuns={failedMap}\n        reexecutionStrategy={ReexecutionStrategy.FROM_FAILURE}\n      />\n      <ReexecutionDialog\n        isOpen={visibleDialog === 'reexecute'}\n        onClose={closeDialogs}\n        onComplete={onComplete}\n        selectedRuns={reexecutableMap}\n        reexecutionStrategy={ReexecutionStrategy.ALL_STEPS}\n      />\n    </>\n  );\n});\n\nconst OPEN_LAUNCHPAD_UNKNOWN =\n  'Launchpad is unavailable because the pipeline is not present in the current repository.';\n\n// Avoid fetching envYaml on load in Runs page. It is slow.\nconst PIPELINE_ENVIRONMENT_YAML_QUERY = gql`\n  query PipelineEnvironmentYamlQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        pipelineName\n        pipelineSnapshotId\n        runConfigYaml\n        ...RunFragmentForRepositoryMatch\n      }\n    }\n  }\n  ${RUN_FRAGMENT_FOR_REPOSITORY_MATCH}\n`;\n","import {gql} from '@apollo/client';\nimport {Box, Checkbox, Colors, Icon, NonIdealState, Table, Mono} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {usePermissions} from '../app/Permissions';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {useSelectionReducer} from '../hooks/useSelectionReducer';\nimport {PipelineSnapshotLink} from '../pipelines/PipelinePathUtils';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {RunsFilter} from '../types/globalTypes';\nimport {\n  findRepositoryAmongOptions,\n  isThisThingAJob,\n  useRepositoryOptions,\n} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {useRepositoryForRun} from '../workspace/useRepositoryForRun';\nimport {workspacePipelinePath, workspacePipelinePathGuessRepo} from '../workspace/workspacePath';\n\nimport {RunActionsMenu, RunBulkActionsMenu} from './RunActionsMenu';\nimport {RunAssetKeyTags} from './RunAssetKeyTags';\nimport {RunStatusTagWithStats} from './RunStatusTag';\nimport {RunTags} from './RunTags';\nimport {\n  assetKeysForRun,\n  RunStateSummary,\n  RunTime,\n  RUN_TIME_FRAGMENT,\n  titleForRun,\n} from './RunUtils';\nimport {RunFilterToken} from './RunsFilterInput';\nimport {RunTableRunFragment} from './types/RunTableRunFragment';\n\ninterface RunTableProps {\n  runs: RunTableRunFragment[];\n  filter?: RunsFilter;\n  onAddTag?: (token: RunFilterToken) => void;\n  nonIdealState?: React.ReactNode;\n  actionBarComponents?: React.ReactNode;\n  highlightedIds?: string[];\n  additionalColumnHeaders?: React.ReactNode[];\n  additionalColumnsForRow?: (run: RunTableRunFragment) => React.ReactNode[];\n}\n\nexport const RunTable = (props: RunTableProps) => {\n  const {runs, filter, onAddTag, nonIdealState, highlightedIds, actionBarComponents} = props;\n  const allIds = runs.map((r) => r.runId);\n\n  const [{checkedIds}, {onToggleFactory, onToggleAll}] = useSelectionReducer(allIds);\n\n  const {canTerminatePipelineExecution, canDeletePipelineRun} = usePermissions();\n  const canTerminateOrDelete =\n    canTerminatePipelineExecution.enabled || canDeletePipelineRun.enabled;\n\n  const {options} = useRepositoryOptions();\n\n  if (runs.length === 0) {\n    const anyFilter = Object.keys(filter || {}).length;\n    return (\n      <div>\n        {actionBarComponents ? (\n          <Box padding={{vertical: 8, left: 24, right: 12}}>{actionBarComponents}</Box>\n        ) : null}\n        <Box margin={{vertical: 32}}>\n          {nonIdealState || (\n            <NonIdealState\n              icon=\"run\"\n              title={anyFilter ? 'No matching runs' : 'No runs to display'}\n              description={\n                anyFilter\n                  ? 'No runs were found for this filter.'\n                  : 'Use the Launchpad to launch a run.'\n              }\n            />\n          )}\n        </Box>\n      </div>\n    );\n  }\n\n  let anyPipelines = false;\n  for (const run of runs) {\n    const {repositoryOrigin} = run;\n    if (repositoryOrigin) {\n      const repoAddress = buildRepoAddress(\n        repositoryOrigin.repositoryName,\n        repositoryOrigin.repositoryLocationName,\n      );\n      const repo = findRepositoryAmongOptions(options, repoAddress);\n      if (!repo || !isThisThingAJob(repo, run.pipelineName)) {\n        anyPipelines = true;\n        break;\n      }\n    }\n  }\n\n  const selectedFragments = runs.filter((run) => checkedIds.has(run.runId));\n\n  return (\n    <>\n      <Box flex={{alignItems: 'center', gap: 12}} padding={{vertical: 8, left: 24, right: 12}}>\n        {actionBarComponents}\n        <div style={{flex: 1}} />\n        <RunBulkActionsMenu\n          selected={selectedFragments}\n          clearSelection={() => onToggleAll(false)}\n        />\n      </Box>\n\n      <Table>\n        <thead>\n          <tr>\n            <th style={{width: 42, paddingTop: 0, paddingBottom: 0}}>\n              {canTerminateOrDelete ? (\n                <Checkbox\n                  indeterminate={checkedIds.size > 0 && checkedIds.size !== runs.length}\n                  checked={checkedIds.size === runs.length}\n                  onChange={(e: React.FormEvent<HTMLInputElement>) => {\n                    if (e.target instanceof HTMLInputElement) {\n                      onToggleAll(e.target.checked);\n                    }\n                  }}\n                />\n              ) : null}\n            </th>\n            <th style={{width: 120}}>Status</th>\n            <th style={{width: 90}}>Run ID</th>\n            <th>{anyPipelines ? 'Job / Pipeline' : 'Job'}</th>\n            <th style={{width: 90}}>Snapshot ID</th>\n            <th style={{width: 190}}>Timing</th>\n            {props.additionalColumnHeaders}\n            <th style={{width: 52}} />\n          </tr>\n        </thead>\n        <tbody>\n          {runs.map((run) => (\n            <RunRow\n              canTerminateOrDelete={canTerminateOrDelete}\n              run={run}\n              key={run.runId}\n              onAddTag={onAddTag}\n              checked={checkedIds.has(run.runId)}\n              additionalColumns={props.additionalColumnsForRow?.(run)}\n              onToggleChecked={onToggleFactory(run.runId)}\n              isHighlighted={highlightedIds && highlightedIds.includes(run.runId)}\n            />\n          ))}\n        </tbody>\n      </Table>\n    </>\n  );\n};\n\nexport const RUN_TABLE_RUN_FRAGMENT = gql`\n  fragment RunTableRunFragment on Run {\n    id\n    runId\n    status\n    stepKeysToExecute\n    canTerminate\n    mode\n    rootRunId\n    parentRunId\n    pipelineSnapshotId\n    pipelineName\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n    solidSelection\n    assetSelection {\n      ... on AssetKey {\n        path\n      }\n    }\n    status\n    tags {\n      key\n      value\n    }\n    ...RunTimeFragment\n  }\n\n  ${RUN_TIME_FRAGMENT}\n`;\n\nconst RunRow: React.FC<{\n  run: RunTableRunFragment;\n  canTerminateOrDelete: boolean;\n  onAddTag?: (token: RunFilterToken) => void;\n  checked?: boolean;\n  onToggleChecked?: (values: {checked: boolean; shiftKey: boolean}) => void;\n  additionalColumns?: React.ReactNode[];\n  isHighlighted?: boolean;\n}> = ({\n  run,\n  canTerminateOrDelete,\n  onAddTag,\n  checked,\n  onToggleChecked,\n  additionalColumns,\n  isHighlighted,\n}) => {\n  const {pipelineName} = run;\n  const repo = useRepositoryForRun(run);\n\n  const isJob = React.useMemo(() => {\n    if (repo) {\n      const pipelinesAndJobs = repo.match.repository.pipelines;\n      const match = pipelinesAndJobs.find((pipelineOrJob) => pipelineOrJob.name === pipelineName);\n      return !!match?.isJob;\n    }\n    return false;\n  }, [repo, pipelineName]);\n\n  const onChange = (e: React.FormEvent<HTMLInputElement>) => {\n    if (e.target instanceof HTMLInputElement) {\n      const {checked} = e.target;\n      const shiftKey =\n        e.nativeEvent instanceof MouseEvent && e.nativeEvent.getModifierState('Shift');\n      onToggleChecked && onToggleChecked({checked, shiftKey});\n    }\n  };\n\n  return (\n    <Row key={run.runId} highlighted={!!isHighlighted}>\n      <td>\n        {canTerminateOrDelete && onToggleChecked ? (\n          <Checkbox checked={!!checked} onChange={onChange} />\n        ) : null}\n      </td>\n      <td>\n        <RunStatusTagWithStats status={run.status} runId={run.runId} />\n      </td>\n      <td>\n        <Link to={`/instance/runs/${run.runId}`}>\n          <Mono>{titleForRun(run)}</Mono>\n        </Link>\n      </td>\n      <td>\n        <Box flex={{direction: 'column', gap: 5}}>\n          {isHiddenAssetGroupJob(run.pipelineName) ? (\n            <RunAssetKeyTags assetKeys={assetKeysForRun(run)} />\n          ) : (\n            <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n              <PipelineReference\n                isJob={isJob}\n                showIcon\n                pipelineName={run.pipelineName}\n                pipelineHrefContext=\"no-link\"\n              />\n              <Link\n                to={\n                  repo\n                    ? workspacePipelinePath({\n                        repoName: repo.match.repository.name,\n                        repoLocation: repo.match.repositoryLocation.name,\n                        pipelineName: run.pipelineName,\n                        isJob,\n                      })\n                    : workspacePipelinePathGuessRepo(run.pipelineName)\n                }\n              >\n                <Icon name=\"open_in_new\" color={Colors.Blue500} />\n              </Link>\n            </Box>\n          )}\n          <RunTags\n            tags={run.tags}\n            mode={isJob ? (run.mode !== 'default' ? run.mode : null) : run.mode}\n            onAddTag={onAddTag}\n          />\n        </Box>\n      </td>\n      <td>\n        <PipelineSnapshotLink\n          snapshotId={run.pipelineSnapshotId || ''}\n          pipelineName={run.pipelineName}\n          size=\"normal\"\n        />\n      </td>\n      <td>\n        <RunTime run={run} />\n        <RunStateSummary run={run} />\n      </td>\n      {additionalColumns}\n      <td>\n        <RunActionsMenu run={run} />\n      </td>\n    </Row>\n  );\n};\n\nconst Row = styled.tr<{highlighted: boolean}>`\n  ${({highlighted}) =>\n    highlighted ? `box-shadow: inset 3px 3px #bfccd6, inset -3px -3px #bfccd6;` : null}\n`;\n","import {Box, Caption, Colors, Popover, Tag} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nexport enum DagsterTag {\n  Namespace = 'dagster/',\n  Backfill = 'dagster/backfill',\n  SolidSelection = 'dagster/solid_selection',\n  OpSelection = 'dagster/op_selection',\n  StepSelection = 'dagster/step_selection',\n  PartitionSet = 'dagster/partition_set',\n  Partition = 'dagster/partition',\n  IsResumeRetry = 'dagster/is_resume_retry',\n  PresetName = 'dagster/preset_name',\n  ParentRunId = 'dagster/parent_run_id',\n  RootRunId = 'dagster/root_run_id',\n  ScheduleName = 'dagster/schedule_name',\n  SensorName = 'dagster/sensor_name',\n  RepositoryLabelTag = '.dagster/repository',\n}\n\nexport type TagType = {\n  key: string;\n  value: string;\n};\n\ntype TagAction = {\n  label: React.ReactNode;\n  onClick: (tag: TagType) => void;\n};\n\ninterface IRunTagProps {\n  tag: TagType;\n  actions?: TagAction[];\n}\n\nexport const RunTag = ({tag, actions}: IRunTagProps) => {\n  const {key, value} = tag;\n  const isDagsterTag = key.startsWith(DagsterTag.Namespace);\n\n  const displayedKey = React.useMemo(() => {\n    if (isDagsterTag) {\n      switch (key) {\n        case DagsterTag.Backfill:\n          return 'Backfill';\n        case DagsterTag.ScheduleName:\n        case DagsterTag.SensorName:\n          return null;\n        default:\n          return key.slice(DagsterTag.Namespace.length);\n      }\n    }\n    return key;\n  }, [isDagsterTag, key]);\n\n  const icon = React.useMemo(() => {\n    switch (key) {\n      case DagsterTag.ScheduleName:\n        return 'schedule';\n      case DagsterTag.SensorName:\n        return 'sensors';\n      case DagsterTag.Backfill:\n        return 'settings_backup_restore';\n      default:\n        return null;\n    }\n  }, [key]);\n\n  const tagElement = (\n    <Tag intent={isDagsterTag ? 'none' : 'primary'} interactive icon={icon || undefined}>\n      {displayedKey ? `${displayedKey}: ${value}` : value}\n    </Tag>\n  );\n\n  if (actions?.length) {\n    return (\n      <Popover\n        content={<TagActions actions={actions} tag={tag} />}\n        hoverOpenDelay={100}\n        hoverCloseDelay={100}\n        placement=\"top\"\n        interactionKind=\"hover\"\n      >\n        {tagElement}\n      </Popover>\n    );\n  }\n\n  return tagElement;\n};\n\nconst TagActions = ({tag, actions}: {tag: TagType; actions: TagAction[]}) => (\n  <ActionContainer background={Colors.Gray900} flex={{direction: 'row'}}>\n    {actions.map(({label, onClick}, ii) => (\n      <TagButton key={ii} onClick={() => onClick(tag)}>\n        <Caption>{label}</Caption>\n      </TagButton>\n    ))}\n  </ActionContainer>\n);\n\nconst ActionContainer = styled(Box)`\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst TagButton = styled.button`\n  border: none;\n  background: ${Colors.Dark};\n  color: ${Colors.Gray100};\n  cursor: pointer;\n  padding: 8px 12px;\n  text-align: left;\n\n  :not(:last-child) {\n    box-shadow: -1px 0 0 inset ${Colors.Gray600};\n  }\n\n  :focus {\n    outline: none;\n  }\n\n  :hover {\n    background-color: ${Colors.Gray800};\n    color: ${Colors.White};\n  }\n`;\n","import {Box} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {SharedToaster} from '../app/DomUtils';\nimport {useCopyToClipboard} from '../app/browser';\nimport {__ASSET_JOB_PREFIX} from '../asset-graph/Utils';\n\nimport {DagsterTag, RunTag, TagType} from './RunTag';\nimport {RunFilterToken} from './RunsFilterInput';\n\n// Sort these tags to the start of the list.\nexport const priorityTagSet = new Set([\n  DagsterTag.ScheduleName as string,\n  DagsterTag.SensorName as string,\n  DagsterTag.Backfill as string,\n]);\n\nconst renamedTags = {\n  [DagsterTag.SolidSelection]: DagsterTag.OpSelection,\n};\n\nexport const canAddTagToFilter = (key: string) => {\n  return key !== DagsterTag.SolidSelection && key !== DagsterTag.OpSelection;\n};\n\nexport const RunTags: React.FC<{\n  tags: TagType[];\n  mode: string | null;\n  onAddTag?: (token: RunFilterToken) => void;\n}> = React.memo(({tags, onAddTag, mode}) => {\n  const copy = useCopyToClipboard();\n\n  const copyAction = React.useMemo(\n    () => ({\n      label: 'Copy tag',\n      onClick: (tag: TagType) => {\n        copy(`${tag.key}:${tag.value}`);\n        SharedToaster.show({intent: 'success', message: 'Copied tag!'});\n      },\n    }),\n    [copy],\n  );\n\n  const addToFilterAction = React.useMemo(\n    () =>\n      onAddTag\n        ? {\n            label: 'Add tag to filter',\n            onClick: (tag: TagType) => {\n              onAddTag({token: 'tag', value: `${tag.key}=${tag.value}`});\n            },\n          }\n        : null,\n    [onAddTag],\n  );\n\n  const actionsForTag = (tag: TagType) => {\n    const list = [copyAction];\n    if (addToFilterAction && canAddTagToFilter(tag.key)) {\n      list.push(addToFilterAction);\n    }\n    return list.filter((item) => !!item);\n  };\n\n  const displayedTags = React.useMemo(() => {\n    const priority = [];\n    const others = [];\n    const copiedTags = tags.map(({key, value}) => ({key, value}));\n    for (const tag of copiedTags) {\n      const {key} = tag;\n      if (renamedTags.hasOwnProperty(key)) {\n        tag.key = renamedTags[key];\n      }\n\n      if (\n        tag.value.startsWith(__ASSET_JOB_PREFIX) &&\n        (key === DagsterTag.PartitionSet || key === DagsterTag.StepSelection)\n      ) {\n        continue;\n      } else if (priorityTagSet.has(key)) {\n        priority.push(tag);\n      } else {\n        others.push(tag);\n      }\n    }\n    return [...priority, ...others];\n  }, [tags]);\n\n  if (!tags.length) {\n    return null;\n  }\n\n  return (\n    <Box flex={{direction: 'row', wrap: 'wrap', gap: 4}}>\n      {mode ? <RunTag tag={{key: 'mode', value: mode}} /> : null}\n      {displayedTags.map((tag, idx) => (\n        <RunTag tag={tag} key={idx} actions={actionsForTag(tag)} />\n      ))}\n    </Box>\n  );\n});\n","import {gql} from '@apollo/client';\nimport {History} from 'history';\nimport qs from 'qs';\nimport * as React from 'react';\n\nimport {Mono} from '../../../ui/src';\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {SharedToaster} from '../app/DomUtils';\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {Timestamp} from '../app/time/Timestamp';\nimport {AssetKey} from '../assets/types';\nimport {ExecutionParams, RunStatus} from '../types/globalTypes';\n\nimport {DagsterTag} from './RunTag';\nimport {StepSelection} from './StepSelection';\nimport {TimeElapsed} from './TimeElapsed';\nimport {LaunchPipelineExecution} from './types/LaunchPipelineExecution';\nimport {LaunchPipelineReexecution} from './types/LaunchPipelineReexecution';\nimport {RunFragment} from './types/RunFragment';\nimport {RunTableRunFragment} from './types/RunTableRunFragment';\nimport {RunTimeFragment} from './types/RunTimeFragment';\n\nexport function titleForRun(run: {runId: string}) {\n  return run.runId.split('-').shift();\n}\n\nexport function assetKeysForRun(run: {\n  assetSelection: {path: string[]}[] | null;\n  stepKeysToExecute: string[] | null;\n}): AssetKey[] {\n  // Note: The fallback logic here is only necessary for Dagit <0.15.0 and should be removed\n  // soon, because stepKeysToExecute and asset keys do not map 1:1 for multi-component asset\n  // paths.\n  return run.assetSelection || run.stepKeysToExecute?.map((s) => ({path: [s]})) || [];\n}\n\nexport function linkToRunEvent(\n  run: {runId: string},\n  event: {timestamp?: string; stepKey: string | null},\n) {\n  return `/instance/runs/${run.runId}?${qs.stringify({\n    focusedTime: event.timestamp ? Number(event.timestamp) : undefined,\n    selection: event.stepKey,\n    logs: `step:${event.stepKey}`,\n  })}`;\n}\n\nexport const RunsQueryRefetchContext = React.createContext<{\n  refetch: () => void;\n}>({refetch: () => {}});\n\nexport function useDidLaunchEvent(cb: () => void, delay = 1500) {\n  React.useEffect(() => {\n    const handler = () => {\n      setTimeout(cb, delay);\n    };\n    document.addEventListener('run-launched', handler);\n    return () => {\n      document.removeEventListener('run-launched', handler);\n    };\n  }, [cb, delay]);\n}\n\nexport type LaunchBehavior = 'open' | 'open-in-new-tab' | 'toast';\n\nexport function handleLaunchResult(\n  pipelineName: string,\n  result: void | {data?: LaunchPipelineExecution | LaunchPipelineReexecution | null},\n  history: History<unknown>,\n  options: {behavior: LaunchBehavior; preserveQuerystring?: boolean},\n) {\n  const obj =\n    result && result.data && 'launchPipelineExecution' in result.data\n      ? result.data.launchPipelineExecution\n      : result && result.data && 'launchPipelineReexecution' in result.data\n      ? result.data.launchPipelineReexecution\n      : null;\n\n  if (!obj) {\n    showCustomAlert({body: `No data was returned. Did Dagit crash?`});\n    return;\n  }\n\n  if (obj.__typename === 'LaunchRunSuccess') {\n    const pathname = `/instance/runs/${obj.run.runId}`;\n    const search = options.preserveQuerystring ? history.location.search : '';\n\n    if (options.behavior === 'open-in-new-tab') {\n      window.open(history.createHref({pathname, search}), '_blank');\n    } else if (options.behavior === 'open') {\n      history.push({pathname, search});\n    } else {\n      SharedToaster.show({\n        intent: 'success',\n        message: (\n          <div>\n            Launched run <Mono>{obj.run.runId.slice(0, 8)}</Mono>\n          </div>\n        ),\n        action: {\n          text: 'View',\n          onClick: () => history.push({pathname, search}),\n        },\n      });\n    }\n    document.dispatchEvent(new CustomEvent('run-launched'));\n  } else if (obj.__typename === 'InvalidSubsetError') {\n    showCustomAlert({body: obj.message});\n  } else if (obj.__typename === 'PythonError') {\n    showCustomAlert({\n      title: 'Error',\n      body: <PythonErrorInfo error={obj} />,\n    });\n  } else {\n    let message = `${pipelineName} cannot be executed with the provided config.`;\n\n    if ('errors' in obj) {\n      message += ` Please fix the following errors:\\n\\n${obj.errors\n        .map((error) => error.message)\n        .join('\\n\\n')}`;\n    }\n\n    showCustomAlert({body: message});\n  }\n}\n\nfunction getBaseExecutionMetadata(run: RunFragment | RunTableRunFragment) {\n  const hiddenTagKeys: string[] = [DagsterTag.IsResumeRetry, DagsterTag.StepSelection];\n\n  return {\n    parentRunId: run.runId,\n    rootRunId: run.rootRunId ? run.rootRunId : run.runId,\n    tags: [\n      // Clean up tags related to run grouping once we decide its persistence\n      // https://github.com/dagster-io/dagster/issues/2495\n      ...run.tags\n        .filter((tag) => !hiddenTagKeys.includes(tag.key))\n        .map((tag) => ({\n          key: tag.key,\n          value: tag.value,\n        })),\n      // pass resume/retry indicator via tags\n      // pass run group info via tags\n      {\n        key: DagsterTag.ParentRunId,\n        value: run.runId,\n      },\n      {\n        key: DagsterTag.RootRunId,\n        value: run.rootRunId ? run.rootRunId : run.runId,\n      },\n    ],\n  };\n}\n\nexport type ReExecutionStyle =\n  | {type: 'all'}\n  | {type: 'from-failure'}\n  | {type: 'selection'; selection: StepSelection};\n\nexport function getReexecutionVariables(input: {\n  run: (RunFragment | RunTableRunFragment) & {runConfigYaml: string};\n  style: ReExecutionStyle;\n  repositoryLocationName: string;\n  repositoryName: string;\n}) {\n  const {run, style, repositoryLocationName, repositoryName} = input;\n\n  if (!run || !run.pipelineSnapshotId) {\n    return undefined;\n  }\n\n  const executionParams: ExecutionParams = {\n    mode: run.mode,\n    runConfigData: run.runConfigYaml,\n    executionMetadata: getBaseExecutionMetadata(run),\n    selector: {\n      repositoryLocationName,\n      repositoryName,\n      pipelineName: run.pipelineName,\n      solidSelection: run.solidSelection,\n      assetSelection: run.assetSelection\n        ? run.assetSelection.map((asset_key) => ({\n            path: asset_key.path,\n          }))\n        : null,\n    },\n  };\n\n  if (style.type === 'from-failure') {\n    executionParams.executionMetadata?.tags?.push({\n      key: DagsterTag.IsResumeRetry,\n      value: 'true',\n    });\n  }\n  if (style.type === 'selection') {\n    executionParams.stepKeys = style.selection.keys;\n    executionParams.executionMetadata?.tags?.push({\n      key: DagsterTag.StepSelection,\n      value: style.selection.query,\n    });\n  }\n  return {executionParams};\n}\n\nexport const LAUNCH_PIPELINE_EXECUTION_MUTATION = gql`\n  mutation LaunchPipelineExecution($executionParams: ExecutionParams!) {\n    launchPipelineExecution(executionParams: $executionParams) {\n      __typename\n      ... on LaunchRunSuccess {\n        run {\n          id\n          runId\n          pipelineName\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ... on RunConfigValidationInvalid {\n        errors {\n          message\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nexport const DELETE_MUTATION = gql`\n  mutation Delete($runId: String!) {\n    deletePipelineRun(runId: $runId) {\n      __typename\n      ...PythonErrorFragment\n      ... on UnauthorizedError {\n        message\n      }\n      ... on RunNotFoundError {\n        message\n      }\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nexport const TERMINATE_MUTATION = gql`\n  mutation Terminate($runId: String!, $terminatePolicy: TerminateRunPolicy) {\n    terminatePipelineExecution(runId: $runId, terminatePolicy: $terminatePolicy) {\n      __typename\n      ... on TerminateRunFailure {\n        message\n      }\n      ... on RunNotFoundError {\n        message\n      }\n      ... on TerminateRunSuccess {\n        run {\n          id\n          runId\n          canTerminate\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nexport const LAUNCH_PIPELINE_REEXECUTION_MUTATION = gql`\n  mutation LaunchPipelineReexecution(\n    $executionParams: ExecutionParams\n    $reexecutionParams: ReexecutionParams\n  ) {\n    launchPipelineReexecution(\n      executionParams: $executionParams\n      reexecutionParams: $reexecutionParams\n    ) {\n      __typename\n      ... on LaunchRunSuccess {\n        run {\n          id\n          runId\n          pipelineName\n          rootRunId\n          parentRunId\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ... on RunConfigValidationInvalid {\n        errors {\n          message\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\ninterface RunTimeProps {\n  run: RunTimeFragment;\n}\n\nexport const RunTime: React.FC<RunTimeProps> = React.memo(({run}) => {\n  const {startTime, updateTime} = run;\n\n  return (\n    <div>\n      {startTime ? (\n        <Timestamp timestamp={{unix: startTime}} />\n      ) : updateTime ? (\n        <Timestamp timestamp={{unix: updateTime}} />\n      ) : null}\n    </div>\n  );\n});\n\nexport const RunStateSummary: React.FC<RunTimeProps> = React.memo(({run}) => {\n  // kind of a hack, but we manually set the start time to the end time in the graphql resolver\n  // for this case, so check for start/end time equality for the failed to start condition\n  const failedToStart =\n    run.status === RunStatus.FAILURE && (!run.startTime || run.startTime === run.endTime);\n\n  return failedToStart ? (\n    <div>Failed to start</div>\n  ) : run.status === RunStatus.CANCELED ? (\n    <div>Canceled</div>\n  ) : run.status === RunStatus.CANCELING ? (\n    <div>Canceling</div>\n  ) : run.status === RunStatus.QUEUED ? (\n    <div>Queued</div>\n  ) : !run.startTime ? (\n    <div>Starting</div>\n  ) : (\n    <TimeElapsed startUnix={run.startTime} endUnix={run.endTime} />\n  );\n});\n\nexport const RUN_TIME_FRAGMENT = gql`\n  fragment RunTimeFragment on Run {\n    id\n    runId\n    status\n    startTime\n    endTime\n    updateTime\n  }\n`;\n","import {gql, useLazyQuery} from '@apollo/client';\nimport {\n  SuggestionProvider,\n  TokenizingField,\n  TokenizingFieldValue,\n  tokensAsStringArray,\n  tokenizedValuesFromStringArray,\n} from '@dagster-io/ui';\nimport qs from 'qs';\nimport * as React from 'react';\n\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {RunStatus, RunsFilter} from '../types/globalTypes';\nimport {DagsterRepoOption, useRepositoryOptions} from '../workspace/WorkspaceContext';\n\nimport {canAddTagToFilter} from './RunTags';\nimport {\n  RunsSearchSpaceQuery,\n  RunsSearchSpaceQuery_pipelineRunTags,\n} from './types/RunsSearchSpaceQuery';\n\ntype PipelineRunTags = RunsSearchSpaceQuery_pipelineRunTags[];\n\nexport type RunFilterTokenType = 'id' | 'status' | 'pipeline' | 'job' | 'snapshotId' | 'tag';\n\nexport type RunFilterToken = {\n  token?: RunFilterTokenType;\n  value: string;\n};\n\nconst RUN_PROVIDERS_EMPTY = [\n  {\n    token: 'id',\n    values: () => [],\n  },\n  {\n    token: 'status',\n    values: () => [],\n  },\n  {\n    token: 'pipeline',\n    values: () => [],\n  },\n  {\n    token: 'job',\n    values: () => [],\n  },\n  {\n    token: 'tag',\n    values: () => [],\n  },\n  {\n    token: 'snapshotId',\n    values: () => [],\n  },\n];\n\n/**\n * This React hook provides run filtering state similar to React.useState(), but syncs\n * the value to the URL query string so that reloading the page / navigating \"back\"\n * maintains your view as expected.\n *\n * @param enabledFilters: This is useful if you want to ignore some filters that could\n * be provided (eg pipeline:, which is not relevant within pipeline scoped views.)\n */\nexport function useQueryPersistedRunFilters(enabledFilters?: RunFilterTokenType[]) {\n  return useQueryPersistedState<RunFilterToken[]>(\n    React.useMemo(\n      () => ({\n        encode: (tokens) => ({q: tokensAsStringArray(tokens), cursor: undefined}),\n        decode: ({q = []}) =>\n          tokenizedValuesFromStringArray(q, RUN_PROVIDERS_EMPTY).filter(\n            (t) =>\n              !t.token || !enabledFilters || enabledFilters.includes(t.token as RunFilterTokenType),\n          ) as RunFilterToken[],\n      }),\n      [enabledFilters],\n    ),\n  );\n}\n\nexport function runsPathWithFilters(filterTokens: RunFilterToken[]) {\n  return `/instance/runs?${qs.stringify(\n    {q: tokensAsStringArray(filterTokens)},\n    {arrayFormat: 'brackets'},\n  )}`;\n}\n\nexport function runsFilterForSearchTokens(search: TokenizingFieldValue[]) {\n  if (!search[0]) {\n    return {};\n  }\n\n  const obj: RunsFilter = {};\n\n  for (const item of search) {\n    if (item.token === 'pipeline' || item.token === 'job') {\n      obj.pipelineName = item.value;\n    } else if (item.token === 'id') {\n      obj.runIds = obj.runIds || [];\n      obj.runIds.push(item.value);\n    } else if (item.token === 'status') {\n      obj.statuses = obj.statuses || [];\n      obj.statuses.push(item.value as RunStatus);\n    } else if (item.token === 'snapshotId') {\n      obj.snapshotId = item.value;\n    } else if (item.token === 'tag') {\n      const [key, value] = item.value.split('=');\n      if (obj.tags) {\n        obj.tags.push({key, value});\n      } else {\n        obj.tags = [{key, value}];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction searchSuggestionsForRuns(\n  repositoryOptions: DagsterRepoOption[],\n  pipelineRunTags?: PipelineRunTags,\n  enabledFilters?: RunFilterTokenType[],\n): SuggestionProvider[] {\n  const pipelineNames = new Set<string>();\n  const jobNames = new Set<string>();\n\n  for (const option of repositoryOptions) {\n    const {repository} = option;\n    for (const pipeline of repository.pipelines) {\n      if (pipeline.isJob) {\n        jobNames.add(pipeline.name);\n      } else {\n        pipelineNames.add(pipeline.name);\n      }\n    }\n  }\n\n  const suggestions: {token: RunFilterTokenType; values: () => string[]}[] = [\n    {\n      token: 'id',\n      values: () => [],\n    },\n    {\n      token: 'status',\n      values: () => Object.keys(RunStatus),\n    },\n    {\n      token: 'pipeline',\n      values: () => Array.from(pipelineNames),\n    },\n    {\n      token: 'job',\n      values: () => Array.from(jobNames),\n    },\n    {\n      token: 'tag',\n      values: () => {\n        const all: string[] = [];\n        [...(pipelineRunTags || [])]\n          .filter(({key}) => canAddTagToFilter(key))\n          .sort((a, b) => a.key.localeCompare(b.key))\n          .forEach((t) => t.values.forEach((v) => all.push(`${t.key}=${v}`)));\n        return all;\n      },\n    },\n    {\n      token: 'snapshotId',\n      values: () => [],\n    },\n  ];\n\n  if (enabledFilters) {\n    return suggestions.filter((x) => enabledFilters.includes(x.token));\n  }\n\n  return suggestions;\n}\n\ninterface RunsFilterInputProps {\n  loading?: boolean;\n  tokens: RunFilterToken[];\n  onChange: (tokens: RunFilterToken[]) => void;\n  enabledFilters?: RunFilterTokenType[];\n}\n\nexport const RunsFilterInput: React.FC<RunsFilterInputProps> = ({\n  loading,\n  tokens,\n  onChange,\n  enabledFilters,\n}) => {\n  const {options} = useRepositoryOptions();\n  const [performQuery, {data}] = useLazyQuery<RunsSearchSpaceQuery>(RUNS_SEARCH_SPACE_QUERY, {\n    fetchPolicy: 'cache-and-network',\n  });\n\n  const suggestions = searchSuggestionsForRuns(options, data?.pipelineRunTags, enabledFilters);\n\n  const search = tokenizedValuesFromStringArray(tokensAsStringArray(tokens), suggestions);\n\n  const suggestionProvidersFilter = (\n    suggestionProviders: SuggestionProvider[],\n    values: TokenizingFieldValue[],\n  ) => {\n    const tokens: string[] = [];\n    for (const {token} of values) {\n      if (token) {\n        tokens.push(token);\n      }\n    }\n\n    // If id is set, then no other filters can be set\n    if (tokens.includes('id')) {\n      return [];\n    }\n\n    // Can only have one filter value for pipeline or id\n    const limitedTokens = new Set<string>(['id', 'job', 'pipeline', 'snapshotId']);\n    const presentLimitedTokens = tokens.filter((token) => limitedTokens.has(token));\n\n    return suggestionProviders.filter(\n      (provider) => !provider.token || !presentLimitedTokens.includes(provider.token),\n    );\n  };\n\n  const onFocus = React.useCallback(() => performQuery(), [performQuery]);\n\n  return (\n    <TokenizingField\n      values={search}\n      onChange={(values) => onChange(values as RunFilterToken[])}\n      onFocus={onFocus}\n      suggestionProviders={suggestions}\n      suggestionProvidersFilter={suggestionProvidersFilter}\n      loading={loading}\n    />\n  );\n};\n\nconst RUNS_SEARCH_SPACE_QUERY = gql`\n  query RunsSearchSpaceQuery {\n    pipelineRunTags {\n      key\n      values\n    }\n  }\n`;\n","import {useMutation} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {ProgressBar} from '@blueprintjs/core';\nimport {\n  Box,\n  Button,\n  Checkbox,\n  Colors,\n  DialogBody,\n  DialogFooter,\n  Dialog,\n  Group,\n  Icon,\n  Mono,\n} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {TerminateRunPolicy} from '../types/globalTypes';\n\nimport {NavigationBlock} from './NavitationBlock';\nimport {TERMINATE_MUTATION} from './RunUtils';\nimport {\n  Terminate,\n  Terminate_terminatePipelineExecution_RunNotFoundError,\n  Terminate_terminatePipelineExecution_PythonError,\n  Terminate_terminatePipelineExecution_UnauthorizedError,\n  Terminate_terminatePipelineExecution_TerminateRunFailure,\n  TerminateVariables,\n} from './types/Terminate';\n\nexport interface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onComplete: (terminationState: TerminationState) => void;\n  // A map from the run ID to its `canTerminate` value\n  selectedRuns: {[id: string]: boolean};\n}\n\ntype Error =\n  | Terminate_terminatePipelineExecution_TerminateRunFailure\n  | Terminate_terminatePipelineExecution_RunNotFoundError\n  | Terminate_terminatePipelineExecution_UnauthorizedError\n  | Terminate_terminatePipelineExecution_PythonError\n  | undefined;\n\nexport type TerminationState = {completed: number; errors: {[id: string]: Error}};\n\ntype TerminationDialogState = {\n  mustForce: boolean;\n  frozenRuns: SelectedRuns;\n  step: 'initial' | 'terminating' | 'completed';\n  termination: TerminationState;\n};\n\ntype SelectedRuns = {[id: string]: boolean};\n\nconst initializeState = (selectedRuns: SelectedRuns): TerminationDialogState => {\n  return {\n    // If any selected runs have `canTerminate`, we don't necessarily have to force.\n    mustForce: !Object.keys(selectedRuns).some((id) => selectedRuns[id]),\n    frozenRuns: selectedRuns,\n    step: 'initial',\n    termination: {completed: 0, errors: {}},\n  };\n};\n\ntype TerminationDialogAction =\n  | {type: 'reset'; frozenRuns: SelectedRuns}\n  | {type: 'toggle-force-terminate'; checked: boolean}\n  | {type: 'start'}\n  | {type: 'termination-success'}\n  | {type: 'termination-error'; id: string; error: Error}\n  | {type: 'complete'};\n\nconst terminationDialogReducer = (\n  prevState: TerminationDialogState,\n  action: TerminationDialogAction,\n): TerminationDialogState => {\n  switch (action.type) {\n    case 'reset':\n      return initializeState(action.frozenRuns);\n    case 'toggle-force-terminate':\n      return {...prevState, mustForce: action.checked};\n    case 'start':\n      return {...prevState, step: 'terminating'};\n    case 'termination-success': {\n      const {termination} = prevState;\n      return {\n        ...prevState,\n        step: 'terminating',\n        termination: {...termination, completed: termination.completed + 1},\n      };\n    }\n    case 'termination-error': {\n      const {termination} = prevState;\n      return {\n        ...prevState,\n        step: 'terminating',\n        termination: {\n          ...termination,\n          completed: termination.completed + 1,\n          errors: {...termination.errors, [action.id]: action.error},\n        },\n      };\n    }\n    case 'complete':\n      return {...prevState, step: 'completed'};\n  }\n};\n\nexport const TerminationDialog = (props: Props) => {\n  const {isOpen, onClose, onComplete, selectedRuns} = props;\n\n  // Freeze the selected IDs, since the list may change as runs continue processing and\n  // terminating. We want to preserve the list we're given.\n  const frozenRuns = React.useRef<SelectedRuns>(selectedRuns);\n\n  const [state, dispatch] = React.useReducer(\n    terminationDialogReducer,\n    frozenRuns.current,\n    initializeState,\n  );\n\n  const count = Object.keys(state.frozenRuns).length;\n\n  // If the dialog is newly open, update state to match the frozen list.\n  React.useEffect(() => {\n    if (isOpen) {\n      dispatch({type: 'reset', frozenRuns: frozenRuns.current});\n    }\n  }, [isOpen]);\n\n  // If the dialog is not open, update the ref so that the frozen list will be entered\n  // into state the next time the dialog opens.\n  React.useEffect(() => {\n    if (!isOpen) {\n      frozenRuns.current = selectedRuns;\n    }\n  }, [isOpen, selectedRuns]);\n\n  const [terminate] = useMutation<Terminate, TerminateVariables>(TERMINATE_MUTATION);\n  const policy = state.mustForce\n    ? TerminateRunPolicy.MARK_AS_CANCELED_IMMEDIATELY\n    : TerminateRunPolicy.SAFE_TERMINATE;\n\n  const mutate = async () => {\n    dispatch({type: 'start'});\n\n    const runList = Object.keys(state.frozenRuns);\n    for (let ii = 0; ii < runList.length; ii++) {\n      const runId = runList[ii];\n      const {data} = await terminate({variables: {runId, terminatePolicy: policy}});\n\n      if (data?.terminatePipelineExecution.__typename === 'TerminateRunSuccess') {\n        dispatch({type: 'termination-success'});\n      } else {\n        dispatch({type: 'termination-error', id: runId, error: data?.terminatePipelineExecution});\n      }\n    }\n\n    dispatch({type: 'complete'});\n    onComplete(state.termination);\n  };\n\n  const onToggleForce = (event: React.ChangeEvent<HTMLInputElement>) => {\n    dispatch({type: 'toggle-force-terminate', checked: event.target.checked});\n  };\n\n  const showCheckbox = Object.keys(state.frozenRuns).some((id) => state.frozenRuns[id]);\n\n  const progressContent = () => {\n    switch (state.step) {\n      case 'initial':\n        if (!count) {\n          return (\n            <Group direction=\"column\" spacing={16}>\n              <div>No runs selected for termination.</div>\n              <div>The runs you selected may already have finished executing.</div>\n            </Group>\n          );\n        }\n\n        return (\n          <Group direction=\"column\" spacing={16}>\n            <div>\n              {`${count} ${\n                count === 1 ? 'run' : 'runs'\n              } will be terminated. Do you wish to continue?`}\n            </div>\n            <div>\n              {showCheckbox ? (\n                <>\n                  <Checkbox\n                    checked={state.mustForce}\n                    size=\"small\"\n                    label=\"Force termination immediately\"\n                    onChange={onToggleForce}\n                  />\n                  {state.mustForce ? (\n                    <Box flex={{display: 'flex', direction: 'row', gap: 8}} margin={{top: 8}}>\n                      <Icon name=\"warning\" color={Colors.Yellow500} />\n                      <div>\n                        <strong>Warning:</strong> computational resources created by runs may not be\n                        cleaned up.\n                      </div>\n                    </Box>\n                  ) : null}\n                </>\n              ) : (\n                <Group direction=\"row\" spacing={8}>\n                  <Icon name=\"warning\" color={Colors.Yellow500} />\n                  <div>\n                    <strong>Warning:</strong> computational resources created by runs may not be\n                    cleaned up.\n                  </div>\n                </Group>\n              )}\n            </div>\n          </Group>\n        );\n      case 'terminating':\n      case 'completed':\n        const value = count > 0 ? state.termination.completed / count : 1;\n        return (\n          <Group direction=\"column\" spacing={8}>\n            <div>{state.mustForce ? 'Forcing termination' : 'Terminating'}</div>\n            <ProgressBar intent=\"primary\" value={Math.max(0.1, value)} animate={value < 1} />\n            {state.step === 'terminating' ? (\n              <NavigationBlock message=\"Termination in progress, please do not navigate away yet.\" />\n            ) : null}\n          </Group>\n        );\n      default:\n        return null;\n    }\n  };\n\n  const buttons = () => {\n    switch (state.step) {\n      case 'initial':\n        if (!count) {\n          return (\n            <Button intent=\"none\" onClick={onClose}>\n              OK\n            </Button>\n          );\n        }\n\n        return (\n          <>\n            <Button intent=\"none\" onClick={onClose}>\n              Cancel\n            </Button>\n            <Button intent=\"danger\" onClick={mutate}>\n              {`${state.mustForce ? 'Force termination for' : 'Terminate'} ${`${count} ${\n                count === 1 ? 'run' : 'runs'\n              }`}`}\n            </Button>\n          </>\n        );\n      case 'terminating':\n        return (\n          <Button intent=\"danger\" disabled>\n            {state.mustForce\n              ? `Forcing termination for ${`${count} ${count === 1 ? 'run' : 'runs'}...`}`\n              : `Terminating ${`${count} ${count === 1 ? 'run' : 'runs'}...`}`}\n          </Button>\n        );\n      case 'completed':\n        return (\n          <Button intent=\"primary\" onClick={onClose}>\n            Done\n          </Button>\n        );\n    }\n  };\n\n  const completionContent = () => {\n    if (state.step === 'initial') {\n      return null;\n    }\n\n    if (state.step === 'terminating') {\n      return <div>Please do not close the window or navigate away during termination.</div>;\n    }\n\n    const errors = state.termination.errors;\n    const errorCount = Object.keys(errors).length;\n    const successCount = state.termination.completed - errorCount;\n\n    return (\n      <Group direction=\"column\" spacing={8}>\n        {successCount ? (\n          <Group direction=\"row\" spacing={8} alignItems=\"flex-start\">\n            <Icon name=\"check_circle\" color={Colors.Green500} />\n            <div>\n              {state.mustForce\n                ? `Successfully forced termination for ${successCount}\n                ${successCount === 1 ? 'run' : `runs`}.`\n                : `Successfully requested termination for ${successCount}\n              ${successCount === 1 ? 'run' : `runs`}.`}\n            </div>\n          </Group>\n        ) : null}\n        {errorCount ? (\n          <Group direction=\"column\" spacing={8}>\n            <Group direction=\"row\" spacing={8} alignItems=\"flex-start\">\n              <Icon name=\"warning\" color={Colors.Yellow500} />\n              <div>\n                {state.mustForce\n                  ? `Could not force termination for ${errorCount} ${\n                      errorCount === 1 ? 'run' : 'runs'\n                    }:`\n                  : `Could not request termination for ${errorCount} ${\n                      errorCount === 1 ? 'run' : 'runs'\n                    }:`}\n              </div>\n            </Group>\n            <ul>\n              {Object.keys(errors).map((runId) => (\n                <li key={runId}>\n                  <Group direction=\"row\" spacing={8}>\n                    <Mono>{runId.slice(0, 8)}</Mono>\n                    {errors[runId] ? <div>{errors[runId]?.message}</div> : null}\n                  </Group>\n                </li>\n              ))}\n            </ul>\n          </Group>\n        ) : null}\n      </Group>\n    );\n  };\n\n  const canQuicklyClose = state.step !== 'terminating';\n\n  return (\n    <Dialog\n      isOpen={isOpen}\n      title=\"Terminate runs\"\n      canEscapeKeyClose={canQuicklyClose}\n      canOutsideClickClose={canQuicklyClose}\n      onClose={onClose}\n    >\n      <DialogBody>\n        <Group direction=\"column\" spacing={24}>\n          {progressContent()}\n          {completionContent()}\n        </Group>\n      </DialogBody>\n      <DialogFooter>{buttons()}</DialogFooter>\n    </Dialog>\n  );\n};\n","import {Colors, Group, Icon} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {formatElapsedTime} from '../app/Util';\n\nexport interface Props {\n  startUnix: number | null;\n  endUnix: number | null;\n}\n\nexport const TimeElapsed = (props: Props) => {\n  const {startUnix, endUnix} = props;\n\n  const [endTime, setEndTime] = React.useState(() => (endUnix ? endUnix * 1000 : null));\n  const interval = React.useRef<NodeJS.Timer | null>(null);\n  const timeout = React.useRef<NodeJS.Timer | null>(null);\n\n  const clearTimers = React.useCallback(() => {\n    interval.current && clearInterval(interval.current);\n    timeout.current && clearTimeout(timeout.current);\n  }, []);\n\n  React.useEffect(() => {\n    // An end time has been supplied. Simply set a static value.\n    if (endUnix) {\n      setEndTime(endUnix * 1000);\n      return;\n    }\n\n    // Align to the next second and then update every second so the elapsed\n    // time \"ticks\" up.\n    timeout.current = setTimeout(() => {\n      interval.current = setInterval(() => {\n        setEndTime(Date.now());\n      }, 1000);\n    }, Date.now() % 1000);\n\n    return () => clearTimers();\n  }, [clearTimers, endUnix]);\n\n  const startTime = startUnix ? startUnix * 1000 : 0;\n\n  return (\n    <Group direction=\"row\" spacing={4} alignItems=\"center\">\n      <Icon name=\"timer\" color={Colors.Gray400} />\n      <span style={{fontVariantNumeric: 'tabular-nums'}}>\n        {startTime ? formatElapsedTime((endTime || Date.now()) - startTime) : ''}\n      </span>\n    </Group>\n  );\n};\n","import memoize from 'lodash/memoize';\nimport uniq from 'lodash/uniq';\n\nimport {DagsterEventType} from '../types/globalTypes';\nconst typeValues = memoize(() =>\n  uniq(Object.values(DagsterEventType).map(eventTypeToDisplayType)).sort(),\n);\n\nexport const eventTypeToDisplayType = (eventType: string) => {\n  switch (eventType) {\n    case DagsterEventType.PIPELINE_STARTING:\n      return DagsterEventType.RUN_STARTING;\n    case DagsterEventType.PIPELINE_ENQUEUED:\n      return DagsterEventType.RUN_ENQUEUED;\n    case DagsterEventType.PIPELINE_DEQUEUED:\n      return DagsterEventType.RUN_DEQUEUED;\n    case DagsterEventType.PIPELINE_STARTING:\n      return DagsterEventType.RUN_STARTING;\n    case DagsterEventType.PIPELINE_START:\n      return DagsterEventType.RUN_START;\n    case DagsterEventType.PIPELINE_SUCCESS:\n      return DagsterEventType.RUN_SUCCESS;\n    case DagsterEventType.PIPELINE_FAILURE:\n      return DagsterEventType.RUN_FAILURE;\n    case DagsterEventType.PIPELINE_CANCELING:\n      return DagsterEventType.RUN_CANCELING;\n    case DagsterEventType.PIPELINE_CANCELED:\n      return DagsterEventType.RUN_CANCELED;\n\n    default:\n      return eventType;\n  }\n};\n\nexport const getRunFilterProviders = memoize(\n  (stepNames: string[] = []) => {\n    return [\n      {\n        token: 'step',\n        values: () => stepNames,\n      },\n      {\n        token: 'type',\n        values: typeValues,\n      },\n      {\n        token: 'query',\n        values: () => [],\n      },\n    ];\n  },\n  (stepNames: string[] = []) => JSON.stringify(stepNames),\n);\n","import {LogLevel} from './LogLevel';\nimport {LogNode} from './types';\n\nexport const logNodeLevel = (node: LogNode): LogLevel =>\n  node.__typename === 'LogMessageEvent' ? node.level : LogLevel.EVENT;\n","import {useQuery} from '@apollo/client';\nimport {CursorPaginationProps} from '@dagster-io/ui';\nimport {DocumentNode} from 'graphql';\nimport * as React from 'react';\n\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\n\ninterface CursorPaginationQueryVariables {\n  cursor?: string | null;\n  limit?: number | null;\n}\n\n/**\n * This is a React hook that makes it easier to build paginated list views based on a GraphQL\n * query. It is intended to be used in place of Apollo's `useQuery` and assumes that the query\n * takes at least `cursor` and `limit` variables. It manages those two variables internally,\n * and you can pass additional variables via the options.\n *\n * The current pagination \"cursor\" is saved to the URL query string, which allows the user to\n * navigate \"back\" in their browser history to move to previous pages.\n *\n * The returned paginationProps expose methods for moving to the next / previous page and are\n * used by <CursorPaginationControls /> to render the pagination buttons.\n */\nexport function useCursorPaginatedQuery<T, TVars extends CursorPaginationQueryVariables>(options: {\n  query: DocumentNode;\n  nextCursorForResult: (result: T) => string | undefined;\n  variables: Omit<Omit<TVars, 'cusor'>, 'limit'>;\n  pageSize: number;\n  getResultArray: (result: T | undefined) => any[];\n}) {\n  const [cursorStack, setCursorStack] = React.useState<string[]>(() => []);\n  const [cursor, setCursor] = useQueryPersistedState<string | undefined>({queryKey: 'cursor'});\n\n  const queryVars: any = {\n    ...options.variables,\n    cursor,\n    limit: options.pageSize + 1,\n  };\n\n  const queryResult = useQuery<T, TVars>(options.query, {\n    fetchPolicy: 'cache-and-network',\n    partialRefetch: true,\n    variables: queryVars,\n    notifyOnNetworkStatusChange: true,\n  });\n\n  const resultArray = options.getResultArray(queryResult.data);\n  const paginationProps: CursorPaginationProps = {\n    hasPrevCursor: !!cursor,\n    hasNextCursor: resultArray.length === options.pageSize + 1,\n    popCursor: () => {\n      const nextStack = [...cursorStack];\n      setCursor(nextStack.pop());\n      setCursorStack(nextStack);\n    },\n    advanceCursor: () => {\n      if (cursor) {\n        setCursorStack((current) => [...current, cursor]);\n      }\n      const nextCursor = queryResult.data && options.nextCursorForResult(queryResult.data);\n      if (!nextCursor) {\n        return;\n      }\n      setCursor(nextCursor);\n    },\n    reset: () => {\n      setCursorStack([]);\n      setCursor(undefined);\n    },\n  };\n\n  return {queryResult, paginationProps};\n}\n","import {useMutation} from '@apollo/client';\nimport * as React from 'react';\nimport {useHistory} from 'react-router';\n\nimport {showLaunchError} from '../launchpad/showLaunchError';\nimport {useRepositoryForRun} from '../workspace/useRepositoryForRun';\n\nimport {\n  getReexecutionVariables,\n  handleLaunchResult,\n  LAUNCH_PIPELINE_REEXECUTION_MUTATION,\n  ReExecutionStyle,\n} from './RunUtils';\nimport {\n  LaunchPipelineReexecution,\n  LaunchPipelineReexecutionVariables,\n} from './types/LaunchPipelineReexecution';\nimport {RunFragment} from './types/RunFragment';\n\nexport const useJobReExecution = (run: RunFragment | undefined | null) => {\n  const history = useHistory();\n  const [launchPipelineReexecution] = useMutation<\n    LaunchPipelineReexecution,\n    LaunchPipelineReexecutionVariables\n  >(LAUNCH_PIPELINE_REEXECUTION_MUTATION);\n  const repoMatch = useRepositoryForRun(run);\n\n  return React.useCallback(\n    async (style: ReExecutionStyle) => {\n      if (!run || !run.pipelineSnapshotId || !repoMatch) {\n        return;\n      }\n\n      const variables = getReexecutionVariables({\n        run,\n        style,\n        repositoryLocationName: repoMatch.match.repositoryLocation.name,\n        repositoryName: repoMatch.match.repository.name,\n      });\n\n      try {\n        const result = await launchPipelineReexecution({variables});\n        handleLaunchResult(run.pipelineName, result, history, {\n          preserveQuerystring: true,\n          behavior: 'open',\n        });\n      } catch (error) {\n        showLaunchError(error as Error);\n      }\n    },\n    [history, launchPipelineReexecution, repoMatch, run],\n  );\n};\n","import {gql, useLazyQuery} from '@apollo/client';\nimport {ButtonLink, Colors, Group, Caption} from '@dagster-io/ui';\nimport qs from 'qs';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {assertUnreachable} from '../app/Util';\nimport {StatusTable} from '../instigation/InstigationUtils';\nimport {RunStatus} from '../types/globalTypes';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePathFromAddress} from '../workspace/workspacePath';\n\nimport {ScheduleFragment} from './types/ScheduleFragment';\nimport {\n  SchedulePartitionStatusFragment,\n  SchedulePartitionStatusFragment_partitionSet_partitionStatusesOrError_PartitionStatuses_results as Partition,\n} from './types/SchedulePartitionStatusFragment';\nimport {\n  SchedulePartitionStatusQuery,\n  SchedulePartitionStatusQueryVariables,\n} from './types/SchedulePartitionStatusQuery';\n\nconst RUN_STATUSES = ['Succeeded', 'Failed', 'Missing', 'Pending'];\n\nconst calculateDisplayStatus = (partition: Partition) => {\n  switch (partition.runStatus) {\n    case null:\n      return 'Missing';\n    case RunStatus.SUCCESS:\n      return 'Succeeded';\n    case RunStatus.FAILURE:\n    case RunStatus.CANCELED:\n    case RunStatus.CANCELING:\n      return 'Failed';\n    case RunStatus.MANAGED:\n    case RunStatus.QUEUED:\n    case RunStatus.NOT_STARTED:\n    case RunStatus.STARTED:\n    case RunStatus.STARTING:\n      return 'Pending';\n    default:\n      return assertUnreachable(partition.runStatus);\n  }\n};\n\nexport const SchedulePartitionStatus: React.FC<{\n  repoAddress: RepoAddress;\n  schedule: ScheduleFragment;\n}> = React.memo(({repoAddress, schedule}) => {\n  const repo = useRepository(repoAddress);\n  const {name: scheduleName, partitionSet, pipelineName} = schedule;\n\n  const partitionSetName = partitionSet?.name;\n  const isJob = isThisThingAJob(repo, pipelineName);\n\n  const partitionPath = React.useMemo(() => {\n    const query = partitionSetName\n      ? qs.stringify(\n          {\n            partitionSet: partitionSetName,\n          },\n          {addQueryPrefix: true},\n        )\n      : '';\n    return `/${isJob ? 'jobs' : 'pipelines'}/${pipelineName}/partitions${query}`;\n  }, [partitionSetName, isJob, pipelineName]);\n\n  const partitionURL = workspacePathFromAddress(repoAddress, partitionPath);\n\n  const [retrievePartitionStatus, {data, loading}] = useLazyQuery<\n    SchedulePartitionStatusQuery,\n    SchedulePartitionStatusQueryVariables\n  >(SCHEDULE_PARTITION_STATUS_QUERY, {\n    variables: {\n      scheduleSelector: {\n        scheduleName,\n        repositoryName: repoAddress.name,\n        repositoryLocationName: repoAddress.location,\n      },\n    },\n  });\n\n  const onClick = React.useCallback(() => retrievePartitionStatus(), [retrievePartitionStatus]);\n\n  const loadable = () => {\n    if (loading) {\n      return <Caption style={{color: Colors.Gray400}}>Loading</Caption>;\n    }\n\n    if (!data) {\n      return (\n        <ButtonLink onClick={onClick}>\n          <Caption>Show coverage</Caption>\n        </ButtonLink>\n      );\n    }\n\n    const partitionFragment = data.scheduleOrError;\n    if (partitionFragment.__typename === 'Schedule') {\n      return (\n        <RetrievedSchedulePartitionStatus\n          schedule={partitionFragment}\n          partitionURL={partitionURL}\n        />\n      );\n    }\n\n    return <Caption style={{color: Colors.Red700}}>Partition set not found!</Caption>;\n  };\n\n  return (\n    <Group direction=\"column\" spacing={4}>\n      <Link to={partitionURL}>{partitionSetName}</Link>\n      {loadable()}\n    </Group>\n  );\n});\n\nconst RetrievedSchedulePartitionStatus: React.FC<{\n  schedule: SchedulePartitionStatusFragment;\n  partitionURL: string;\n}> = ({schedule, partitionURL}) => {\n  const {partitionSet} = schedule;\n\n  if (!partitionSet || partitionSet.partitionStatusesOrError.__typename !== 'PartitionStatuses') {\n    return <span style={{color: Colors.Gray300}}>None</span>;\n  }\n\n  const partitions = partitionSet.partitionStatusesOrError.results;\n  const partitionsByType = {};\n  partitions.forEach((partition) => {\n    const displayStatus = calculateDisplayStatus(partition);\n    partitionsByType[displayStatus] = [...(partitionsByType[displayStatus] || []), partition];\n  });\n\n  return (\n    <StatusTable>\n      <tbody>\n        {RUN_STATUSES.map((status) => {\n          if (!(status in partitionsByType)) {\n            return null;\n          }\n          return (\n            <tr key={status}>\n              <td style={{width: '100px'}}>{status}</td>\n              <td>\n                {status === 'Failed' || status === 'Missing' ? (\n                  <Link\n                    to={`${partitionURL}?showFailuresAndGapsOnly=true`}\n                    style={{color: Colors.Gray900}}\n                  >\n                    {partitionsByType[status].length}\n                  </Link>\n                ) : (\n                  partitionsByType[status].length\n                )}\n              </td>\n            </tr>\n          );\n        })}\n      </tbody>\n    </StatusTable>\n  );\n};\n\nconst SCHEDULE_PARTITION_STATUS_FRAGMENT = gql`\n  fragment SchedulePartitionStatusFragment on Schedule {\n    id\n    mode\n    pipelineName\n    partitionSet {\n      id\n      name\n      partitionStatusesOrError {\n        ... on PartitionStatuses {\n          results {\n            id\n            partitionName\n            runStatus\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst SCHEDULE_PARTITION_STATUS_QUERY = gql`\n  query SchedulePartitionStatusQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...SchedulePartitionStatusFragment\n      }\n    }\n  }\n  ${SCHEDULE_PARTITION_STATUS_FRAGMENT}\n`;\n","import {gql} from '@apollo/client';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {INSTANCE_HEALTH_FRAGMENT} from '../instance/InstanceHealthFragment';\nimport {INSTIGATION_STATE_FRAGMENT} from '../instigation/InstigationUtils';\nimport {REPOSITORY_INFO_FRAGMENT} from '../workspace/RepositoryInformation';\n\nexport const SCHEDULE_FRAGMENT = gql`\n  fragment ScheduleFragment on Schedule {\n    id\n    name\n    cronSchedule\n    executionTimezone\n    pipelineName\n    solidSelection\n    mode\n    description\n    partitionSet {\n      id\n      name\n    }\n    scheduleState {\n      id\n      ...InstigationStateFragment\n    }\n    futureTicks(limit: 5) {\n      results {\n        timestamp\n      }\n    }\n  }\n  ${INSTIGATION_STATE_FRAGMENT}\n`;\n\nexport const REPOSITORY_SCHEDULES_FRAGMENT = gql`\n  fragment RepositorySchedulesFragment on Repository {\n    name\n    id\n    location {\n      id\n      name\n    }\n    schedules {\n      id\n      ...ScheduleFragment\n    }\n    ...RepositoryInfoFragment\n  }\n  ${REPOSITORY_INFO_FRAGMENT}\n  ${SCHEDULE_FRAGMENT}\n`;\n\nexport const SCHEDULES_ROOT_QUERY = gql`\n  query SchedulesRootQuery(\n    $repositorySelector: RepositorySelector!\n    $instigationType: InstigationType!\n  ) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      __typename\n      ... on Repository {\n        id\n        ...RepositorySchedulesFragment\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: $instigationType) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n  ${REPOSITORY_SCHEDULES_FRAGMENT}\n  ${INSTIGATION_STATE_FRAGMENT}\n  ${INSTANCE_HEALTH_FRAGMENT}\n`;\n","import {Alert} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {DaemonHealthFragment} from '../instance/types/DaemonHealthFragment';\n\nexport const SchedulerInfo: React.FC<{\n  daemonHealth: DaemonHealthFragment | undefined;\n}> = ({daemonHealth}) => {\n  let healthy = false;\n\n  if (daemonHealth) {\n    const schedulerHealths = daemonHealth.allDaemonStatuses.filter(\n      (daemon) => daemon.daemonType === 'SCHEDULER',\n    );\n    if (schedulerHealths) {\n      const schedulerHealth = schedulerHealths[0];\n      healthy = !!(schedulerHealth.required && schedulerHealth.healthy);\n    }\n  }\n\n  if (!healthy) {\n    return (\n      <Alert\n        intent=\"warning\"\n        title=\"The scheduler daemon is not running.\"\n        description={\n          <div>\n            See the{' '}\n            <a href=\"https://docs.dagster.io/deployment/dagster-daemon\">\n              dagster-daemon documentation\n            </a>{' '}\n            for more information on how to deploy the dagster-daemon process.\n          </div>\n        }\n      />\n    );\n  }\n\n  return null;\n};\n","import {gql, useLazyQuery} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  ButtonLink,\n  Colors,\n  DialogBody,\n  DialogFooter,\n  Dialog,\n  Group,\n  Icon,\n  MenuItem,\n  Menu,\n  NonIdealState,\n  Popover,\n  Spinner,\n  Table,\n  Subheading,\n  StyledReadOnlyCodeMirror,\n} from '@dagster-io/ui';\nimport qs from 'qs';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {SharedToaster} from '../app/DomUtils';\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {useCopyToClipboard} from '../app/browser';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {RunTags} from '../runs/RunTags';\nimport {InstigationStatus} from '../types/globalTypes';\nimport {MenuLink} from '../ui/MenuLink';\nimport {\n  findRepositoryAmongOptions,\n  isThisThingAJob,\n  useRepository,\n  useRepositoryOptions,\n} from '../workspace/WorkspaceContext';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePathFromAddress} from '../workspace/workspacePath';\n\nimport {TimestampDisplay} from './TimestampDisplay';\nimport {RepositorySchedulesFragment} from './types/RepositorySchedulesFragment';\nimport {ScheduleFragment} from './types/ScheduleFragment';\nimport {\n  ScheduleTickConfigQuery,\n  ScheduleTickConfigQueryVariables,\n  ScheduleTickConfigQuery_scheduleOrError_Schedule_futureTick_evaluationResult,\n  ScheduleTickConfigQuery_scheduleOrError_Schedule_futureTick_evaluationResult_runRequests,\n} from './types/ScheduleTickConfigQuery';\n\ninterface ScheduleTick {\n  schedule: ScheduleFragment;\n  timestamp: number;\n  repoAddress: RepoAddress;\n}\n\nexport const SchedulesNextTicks: React.FC<{\n  repos: RepositorySchedulesFragment[];\n}> = React.memo(({repos}) => {\n  const nextTicks: ScheduleTick[] = [];\n  let anyPipelines = false;\n\n  const {options} = useRepositoryOptions();\n\n  repos.forEach((repo) => {\n    const {schedules} = repo;\n    const repoAddress = {\n      name: repo.name,\n      location: repo.location.name,\n    };\n\n    const futureTickSchedules = schedules.filter(\n      (schedule) =>\n        schedule.futureTicks.results.length &&\n        schedule.scheduleState.status === InstigationStatus.RUNNING,\n    );\n\n    const minMaxTimestamp = Math.min(\n      ...futureTickSchedules.map(\n        (schedule) =>\n          schedule.futureTicks.results[schedule.futureTicks.results.length - 1].timestamp,\n      ),\n    );\n\n    futureTickSchedules.forEach((schedule) => {\n      schedule.futureTicks.results.forEach((tick) => {\n        if (tick.timestamp <= minMaxTimestamp) {\n          nextTicks.push({schedule, timestamp: tick.timestamp, repoAddress});\n        }\n      });\n    });\n\n    if (!anyPipelines) {\n      anyPipelines = schedules.some((schedule) => !!schedule.mode);\n    }\n  });\n\n  nextTicks.sort((a, b) => a.timestamp - b.timestamp);\n\n  if (!nextTicks.length) {\n    return (\n      <Box padding={{vertical: 32}}>\n        <NonIdealState\n          icon=\"error\"\n          title=\"No scheduled ticks\"\n          description=\"There are no running schedules. Start a schedule to see scheduled ticks.\"\n        />\n      </Box>\n    );\n  }\n\n  return (\n    <Table>\n      <thead>\n        <tr>\n          <th style={{width: '260px'}}>Timestamp</th>\n          <th style={{width: '30%'}}>Schedule</th>\n          <th>{anyPipelines ? 'Job / Pipeline' : 'Job'}</th>\n          <th>Metadata</th>\n        </tr>\n      </thead>\n      <tbody>\n        {nextTicks.map(({schedule, timestamp, repoAddress}) => {\n          const repo = findRepositoryAmongOptions(options, repoAddress);\n          return (\n            <tr key={`${schedule.id}:${timestamp}`}>\n              <td>\n                <TimestampDisplay\n                  timestamp={timestamp}\n                  timezone={schedule.executionTimezone}\n                  timeFormat={{showSeconds: false, showTimezone: true}}\n                />\n              </td>\n              <td>\n                <Link to={workspacePathFromAddress(repoAddress, `/schedules/${schedule.name}`)}>\n                  {schedule.name}\n                </Link>\n              </td>\n              <td>\n                <PipelineReference\n                  pipelineName={schedule.pipelineName}\n                  pipelineHrefContext={repoAddress}\n                  isJob={!!repo && isThisThingAJob(repo, schedule.pipelineName)}\n                />\n              </td>\n              <td>\n                <NextTickMenu\n                  repoAddress={repoAddress}\n                  schedule={schedule}\n                  tickTimestamp={timestamp}\n                />\n              </td>\n            </tr>\n          );\n        })}\n      </tbody>\n    </Table>\n  );\n});\n\nconst NextTickMenu: React.FC<{\n  repoAddress: RepoAddress;\n  schedule: ScheduleFragment;\n  tickTimestamp: number;\n}> = React.memo(({repoAddress, schedule, tickTimestamp}) => {\n  const scheduleSelector = {\n    ...repoAddressToSelector(repoAddress),\n    scheduleName: schedule.name,\n  };\n  const [isOpen, setOpen] = React.useState<boolean>(false);\n  const [loadTickConfig, {called, loading, data}] = useLazyQuery<\n    ScheduleTickConfigQuery,\n    ScheduleTickConfigQueryVariables\n  >(SCHEDULE_TICK_CONFIG_QUERY, {\n    variables: {\n      scheduleSelector,\n      tickTimestamp,\n    },\n  });\n\n  const infoReady = called ? !loading : false;\n  const evaluationResult =\n    data?.scheduleOrError?.__typename === 'Schedule'\n      ? data.scheduleOrError.futureTick.evaluationResult\n      : null;\n\n  const menuItems = infoReady ? (\n    <NextTickMenuItems\n      repoAddress={repoAddress}\n      schedule={schedule}\n      loading={loading}\n      onItemOpen={setOpen}\n      evaluationResult={evaluationResult}\n    />\n  ) : (\n    <Spinner purpose=\"body-text\" />\n  );\n  return (\n    <>\n      <Popover\n        content={<Menu>{menuItems}</Menu>}\n        position=\"bottom-right\"\n        onOpening={() => {\n          if (!called) {\n            loadTickConfig();\n          }\n        }}\n      >\n        <Button icon={<Icon name=\"expand_more\" />} />\n      </Popover>\n      <NextTickDialog\n        repoAddress={repoAddress}\n        isOpen={isOpen}\n        setOpen={setOpen}\n        schedule={schedule}\n        tickTimestamp={tickTimestamp}\n        evaluationResult={evaluationResult}\n      />\n    </>\n  );\n});\n\nconst NextTickMenuItems: React.FC<{\n  repoAddress: RepoAddress;\n  evaluationResult: ScheduleTickConfigQuery_scheduleOrError_Schedule_futureTick_evaluationResult | null;\n  schedule: ScheduleFragment;\n  loading: boolean;\n  onItemOpen: (value: boolean) => void;\n}> = ({repoAddress, schedule, evaluationResult, loading, onItemOpen}) => {\n  if (!evaluationResult) {\n    return <MenuItem text=\"Could not preview tick for this schedule\" />;\n  }\n\n  if (evaluationResult.skipReason) {\n    return <MenuItem text=\"View skip reason...\" onClick={() => onItemOpen(true)} />;\n  }\n\n  if (evaluationResult.error) {\n    return <MenuItem text=\"View error...\" onClick={() => onItemOpen(true)} />;\n  }\n\n  if (!evaluationResult.runRequests || !evaluationResult.runRequests.length) {\n    return <MenuItem text=\"No runs requested for this projected schedule tick\" />;\n  }\n\n  if (evaluationResult.runRequests.length === 1) {\n    const runRequest = evaluationResult.runRequests[0];\n    const runConfigYaml = runRequest ? runRequest.runConfigYaml : '';\n    return (\n      <>\n        <MenuItem\n          text={loading ? 'Loading Configuration...' : 'View Configuration...'}\n          icon=\"open_in_new\"\n          onClick={() => onItemOpen(true)}\n        />\n        <MenuLink\n          text=\"Open in Launchpad...\"\n          icon=\"edit\"\n          target=\"_blank\"\n          to={workspacePathFromAddress(\n            repoAddress,\n            `/pipeline_or_job/${schedule.pipelineName}/playground/setup?${qs.stringify({\n              mode: schedule.mode,\n              config: runConfigYaml,\n              solidSelection: schedule.solidSelection,\n            })}`,\n          )}\n        />\n      </>\n    );\n  }\n\n  return (\n    <MenuItem\n      text={`View ${evaluationResult.runRequests.length} run requests...`}\n      icon=\"edit\"\n      target=\"_blank\"\n      onClick={() => onItemOpen(true)}\n    />\n  );\n};\n\nconst NextTickDialog: React.FC<{\n  repoAddress: RepoAddress;\n  isOpen: boolean;\n  setOpen: (value: boolean) => void;\n  evaluationResult: ScheduleTickConfigQuery_scheduleOrError_Schedule_futureTick_evaluationResult | null;\n  schedule: ScheduleFragment;\n  tickTimestamp: number;\n}> = ({repoAddress, evaluationResult, schedule, tickTimestamp, setOpen, isOpen}) => {\n  const [\n    selectedRunRequest,\n    setSelectedRunRequest,\n  ] = React.useState<ScheduleTickConfigQuery_scheduleOrError_Schedule_futureTick_evaluationResult_runRequests | null>(\n    evaluationResult && evaluationResult.runRequests && evaluationResult.runRequests.length === 1\n      ? evaluationResult.runRequests[0]\n      : null,\n  );\n\n  const copy = useCopyToClipboard();\n\n  const repo = useRepository(repoAddress);\n  const isJob = isThisThingAJob(repo, schedule.pipelineName);\n\n  React.useEffect(() => {\n    if (\n      evaluationResult &&\n      evaluationResult.runRequests &&\n      evaluationResult.runRequests.length === 1\n    ) {\n      setSelectedRunRequest(evaluationResult.runRequests[0]);\n    }\n  }, [evaluationResult]);\n\n  const close = () => {\n    setSelectedRunRequest(null);\n    setOpen(false);\n  };\n\n  let body;\n  if (!evaluationResult) {\n    body = null;\n  } else if (selectedRunRequest) {\n    body = (\n      <Box flex={{direction: 'column', gap: 20}}>\n        <Box flex={{direction: 'column', gap: 12}} padding={{top: 16, horizontal: 24}}>\n          <Subheading>Tags</Subheading>\n          {selectedRunRequest.tags.length ? (\n            <RunTags tags={selectedRunRequest.tags} mode={isJob ? null : schedule.mode} />\n          ) : null}\n        </Box>\n        <div>\n          <Box\n            border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n            padding={{left: 24, bottom: 16}}\n          >\n            <Subheading>Config</Subheading>\n          </Box>\n          <StyledReadOnlyCodeMirror\n            value={selectedRunRequest.runConfigYaml}\n            options={{lineNumbers: true, mode: 'yaml'}}\n          />\n        </div>\n      </Box>\n    );\n  } else if (evaluationResult.error) {\n    body = (\n      <DialogBody>\n        <PythonErrorInfo error={evaluationResult.error} />\n      </DialogBody>\n    );\n  } else if (evaluationResult.skipReason) {\n    body = (\n      <DialogBody>\n        <SkipWrapper>{evaluationResult.skipReason}</SkipWrapper>\n      </DialogBody>\n    );\n  } else if (evaluationResult.runRequests) {\n    body = (\n      <DialogBody>\n        <RunRequestBody>\n          <Table>\n            <thead>\n              <tr>\n                <th>Run key</th>\n                <th>Config</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {evaluationResult.runRequests.map((runRequest, idx) => {\n                if (!runRequest) {\n                  return null;\n                }\n                return (\n                  <tr key={idx}>\n                    <td>{runRequest.runKey || <span>&mdash;</span>}</td>\n                    <td>\n                      <ButtonLink\n                        onClick={() => setSelectedRunRequest(runRequest)}\n                        underline={false}\n                      >\n                        <Group direction=\"row\" spacing={8} alignItems=\"center\">\n                          <Icon name=\"open_in_new\" color={Colors.Gray400} />\n                          <span>View config</span>\n                        </Group>\n                      </ButtonLink>\n                    </td>\n                    <td>\n                      <Popover\n                        content={\n                          <Menu>\n                            <MenuLink\n                              text=\"Open in Launchpad...\"\n                              icon=\"edit\"\n                              target=\"_blank\"\n                              to={workspacePathFromAddress(\n                                repoAddress,\n                                `/${isJob ? 'jobs' : 'pipelines'}/${\n                                  schedule.pipelineName\n                                }/playground/setup?${qs.stringify({\n                                  mode: schedule.mode,\n                                  config: runRequest.runConfigYaml,\n                                  solidSelection: schedule.solidSelection,\n                                })}`,\n                              )}\n                            />\n                          </Menu>\n                        }\n                        position=\"bottom\"\n                      >\n                        <Button icon={<Icon name=\"expand_more\" />} />\n                      </Popover>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </Table>\n        </RunRequestBody>\n      </DialogBody>\n    );\n  }\n\n  return (\n    <Dialog\n      onClose={() => close()}\n      style={{width: '50vw'}}\n      title={\n        <Box flex={{direction: 'row', gap: 4}}>\n          <TimestampDisplay timestamp={tickTimestamp} timezone={schedule.executionTimezone} />\n          {selectedRunRequest?.runKey ? <div>: {selectedRunRequest?.runKey}</div> : null}\n        </Box>\n      }\n      isOpen={isOpen}\n    >\n      {body}\n      <DialogFooter topBorder>\n        {selectedRunRequest ? (\n          <Button\n            autoFocus={false}\n            onClick={() => {\n              copy(selectedRunRequest.runConfigYaml);\n              SharedToaster.show({\n                intent: 'success',\n                icon: 'copy_to_clipboard_done',\n                message: 'Copied!',\n              });\n            }}\n          >\n            Copy config\n          </Button>\n        ) : null}\n        <Button intent=\"primary\" autoFocus={true} onClick={() => close()}>\n          OK\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n};\n\nconst SCHEDULE_TICK_CONFIG_QUERY = gql`\n  query ScheduleTickConfigQuery($scheduleSelector: ScheduleSelector!, $tickTimestamp: Int!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        futureTick(tickTimestamp: $tickTimestamp) {\n          evaluationResult {\n            runRequests {\n              runKey\n              runConfigYaml\n              tags {\n                key\n                value\n              }\n            }\n            skipReason\n            error {\n              ...PythonErrorFragment\n            }\n          }\n        }\n      }\n    }\n  }\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nconst RunRequestBody = styled.div`\n  font-size: 13px;\n`;\n\nconst SkipWrapper = styled.div`\n  background-color: #fdfcf2;\n  border: 1px solid ${Colors.Yellow500};\n  border-radius: 3px;\n`;\n","import {Box, Button, Colors, Icon, Menu, Popover, Table, Tag, Tooltip} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {TickTag} from '../instigation/InstigationTick';\nimport {InstigatedRunStatus} from '../instigation/InstigationUtils';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {InstigationStatus, InstigationType} from '../types/globalTypes';\nimport {MenuLink} from '../ui/MenuLink';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePathFromAddress} from '../workspace/workspacePath';\n\nimport {SchedulePartitionStatus} from './SchedulePartitionStatus';\nimport {ScheduleSwitch} from './ScheduleSwitch';\nimport {TimestampDisplay} from './TimestampDisplay';\nimport {humanCronString} from './humanCronString';\nimport {ScheduleFragment} from './types/ScheduleFragment';\n\nexport const SchedulesTable: React.FC<{\n  schedules: ScheduleFragment[];\n  repoAddress: RepoAddress;\n}> = ({repoAddress, schedules}) => {\n  const lastTick = 'Status of the last tick: One of `Started`, `Skipped`, `Requested`, `Failed`';\n  const lastRun = 'The status of the last run requested by this schedule';\n  const partitionStatus = (\n    <div style={{width: 300}}>\n      <p>The status of each partition in the partition set associated with this schedule.</p>\n      <p>\n        Partitions have a `Success` status if the last run for that partition completed\n        successfully.\n      </p>\n      <p>Partititons have a `Missing` status if no run has been executed for that partition.</p>\n    </div>\n  );\n\n  return (\n    <Table>\n      <thead>\n        <tr>\n          <th style={{width: '60px'}}></th>\n          <th>Schedule name</th>\n          <th style={{width: '15%'}}>Schedule</th>\n          <th style={{width: '10%'}}>Next tick</th>\n          <th style={{width: '10%'}}>\n            <Box flex={{gap: 8, alignItems: 'end'}}>\n              Last tick\n              <Tooltip position=\"top\" content={lastTick}>\n                <Icon name=\"info\" color={Colors.Gray400} />\n              </Tooltip>\n            </Box>\n          </th>\n          <th style={{width: 130}}>\n            <Box flex={{gap: 8, alignItems: 'end'}}>\n              Last run\n              <Tooltip position=\"top\" content={lastRun}>\n                <Icon name=\"info\" color={Colors.Gray400} />\n              </Tooltip>\n            </Box>\n          </th>\n          <th style={{width: '30%'}}>\n            <Box flex={{gap: 8, alignItems: 'end'}}>\n              Partition Set\n              <Tooltip position=\"top\" content={partitionStatus}>\n                <Icon name=\"info\" color={Colors.Gray400} />\n              </Tooltip>\n            </Box>\n          </th>\n          <th style={{width: 80}} />\n        </tr>\n      </thead>\n      <tbody>\n        {schedules.map((schedule) => (\n          <ScheduleRow repoAddress={repoAddress} schedule={schedule} key={schedule.name} />\n        ))}\n      </tbody>\n    </Table>\n  );\n};\n\nconst errorDisplay = (status: InstigationStatus, runningScheduleCount: number) => {\n  if (status === InstigationStatus.STOPPED && runningScheduleCount === 0) {\n    return null;\n  } else if (status === InstigationStatus.RUNNING && runningScheduleCount === 1) {\n    return null;\n  }\n\n  const errors = [];\n  if (status === InstigationStatus.RUNNING && runningScheduleCount === 0) {\n    errors.push(\n      'Schedule is set to be running, but either the scheduler is not configured or the scheduler is not running the schedule',\n    );\n  } else if (status === InstigationStatus.STOPPED && runningScheduleCount > 0) {\n    errors.push('Schedule is set to be stopped, but the scheduler is still running the schedule');\n  }\n\n  if (runningScheduleCount > 0) {\n    errors.push('Duplicate cron job for schedule found.');\n  }\n\n  return (\n    <Popover\n      interactionKind=\"hover\"\n      popoverClassName=\"bp3-popover-content-sizing\"\n      position=\"right\"\n      content={\n        <Box flex={{direction: 'column', gap: 8}} padding={12}>\n          <strong>There are errors with this schedule.</strong>\n          <div>Errors:</div>\n          <ul>\n            {errors.map((error, index) => (\n              <li key={index}>{error}</li>\n            ))}\n          </ul>\n        </Box>\n      }\n    >\n      <Tag fill interactive intent=\"danger\">\n        Error\n      </Tag>\n    </Popover>\n  );\n};\n\nconst ScheduleRow: React.FC<{\n  schedule: ScheduleFragment;\n  repoAddress: RepoAddress;\n}> = (props) => {\n  const {repoAddress, schedule} = props;\n  const repo = useRepository(repoAddress);\n  const isJob = isThisThingAJob(repo, schedule.pipelineName);\n\n  const {\n    name,\n    cronSchedule,\n    executionTimezone,\n    futureTicks,\n    pipelineName,\n    scheduleState,\n  } = schedule;\n  const {status, ticks, runningCount: runningScheduleCount} = scheduleState;\n\n  const latestTick = ticks.length > 0 ? ticks[0] : null;\n\n  return (\n    <tr key={name}>\n      <td>\n        <Box flex={{direction: 'column', gap: 4}}>\n          <ScheduleSwitch repoAddress={repoAddress} schedule={schedule} />\n          {errorDisplay(status, runningScheduleCount)}\n        </Box>\n      </td>\n      <td>\n        <Box flex={{direction: 'column', gap: 4}}>\n          <span style={{fontWeight: 500}}>\n            <Link to={workspacePathFromAddress(repoAddress, `/schedules/${name}`)}>{name}</Link>\n          </span>\n          <PipelineReference\n            showIcon\n            size=\"small\"\n            pipelineName={pipelineName}\n            pipelineHrefContext={repoAddress}\n            isJob={isJob}\n          />\n        </Box>\n      </td>\n      <td>\n        {cronSchedule ? (\n          <Tooltip position=\"bottom\" content={cronSchedule}>\n            <span>{humanCronString(cronSchedule, executionTimezone || 'UTC')}</span>\n          </Tooltip>\n        ) : (\n          <span style={{color: Colors.Gray300}}>None</span>\n        )}\n      </td>\n      <td>\n        {futureTicks.results.length && status === InstigationStatus.RUNNING ? (\n          <TimestampDisplay\n            timestamp={futureTicks.results[0].timestamp}\n            timezone={executionTimezone}\n            timeFormat={{showSeconds: false, showTimezone: true}}\n          />\n        ) : (\n          <span style={{color: Colors.Gray300}}>None</span>\n        )}\n      </td>\n      <td>\n        {latestTick ? (\n          <TickTag tick={latestTick} instigationType={InstigationType.SCHEDULE} />\n        ) : (\n          <span style={{color: Colors.Gray300}}>None</span>\n        )}\n      </td>\n      <td>\n        <InstigatedRunStatus instigationState={scheduleState} />\n      </td>\n      <td>\n        {schedule.partitionSet ? (\n          <SchedulePartitionStatus schedule={schedule} repoAddress={repoAddress} />\n        ) : (\n          <div style={{color: Colors.Gray300}}>None</div>\n        )}\n      </td>\n      <td>\n        {schedule.partitionSet ? (\n          <Popover\n            content={\n              <Menu>\n                <MenuLink\n                  text=\"View Partition History...\"\n                  icon=\"dynamic_feed\"\n                  target=\"_blank\"\n                  to={workspacePathFromAddress(\n                    repoAddress,\n                    `/${isJob ? 'jobs' : 'pipelines'}/${pipelineName}/partitions`,\n                  )}\n                />\n                <MenuLink\n                  text=\"Launch Partition Backfill...\"\n                  icon=\"add_circle\"\n                  target=\"_blank\"\n                  to={workspacePathFromAddress(\n                    repoAddress,\n                    `/${isJob ? 'jobs' : 'pipelines'}/${pipelineName}/partitions`,\n                  )}\n                />\n              </Menu>\n            }\n            position=\"bottom-left\"\n          >\n            <Button icon={<Icon name=\"expand_more\" />} />\n          </Popover>\n        ) : null}\n      </td>\n    </tr>\n  );\n};\n","import {Box, Colors, Icon, Tooltip} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {DEFAULT_TIME_FORMAT, TimeFormat} from '../app/time/TimestampFormat';\nimport {TimezoneContext} from '../app/time/TimezoneContext';\nimport {timestampToString} from '../app/time/timestampToString';\n\ninterface Props {\n  timestamp: number;\n  timezone?: string | null;\n  timeFormat?: TimeFormat;\n  tooltipTimeFormat?: TimeFormat;\n}\n\nexport const TimestampDisplay = (props: Props) => {\n  const {timestamp, timezone, timeFormat, tooltipTimeFormat} = props;\n  const [userTimezone] = React.useContext(TimezoneContext);\n  const locale = navigator.language;\n\n  return (\n    <Box\n      flex={{display: 'inline-flex', direction: 'row', alignItems: 'center', wrap: 'wrap', gap: 8}}\n    >\n      <TabularNums>\n        {timestampToString({\n          timestamp: {unix: timestamp},\n          locale,\n          timezone: timezone || userTimezone,\n          timeFormat,\n        })}\n      </TabularNums>\n      {timezone && timezone !== userTimezone ? (\n        <TimestampTooltip\n          placement=\"top\"\n          content={\n            <TabularNums>\n              {timestampToString({\n                timestamp: {unix: timestamp},\n                locale,\n                timezone: userTimezone,\n                timeFormat: tooltipTimeFormat,\n              })}\n            </TabularNums>\n          }\n        >\n          <Icon name=\"schedule\" color={Colors.Gray400} />\n        </TimestampTooltip>\n      ) : null}\n    </Box>\n  );\n};\n\nTimestampDisplay.defaultProps = {\n  timeFormat: DEFAULT_TIME_FORMAT,\n  tooltipTimeFormat: {showSeconds: false, showTimezone: true},\n};\n\nconst TabularNums = styled.div`\n  font-variant-numeric: tabular-nums;\n`;\n\nconst TimestampTooltip = styled(Tooltip)`\n  cursor: pointer;\n\n  &.bp3-popover2-target {\n    display: block;\n  }\n`;\n","import {gql, useMutation} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {TextArea} from '@blueprintjs/core';\nimport {ButtonLink, Button, Colors, DialogBody, DialogFooter, Dialog, Group} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport 'chartjs-adapter-date-fns';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {SharedToaster} from '../app/DomUtils';\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {SensorSelector} from '../types/globalTypes';\n\nimport {\n  SetSensorCursorMutation,\n  SetSensorCursorMutationVariables,\n} from './types/SetSensorCursorMutation';\n\nexport const EditCursorDialog: React.FC<{\n  cursor: string;\n  sensorSelector: SensorSelector;\n  onClose: () => void;\n}> = ({sensorSelector, cursor, onClose}) => {\n  const [cursorValue, setCursorValue] = React.useState(cursor);\n  const [isSaving, setIsSaving] = React.useState(false);\n  const [requestSet] = useMutation<SetSensorCursorMutation, SetSensorCursorMutationVariables>(\n    SET_CURSOR_MUTATION,\n  );\n\n  const onSave = async () => {\n    setIsSaving(true);\n    const {data} = await requestSet({\n      variables: {sensorSelector, cursor: cursorValue},\n    });\n    if (data?.setSensorCursor.__typename === 'Sensor') {\n      SharedToaster.show({message: 'Cursor value updated', intent: 'success'});\n    } else if (data?.setSensorCursor) {\n      const error = data.setSensorCursor;\n      SharedToaster.show({\n        intent: 'danger',\n        message: (\n          <Group direction=\"row\" spacing={8}>\n            <div>Could not set cursor value.</div>\n            <ButtonLink\n              color={Colors.White}\n              underline=\"always\"\n              onClick={() => {\n                showCustomAlert({\n                  title: 'Python Error',\n                  body:\n                    error.__typename === 'PythonError' ? (\n                      <PythonErrorInfo error={error} />\n                    ) : (\n                      'Sensor not found'\n                    ),\n                });\n              }}\n            >\n              View error\n            </ButtonLink>\n          </Group>\n        ),\n      });\n    }\n    onClose();\n  };\n\n  return (\n    <Dialog\n      isOpen={true}\n      onClose={onClose}\n      style={{\n        width: '50vw',\n      }}\n      title={`Edit ${sensorSelector.sensorName} cursor`}\n    >\n      <DialogBody>\n        <TextArea\n          value={cursorValue}\n          onChange={(e) => setCursorValue(e.target.value)}\n          style={{width: '100%'}}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={onClose}>Cancel</Button>\n        <Button intent=\"primary\" onClick={onSave} disabled={isSaving}>\n          Set cursor value\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n};\n\nconst SET_CURSOR_MUTATION = gql`\n  mutation SetSensorCursorMutation($sensorSelector: SensorSelector!, $cursor: String) {\n    setSensorCursor(sensorSelector: $sensorSelector, cursor: $cursor) {\n      ... on Sensor {\n        id\n        sensorState {\n          id\n          status\n          typeSpecificData {\n            ... on SensorData {\n              lastCursor\n            }\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {\n  Box,\n  Button,\n  Group,\n  MetadataTableWIP,\n  PageHeader,\n  Tag,\n  Heading,\n  FontFamily,\n} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {QueryRefreshCountdown, QueryRefreshState} from '../app/QueryRefresh';\nimport {AssetLink} from '../assets/AssetLink';\nimport {TickTag} from '../instigation/InstigationTick';\nimport {RepositoryLink} from '../nav/RepositoryLink';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {InstigationStatus, InstigationType} from '../types/globalTypes';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {RepoAddress} from '../workspace/types';\n\nimport {EditCursorDialog} from './EditCursorDialog';\nimport {SensorSwitch} from './SensorSwitch';\nimport {SensorFragment} from './types/SensorFragment';\n\nexport const humanizeSensorInterval = (minIntervalSeconds?: number) => {\n  if (!minIntervalSeconds) {\n    minIntervalSeconds = 30; // should query sensor interval config when available\n  }\n  minIntervalSeconds = Math.max(30, minIntervalSeconds);\n  if (minIntervalSeconds < 60 || minIntervalSeconds % 60) {\n    return `~ ${minIntervalSeconds} sec`;\n  }\n  if (minIntervalSeconds === 3600) {\n    return `~ 1 hour`;\n  }\n  if (minIntervalSeconds < 3600 || minIntervalSeconds % 3600) {\n    return `~ ${minIntervalSeconds / 60} min`;\n  }\n  if (minIntervalSeconds === 86400) {\n    return `~ 1 day`;\n  }\n  if (minIntervalSeconds < 86400 || minIntervalSeconds % 86400) {\n    return `~ ${minIntervalSeconds / 3600} hours`;\n  }\n  return `~ ${minIntervalSeconds / 86400} days`;\n};\n\nexport const SensorDetails: React.FC<{\n  sensor: SensorFragment;\n  repoAddress: RepoAddress;\n  daemonHealth: boolean | null;\n  refreshState: QueryRefreshState;\n}> = ({sensor, repoAddress, daemonHealth, refreshState}) => {\n  const {\n    name,\n    sensorState: {status, ticks},\n    targets,\n    metadata,\n  } = sensor;\n\n  const [isCursorEditing, setCursorEditing] = React.useState(false);\n  const sensorSelector = {\n    sensorName: sensor.name,\n    repositoryName: repoAddress.name,\n    repositoryLocationName: repoAddress.location,\n  };\n  const repo = useRepository(repoAddress);\n  const pipelinesAndJobs = repo?.repository.pipelines;\n\n  const latestTick = ticks.length ? ticks[0] : null;\n  const targetCount = targets?.length || 0;\n\n  const targetNames = React.useMemo(\n    () => new Set((targets || []).map((target) => target.pipelineName)),\n    [targets],\n  );\n\n  const anyPipelines = React.useMemo(() => {\n    return (pipelinesAndJobs || []).some(\n      (pipelineOrJob) => !pipelineOrJob.isJob && targetNames.has(pipelineOrJob.name),\n    );\n  }, [pipelinesAndJobs, targetNames]);\n\n  const pipelineOrJobLabel = React.useMemo(() => {\n    if (anyPipelines) {\n      return targetCount > 1 ? 'Jobs / Pipelines' : 'Pipeline';\n    }\n    return targetCount > 1 ? 'Jobs' : 'Job';\n  }, [anyPipelines, targetCount]);\n\n  const cursor =\n    sensor.sensorState.typeSpecificData &&\n    sensor.sensorState.typeSpecificData.__typename === 'SensorData' &&\n    sensor.sensorState.typeSpecificData.lastCursor;\n\n  return (\n    <>\n      <PageHeader\n        title={\n          <Box flex={{direction: 'row', alignItems: 'center', gap: 12}}>\n            <Heading>{name}</Heading>\n            <SensorSwitch repoAddress={repoAddress} sensor={sensor} />\n          </Box>\n        }\n        icon=\"sensors\"\n        tags={\n          <>\n            <Tag icon=\"sensors\">\n              Sensor in <RepositoryLink repoAddress={repoAddress} />\n            </Tag>\n            {sensor.nextTick && daemonHealth && status === InstigationStatus.RUNNING ? (\n              <Tag icon=\"timer\">\n                Next tick: <TimestampDisplay timestamp={sensor.nextTick.timestamp} />\n              </Tag>\n            ) : null}\n          </>\n        }\n        right={\n          <Box margin={{top: 4}}>\n            <QueryRefreshCountdown refreshState={refreshState} />\n          </Box>\n        }\n      />\n      <MetadataTableWIP>\n        <tbody>\n          {sensor.description ? (\n            <tr>\n              <td>Description</td>\n              <td>{sensor.description}</td>\n            </tr>\n          ) : null}\n          <tr>\n            <td>Latest tick</td>\n            <td>\n              {latestTick ? (\n                <>\n                  <Box\n                    flex={{direction: 'row', gap: 8, alignItems: 'center'}}\n                    style={{marginTop: '-2px'}}\n                  >\n                    <TimestampDisplay timestamp={latestTick.timestamp} />\n                    <TickTag tick={latestTick} instigationType={InstigationType.SENSOR} />\n                  </Box>\n                </>\n              ) : (\n                'Sensor has never run'\n              )}\n            </td>\n          </tr>\n          {sensor.targets && sensor.targets.length ? (\n            <tr>\n              <td>{pipelineOrJobLabel}</td>\n              <td>\n                <Group direction=\"column\" spacing={2}>\n                  {sensor.targets.map((target) =>\n                    target.pipelineName ? (\n                      <PipelineReference\n                        key={target.pipelineName}\n                        pipelineName={target.pipelineName}\n                        pipelineHrefContext={repoAddress}\n                        isJob={!!(repo && isThisThingAJob(repo, target.pipelineName))}\n                      />\n                    ) : null,\n                  )}\n                </Group>\n              </td>\n            </tr>\n          ) : null}\n          <tr>\n            <td>Cursor</td>\n            <td>\n              {isCursorEditing ? (\n                <EditCursorDialog\n                  sensorSelector={sensorSelector}\n                  cursor={cursor ? cursor : ''}\n                  onClose={() => setCursorEditing(false)}\n                />\n              ) : null}\n              <Box flex={{direction: 'row', alignItems: 'center'}}>\n                <Box style={{fontFamily: FontFamily.monospace, marginRight: 10}}>\n                  {cursor ? cursor : 'None'}\n                </Box>\n                <Button onClick={() => setCursorEditing(true)}>Edit</Button>\n              </Box>\n            </td>\n          </tr>\n          <tr>\n            <td>Frequency</td>\n            <td>{humanizeSensorInterval(sensor.minIntervalSeconds)}</td>\n          </tr>\n          {metadata.assetKeys && metadata.assetKeys.length ? (\n            <tr>\n              <td>Monitored Assets</td>\n              <td>\n                <Box flex={{direction: 'column', gap: 2}}>\n                  {metadata.assetKeys.map((key) => (\n                    <AssetLink key={key.path.join('/')} path={key.path} icon=\"asset\" />\n                  ))}\n                </Box>\n              </td>\n            </tr>\n          ) : null}\n        </tbody>\n      </MetadataTableWIP>\n    </>\n  );\n};\n","import {gql} from '@apollo/client';\n\nimport {INSTIGATION_STATE_FRAGMENT} from '../instigation/InstigationUtils';\n\nexport const SENSOR_FRAGMENT = gql`\n  fragment SensorFragment on Sensor {\n    id\n    jobOriginId\n    name\n    description\n    minIntervalSeconds\n    nextTick {\n      timestamp\n    }\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n  }\n  ${INSTIGATION_STATE_FRAGMENT}\n`;\n","import {Alert} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {DaemonHealthFragment} from '../instance/types/DaemonHealthFragment';\n\nexport const SensorInfo: React.FC<{\n  daemonHealth: DaemonHealthFragment | undefined;\n}> = ({daemonHealth}) => {\n  let healthy = false;\n\n  if (daemonHealth) {\n    const sensorHealths = daemonHealth.allDaemonStatuses.filter(\n      (daemon) => daemon.daemonType === 'SENSOR',\n    );\n    if (sensorHealths) {\n      const sensorHealth = sensorHealths[0];\n      healthy = !!(sensorHealth.required && sensorHealth.healthy);\n    }\n  }\n\n  if (healthy) {\n    return null;\n  }\n\n  return (\n    <Alert\n      intent=\"warning\"\n      title=\"The sensor daemon is not running.\"\n      description={\n        <div>\n          See the{' '}\n          <a\n            href=\"https://docs.dagster.io/deployment/dagster-daemon\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            dagster-daemon documentation\n          </a>{' '}\n          for more information on how to deploy the dagster-daemon process.\n        </div>\n      }\n    />\n  );\n};\n","import {Box, Colors, Icon, Table, Tooltip} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {AssetLink} from '../assets/AssetLink';\nimport {TickTag} from '../instigation/InstigationTick';\nimport {InstigatedRunStatus} from '../instigation/InstigationUtils';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {InstigationType} from '../types/globalTypes';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePathFromAddress} from '../workspace/workspacePath';\n\nimport {humanizeSensorInterval} from './SensorDetails';\nimport {SensorSwitch} from './SensorSwitch';\nimport {SensorFragment} from './types/SensorFragment';\n\nexport const SensorsTable: React.FC<{\n  repoAddress: RepoAddress;\n  sensors: SensorFragment[];\n}> = ({repoAddress, sensors}) => {\n  const lastTick = 'Status of the last tick: One of `Started`, `Skipped`, `Requested`, `Failed`';\n  const lastRun = 'The status of the last run requested by this sensor';\n\n  return (\n    <Table>\n      <thead>\n        <tr>\n          <th style={{width: '60px'}}></th>\n          <th>Sensor Name</th>\n          <th style={{width: '15%'}}>Frequency</th>\n          <th style={{width: '10%'}}>\n            <Box flex={{gap: 8, alignItems: 'end'}}>\n              Last tick\n              <Tooltip position=\"top\" content={lastTick}>\n                <Icon name=\"info\" color={Colors.Gray500} />\n              </Tooltip>\n            </Box>\n          </th>\n          <th style={{width: '25%'}}>\n            <Box flex={{gap: 8, alignItems: 'end'}}>\n              Last Run\n              <Tooltip position=\"top\" content={lastRun}>\n                <Icon name=\"info\" color={Colors.Gray500} />\n              </Tooltip>\n            </Box>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {sensors.map((sensor) => (\n          <SensorRow key={sensor.name} repoAddress={repoAddress} sensor={sensor} />\n        ))}\n      </tbody>\n    </Table>\n  );\n};\n\nconst SensorRow: React.FC<{\n  repoAddress: RepoAddress;\n  sensor: SensorFragment;\n}> = ({repoAddress, sensor}) => {\n  const repo = useRepository(repoAddress);\n  const {name, sensorState} = sensor;\n  const {ticks} = sensorState;\n  const latestTick = ticks.length ? ticks[0] : null;\n\n  return (\n    <tr key={name}>\n      <td>\n        <SensorSwitch repoAddress={repoAddress} sensor={sensor} />\n      </td>\n      <td>\n        <Box flex={{direction: 'column', gap: 4}}>\n          <span style={{fontWeight: 500}}>\n            <Link to={workspacePathFromAddress(repoAddress, `/sensors/${name}`)}>{name}</Link>\n          </span>\n          {sensor.targets && sensor.targets.length ? (\n            <Box flex={{direction: 'column', gap: 2}}>\n              {sensor.targets.map((target) => (\n                <PipelineReference\n                  key={target.pipelineName}\n                  showIcon\n                  size=\"small\"\n                  pipelineName={target.pipelineName}\n                  pipelineHrefContext={repoAddress}\n                  isJob={!!(repo && isThisThingAJob(repo, target.pipelineName))}\n                />\n              ))}\n            </Box>\n          ) : null}\n          {sensor.metadata.assetKeys && sensor.metadata.assetKeys.length ? (\n            <Box flex={{direction: 'column', gap: 2}}>\n              {sensor.metadata.assetKeys.map((key) => (\n                <AssetLink key={key.path.join('/')} path={key.path} icon=\"asset\" />\n              ))}\n            </Box>\n          ) : null}\n        </Box>\n      </td>\n      <td>{humanizeSensorInterval(sensor.minIntervalSeconds)}</td>\n      <td>\n        {latestTick ? (\n          <TickTag tick={latestTick} instigationType={InstigationType.SENSOR} />\n        ) : (\n          <span style={{color: Colors.Gray300}}>None</span>\n        )}\n      </td>\n      <td>\n        <div style={{display: 'flex'}}>\n          <InstigatedRunStatus instigationState={sensorState} />\n        </div>\n      </td>\n    </tr>\n  );\n};\n","import {gql} from '@apollo/client';\nimport {ConfigSchema} from '@dagster-io/ui';\n\nexport type {ConfigSchema as ConfigTypeSchema};\n\nexport const CONFIG_TYPE_SCHEMA_FRAGMENT = gql`\n  fragment ConfigTypeSchemaFragment on ConfigType {\n    __typename\n    ... on EnumConfigType {\n      givenName\n      values {\n        value\n        description\n      }\n    }\n    ... on RegularConfigType {\n      givenName\n    }\n    key\n    description\n    isSelector\n    typeParamKeys\n    ... on CompositeConfigType {\n      fields {\n        name\n        description\n        isRequired\n        configTypeKey\n        defaultValueAsJson\n      }\n    }\n    ... on ScalarUnionConfigType {\n      scalarTypeKey\n      nonScalarTypeKey\n    }\n    ... on MapConfigType {\n      keyLabelName\n    }\n  }\n`;\n","import {gql} from '@apollo/client';\nimport {Colors} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\ninterface ITypeWithTooltipProps {\n  type: {\n    name: string | null;\n    displayName: string;\n    description: string | null;\n  };\n}\n\nexport const TypeWithTooltip = (props: ITypeWithTooltipProps) => {\n  const {name, displayName} = props.type;\n\n  // TODO: link to most inner type\n  if (name) {\n    return (\n      <TypeLink to={{search: `?tab=types&typeName=${displayName}`}}>\n        <TypeName>{displayName}</TypeName>\n      </TypeLink>\n    );\n  }\n\n  return <TypeName>{displayName}</TypeName>;\n};\n\nexport const DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT = gql`\n  fragment DagsterTypeWithTooltipFragment on DagsterType {\n    name\n    displayName\n    description\n  }\n`;\n\nconst TypeLink = styled(Link)`\n  :hover {\n    text-decoration: none;\n  }\n`;\n\nconst TypeName = styled.code`\n  background: ${Colors.Blue50};\n  border: none;\n  padding: 1px 4px;\n  border-bottom: 1px solid ${Colors.Blue500};\n  border-radius: 0.25em;\n  font-size: 14px;\n  font-weight: 500;\n  display: inline-block;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n`;\n","// eslint-disable-next-line no-restricted-imports\nimport {AnchorButton as BlueprintAnchorButton} from '@blueprintjs/core';\nimport {\n  intentToFillColor,\n  intentToStrokeColor,\n  intentToTextColor,\n  StyledButton,\n  StyledButtonText,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link, LinkProps} from 'react-router-dom';\n\ninterface AnchorButtonProps\n  extends Omit<React.ComponentProps<typeof BlueprintAnchorButton>, 'loading' | 'onClick' | 'type'>,\n    LinkProps {\n  label?: React.ReactNode;\n}\n\nexport const AnchorButton = React.forwardRef(\n  (props: AnchorButtonProps, ref: React.ForwardedRef<HTMLAnchorElement>) => {\n    const {children, icon, intent, outlined, rightIcon, ...rest} = props;\n    return (\n      <StyledButton\n        {...rest}\n        as={Link}\n        $fillColor={intentToFillColor(intent, outlined)}\n        $strokeColor={intentToStrokeColor(intent, outlined)}\n        $textColor={intentToTextColor(intent, outlined)}\n        ref={ref}\n      >\n        {icon || null}\n        {children ? <StyledButtonText>{children}</StyledButtonText> : null}\n        {rightIcon || null}\n      </StyledButton>\n    );\n  },\n);\n\nAnchorButton.displayName = 'AnchorButton';\n","import {Colors, IconWrapper} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\nexport const ClearButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  margin: 0 -2px 0 0;\n  padding: 2px;\n\n  ${IconWrapper} {\n    background-color: ${Colors.Gray400};\n    transition: background-color 100ms linear;\n  }\n\n  :hover ${IconWrapper}, :focus ${IconWrapper} {\n    background-color: ${Colors.Gray700};\n  }\n\n  :active ${IconWrapper} {\n    background-color: ${Colors.Dark};\n  }\n\n  :focus {\n    outline: none;\n  }\n`;\n","// eslint-disable-next-line no-restricted-imports\nimport {Intent, PopoverPosition} from '@blueprintjs/core';\nimport {\n  Box,\n  Button,\n  Checkbox,\n  Colors,\n  Icon,\n  MenuItem,\n  Menu,\n  Popover,\n  TextInput,\n  Tooltip,\n} from '@dagster-io/ui';\nimport isEqual from 'lodash/isEqual';\nimport uniq from 'lodash/uniq';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {filterByQuery, GraphQueryItem} from '../app/GraphQueryImpl';\nimport {dynamicKeyWithoutIndex, isDynamicStep} from '../gantt/DynamicStepSupport';\nimport {GraphExplorerSolidHandleFragment_solid} from '../pipelines/types/GraphExplorerSolidHandleFragment';\nimport {workspacePipelinePath} from '../workspace/workspacePath';\n\ninterface GraphQueryInputProps {\n  intent?: Intent;\n  items: GraphQueryItem[];\n  value: string;\n  placeholder: string;\n  autoFocus?: boolean;\n  presets?: {name: string; value: string}[];\n  width?: string | number;\n  popoverPosition?: PopoverPosition;\n  className?: string;\n  disabled?: boolean;\n\n  linkToPreview?: {\n    repoName: string;\n    repoLocation: string;\n    pipelineName: string;\n    isJob: boolean;\n  };\n\n  flattenGraphsEnabled?: boolean;\n  flattenGraphs?: boolean;\n  setFlattenGraphs?: () => void;\n  onChange: (value: string) => void;\n  onKeyDown?: (e: React.KeyboardEvent<any>) => void;\n  onFocus?: () => void;\n  onBlur?: (value: string) => void;\n  autoApplyChanges?: boolean;\n}\n\ninterface ActiveSuggestionInfo {\n  text: string;\n  idx: number;\n}\n\ninterface SuggestionItem {\n  name: string;\n  isGraph: boolean;\n}\n\n/** Generates placeholder text for the solid query box that includes a\n * practical example from the current DAG by finding the solid with the highest\n * number of immediate input or output connections and randomly highlighting\n * either the ++solid or solid++ or solid+* syntax.\n */\nconst placeholderTextForItems = (base: string, items: GraphQueryItem[]) => {\n  const seed = items.length % 3;\n\n  let placeholder = base;\n  if (items.length === 0) {\n    return placeholder;\n  }\n\n  const ranked = items.map<{\n    incount: number;\n    outcount: number;\n    name: string;\n  }>((s) => ({\n    incount: s.inputs.reduce((sum, o) => sum + o.dependsOn.length, 0),\n    outcount: s.outputs.reduce((sum, o) => sum + o.dependedBy.length, 0),\n    name: s.name,\n  }));\n\n  if (seed === 0) {\n    const example = ranked.sort((a, b) => b.outcount - a.outcount)[0];\n    placeholder = `${placeholder} (ex: ${example!.name}+*)`;\n  } else if (seed === 1) {\n    const example = ranked.sort((a, b) => b.outcount - a.outcount)[0];\n    placeholder = `${placeholder} (ex: ${example!.name}+)`;\n  } else if (seed === 2) {\n    const example = ranked.sort((a, b) => b.incount - a.incount)[0];\n    placeholder = `${placeholder} (ex: ++${example!.name})`;\n  }\n  return placeholder;\n};\n\nconst intentToStrokeColor = (intent: Intent | undefined) => {\n  switch (intent) {\n    case 'danger':\n      return Colors.Red500;\n    case 'success':\n      return Colors.Green500;\n    case 'warning':\n      return Colors.Yellow500;\n    case 'none':\n    case 'primary':\n    default:\n      return Colors.Gray300;\n  }\n};\n\nconst buildSuggestions = (\n  lastElementName: string,\n  items: GraphQueryItem[] | GraphExplorerSolidHandleFragment_solid[],\n  suffix: string,\n) => {\n  const available: SuggestionItem[] = items.map((item) => {\n    const solidItem = item as GraphExplorerSolidHandleFragment_solid;\n    const isGraph =\n      solidItem.definition && solidItem.definition.__typename === 'CompositeSolidDefinition';\n\n    return {name: item.name, isGraph};\n  });\n\n  for (const item of available) {\n    if (isDynamicStep(item.name)) {\n      available.push({name: dynamicKeyWithoutIndex(item.name), isGraph: item.isGraph});\n    }\n  }\n\n  const lastElementLower = lastElementName?.toLowerCase();\n  const matching =\n    lastElementLower && !suffix\n      ? uniq(available)\n          .sort()\n          .filter((n) => n.name.toLowerCase().startsWith(lastElementLower))\n      : [];\n\n  // No need to show a match if our string exactly matches the one suggestion.\n  if (matching.length === 1 && matching[0].name.toLowerCase() === lastElementLower) {\n    return [];\n  }\n\n  return matching;\n};\n\nexport const GraphQueryInput = React.memo(\n  React.forwardRef((props: GraphQueryInputProps, ref) => {\n    const [active, setActive] = React.useState<ActiveSuggestionInfo | null>(null);\n    const [focused, setFocused] = React.useState<boolean>(false);\n    const [pendingValue, setPendingValue] = React.useState<string>(props.value);\n    const inputRef = React.useRef<HTMLInputElement>(null);\n    const flattenGraphsEnabled = props.flattenGraphsEnabled || false;\n\n    React.useEffect(() => {\n      // props.value is our source of truth, but we hold \"un-committed\" changes in\n      // pendingValue while the field is being edited. Ensure the pending value\n      // is synced whenever props.value changes.\n      setPendingValue(props.value);\n    }, [props.value]);\n\n    const lastClause = /(\\*?\\+*)([\\w\\d\\[\\]>_\\/-]+)(\\+*\\*?)$/.exec(pendingValue);\n\n    const [, prefix, lastElementName, suffix] = lastClause || [];\n    const suggestions = React.useMemo(\n      () => buildSuggestions(lastElementName, props.items, suffix),\n      [lastElementName, props.items, suffix],\n    );\n\n    const onConfirmSuggestion = (suggestion: string) => {\n      const preceding = lastClause ? pendingValue.substr(0, lastClause.index) : '';\n      setPendingValue(preceding + prefix + `\"${suggestion}\"` + suffix);\n    };\n\n    React.useEffect(() => {\n      if (!active) {\n        return;\n      }\n      // Relocate the currently active item in the latest suggestions list\n      const pos = suggestions.map((a) => a.name).findIndex((a) => a === active.text);\n\n      // The new index is the index of the active item, or whatever item\n      // is now at it's location if it's gone, bounded to the array.\n      let nextIdx = pos !== -1 ? pos : active.idx;\n      nextIdx = Math.max(0, Math.min(suggestions.length - 1, nextIdx));\n      if (!suggestions[nextIdx]) {\n        return;\n      }\n      const nextText = suggestions[nextIdx].name;\n\n      if (nextIdx !== active.idx || nextText !== active.text) {\n        setActive({text: nextText, idx: nextIdx});\n      }\n    }, [active, suggestions]);\n\n    React.useImperativeHandle(ref, () => ({\n      focus() {\n        if (inputRef.current) {\n          inputRef.current.focus();\n        }\n      },\n    }));\n\n    const onKeyDown = (e: React.KeyboardEvent<any>) => {\n      if (e.key === 'Enter' || e.key === 'Return' || e.key === 'Tab') {\n        if (active && active.text) {\n          onConfirmSuggestion(active.text);\n          e.preventDefault();\n          e.stopPropagation();\n        } else {\n          e.currentTarget.blur();\n        }\n        setActive(null);\n      }\n\n      // The up/down arrow keys shift selection in the dropdown.\n      // Note: The first down arrow press activates the first item.\n      const shift = {ArrowDown: 1, ArrowUp: -1}[e.key];\n      if (shift && suggestions.length > 0) {\n        e.preventDefault();\n        let idx = (active ? active.idx : -1) + shift;\n        idx = Math.max(0, Math.min(idx, suggestions.length - 1));\n        setActive({text: suggestions[idx].name, idx});\n      }\n\n      props.onKeyDown?.(e);\n    };\n\n    const OpSelectionWrapperDivRef = React.useRef<HTMLDivElement>(null);\n\n    React.useEffect(() => {\n      const clickListener = (event: MouseEvent) => {\n        const OpSelectionWrapperDivElement = OpSelectionWrapperDivRef.current;\n        const inputElement = inputRef.current;\n        const {target} = event;\n\n        if (!flattenGraphsEnabled) {\n          return;\n        }\n        // Make TypeScript happy\n        if (\n          OpSelectionWrapperDivElement == null ||\n          inputElement == null ||\n          !(target instanceof Node)\n        ) {\n          return;\n        }\n\n        // `true` if user clicked on either the `OpSelectionWrapperDivElement` itself, or its descendant\n        const shouldWrapperGetFocus = OpSelectionWrapperDivElement.contains(target);\n        setFocused(shouldWrapperGetFocus);\n\n        const shouldTextInputGetFocus = inputElement.contains(target);\n        if (shouldTextInputGetFocus) {\n          inputElement.focus();\n        }\n      };\n\n      document.addEventListener('click', clickListener);\n\n      return () => {\n        document.removeEventListener('click', clickListener);\n      };\n    }, [flattenGraphsEnabled]);\n\n    const uncomitted = (pendingValue || '*') !== (props.value || '*');\n    const flattenGraphsFlag = props.flattenGraphs ? '!' : '';\n\n    const opCountInfo = props.linkToPreview && (\n      <OpCountWrap $hasWrap={flattenGraphsEnabled}>\n        {`${filterByQuery(props.items, pendingValue).all.length} matching ops`}\n        <Link\n          target=\"_blank\"\n          style={{display: 'flex', alignItems: 'center', gap: 4}}\n          onMouseDown={(e) => e.currentTarget.click()}\n          to={workspacePipelinePath({\n            ...props.linkToPreview,\n            pipelineName: `${props.linkToPreview.pipelineName}~${flattenGraphsFlag}${pendingValue}`,\n          })}\n        >\n          Graph Preview <Icon color={Colors.Link} name=\"open_in_new\" />\n        </Link>\n      </OpCountWrap>\n    );\n\n    return (\n      <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>\n        <Popover\n          enforceFocus={!flattenGraphsEnabled} // Defer focus to be manually managed\n          isOpen={focused}\n          position={props.popoverPosition || 'top-left'}\n          content={\n            suggestions.length ? (\n              <Menu style={{width: props.width || '24vw'}}>\n                {suggestions.slice(0, 15).map((suggestion) => (\n                  <MenuItem\n                    icon={suggestion.isGraph ? 'job' : 'op'}\n                    key={suggestion.name}\n                    text={suggestion.name}\n                    active={active ? active.text === suggestion.name : false}\n                    onMouseDown={(e: React.MouseEvent<any>) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      onConfirmSuggestion(suggestion.name);\n                    }}\n                  />\n                ))}\n              </Menu>\n            ) : (\n              <div />\n            )\n          }\n        >\n          <div style={{position: 'relative'}} ref={OpSelectionWrapperDivRef}>\n            <TextInput\n              disabled={props.disabled}\n              value={pendingValue}\n              icon=\"op_selector\"\n              strokeColor={intentToStrokeColor(props.intent)}\n              autoFocus={props.autoFocus}\n              placeholder={placeholderTextForItems(props.placeholder, props.items)}\n              onChange={(e: React.ChangeEvent<any>) => {\n                setPendingValue(e.target.value);\n                props.autoApplyChanges && props.onChange(e.target.value);\n              }}\n              onFocus={() => {\n                if (!flattenGraphsEnabled) {\n                  // Defer focus to be manually managed\n                  setFocused(true);\n                }\n                props.onFocus?.();\n              }}\n              onBlur={() => {\n                if (!flattenGraphsEnabled) {\n                  // Defer focus to be manually managed\n                  setFocused(false);\n                }\n                props.onChange(pendingValue);\n                props.onBlur?.(pendingValue);\n              }}\n              onKeyDown={onKeyDown}\n              style={{\n                width: props.width || '24vw',\n                paddingRight: focused && uncomitted ? 55 : '',\n              }}\n              className={props.className}\n              ref={inputRef}\n            />\n            {focused && uncomitted && <EnterHint>Enter</EnterHint>}\n            {focused &&\n              props.linkToPreview &&\n              (flattenGraphsEnabled ? (\n                <OpInfoWrap>\n                  <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>\n                    <Checkbox\n                      label=\"Flatten subgraphs\"\n                      checked={props.flattenGraphs ?? false}\n                      onChange={() => {\n                        props.setFlattenGraphs?.();\n                      }}\n                      format=\"switch\"\n                    />\n                    <Tooltip\n                      content=\"Flatten subgraphs to select ops within nested graphs\"\n                      placement=\"right\"\n                    >\n                      <Icon name=\"info\" color={Colors.Gray500} />\n                    </Tooltip>\n                  </Box>\n                  {opCountInfo}\n                </OpInfoWrap>\n              ) : (\n                opCountInfo\n              ))}\n          </div>\n        </Popover>\n        {props.presets &&\n          (props.presets.find((p) => p.value === pendingValue) ? (\n            <Button\n              icon={<Icon name=\"layers\" />}\n              rightIcon={<Icon name=\"cancel\" />}\n              onClick={() => props.onChange('*')}\n              intent=\"none\"\n            />\n          ) : (\n            <Popover\n              position=\"top\"\n              content={\n                <Menu>\n                  {props.presets.map((preset) => (\n                    <MenuItem\n                      key={preset.name}\n                      text={preset.name}\n                      onMouseDown={(e: React.MouseEvent<any>) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        props.onChange(preset.value);\n                      }}\n                    />\n                  ))}\n                </Menu>\n              }\n            >\n              <Button\n                icon={<Icon name=\"layers\" />}\n                rightIcon={<Icon name=\"expand_less\" />}\n                intent=\"none\"\n              />\n            </Popover>\n          ))}\n      </Box>\n    );\n  }),\n\n  (prevProps, nextProps) =>\n    prevProps.items === nextProps.items &&\n    prevProps.width === nextProps.width &&\n    prevProps.value === nextProps.value &&\n    isEqual(prevProps.presets, nextProps.presets),\n);\n\nconst OpInfoWrap = styled.div`\n  width: 350px;\n  padding: 10px 16px 10px 16px;\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n  position: absolute;\n  top: 100%;\n  margin-top: 2px;\n  font-size: 0.85rem;\n  background: ${Colors.White};\n  color: ${Colors.Gray600};\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);\n  z-index: 2;\n  left: 0;\n`;\n\nconst OpCountWrap = styled(OpInfoWrap)<{$hasWrap: boolean}>`\n  margin-top: ${(p) => (p.$hasWrap ? 0 : 2)}px;\n`;\n\nconst EnterHint = styled.div`\n  position: absolute;\n  right: 6px;\n  top: 5px;\n  border-radius: 5px;\n  border: 1px solid ${Colors.Gray500};\n  background: ${Colors.White};\n  font-weight: 500;\n  font-size: 12px;\n  color: ${Colors.Gray500};\n  padding: 2px 6px;\n`;\n","import {ApolloError, QueryResult} from '@apollo/client';\nimport {Box, NonIdealState, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\n\ninterface ILoadingProps<TData> {\n  queryResult: QueryResult<TData, any>;\n  children: (data: TData) => React.ReactNode;\n  renderError?: (error: ApolloError) => React.ReactNode;\n  allowStaleData?: boolean;\n  purpose: 'section' | 'page';\n}\n\nconst BLANK_LOADING_DELAY_MSEC = 500;\n\nexport const Loading = <TData extends Record<string, any>>(props: ILoadingProps<TData>) => {\n  const {children, purpose, allowStaleData = false, renderError} = props;\n  const {error, data, loading} = props.queryResult;\n\n  const [blankLoading, setBlankLoading] = React.useState(true);\n  const isLoading = !data || (loading && !allowStaleData) || Object.keys(data as any).length === 0;\n\n  React.useEffect(() => {\n    let timer: ReturnType<typeof setTimeout> | undefined;\n\n    // Wait a brief moment so that we don't awkwardly flash the loading bar.\n    // This is often enough time for data to become available.\n    if (isLoading) {\n      timer = setTimeout(() => setBlankLoading(false), BLANK_LOADING_DELAY_MSEC);\n    } else {\n      setBlankLoading(true);\n    }\n\n    return () => {\n      timer && clearTimeout(timer);\n    };\n  }, [isLoading]);\n\n  // either error.networkError or error.graphQLErrors is set,\n  // so check that the error is not just a transient network error\n  if (error) {\n    if (renderError) {\n      return <>{renderError(error)}</>;\n    }\n    if (!error.networkError) {\n      return (\n        <Box padding={64} flex={{justifyContent: 'center'}}>\n          <NonIdealState icon=\"error\" title=\"GraphQL Error - see console for details\" />\n        </Box>\n      );\n    }\n  }\n\n  if (isLoading) {\n    return blankLoading ? null : <LoadingSpinner purpose={purpose} />;\n  }\n\n  return <>{children(data as TData)}</>;\n};\n\nexport const LoadingSpinner: React.FC<{purpose: 'page' | 'section'}> = ({purpose}) => {\n  const isPage = purpose === 'page';\n  return (\n    <Box\n      padding={64}\n      flex={{\n        grow: isPage ? 1 : undefined,\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n      style={isPage ? {height: '100%'} : undefined}\n    >\n      <Spinner purpose={purpose} />\n    </Box>\n  );\n};\n\nLoading.defaultProps = {\n  purpose: 'page',\n};\n","// eslint-disable-next-line no-restricted-imports\nimport {\n  Box,\n  Colors,\n  CommonMenuItemProps,\n  IconWrapper,\n  iconWithColor,\n  MenuItem,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link, LinkProps} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\ninterface MenuLinkProps\n  extends CommonMenuItemProps,\n    Omit<React.ComponentProps<typeof MenuItem>, 'icon' | 'onClick'>,\n    LinkProps {}\n\n/**\n * If you want to use a menu item as a link, use `MenuLink` and provide a `to` prop.\n */\nexport const MenuLink: React.FC<MenuLinkProps> = (props) => {\n  const {icon, intent, text, disabled, ...rest} = props;\n\n  if (disabled) {\n    return <MenuItem disabled icon={icon} intent={intent} text={text} />;\n  }\n  return (\n    <StyledMenuLink {...rest}>\n      <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n        {iconWithColor(icon, intent)}\n        <div>{text}</div>\n      </Box>\n    </StyledMenuLink>\n  );\n};\n\nconst StyledMenuLink = styled(Link)`\n  text-decoration: none;\n\n  border-radius: 4px;\n  display: block;\n  line-height: 20px;\n  padding: 6px 8px 6px 12px;\n  transition: background-color 50ms, box-shadow 150ms;\n  align-items: flex-start;\n  user-select: none;\n\n  /**\n   * Use margin instead of align-items: center because the contents of the menu item may wrap \n   * in unusual circumstances.\n   */\n  ${IconWrapper} {\n    margin-top: 2px;\n  }\n\n  ${IconWrapper}:first-child {\n    margin-left: -4px;\n  }\n\n  &&&:link,\n  &&&:visited,\n  &&&:hover,\n  &&&:active {\n    color: ${Colors.Gray900};\n    text-decoration: none;\n  }\n\n  &&&:hover {\n    background: ${Colors.Gray100};\n  }\n`;\n","import {Colors} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\ninterface Props {\n  $top: number;\n}\n\n/**\n * Wrap a `Table` component with this to cause its `thead` to be sticky while scrolling.\n *\n * `$top` is the pixel value of the point in the scrolling container that the `thead`\n * should stick to. Probably `0`.\n */\nexport const StickyTableContainer = styled.div<Props>`\n  thead tr {\n    position: sticky;\n    top: ${({$top}) => $top}px;\n    background-color: ${Colors.White};\n    z-index: 1;\n  }\n\n  /**\n   * Safari won't render a box-shadow on the \\`tr\\` and we don't want an inset\n   * box-shadow on \\`th\\` elements because it will create a double-border on the\n   * bottom of the \\`thead\\` in the non-stuck state.\n   *\n   * We therefore render an absoulutely-positioned keyline on the bottom of the\n   * \\`th\\` elements. This will appear as a border in the stuck state, and will\n   * overlap the top box-shadow of the first row in the non-stuck state.\n   */\n  thead tr th {\n    position: relative;\n  }\n\n  thead tr th::after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: ${Colors.KeylineGray};\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n  }\n`;\n","import {TabStyleProps, getTabA11yProps, getTabContent, tabCSS} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link, LinkProps} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\ninterface TabLinkProps extends TabStyleProps, Omit<LinkProps, 'title'> {\n  title?: React.ReactNode;\n}\n\nexport const TabLink = styled((props: TabLinkProps) => {\n  const {to, title, ...rest} = props;\n  const containerProps = getTabA11yProps(props);\n  const content = getTabContent(props);\n\n  const titleText = typeof title === 'string' ? title : undefined;\n\n  return (\n    <Link to={to} title={titleText} {...containerProps} {...rest}>\n      {content}\n    </Link>\n  );\n})<TabLinkProps>`\n  ${tabCSS}\n`;\n","import LRUCache from 'lru-cache';\nimport remark from 'remark';\nimport gfm from 'remark-gfm';\nimport toPlainText from 'remark-plain-text';\n\nconst Remark = remark()\n  .use(gfm)\n  .use(toPlainText as any);\nconst markdownCache = new LRUCache<string, string>({max: 500});\nexport const markdownToPlaintext = (md: string) => {\n  // Compile the Markdown file to plain text:\n  const cached = markdownCache.get(md);\n  if (cached) {\n    return cached;\n  }\n  const str = Remark.processSync(md).toString();\n  markdownCache.set(md, str);\n  return str;\n};\n","import * as React from 'react';\n\nimport {AppContext} from '../app/AppContext';\nimport {useStateWithStorage} from '../hooks/useStateWithStorage';\nimport {repoAddressAsString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\nconst validateExpandedKeys = (parsed: unknown) => (Array.isArray(parsed) ? parsed : []);\n\n/**\n * Use localStorage to persist the expanded/collapsed visual state of repository containers,\n * e.g. for the left nav or run timeline.\n */\nexport const useRepoExpansionState = (storageKey: string) => {\n  const {basePath} = React.useContext(AppContext);\n  const [expandedKeys, setExpandedKeys] = useStateWithStorage<string[]>(\n    `${basePath}:dagit.${storageKey}`,\n    validateExpandedKeys,\n  );\n\n  const onToggle = React.useCallback(\n    (repoAddress: RepoAddress) => {\n      const key = repoAddressAsString(repoAddress);\n      setExpandedKeys((current) => {\n        const nextExpandedKeys = new Set(current || []);\n        if (nextExpandedKeys.has(key)) {\n          nextExpandedKeys.delete(key);\n        } else {\n          nextExpandedKeys.add(key);\n        }\n        return Array.from(nextExpandedKeys);\n      });\n    },\n    [setExpandedKeys],\n  );\n\n  return React.useMemo(\n    () => ({\n      expandedKeys,\n      onToggle,\n    }),\n    [expandedKeys, onToggle],\n  );\n};\n","import {Button, Dialog, DialogBody, DialogFooter, Icon, Tooltip} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {usePermissions} from '../app/Permissions';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {\n  reloadFnForWorkspace,\n  useRepositoryLocationReload,\n} from '../nav/useRepositoryLocationReload';\n\nimport {RepositoryLocationErrorDialog} from './RepositoryLocationErrorDialog';\n\nexport const ReloadAllButton: React.FC<{label?: string}> = ({label = 'Reload all'}) => {\n  const {canReloadWorkspace} = usePermissions();\n  const {reloading, tryReload, error, errorLocationId} = useRepositoryLocationReload({\n    scope: 'workspace',\n    reloadFn: reloadFnForWorkspace,\n  });\n\n  const [isOpen, setIsOpen] = React.useState(!!error);\n  React.useEffect(() => setIsOpen(!!error), [error]);\n\n  if (!canReloadWorkspace.enabled) {\n    return (\n      <Tooltip content={canReloadWorkspace.disabledReason}>\n        <Button icon={<Icon name=\"refresh\" />} disabled intent=\"none\">\n          {label}\n        </Button>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <>\n      <Button onClick={tryReload} icon={<Icon name=\"refresh\" />} loading={reloading} intent=\"none\">\n        {label}\n      </Button>\n      {errorLocationId ? (\n        <RepositoryLocationErrorDialog\n          error={error}\n          location={errorLocationId}\n          reloading={reloading}\n          onTryReload={tryReload}\n          onDismiss={() => setIsOpen(false)}\n          isOpen={isOpen}\n        />\n      ) : (\n        <Dialog\n          icon=\"error\"\n          title=\"Reload error\"\n          canEscapeKeyClose={false}\n          canOutsideClickClose={false}\n          style={{width: '90%'}}\n          isOpen={isOpen}\n        >\n          <DialogBody>{error && <PythonErrorInfo error={error} />}</DialogBody>\n          <DialogFooter>\n            <Button onClick={() => setIsOpen(false)}>Dismiss</Button>\n          </DialogFooter>\n        </Dialog>\n      )}\n    </>\n  );\n};\n","import * as React from 'react';\n\nimport {RunFragmentForRepositoryMatch} from '../runs/types/RunFragmentForRepositoryMatch';\n\nimport {DagsterRepoOption, useRepositoryOptions} from './WorkspaceContext';\nimport {findRepoContainingPipeline, repoContainsPipeline} from './findRepoContainingPipeline';\n\ntype MatchType = {\n  match: DagsterRepoOption;\n  type: 'origin-and-snapshot' | 'origin-only' | 'snapshot-only' | 'pipeline-name-only';\n};\n\n/**\n * Given a Run fragment, find the repository that contains its pipeline.\n */\nexport const useRepositoryForRun = (\n  run: RunFragmentForRepositoryMatch | null | undefined,\n): MatchType | null => {\n  const {options} = useRepositoryOptions();\n\n  const repoMatch = React.useMemo(() => {\n    if (!run) {\n      return null;\n    }\n\n    const pipelineName = run.pipelineName;\n    // Try to match the pipeline name within the specified origin, if possible.\n    const origin = run.repositoryOrigin;\n\n    if (!origin) {\n      return null;\n    }\n\n    const location = origin?.repositoryLocationName;\n    const name = origin?.repositoryName;\n\n    const match = options.find(\n      (option) => option.repository.name === name && option.repositoryLocation.name === location,\n    );\n\n    // The origin repo is loaded. Verify that a pipeline with this name exists and return the match if so.\n    return match && repoContainsPipeline(match, pipelineName) ? match : null;\n  }, [options, run]);\n\n  const snapshotMatches = React.useMemo(() => {\n    if (!run) {\n      return null;\n    }\n\n    const pipelineName = run.pipelineName;\n    const snapshotId = run.pipelineSnapshotId;\n\n    // Find the repository that contains the specified pipeline name and snapshot ID, if any.\n    if (pipelineName && snapshotId) {\n      const snapshotMatches = findRepoContainingPipeline(options, pipelineName, snapshotId);\n      if (snapshotMatches.length) {\n        return snapshotMatches;\n      }\n    }\n\n    return null;\n  }, [options, run]);\n\n  const pipelineNameMatches = React.useMemo(() => {\n    if (!run) {\n      return null;\n    }\n\n    const pipelineName = run.pipelineName;\n\n    // There is no origin repo. Find any repos that might contain a matching pipeline name.\n    const possibleMatches = findRepoContainingPipeline(options, pipelineName);\n    return possibleMatches.length ? possibleMatches : null;\n  }, [options, run]);\n\n  if (repoMatch) {\n    if (snapshotMatches) {\n      const repoAndSnapshotMatch = snapshotMatches.find(\n        (repoOption) =>\n          repoOption.repository.name === repoMatch.repository.name &&\n          repoOption.repositoryLocation.name === repoMatch.repositoryLocation.name,\n      );\n      if (repoAndSnapshotMatch) {\n        return {match: repoAndSnapshotMatch, type: 'origin-and-snapshot'};\n      }\n    }\n\n    return {match: repoMatch, type: 'origin-only'};\n  }\n\n  if (snapshotMatches) {\n    return {match: snapshotMatches[0], type: 'snapshot-only'};\n  }\n\n  if (pipelineNameMatches) {\n    return {match: pipelineNameMatches[0], type: 'pipeline-name-only'};\n  }\n\n  return null;\n};\n","import * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Box} from './Box';\nimport {Colors} from './Colors';\nimport {Group} from './Group';\nimport {IconName, Icon} from './Icon';\n\nexport type AlertIntent = 'info' | 'warning' | 'error' | 'success';\n\ninterface Props {\n  intent: AlertIntent;\n  title: React.ReactNode;\n  description?: React.ReactNode;\n  onClose?: () => void;\n}\n\nexport const Alert: React.FC<Props> = (props) => {\n  const {intent, title, description, onClose} = props;\n\n  const {backgroundColor, borderColor, icon, iconColor, textColor} = React.useMemo(() => {\n    switch (intent) {\n      case 'warning':\n        return {\n          backgroundColor: Colors.Yellow50,\n          borderColor: Colors.Yellow500,\n          icon: 'warning',\n          iconColor: Colors.Yellow500,\n          textColor: Colors.Yellow700,\n        };\n      case 'error':\n        return {\n          backgroundColor: Colors.Red50,\n          borderColor: Colors.Red500,\n          icon: 'error',\n          iconColor: Colors.Red500,\n          textColor: Colors.Red700,\n        };\n      case 'success':\n        return {\n          backgroundColor: Colors.Green50,\n          borderColor: Colors.Green500,\n          icon: 'done',\n          iconColor: Colors.Green500,\n          textColor: Colors.Green700,\n        };\n      case 'info':\n      default:\n        return {\n          backgroundColor: Colors.Blue50,\n          borderColor: Colors.Blue500,\n          icon: 'info',\n          iconColor: Colors.Blue500,\n          textColor: Colors.Blue700,\n        };\n    }\n  }, [intent]);\n\n  return (\n    <AlertContainer\n      background={backgroundColor}\n      $borderColor={borderColor}\n      $textColor={textColor}\n      padding={{horizontal: 16, vertical: 12}}\n    >\n      <Box flex={{direction: 'row', justifyContent: 'space-between'}}>\n        <Group direction=\"row\" spacing={12} alignItems=\"flex-start\">\n          <Icon name={icon as IconName} color={iconColor} />\n          <Group direction=\"column\" spacing={8}>\n            <AlertTitle>{title}</AlertTitle>\n            {description ? <AlertDescription>{description}</AlertDescription> : null}\n          </Group>\n        </Group>\n        {!!onClose ? (\n          <ButtonWrapper onClick={onClose}>\n            <Icon name=\"close\" color={textColor} />\n          </ButtonWrapper>\n        ) : null}\n      </Box>\n    </AlertContainer>\n  );\n};\n\nAlert.defaultProps = {\n  intent: 'info',\n};\n\nconst ButtonWrapper = styled.button`\n  background: none;\n  color: inherit;\n  border: none;\n  padding: 0;\n  font: inherit;\n  cursor: pointer;\n  flex-direction: column;\n  height: fit-content;\n`;\n\nconst AlertContainer = styled(Box)<{$borderColor: string; $textColor: string}>`\n  box-shadow: inset 4px 0 ${({$borderColor}) => $borderColor};\n  color: ${({$textColor}) => $textColor};\n\n  a:link,\n  a:visited,\n  a:hover,\n  a:active {\n    color: ${({$textColor}) => $textColor};\n    text-decoration: underline;\n  }\n`;\n\nconst AlertTitle = styled.div`\n  font-weight: 600;\n`;\n\nconst AlertDescription = styled.div`\n  font-weight: 400;\n`;\n","import * as React from 'react';\n\nimport {BaseButton} from './BaseButton';\nimport {JoinedButtons} from './Button';\nimport {Colors} from './Colors';\nimport {IconName, Icon} from './Icon';\nimport {Tooltip} from './Tooltip';\n\nexport type ButtonGroupItem<T> = {\n  id: T;\n  label?: React.ReactNode;\n  icon?: IconName;\n  tooltip?: string;\n};\n\ninterface Props<T> {\n  activeItems?: Set<T>;\n  buttons: ButtonGroupItem<T>[];\n  onClick: (id: T, e: React.MouseEvent<HTMLButtonElement>) => void;\n}\n\nexport const ButtonGroup = <T extends string | number>(props: Props<T>) => {\n  const {activeItems, buttons, onClick} = props;\n  return (\n    <JoinedButtons>\n      {buttons.map((button) => {\n        const {id, icon, label, tooltip} = button;\n        const isActive = activeItems?.has(id);\n        const buttonElement = (\n          <BaseButton\n            key={id}\n            fillColor={isActive ? Colors.Gray200 : Colors.White}\n            textColor={isActive ? Colors.Gray900 : Colors.Gray700}\n            icon={\n              icon ? <Icon name={icon} color={isActive ? Colors.Gray900 : Colors.Gray700} /> : null\n            }\n            label={label}\n            onClick={(e) => onClick(id, e)}\n          />\n        );\n\n        if (tooltip) {\n          return (\n            <Tooltip content={tooltip} position=\"top\" key={id}>\n              {buttonElement}\n            </Tooltip>\n          );\n        }\n\n        return buttonElement;\n      })}\n    </JoinedButtons>\n  );\n};\n","import 'codemirror/lib/codemirror.css';\n\nimport './configeditor/codemirror-yaml/mode'; // eslint-disable-line import/no-duplicates\n\nimport * as React from 'react';\nimport {Controlled, UnControlled as Uncontrolled} from 'react-codemirror2';\nimport {createGlobalStyle} from 'styled-components/macro';\n\nimport {Colors} from './Colors';\nimport {Icons} from './Icon';\nimport {FontFamily} from './styles';\n\nexport const DagitCodeMirrorStyle = createGlobalStyle`\n  .react-codemirror2 .CodeMirror {\n    font-family: ${FontFamily.monospace};\n    font-size: 16px;\n\n    /* Note: Theme overrides */\n    &.cm-s-default .cm-comment {\n      color: #999;\n    }\n  }\n\n  .CodeMirror-gutter-elt {\n    .CodeMirror-lint-marker-error {\n      background-image: none;\n      background: ${Colors.Red500};\n      mask-image: url(${Icons.error});\n      mask-size: cover;\n      margin-bottom: 2px;\n    }\n  }\n\n  .CodeMirror-hint,\n  .CodeMirror-lint-marker-error,\n  .CodeMirror-lint-marker-warning,\n  .CodeMirror-lint-message-error,\n  .CodeMirror-lint-message-warning {\n    font-family: ${FontFamily.monospace};\n    font-size: 16px;\n  }\n\n  .react-codemirror2 .CodeMirror.cm-s-dagit {\n    .cm-atom {\n      color: ${Colors.Blue700};\n    }\n\n    .cm-comment {\n      color: ${Colors.Gray400};\n    }\n\n    .cm-meta {\n      color: ${Colors.Gray700};\n    }\n\n    .cm-number {\n      color: ${Colors.Red700};\n    }\n\n    .cm-string {\n      color: ${Colors.Green700};\n    }\n\n    .cm-string-2 {\n      color: ${Colors.Olive700};\n    }\n\n    .cm-variable-2 {\n      color: ${Colors.Blue500};\n    }\n\n    .cm-keyword {\n      color: ${Colors.Yellow700};\n    }\n\n    .CodeMirror-selected {\n      background-color: ${Colors.Blue50};\n    }\n\n    .CodeMirror-gutters {\n      background-color: ${Colors.Gray50};\n    }\n\n    .cm-indent {\n      display: inline-block;\n\n      &.cm-zero {\n        box-shadow: -1px 0 0 ${Colors.Green200};\n      }\n\n      &.cm-one {\n        box-shadow: -1px 0 0 ${Colors.Blue100};\n      }\n\n      &.cm-two {\n        box-shadow: -1px 0 0 ${Colors.LightPurple};\n      }\n\n      &.cm-three {\n        box-shadow: -1px 0 0 ${Colors.Red200};\n      }\n\n      &.cm-four {\n        box-shadow: -1px 0 0 ${Colors.Yellow200};\n      }\n\n      &.cm-five {\n        box-shadow: -1px 0 0 ${Colors.Olive200};\n      }\n\n      &.cm-six {\n        box-shadow: -1px 0 0 ${Colors.Gray300};\n      }\n    }\n  }\n\n  div.CodeMirror-lint-tooltip {\n    background: rgba(255, 247, 231, 1);\n    border: 1px solid ${Colors.Gray200};\n  }\n\n  .CodeMirror-lint-message {\n    background: transparent;\n  }\n  .CodeMirror-lint-message.CodeMirror-lint-message-error {\n    background: transparent;\n  }\n\n  /* Ensure that hints aren't vertically cutoff*/\n  .CodeMirror-hint div {\n    max-height: none !important;\n  }\n`;\n\ninterface ThemeProp {\n  theme?: string[];\n}\n\nconst makeThemeString = (theme: string[] = []) => [...theme, 'dagit'].join(' ');\n\nexport const StyledReadOnlyCodeMirror = (\n  props: React.ComponentProps<typeof Uncontrolled> & ThemeProp,\n) => {\n  const {options, theme, ...rest} = props;\n  return (\n    <>\n      <DagitCodeMirrorStyle />\n      <Uncontrolled\n        {...rest}\n        options={{...options, readOnly: true, theme: makeThemeString(theme)}}\n      />\n    </>\n  );\n};\n\nexport const StyledCodeMirror = (props: React.ComponentProps<typeof Controlled> & ThemeProp) => {\n  const {options, theme, ...rest} = props;\n  return (\n    <>\n      <DagitCodeMirrorStyle />\n      <Controlled {...rest} options={{...options, theme: makeThemeString(theme)}} />\n    </>\n  );\n};\n","import * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Colors} from './Colors';\nimport {Popover} from './Popover';\nimport {ConfigSchema_allConfigTypes as TypeData} from './configeditor/types/ConfigSchema';\nimport {FontFamily} from './styles';\n\ntype ConfigTypeSchemaTheme = 'dark' | 'light';\n\nexport type {TypeData};\n\ninterface ConfigTypeSchemaProps {\n  type: TypeData;\n  typesInScope: TypeData[];\n  theme?: ConfigTypeSchemaTheme;\n  maxDepth?: number;\n}\n\nfunction renderTypeRecursive(\n  type: TypeData,\n  typeLookup: {[typeName: string]: TypeData},\n  depth: number,\n  props: ConfigTypeSchemaProps,\n): React.ReactElement<HTMLElement> {\n  if (type.__typename === 'CompositeConfigType' && props.maxDepth && depth === props.maxDepth) {\n    return <span>...</span>;\n  }\n\n  if (type.__typename === 'CompositeConfigType') {\n    const innerIndent = '  '.repeat(depth + 1);\n    return (\n      <>\n        {`{`}\n        {type.isSelector && (\n          <DictBlockComment indent={innerIndent} content=\"One of the following:\" />\n        )}\n        {type.fields.map((fieldData) => {\n          const keyDisplay = (\n            <DictKey\n              theme={props.theme}\n              style={\n                fieldData.defaultValueAsJson\n                  ? {borderBottom: `dashed ${Colors.Blue200} 1px`, cursor: 'pointer'}\n                  : undefined\n              }\n            >\n              {fieldData.name}\n            </DictKey>\n          );\n          return (\n            <DictEntry key={fieldData.name}>\n              <DictBlockComment indent={innerIndent} content={fieldData.description} />\n              {innerIndent}\n              {fieldData.defaultValueAsJson ? (\n                <Popover\n                  popoverClassName=\"config-tooltip\"\n                  interactionKind=\"hover\"\n                  hoverCloseDelay={100}\n                  content={<ConfigContent value={fieldData.defaultValueAsJson} />}\n                >\n                  {keyDisplay}\n                </Popover>\n              ) : (\n                keyDisplay\n              )}\n              {!fieldData.isRequired && Optional}\n              {`: `}\n              {renderTypeRecursive(\n                typeLookup[fieldData.configTypeKey]!,\n                typeLookup,\n                depth + 1,\n                props,\n              )}\n            </DictEntry>\n          );\n        })}\n        {'  '.repeat(depth) + '}'}\n      </>\n    );\n  }\n\n  if (type.__typename === 'ArrayConfigType') {\n    const ofTypeKey = type.typeParamKeys[0]!;\n    return <>[{renderTypeRecursive(typeLookup[ofTypeKey]!, typeLookup, depth, props)}]</>;\n  }\n\n  if (type.__typename === 'MapConfigType') {\n    // e.g.\n    // {\n    //   [name_hint: String]: Int\n    // }\n    const keyTypeKey = type.typeParamKeys[0]!;\n    const valueTypeKey = type.typeParamKeys[1]!;\n    const innerIndent = '  '.repeat(depth + 1);\n    return (\n      <>\n        {`{`}\n        <DictEntry>\n          {innerIndent}[{type.keyLabelName ? `${type.keyLabelName}: ` : null}\n          {renderTypeRecursive(typeLookup[keyTypeKey]!, typeLookup, depth + 1, props)}]{`: `}\n          {renderTypeRecursive(typeLookup[valueTypeKey]!, typeLookup, depth + 1, props)}\n        </DictEntry>\n        {'  '.repeat(depth) + '}'}\n      </>\n    );\n  }\n\n  if (type.__typename === 'NullableConfigType') {\n    const ofTypeKey = type.typeParamKeys[0]!;\n    return (\n      <>\n        {renderTypeRecursive(typeLookup[ofTypeKey]!, typeLookup, depth, props)}\n        {Optional}\n      </>\n    );\n  }\n\n  if (type.__typename === 'ScalarUnionConfigType') {\n    const nonScalarTypeMarkup = renderTypeRecursive(\n      typeLookup[type.nonScalarTypeKey]!,\n      typeLookup,\n      depth,\n      props,\n    );\n    const scalarTypeMarkup = renderTypeRecursive(\n      typeLookup[type.scalarTypeKey]!,\n      typeLookup,\n      depth,\n      props,\n    );\n\n    return (\n      <span>\n        {scalarTypeMarkup} | {nonScalarTypeMarkup}\n      </span>\n    );\n  }\n\n  return <span>{type.givenName}</span>;\n}\n\nconst prettyJsonString = (value: string) => {\n  try {\n    const parsed = JSON.parse(value);\n    return JSON.stringify(parsed, null, 2);\n  } catch (e) {\n    return value;\n  }\n};\n\nconst ConfigContent = React.memo(({value}: {value: string}) => (\n  <>\n    <ConfigHeader>\n      <strong>Default value</strong>\n    </ConfigHeader>\n    <ConfigJSON>{prettyJsonString(value)}</ConfigJSON>\n  </>\n));\n\nconst ConfigHeader = styled.div`\n  background-color: ${Colors.Gray800};\n  color: ${Colors.White};\n  font-size: 13px;\n  padding: 8px;\n`;\n\nconst ConfigJSON = styled.pre`\n  background-color: ${Colors.Gray900};\n  color: ${Colors.White};\n  whitespace: pre-wrap;\n  font-family: ${FontFamily.monospace};\n  font-size: 14px;\n  padding: 8px;\n  margin: 0;\n`;\n\nexport const ConfigTypeSchema = React.memo((props: ConfigTypeSchemaProps) => {\n  const {type, typesInScope} = props;\n\n  const typeLookup: Record<string, TypeData> = {};\n  for (const typeInScope of typesInScope) {\n    typeLookup[typeInScope.key] = typeInScope;\n  }\n\n  return (\n    <TypeSchemaContainer>\n      <DictBlockComment content={type.description} indent=\"\" />\n      {renderTypeRecursive(type, typeLookup, 0, props)}\n    </TypeSchemaContainer>\n  );\n});\n\nconst TypeSchemaContainer = styled.code`\n  color: ${Colors.Gray400};\n  display: block;\n  white-space: pre-wrap;\n  font-size: 14px;\n  line-height: 18px;\n`;\n\nconst DictEntry = styled.div``;\n\nconst DictKey = styled.span<{theme: ConfigTypeSchemaTheme | undefined}>`\n  color: ${({theme}) => (theme === 'dark' ? Colors.White : Colors.Dark)};\n`;\n\nconst DictComment = styled.div`\n  /* This allows long comments to wrap as nice indented blocks, while\n     copy/pasting as a single line with space-based indentation. */\n  text-indent: -1.85em;\n  padding-left: 1.85em;\n  white-space: initial;\n`;\n\nconst DictBlockComment = ({indent = '', content}: {indent: string; content: string | null}) =>\n  content !== null && content !== '' ? (\n    <DictComment>{`${indent.replace(/ /g, '\\u00A0')}/* ${content} */`}</DictComment>\n  ) : null;\n\nconst Optional = <span style={{fontWeight: 500, color: Colors.Yellow700}}>?</span>;\n","import * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Button} from './Button';\nimport {Icon} from './Icon';\n\nexport interface CursorPaginationProps {\n  hasPrevCursor: boolean;\n  hasNextCursor: boolean;\n  popCursor: () => void;\n  advanceCursor: () => void;\n  reset: () => void;\n}\n\nexport const CursorPaginationControls: React.FC<CursorPaginationProps> = ({\n  hasPrevCursor,\n  hasNextCursor,\n  popCursor,\n  advanceCursor,\n}) => {\n  return (\n    <CursorControlsContainer>\n      <Button disabled={!hasPrevCursor} icon={<Icon name=\"arrow_back\" />} onClick={popCursor}>\n        Previous\n      </Button>\n      <Button\n        disabled={!hasNextCursor}\n        rightIcon={<Icon name=\"arrow_forward\" />}\n        onClick={advanceCursor}\n      >\n        Next\n      </Button>\n    </CursorControlsContainer>\n  );\n};\n\nexport const CursorHistoryControls: React.FC<CursorPaginationProps> = ({\n  hasPrevCursor,\n  hasNextCursor,\n  popCursor,\n  advanceCursor,\n}) => {\n  return (\n    <CursorControlsContainer>\n      <Button icon={<Icon name=\"arrow_back\" />} disabled={!hasPrevCursor} onClick={popCursor}>\n        <span className=\"hideable-button-text\">Newer</span>\n      </Button>\n      <Button\n        rightIcon={<Icon name=\"arrow_forward\" />}\n        disabled={!hasNextCursor}\n        onClick={advanceCursor}\n      >\n        <span className=\"hideable-button-text\">Older</span>\n      </Button>\n    </CursorControlsContainer>\n  );\n};\n\nexport const CursorControlsContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n  margin-top: 16px;\n`;\n","import styled from 'styled-components/macro';\n\nexport const MainContent = styled.div`\n  overflow-y: auto;\n  width: 100%;\n  height: 100%;\n`;\n","/* eslint-disable no-restricted-imports */\nimport {\n  Intent,\n  Menu as BlueprintMenu,\n  MenuDivider as BlueprintMenuDivider,\n  MenuItem as BlueprintMenuItem,\n} from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Colors} from './Colors';\nimport {IconName, Icon, IconWrapper} from './Icon';\n\ninterface Props extends React.ComponentProps<typeof BlueprintMenu> {}\n\nexport const Menu: React.FC<Props> = (props) => {\n  return <StyledMenu {...props} />;\n};\n\nconst intentToTextColor = (intent: React.ComponentProps<typeof BlueprintMenuItem>['intent']) => {\n  switch (intent) {\n    case 'primary':\n      return Colors.Blue500;\n    case 'danger':\n      return Colors.Red500;\n    case 'success':\n      return Colors.Green500;\n    case 'warning':\n      return Colors.Yellow500;\n    case 'none':\n    default:\n      return Colors.Gray900;\n  }\n};\n\nconst intentToIconColor = (intent: React.ComponentProps<typeof BlueprintMenuItem>['intent']) => {\n  switch (intent) {\n    case 'primary':\n      return Colors.Blue500;\n    case 'danger':\n      return Colors.Red500;\n    case 'success':\n      return Colors.Green500;\n    case 'warning':\n      return Colors.Yellow500;\n    case 'none':\n    default:\n      return Colors.Gray900;\n  }\n};\n\nexport const iconWithColor = (icon?: IconName | JSX.Element, intent?: Intent) => {\n  if (icon) {\n    if (typeof icon === 'string') {\n      return <Icon name={icon} color={intentToIconColor(intent)} />;\n    }\n    return icon;\n  }\n  return null;\n};\n\nexport interface CommonMenuItemProps {\n  icon?: IconName | JSX.Element;\n}\n\ninterface ItemProps\n  extends CommonMenuItemProps,\n    Omit<React.ComponentProps<typeof BlueprintMenuItem>, 'href' | 'icon'> {}\n\nexport const MenuItem: React.FC<ItemProps> = (props) => {\n  const {icon, intent, ...rest} = props;\n  return (\n    <StyledMenuItem\n      {...rest}\n      $textColor={intentToTextColor(intent)}\n      icon={iconWithColor(icon, intent)}\n    />\n  );\n};\n\ninterface MenuExternalLinkProps\n  extends CommonMenuItemProps,\n    Omit<React.ComponentProps<typeof BlueprintMenuItem>, 'href' | 'icon'> {\n  href: string;\n}\n\n/**\n * If you want to use a menu item as a link, use `MenuLink` and provide a `to` prop.\n */\nexport const MenuExternalLink: React.FC<MenuExternalLinkProps> = (props) => {\n  const {icon, intent, ...rest} = props;\n  return (\n    <StyledMenuItem\n      {...rest}\n      target=\"_blank\"\n      rel=\"noreferrer nofollow\"\n      $textColor={intentToTextColor(intent)}\n      icon={iconWithColor(icon, intent)}\n    />\n  );\n};\n\nexport const MenuDivider = styled(BlueprintMenuDivider)`\n  border-top: 1px solid ${Colors.Gray100};\n  margin: 2px 0;\n`;\n\nconst StyledMenu = styled(BlueprintMenu)`\n  border-radius: 4px;\n  padding: 8px 4px;\n`;\n\ninterface StyledMenuItemProps extends React.ComponentProps<typeof BlueprintMenuItem> {\n  $textColor: string;\n}\n\nconst StyledMenuItem = styled(BlueprintMenuItem)<StyledMenuItemProps>`\n  border-radius: 4px;\n  color: ${({$textColor}) => $textColor};\n  line-height: 20px;\n  padding: 6px 8px 6px 12px;\n  transition: background-color 50ms, box-shadow 150ms;\n  align-items: flex-start;\n\n  /**\n   * Use margin instead of align-items: center because the contents of the menu item may wrap \n   * in unusual circumstances.\n   */\n  ${IconWrapper} {\n    margin-top: 2px;\n  }\n\n  &.bp3-intent-primary.bp3-active {\n    background-color: ${Colors.Blue500};\n\n    ${IconWrapper} {\n      background-color: ${Colors.White};\n    }\n  }\n\n  &.bp3-disabled ${IconWrapper} {\n    opacity: 0.5;\n  }\n\n  &.bp3-active ${IconWrapper} {\n    color: ${Colors.White};\n  }\n\n  ${IconWrapper}:first-child {\n    margin-left: -4px;\n  }\n\n  &:hover {\n    background: ${Colors.Gray100};\n    color: ${({$textColor}) => $textColor};\n  }\n\n  &:focus {\n    color: ${({$textColor}) => $textColor};\n    box-shadow: rgba(58, 151, 212, 0.6) 0 0 0 2px;\n    outline: none;\n  }\n`;\n","import * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Box} from './Box';\nimport {Colors} from './Colors';\nimport {Table, TableProps} from './Table';\n\ntype Row = {key: string; value: React.ReactNode};\n\ninterface Props {\n  dark?: boolean;\n  rows: (Row | null | undefined)[];\n  spacing: 0 | 2 | 4;\n}\n\nexport const MetadataTable = (props: Props) => {\n  const {rows, spacing, dark = false} = props;\n\n  return (\n    <StyledTable>\n      <tbody>\n        {rows.map((pair: Row | null | undefined) => {\n          if (!pair) {\n            return null;\n          }\n          const {key, value} = pair;\n          return (\n            <tr key={key}>\n              <td>\n                <Box padding={{vertical: spacing, right: 32}}>\n                  <MetadataKey $dark={dark}>{key}</MetadataKey>\n                </Box>\n              </td>\n              <td>\n                <Box padding={{vertical: spacing}}>{value}</Box>\n              </td>\n            </tr>\n          );\n        })}\n      </tbody>\n    </StyledTable>\n  );\n};\n\nMetadataTable.defaultProps = {\n  spacing: 4,\n};\n\nexport const StyledTable = styled.table`\n  border-spacing: 0;\n  td {\n    vertical-align: top;\n  }\n\n  td .bp3-control {\n    margin-bottom: 0;\n  }\n`;\n\nconst MetadataKey = styled.div<{$dark: boolean}>`\n  color: ${({$dark}) => ($dark ? Colors.Gray200 : Colors.Gray600)};\n  font-weight: 400;\n`;\n\nexport const MetadataTableWIP = styled(Table)<TableProps>`\n  td:first-child {\n    white-space: nowrap;\n    width: 1px;\n    max-width: 400px;\n    word-break: break-word;\n    overflow: hidden;\n    padding-right: 24px;\n    text-overflow: ellipsis;\n  }\n`;\n","import * as React from 'react';\n\nimport {Box} from './Box';\nimport {Colors} from './Colors';\nimport {IconName, Icon} from './Icon';\nimport {Spinner} from './Spinner';\nimport {Subheading} from './Text';\n\nexport type NonIdealStateProps = React.DetailedHTMLProps<\n  React.InputHTMLAttributes<HTMLInputElement>,\n  HTMLInputElement\n> & {\n  icon: 'error' | 'no-results' | 'spinner' | IconName;\n  title: string;\n  description?: React.ReactNode;\n  action?: React.ReactNode;\n  shrinkable?: boolean;\n};\n\nexport const NonIdealState: React.FC<NonIdealStateProps> = ({\n  title,\n  description,\n  icon,\n  action,\n  shrinkable,\n}) => {\n  const singleContentElement = [title, description, action].filter(Boolean).length === 1;\n\n  return (\n    <Box\n      flex={{gap: 20, alignItems: singleContentElement ? 'center' : 'flex-start'}}\n      background={Colors.Gray50}\n      padding={24}\n      style={{\n        margin: 'auto',\n        borderRadius: 8,\n        width: shrinkable ? 'initial' : 'max-content',\n        maxWidth: 500,\n      }}\n    >\n      {icon === 'spinner' ? (\n        <Spinner purpose=\"section\" />\n      ) : icon === 'no-results' ? (\n        <Icon name=\"search\" size={48} color={Colors.Gray400} />\n      ) : (\n        <Icon name={icon} size={48} color={Colors.Gray400} />\n      )}\n      <Box\n        flex={{\n          gap: 8,\n          direction: 'column',\n          alignItems: 'flex-start',\n        }}\n      >\n        {title && <Subheading style={{color: Colors.Gray900}}>{title}</Subheading>}\n        {description && <div style={{color: Colors.Gray500}}>{description}</div>}\n        {action}\n      </Box>\n    </Box>\n  );\n};\n","import styled from 'styled-components/macro';\n\nexport const Page = styled.div`\n  height: 100%;\n  overflow-y: auto;\n  padding-bottom: 64px;\n  width: 100%;\n`;\n","import * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Box} from './Box';\nimport {Colors} from './Colors';\nimport {IconName} from './Icon';\n\ninterface Props {\n  title: React.ReactNode;\n  tags?: React.ReactNode;\n  icon?: IconName;\n  description?: React.ReactNode;\n  metadata?: React.ReactNode;\n  right?: React.ReactNode;\n  tabs?: React.ReactNode;\n}\n\nexport const PageHeader = (props: Props) => {\n  const {title, tags, right, tabs} = props;\n  return (\n    <PageHeaderContainer\n      background={Colors.Gray50}\n      padding={{top: 16, left: 24, right: 12}}\n      border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n    >\n      <Box flex={{direction: 'row', justifyContent: 'space-between'}} padding={{bottom: 16}}>\n        <Box flex={{direction: 'row', alignItems: 'flex-start', gap: 12, wrap: 'wrap'}}>\n          {title}\n          {tags}\n        </Box>\n        {right}\n      </Box>\n      {tabs}\n    </PageHeaderContainer>\n  );\n};\n\nconst PageHeaderContainer = styled(Box)`\n  width: 100%;\n\n  /**\n   * Blueprint breadcrumbs annoyingly have a built-in height.\n   */\n  .bp3-breadcrumbs {\n    height: auto;\n  }\n`;\n","/* eslint-disable no-restricted-imports */\nimport {IPopoverProps} from '@blueprintjs/core';\nimport {Select as BlueprintSelect, SelectProps} from '@blueprintjs/select';\n/* eslint-enable no-restricted-imports */\nimport deepmerge from 'deepmerge';\nimport * as React from 'react';\n\nexport const Select = <T,>(props: React.PropsWithChildren<SelectProps<T>>) => {\n  const popoverProps: Partial<IPopoverProps> = {\n    ...props.popoverProps,\n    minimal: true,\n    modifiers: deepmerge(\n      {offset: {enabled: true, offset: '0, 8px'}},\n      props.popoverProps?.modifiers || {},\n    ),\n    popoverClassName: `dagit-popover ${props.popoverProps?.className || ''}`,\n  };\n\n  return <BlueprintSelect {...props} popoverProps={popoverProps} />;\n};\n","// eslint-disable-next-line no-restricted-imports\nimport {\n  Slider as BlueprintSlider,\n  MultiSlider as BlueprintMultiSlider,\n  SliderProps,\n  MultiSliderProps,\n} from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled, {css} from 'styled-components/macro';\n\nimport {Colors} from './Colors';\n\nexport const Slider: React.FC<SliderProps & {fillColor?: string}> = ({\n  fillColor = Colors.Gray600,\n  ...rest\n}) => {\n  return <StyledSlider {...rest} intent=\"none\" $fillColor={fillColor} />;\n};\n\nexport const MultiSlider: React.FC<MultiSliderProps & {fillColor?: string}> & {\n  Handle: typeof BlueprintMultiSlider.Handle;\n} = ({fillColor = Colors.Gray600, ...rest}) => {\n  return <StyledMultiSlider {...rest} intent=\"none\" $fillColor={fillColor} />;\n};\n\nMultiSlider.Handle = BlueprintMultiSlider.Handle;\n\nexport const SliderStyles = css<{$fillColor: string}>`\n  .bp3-slider-track {\n    height: 8px;\n    .bp3-slider-progress {\n      background-color: ${(p) => p.$fillColor};\n      opacity: 0.2;\n      height: 8px;\n    }\n    .bp3-slider-progress.bp3-intent-primary {\n      background-color: ${(p) => p.$fillColor};\n      opacity: 1;\n      height: 8px;\n    }\n  }\n  &.bp3-vertical .bp3-slider-track,\n  &.bp3-vertical .bp3-slider-track .bp3-slider-progress {\n    height: initial;\n    width: 8px;\n  }\n  .bp3-slider-handle {\n    width: 18px;\n    height: 18px;\n    border-radius: 50%;\n    border: 2px solid ${Colors.Gray300};\n    background: ${Colors.White};\n    box-shadow: none;\n    &:hover {\n      border: 2px solid ${Colors.Gray400};\n      box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;\n    }\n\n    .bp3-slider-label {\n      background: ${Colors.Gray900};\n      box-shadow: 0 1px 4px rgba(0,0,0,0.15)\n      padding: 4px 8px;\n    }\n  }\n`;\n\nconst StyledMultiSlider = styled(BlueprintMultiSlider)<{$fillColor: string}>`\n  ${SliderStyles}\n`;\nconst StyledSlider = styled(BlueprintSlider)<{$fillColor: string}>`\n  ${SliderStyles}\n`;\n","import * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Button} from './Button';\nimport {ButtonGroup} from './ButtonGroup';\nimport {Colors} from './Colors';\nimport {Icon} from './Icon';\n\nconst DIVIDER_THICKNESS = 2;\n\ninterface SplitPanelContainerProps {\n  axis?: 'horizontal' | 'vertical';\n  identifier: string;\n  first: React.ReactNode;\n  firstInitialPercent: number;\n  firstMinSize?: number;\n  second: React.ReactNode | null; // Note: pass null to hide / animate away the second panel\n}\n\ninterface SplitPanelContainerState {\n  size: number;\n  key: string;\n  resizing: boolean;\n}\n\nexport class SplitPanelContainer extends React.Component<\n  SplitPanelContainerProps,\n  SplitPanelContainerState\n> {\n  constructor(props: SplitPanelContainerProps) {\n    super(props);\n\n    const key = `dagit.panel-width.${this.props.identifier}`;\n    const value = window.localStorage.getItem(key);\n    let size = Number(value);\n    if (value === null || isNaN(size)) {\n      size = this.props.firstInitialPercent;\n    }\n\n    this.state = {size, key, resizing: false};\n  }\n\n  onChangeSize = (size: number) => {\n    this.setState({size});\n    window.localStorage.setItem(this.state.key, `${size}`);\n  };\n\n  render() {\n    const {firstMinSize, first, second} = this.props;\n    const {size: _size, resizing} = this.state;\n    const axis = this.props.axis || 'horizontal';\n\n    const firstPaneStyles: React.CSSProperties = {flexShrink: 0};\n    const firstSize = second ? _size : 100;\n\n    // Note: The divider appears after the first panel, so making the first panel 100% wide\n    // hides the divider offscreen. To prevent this, we subtract the divider depth.\n    if (axis === 'horizontal') {\n      firstPaneStyles.minWidth = firstMinSize;\n      firstPaneStyles.width = `calc(${firstSize}% - ${DIVIDER_THICKNESS}px)`;\n    } else {\n      firstPaneStyles.minHeight = firstMinSize;\n      firstPaneStyles.height = `calc(${firstSize}% - ${DIVIDER_THICKNESS}px)`;\n    }\n\n    return (\n      <Container axis={axis} id=\"split-panel-container\" resizing={resizing}>\n        <div className=\"split-panel\" style={firstPaneStyles}>\n          {first}\n        </div>\n        <PanelDivider\n          axis={axis}\n          resizing={resizing}\n          onSetResizing={(resizing) => this.setState({resizing})}\n          onMove={this.onChangeSize}\n        />\n        <div className=\"split-panel\" style={{flex: 1}}>\n          {second}\n        </div>\n      </Container>\n    );\n  }\n}\n\ninterface IDividerProps {\n  axis: 'horizontal' | 'vertical';\n  resizing: boolean;\n  onSetResizing: (resizing: boolean) => void;\n  onMove: (vw: number) => void;\n}\n\nclass PanelDivider extends React.Component<IDividerProps> {\n  ref = React.createRef<any>();\n\n  onMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault();\n\n    this.props.onSetResizing(true);\n\n    const onMouseMove = (event: MouseEvent) => {\n      const parent = this.ref.current?.closest('#split-panel-container');\n      if (!parent) {\n        return;\n      }\n      const parentRect = parent.getBoundingClientRect();\n\n      const firstPanelPercent =\n        this.props.axis === 'horizontal'\n          ? ((event.clientX - parentRect.left) * 100) / parentRect.width\n          : ((event.clientY - parentRect.top) * 100) / parentRect.height;\n\n      this.props.onMove(Math.min(100, Math.max(0, firstPanelPercent)));\n    };\n\n    const onMouseUp = () => {\n      this.props.onSetResizing(false);\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n    };\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  };\n\n  render() {\n    const Wrapper = DividerWrapper[this.props.axis];\n    const HitArea = DividerHitArea[this.props.axis];\n    return (\n      <Wrapper resizing={this.props.resizing} ref={this.ref}>\n        <HitArea onMouseDown={this.onMouseDown} />\n      </Wrapper>\n    );\n  }\n}\n\ninterface PanelToggleProps {\n  axis: 'horizontal' | 'vertical';\n  container: React.RefObject<SplitPanelContainer>;\n}\n\nexport const FirstOrSecondPanelToggle = ({container, axis}: PanelToggleProps) => {\n  const onClick = (id: string) => {\n    let size = 50;\n    if (id === 'first-pane') {\n      size = 100;\n    } else if (id === 'second-pane') {\n      size = 0;\n    }\n    container.current?.onChangeSize(size);\n  };\n\n  return (\n    <ButtonGroup\n      buttons={[\n        {\n          id: 'first-pane',\n          icon: axis === 'vertical' ? 'panel_show_top' : 'panel_show_left',\n          tooltip: axis === 'vertical' ? 'Show only top pane' : 'Show only left pane',\n        },\n        {\n          id: 'split',\n          icon: 'panel_show_both',\n          tooltip: 'Show both panes',\n        },\n        {\n          id: 'second-pane',\n          icon: axis === 'vertical' ? 'panel_show_bottom' : 'panel_show_right',\n          tooltip: axis === 'vertical' ? 'Show only bottom pane' : 'Show only right pane',\n        },\n      ]}\n      onClick={onClick}\n    />\n  );\n};\n\n// Todo: This component attempts to sync itself with the container, but it can't\n// observe the container's width without a React context or adding a listener, etc.\n// If we keep making components that manipulate panel state we may want to move it\n// all to a context consumed by both.\n//\nexport const SecondPanelToggle = ({container, axis}: PanelToggleProps) => {\n  const [prevSize, setPrevSize] = React.useState<number | 'unknown'>('unknown');\n  const initialIsOpen = (container.current?.state.size || 0) < 100;\n\n  const [open, setOpen] = React.useState<boolean>(initialIsOpen);\n  React.useEffect(() => setOpen(initialIsOpen), [initialIsOpen]);\n\n  return (\n    <Button\n      active={open}\n      title=\"Toggle second pane\"\n      icon={\n        <Icon\n          name={\n            axis === 'horizontal'\n              ? open\n                ? 'panel_hide_right'\n                : 'panel_show_right'\n              : 'panel_show_bottom'\n          }\n        />\n      }\n      onClick={() => {\n        if (!container.current) {\n          return;\n        }\n        const current = container.current.state.size;\n        if (current < 90) {\n          setPrevSize(current);\n          setOpen(false);\n          container.current.onChangeSize(100);\n        } else {\n          setOpen(true);\n          container.current.onChangeSize(\n            prevSize === 'unknown' ? container.current.props.firstInitialPercent : prevSize,\n          );\n        }\n      }}\n    />\n  );\n};\n\n// Note: -1px margins here let the divider cover the last 1px of the previous box, hiding\n// any scrollbar border it might have.\n\nconst DividerWrapper = {\n  horizontal: styled.div<{resizing: boolean}>`\n    width: ${DIVIDER_THICKNESS}px;\n    z-index: 1;\n    background: ${(p) => (p.resizing ? Colors.Gray400 : Colors.KeylineGray)};\n    margin-left: -1px;\n    overflow: visible;\n    position: relative;\n  `,\n  vertical: styled.div<{resizing: boolean}>`\n    height: ${DIVIDER_THICKNESS}px;\n    z-index: 1;\n    background: ${(p) => (p.resizing ? Colors.Gray400 : Colors.KeylineGray)};\n    margin-top: -1px;\n    overflow: visible;\n    position: relative;\n  `,\n};\n\nconst DividerHitArea = {\n  horizontal: styled.div`\n    width: 17px;\n    height: 100%;\n    z-index: 1;\n    cursor: ew-resize;\n    position: relative;\n    left: -8px;\n  `,\n  vertical: styled.div`\n    height: 17px;\n    width: 100%;\n    z-index: 1;\n    cursor: ns-resize;\n    position: relative;\n    top: -8px;\n  `,\n};\n\nconst Container = styled.div<{\n  axis?: 'horizontal' | 'vertical';\n  resizing: boolean;\n}>`\n  display: flex;\n  overflow: hidden;\n  flex-direction: ${({axis}) => (axis === 'vertical' ? 'column' : 'row')};\n  flex: 1 1;\n  width: 100%;\n  min-width: 0;\n  min-height: 0;\n\n  .split-panel {\n    position: relative;\n    transition: ${({axis, resizing}) =>\n      resizing ? 'none' : axis === 'horizontal' ? 'width' : 'height'}\n      200ms ease-out;\n    flex-direction: column;\n    display: flex;\n    min-${({axis}) => (axis === 'vertical' ? 'height' : 'width')}: 0;\n    z-index: 0;\n  }\n`;\n","import * as React from 'react';\nimport styled, {css} from 'styled-components/macro';\n\nimport {Colors} from './Colors';\nimport {IconWrapper} from './Icon';\nimport {FontFamily} from './styles';\n\nexport interface TabStyleProps {\n  disabled?: boolean;\n  selected?: boolean;\n  count?: number | 'indeterminate' | null;\n  icon?: React.ReactNode;\n  title?: React.ReactNode;\n  $size?: 'small' | 'large';\n}\n\nexport const getTabA11yProps = (props: {selected?: boolean; disabled?: boolean}) => {\n  const {selected, disabled} = props;\n  return {\n    role: 'tab',\n    tabIndex: disabled ? -1 : 0,\n    'aria-disabled': disabled,\n    'aria-expanded': selected,\n    'aria-selected': selected,\n  };\n};\n\nexport const getTabContent = (props: TabStyleProps & {title?: React.ReactNode}) => {\n  const {title, count, icon} = props;\n  return (\n    <>\n      {title}\n      {icon}\n      {count !== undefined ? <Count>{count === 'indeterminate' ? '' : count}</Count> : null}\n    </>\n  );\n};\n\nconst Count = styled.div`\n  display: inline;\n  font-family: ${FontFamily.monospace};\n  font-size: 14px;\n  font-weight: 500;\n  letter-spacing: -0.02%;\n  padding: 0 4px;\n  color: ${Colors.Gray900};\n  background: ${Colors.Gray100};\n`;\n\nexport const tabCSS = css<TabStyleProps>`\n  background: none;\n  border: none;\n  font-size: 14px;\n  line-height: 20px;\n  font-weight: 600;\n  padding: ${({$size}) => ($size === 'small' ? '10px 0' : '16px 0')};\n  box-shadow: ${({selected}) => (selected ? Colors.Blue500 : 'transparent')} 0 -2px 0 inset;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  gap: 6px;\n\n  &,\n  & a {\n    cursor: pointer;\n    user-select: none;\n    color: ${({selected, disabled}) =>\n      selected ? Colors.Blue500 : disabled ? Colors.Gray300 : Colors.Gray700};\n  }\n\n  & ${IconWrapper} {\n    color: ${({selected, disabled}) =>\n      selected ? Colors.Blue500 : disabled ? Colors.Gray300 : ''};\n  }\n\n  /* Focus outline only when using keyboard, not when focusing via mouse. */\n  &:focus {\n    outline: none !important;\n    box-shadow: ${({selected, disabled}) =>\n        selected ? Colors.Blue500 : disabled ? 'transparent' : Colors.Blue200}\n      0 -2px 0 inset;\n  }\n\n  &:hover {\n    &,\n    a {\n      text-decoration: none;\n      color: ${({selected, disabled}) =>\n        selected ? Colors.Blue700 : disabled ? Colors.Gray300 : Colors.Blue700};\n    }\n    ${IconWrapper} {\n      color: ${({selected, disabled}) =>\n        selected ? Colors.Blue700 : disabled ? Colors.Gray300 : ''};\n    }\n  }\n`;\n\ninterface TabProps extends TabStyleProps, Omit<React.ComponentPropsWithoutRef<'button'>, 'title'> {}\n\nexport const Tab = styled((props: TabProps) => {\n  const containerProps = getTabA11yProps(props);\n  const content = getTabContent(props);\n\n  const titleText = typeof props.title === 'string' ? props.title : undefined;\n\n  return (\n    <button {...props} {...containerProps} title={titleText} type=\"button\">\n      {content}\n    </button>\n  );\n})<TabStyleProps>`\n  ${tabCSS}\n`;\n\ninterface TabsProps {\n  children: Array<React.ReactElement<TabProps>>;\n  selectedTabId?: string;\n  onChange?: (selectedTabId: string) => void;\n  size?: 'small' | 'large';\n}\n\nexport const Tabs = styled(({selectedTabId, children, onChange, size = 'large', ...rest}) => {\n  return (\n    <div {...rest} role=\"tablist\">\n      {React.Children.map(children, (child) =>\n        child\n          ? React.cloneElement(child, {\n              selected: child.props.selected || child.props.id === selectedTabId,\n              $size: size,\n              ...(onChange\n                ? {\n                    onClick: () => onChange(child.props.id),\n                  }\n                : {}),\n            })\n          : null,\n      )}\n    </div>\n  );\n})<TabsProps>`\n  display: flex;\n  gap: 16px;\n  font-size: ${({size}) => (size === 'small' ? '12px' : '14px')};\n  line-height: ${({size}) => (size === 'small' ? '16px' : '20px')};\n  font-weight: 600;\n`;\n","// eslint-disable-next-line no-restricted-imports\nimport {TagInput} from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Box} from './Box';\nimport {Colors} from './Colors';\nimport {MenuItem, Menu} from './Menu';\nimport {Popover} from './Popover';\nimport {Spinner} from './Spinner';\n\nconst MAX_SUGGESTIONS = 100;\n\nexport interface SuggestionProvider {\n  token?: string;\n  values: () => string[];\n  suggestionFilter?: (query: string, suggestion: Suggestion) => boolean;\n}\n\nexport interface Suggestion {\n  text: string;\n  final: boolean;\n}\n\ninterface ActiveSuggestionInfo {\n  text: string;\n  idx: number;\n}\n\nexport interface TokenizingFieldValue {\n  token?: string;\n  value: string;\n}\n\ninterface TokenizingFieldProps {\n  values: TokenizingFieldValue[];\n  maxValues?: number;\n  onChange: (values: TokenizingFieldValue[]) => void;\n  onChangeBeforeCommit?: boolean;\n  addOnBlur?: boolean;\n  onFocus?: () => void;\n\n  placeholder?: string;\n  loading?: boolean;\n  className?: string;\n  small?: boolean;\n\n  fullwidth?: boolean;\n\n  suggestionProviders: SuggestionProvider[];\n  suggestionRenderer?: (suggestion: Suggestion) => React.ReactNode;\n  suggestionProvidersFilter?: (\n    suggestionProvider: SuggestionProvider[],\n    values: TokenizingFieldValue[],\n  ) => SuggestionProvider[];\n}\n\nfunction findProviderByToken(token: string, providers: SuggestionProvider[]) {\n  return providers.find((p) => p.token && p.token.toLowerCase() === token.toLowerCase());\n}\n\nexport const tokenizedValuesFromString = (str: string, providers: SuggestionProvider[]) => {\n  if (str === '') {\n    return [];\n  }\n  const tokens = str.split(',');\n  return tokenizedValuesFromStringArray(tokens, providers);\n};\n\nexport const tokenizedValuesFromStringArray = (tokens: string[], providers: SuggestionProvider[]) =>\n  tokens.map((token) => tokenizedValueFromString(token, providers));\n\nexport const tokenizeString = (str: string): [string, string] => {\n  const colonAt = str.indexOf(':');\n  if (colonAt === -1) {\n    return [str, ''];\n  }\n  return [str.slice(0, colonAt), str.slice(colonAt + 1)];\n};\n\nexport function tokenizedValueFromString(\n  str: string,\n  providers: SuggestionProvider[],\n): TokenizingFieldValue {\n  const [token, value] = tokenizeString(str);\n  if (findProviderByToken(token, providers)) {\n    if (token && value) {\n      return {token, value};\n    }\n  }\n\n  return {value: str};\n}\n\nexport const tokenToString = (v: TokenizingFieldValue) =>\n  v.token ? `${v.token}:${v.value}` : v.value;\n\nexport const tokensAsStringArray = (value: TokenizingFieldValue[]) =>\n  value.filter((v) => v.value !== '').map(tokenToString);\n\nexport const stringFromValue = (value: TokenizingFieldValue[]) =>\n  tokensAsStringArray(value).join(',');\n\nconst isEqual = (a: TokenizingFieldValue, b?: TokenizingFieldValue) =>\n  b && a.token === b.token && a.value === b.value;\n\n/** Provides a text field with typeahead autocompletion.\n *  This completion either provides a list of standalone tokens\n *  sourced from the `tokens` param, or a set of key value pairs,\n *  sourced from the `suggestionProviders` param. In the latter case, the\n *  key is one of a known set of \"suggestion provider tokens\".\n *\n *  Provide one or more SuggestionProviders or a list of tokens\n *  to build the tree of autocompletions.\n *\n *  The input also allows for freeform typing (`value` items with no token value) */\nexport const TokenizingField: React.FC<TokenizingFieldProps> = ({\n  suggestionProviders,\n  suggestionProvidersFilter,\n  values: externalValues,\n  maxValues,\n  onChange,\n  onChangeBeforeCommit,\n  onFocus,\n  placeholder,\n  addOnBlur,\n  loading,\n  className,\n  fullwidth,\n  suggestionRenderer,\n}) => {\n  const [open, setOpen] = React.useState<boolean>(false);\n  const [active, setActive] = React.useState<ActiveSuggestionInfo | null>(null);\n  const [typed, setTyped] = React.useState<string>('');\n\n  const values = React.useMemo(() => [...externalValues], [externalValues]);\n  const typedValue = tokenizedValueFromString(typed, suggestionProviders);\n  if (isEqual(typedValue, values[values.length - 1])) {\n    values.pop();\n  }\n\n  const atMaxValues = maxValues !== undefined && values.length >= maxValues;\n\n  const filteredSuggestionProviders = suggestionProvidersFilter\n    ? suggestionProvidersFilter(suggestionProviders, values)\n    : suggestionProviders;\n\n  // Build the set of suggestions that should be displayed for the current input value.\n  // Note: \"typed\" is the text that has not yet been submitted, separate from values[].\n  const parts = typed.split(':');\n  const lastPart = (parts[parts.length - 1] || '').toLowerCase();\n\n  const suggestions = React.useMemo(() => {\n    if (atMaxValues) {\n      return [];\n    }\n\n    let suggestionsArr: Suggestion[] = [];\n\n    const matchesTypedText = (query: string, s: Suggestion) =>\n      !query ||\n      s.text\n        .toLowerCase()\n        .split(':')\n        .some((c) => c.includes(query));\n\n    const availableSuggestionsForProvider = (provider: SuggestionProvider) => {\n      const suggestionNotUsed = (v: string) =>\n        !values.some((e) => e.token === provider.token && e.value === v);\n\n      const suggestionFilter = provider.suggestionFilter || matchesTypedText;\n\n      return provider\n        .values()\n        .filter(suggestionNotUsed)\n        .map((v) => ({text: provider?.token ? `${provider.token}:${v}` : v, final: true}))\n        .filter((s) => suggestionFilter(lastPart, s))\n        .slice(0, MAX_SUGGESTIONS); // never show too many suggestions for one provider\n    };\n\n    if (parts.length === 1) {\n      // Suggest providers (eg: `pipeline:`) so users can discover the search space\n\n      suggestionsArr = filteredSuggestionProviders\n        .reduce(\n          (accum: Suggestion[], s) =>\n            s.token ? [...accum, {text: `${s.token}:`, final: false}] : accum,\n          [],\n        )\n        .filter((s) => matchesTypedText(lastPart, s));\n\n      // Suggest value completions so users can type \"airline_\" without the \"pipeline\"\n      // prefix and get the correct suggestion.\n      for (const p of filteredSuggestionProviders) {\n        if (!p.token || typed.length > 0) {\n          suggestionsArr.push(...availableSuggestionsForProvider(p));\n        }\n      }\n    }\n\n    if (parts.length === 2) {\n      const firstPart = parts[0];\n      if (firstPart) {\n        // Suggest values from the chosen provider (eg: `pipeline:abc`)\n        const provider = findProviderByToken(firstPart, filteredSuggestionProviders);\n        suggestionsArr = provider ? availableSuggestionsForProvider(provider) : [];\n      }\n    }\n\n    // Truncate suggestions to the ones currently matching the typed text,\n    // and always sort them in alphabetical order.\n    suggestionsArr.sort((a, b) => a.text.localeCompare(b.text));\n\n    return suggestionsArr;\n  }, [atMaxValues, filteredSuggestionProviders, lastPart, parts, typed.length, values]);\n\n  // We need to manage selection in the dropdown by ourselves. To ensure the\n  // best behavior we store the active item's index and text (the text allows\n  // us to relocate it if it's moved and the index allows us to keep selection\n  // at the same location if the previous item is gone.)\n\n  // This hook keeps the active row state in sync with the suggestions, which\n  // are derived from the current input value.\n\n  React.useEffect(() => {\n    // If suggestions are present, autoselect the first one so the user can press\n    // enter to complete their search. (Esc + enter is how you enter your raw text.)\n    if (!active && suggestions.length) {\n      const item = suggestions[0];\n      if (item) {\n        setActive({text: item.text, idx: 0});\n      }\n      return;\n    }\n    if (!active) {\n      return;\n    }\n    if (suggestions.length === 0) {\n      setActive(null);\n      return;\n    }\n\n    // Relocate the currently active item in the latest suggestions list\n    const pos = suggestions.findIndex((a) => a.text === active.text);\n\n    // The new index is the index of the active item, or whatever item\n    // is now at it's location if it's gone, bounded to the array.\n    let nextIdx = pos !== -1 ? pos : active.idx;\n    nextIdx = Math.max(0, Math.min(suggestions.length - 1, nextIdx));\n    const nextItem = suggestions[nextIdx];\n\n    if (nextItem && (nextIdx !== active.idx || nextItem.text !== active.text)) {\n      setActive({text: nextItem.text, idx: nextIdx});\n    }\n  }, [active, suggestions]);\n\n  const onConfirmSuggestion = (suggestion: Suggestion) => {\n    if (atMaxValues) {\n      return;\n    }\n\n    if (suggestion.final) {\n      // The user has finished a key-value pair\n      onConfirmText(suggestion.text);\n      setTyped('');\n      setActive(null);\n      setOpen(false);\n    } else {\n      // The user has finished a key\n      setTyped(suggestion.text);\n    }\n  };\n\n  const onConfirmText = (str: string) => {\n    if (atMaxValues) {\n      return;\n    }\n    if (str.endsWith(':')) {\n      return;\n    }\n    if (str === '') {\n      return;\n    }\n\n    setTyped('');\n    onChange([...values, tokenizedValueFromString(str, filteredSuggestionProviders)]);\n  };\n\n  const onKeyDown = (e: React.KeyboardEvent<any>) => {\n    if (atMaxValues && e.key !== 'Delete' && e.key !== 'Backspace') {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n    // Enter and Return confirm the currently selected suggestion or\n    // confirm the freeform text you've typed if no suggestions are shown.\n    if (e.key === 'Enter' || e.key === 'Return' || e.key === 'Tab') {\n      if (active) {\n        const picked = suggestions.find((s) => s.text === active.text);\n        if (!picked) {\n          throw new Error('Selection out of sync with suggestions');\n        }\n        onConfirmSuggestion(picked);\n        e.preventDefault();\n        e.stopPropagation();\n      } else if (typed.length) {\n        onConfirmText(typed);\n        e.preventDefault();\n        e.stopPropagation();\n      }\n      return;\n    }\n\n    // Typing space confirms your freeform text\n    if (e.key === ' ') {\n      e.preventDefault();\n      onConfirmText(typed);\n      return;\n    }\n\n    // Escape closes the options. The options re-open if you type another char or click.\n    if (e.key === 'Escape') {\n      setActive(null);\n      setOpen(false);\n      return;\n    }\n\n    if (!open && e.key !== 'Delete' && e.key !== 'Backspace') {\n      setOpen(true);\n    }\n\n    // The up/down arrow keys shift selection in the dropdown.\n    // Note: The first down arrow press activates the first item.\n    const shift = {ArrowDown: 1, ArrowUp: -1}[e.key];\n    if (shift && suggestions.length > 0) {\n      e.preventDefault();\n      let idx = (active ? active.idx : -1) + shift;\n      idx = Math.max(0, Math.min(idx, suggestions.length - 1));\n      const item = suggestions[idx];\n      if (item) {\n        setActive({text: item.text, idx});\n      }\n    }\n  };\n\n  const menuRef = React.createRef<HTMLDivElement>();\n  React.useEffect(() => {\n    if (menuRef.current && active) {\n      const el = menuRef.current.querySelector(`[data-idx='${active.idx}']`);\n      if (el && el instanceof HTMLElement && 'scrollIntoView' in el) {\n        el.scrollIntoView({block: 'nearest'});\n      }\n    }\n  }, [menuRef, active]);\n\n  const renderSuggestion = suggestionRenderer || ((suggestion) => suggestion.text);\n\n  return (\n    <Popover\n      isOpen={open && suggestions.length > 0 && !atMaxValues}\n      position=\"bottom-left\"\n      content={\n        suggestions.length > 0 ? (\n          <div style={{maxHeight: 235, overflowY: 'scroll'}} ref={menuRef}>\n            <StyledMenu>\n              {suggestions.map((suggestion, idx) => (\n                <MenuItem\n                  data-idx={idx}\n                  key={suggestion.text}\n                  text={renderSuggestion(suggestion)}\n                  shouldDismissPopover={false}\n                  active={active?.idx === idx}\n                  onMouseDown={(e: React.MouseEvent<any>) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    onConfirmSuggestion(suggestion);\n                    setActive(null);\n                  }}\n                />\n              ))}\n            </StyledMenu>\n          </div>\n        ) : (\n          <div />\n        )\n      }\n    >\n      <StyledTagInput\n        className={className}\n        values={values.map((v) => (v.token ? `${v.token}:${v.value}` : v.value))}\n        inputValue={typed}\n        onRemove={(_, idx) => {\n          const next = [...values];\n          next.splice(idx, 1);\n          onChange(next);\n        }}\n        onInputChange={(e) => {\n          setTyped(e.currentTarget.value);\n\n          if (onChangeBeforeCommit) {\n            const tokenized = tokenizedValueFromString(\n              e.currentTarget.value,\n              filteredSuggestionProviders,\n            );\n            onChange([...values, tokenized]);\n          }\n        }}\n        inputProps={{\n          onFocus: () => {\n            setOpen(true);\n            onFocus && onFocus();\n          },\n          onBlur: () => {\n            // Emulate behavior of addOnBlur for TagInput\n            // When a user clicks outside of the input, finish the current token\n            if (addOnBlur) {\n              onConfirmText(typed);\n            }\n            setOpen(false);\n          },\n        }}\n        $maxWidth={fullwidth ? '100%' : undefined}\n        onAdd={() => false}\n        onKeyDown={onKeyDown}\n        tagProps={{minimal: true}}\n        placeholder={placeholder || 'Filter'}\n        rightElement={\n          loading && open ? (\n            <Box style={{alignSelf: 'center'}} margin={{right: 4}}>\n              <Spinner purpose=\"body-text\" />\n            </Box>\n          ) : undefined\n        }\n      />\n    </Popover>\n  );\n};\n\nexport const StyledTagInput = styled(TagInput)<{$maxWidth?: any}>`\n  border: none;\n  border-radius: 8px;\n  box-shadow: ${Colors.Gray300} inset 0px 0px 0px 1px, ${Colors.KeylineGray} inset 2px 2px 1.5px;\n  min-width: 400px;\n  max-width: ${(p) => (p.$maxWidth ? p.$maxWidth : '600px')};\n  transition: box-shadow 150ms;\n\n  &.bp3-active {\n    box-shadow: ${Colors.Gray300} inset 0px 0px 0px 1px, ${Colors.KeylineGray} inset 2px 2px 1.5px,\n      rgba(58, 151, 212, 0.6) 0 0 0 3px;\n  }\n\n  input {\n    font-size: 14px;\n    font-weight: 400;\n    padding-left: 4px;\n    padding-bottom: 2px;\n    padding-top: 2px;\n  }\n\n  && .bp3-tag-input-values:first-child .bp3-input-ghost:first-child {\n    padding-left: 8px;\n  }\n\n  && .bp3-tag-input-values {\n    margin-right: 4px;\n    margin-top: 4px;\n  }\n\n  && .bp3-tag-input-values > * {\n    margin-bottom: 4px;\n  }\n\n  .bp3-tag {\n    border-radius: 6px;\n    display: inline-flex;\n    flex-direction: row;\n    font-size: 12px;\n    line-height: 16px;\n    align-items: center;\n    max-width: 400px;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    padding: 4px 8px;\n    user-select: none;\n  }\n\n  .bp3-tag.bp3-minimal:not([class*='bp3-intent-']) {\n    background-color: ${Colors.Gray100};\n    color: ${Colors.Gray900};\n  }\n\n  .bp3-tag.bp3-minimal.bp3-intent-success {\n    background-color: ${Colors.Green50};\n    color: ${Colors.Green700};\n  }\n\n  .bp3-tag.bp3-minimal.bp3-intent-warning {\n    background-color: ${Colors.Yellow50};\n    color: ${Colors.Yellow700};\n  }\n\n  .bp3-tag.bp3-minimal.bp3-intent-danger {\n    background-color: ${Colors.Red50};\n    color: ${Colors.Red700};\n  }\n`;\n\nconst StyledMenu = styled(Menu)`\n  width: 400px;\n`;\n"],"names":["GraphTraverser","items","itemNameMap","forEach","item","name","this","step","depth","results","next","traverse","Object","values","callback","inputs","input","dependsOn","d","itemNamed","solid","outputs","output","dependedBy","expansionDepthForClause","clause","includes","Number","MAX_SAFE_INTEGER","length","filterByQuery","query","all","applyingEmptyDefault","focus","traverser","Set","clauses","split","parts","exec","trim","parentsClause","itemName","descendentsClause","itemsMatching","filter","s","isPlannedDynamicStep","replace","startsWith","dynamicKeyWithoutIndex","test","upDepth","downDepth","add","fetchUpstream","other","fetchDownstream","Array","from","useCopyToClipboard","clipboardAPI","navigator","clipboard","node","React","current","document","createElement","style","position","top","body","appendChild","removeChild","text","writeText","value","select","execCommand","DEFAULT_RESULT_NAME","titleOfIO","i","definition","AssetConnectedEdges","edges","highlighted","AssetEdges","color","Colors","fromId","toId","id","btoa","viewBox","refX","refY","markerUnits","markerWidth","orient","fill","map","edge","idx","StyledPath","buildSVGPath","source","target","to","stroke","markerEnd","styled","AssetGraphJobSidebar","pipelineSelector","queryResult","useQuery","ASSET_GRAPH_JOB_SIDEBAR","fetchPolicy","partialRefetch","variables","repositoryName","repositoryLocationName","repoAddress","buildRepoAddress","Loading","pipelineSnapshotOrError","__typename","NonIdealPipelineQueryResult","isGraph","result","SidebarContainerOverview","S","container","gql","SIDEBAR_ROOT_CONTAINER_FRAGMENT","PYTHON_ERROR_FRAGMENT","SidebarAssetInfo","assetKey","liveData","partitionHealthData","usePartitionHealthData","data","SIDEBAR_ASSET_QUERY","path","lastMaterialization","asset","assetNodeOrError","Header","Box","padding","vertical","Spinner","purpose","repository","location","metadataForAssetNode","assetMetadata","assetType","hasAssetMetadata","assetConfigSchema","configField","configType","OpMetadataPlugin","op","metadata","pluginForMetadata","opName","AssetDefinedInMultipleReposNotice","loadedFromRepo","padded","AssetEvents","assetLastMaterializedAt","timestamp","assetHasDefinedPartitions","partitionDefinition","asSidebarSection","paramsTimeWindowOnly","params","setParams","borderBottom","description","SidebarComponent","title","horizontal","Description","ConfigTypeSchema","type","typesInScope","recursiveConfigTypes","AssetMetadata","TypeSidebarSection","flex","direction","gap","PartitionHealthSummary","DagsterType","displayName","displayNameForAssetKey","margin","left","right","marginBottom","display","justifyContent","flexWrap","opacity","alignItems","Icon","size","undefined","AssetCatalogLink","assetDetailsPathForKey","Link","SIDEBAR_ASSET_FRAGMENT","ASSET_NODE_CONFIG_FRAGMENT","ASSET_NODE_OP_METADATA_FRAGMENT","METADATA_ENTRY_FRAGMENT","ASSET_FOR_NAVIGATION_QUERY","MINIMAL_SCALE","AssetGraphExplorer","props","useAssetGraphData","explorerPath","opsQuery","fetchOptions","fetchResult","assetGraphData","graphQueryItems","graphAssetKeys","allAssetKeys","useLiveDataForAssetKeys","liveResult","liveDataByNode","liveDataRefreshState","useQueryRefreshAtInterval","FIFTEEN_SECONDS","useDidLaunchEvent","refetch","allowStaleData","graphHasCycles","NonIdealState","icon","AssetGraphExplorerWithData","pipelineName","options","setOptions","onChangeExplorerPath","onNavigateToForeignNode","findAssetLocation","apollo","useApolloClient","key","assetOrError","def","opNames","jobName","jobNames","find","isHiddenAssetGroupJob","groupName","useFindAssetLocation","setHighlighted","selectedAssetValues","selectedGraphNodes","nodes","tokenForAssetKey","lastSelectedNode","useAssetLayout","layout","loading","async","viewportEl","onSelectNode","e","stopPropagation","token","nodeIsInDisplayedGraph","nextOpsNameSelection","shiftKey","metaKey","tokensToAdd","tokensInRange","opsInRange","graph","existing","without","uniq","join","nextCenter","zoomToSVGCoords","bounds","x","y","lastRenderedLayout","setLastRenderedLayout","renderingNewLayout","zoomToSVGBox","autocenter","SplitPanelContainer","identifier","firstInitialPercent","firstMinSize","first","nodeType","keys","SVGViewport","ref","r","interactor","graphWidth","width","graphHeight","height","onClick","onArrowKeyDown","dir","layoutWithoutExternalLinks","pickBy","nextId","closestNodeInDirection","onDoubleClick","maxZoom","maxAutocenterZoom","_scale","scale","SVGContainer","groups","sort","a","b","group","AssetGroupNode","graphNode","JSON","parse","onMouseEnter","onMouseLeave","overflow","AssetNode","selected","ForeignNode","Checkbox","format","label","checked","preferAssetRendering","onChange","QueryRefresh","refreshState","dataDescription","LaunchAssetExecutionButton","context","assetKeys","isSourceAsset","n","preferredJobName","fetchOptionFilters","GraphQueryInput","placeholder","popoverPosition","second","graphDirectionOf","stack","pop","downstream","Boolean","some","push","seen","ledToTarget","repositoryDisambiguationRequired","fontWeight","workspacePath","GroupRepoName","withMiddleTruncation","buildRepoPath","maxLength","GroupOutline","marginTop","border","Math","max","background","MISSING_LIVE_DATA","unstartedRunIds","inProgressRunIds","runWhichFailedToMaterialize","computeStatus","AssetComputeStatus","stepKey","inAssetCatalog","firstOp","computeName","graphName","AssetInsetForHoverEffect","AssetNodeContainer","$selected","AssetNodeBox","Name","textOverflow","ASSET_NODE_NAME_MAX_LENGTH","maxWidth","ASSET_NODE_ANNOTATIONS_MAX_WIDTH","ComputeStatusNotice","markdownToPlaintext","marginLeft","minWidth","Stats","StatsRow","textAlign","AssetRunLink","runId","event","timeFormat","showSeconds","showTimezone","AssetLatestRunWithNotices","computeKind","minified","paddingTop","tags","window","requestAnimationFrame","dispatchEvent","Event","isEqual","AssetNodeMinimal","MinimalAssetNodeContainer","MinimalAssetNodeBox","MinimalName","fontSize","children","linkToRunEvent","rel","titleForRun","ASSET_NODE_LIVE_FRAGMENT","ASSET_NODE_FRAGMENT","BoxColors","p","NodeHighlightColors","FontFamily","UpstreamNotice","content","stopped","backgroundColor","ForeignNodeLink","className","opts","GROUP_NODE_PREFIX","layoutAssetGraph","graphData","g","dagre","compound","setGraph","rankdir","marginx","marginy","nodesep","edgesep","ranksep","setDefaultEdgeLabel","parentNodeIdForNode","shouldRender","renderedNodes","showGroups","groupId","setNode","getAssetNodeDimensions","setParent","foreignNodes","upstreamId","downstreamId","setEdge","v","w","weight","getForeignNodeDimensions","maxHeight","dagreNode","extendBounds","padBounds","bottom","groupBy","set","flat","points","xmin","min","ymin","ASSET_GRAPH_QUERY","notifyOnNetworkStatusChange","groupSelector","assetNodes","matching","hideNodesMatching","reject","buildGraphQueryItems","buildGraphData","hideEdgesToNodesOutsideQuery","removeEdgesToHiddenAssets","dependencyKeys","dependedByKeys","allNodes","allNodesById","toGraphId","notSourceAsset","upstream","calculateGraphDistances","keyBy","start","bfsUpstream","ins","flatMap","nextIns","bfsDownstream","outs","nextOuts","ASSETS_GRAPH_LIVE_QUERY","skip","buildLiveData","CONFIG_TYPE_SCHEMA_FRAGMENT","MULTIPLE_DEFINITIONS_WARNING","ASSET_DEFINITION_COLLISION_QUERY","collision","assetNodeDefinitionCollisions","allReposWithAsset","repositories","repoAddressAsString","side","intent","underline","showCustomAlert","addr","AssetLineageInfoElement","lineage_info","partition_list_label","partitions","partition_list_str","partition","asOf","Tooltip","Timestamp","ms","modifiers","offset","enabled","placement","reduce","accum","curr","ii","AssetLineageElements","elements","collapsed","setCollapsed","ButtonLink","slice","info","ASSET_LINEAGE_FRAGMENT","AssetEventsTable","hasPartitions","hasLineage","focused","setFocused","Table","HoverableRow","HTMLElement","closest","EventGroupRow","isFocused","MetadataEntriesRow","NoneSpan","latest","assetLineage","observationsAboutLatest","colSpan","metadataEntries","DetailsTable","entry","MetadataEntry","expandSmallValues","obs","moment","focusCss","paddingLeft","borderLeft","run","runOrError","repositoryOrigin","repo","useRepository","whiteSpace","Group","spacing","DisclosureTriangle","open","AllIndividualEventsLink","events","PipelineReference","showIcon","pipelineHrefContext","snapshotId","pipelineSnapshotId","isJob","isThisThingAJob","status","setOpen","count","Dialog","isOpen","canEscapeKeyClose","canOutsideClickClose","onClose","Button","DisclosureTriangleButton","$open","IconWrapper","AssetMaterializationGraphs","xHover","setXHover","reversed","reverse","graphDataByMetadataLabel","extractNumericData","xAxis","graphLabels","useStateWithStorage","validateHiddenGraphsState","collapsedLabels","setCollapsedLabels","toggleCollapsed","c","flexDirection","AssetValueGraph","onHoverX","shrinkable","json","isArray","datapoints","series","numericMetadataLabels","k","append","minX","maxX","minY","maxY","existingForPartition","isNaN","xNumeric","l","NaN","intValue","parseInt","intRepr","floatValue","serie","xs","ys","minXNumeric","maxXNumeric","CurrentRunsBanner","wrap","RunIDTag","BaseTag","textColor","fillColor","Warning","errorBackground","ErrorContainer","marginRight","FailedRunsSinceMaterializationBanner","LatestMaterializationMetadata","latestRun","latestEvent","latestAssetLineage","MetadataTable","NO_PARTITION_KEY","sortByEventTimestamp","before","xAxisDefault","time","loadUsingPartitionKeys","ASSET_EVENTS_QUERY","partitionInLast","limit","materializations","assetMaterializations","observations","assetObservations","allPartitionKeys","partitionKeys","loadedPartitionKeys","useRecentAssetEvents","grouped","definedPartitionKeys","m","orderedPartitionKeys","sorted","groupByPartition","activeItems","overflowX","ButtonGroup","buttons","updates","AssetLink","url","isGroup","linkUrl","wordBreak","assetNode","AssetMetadataTable","rows","DAGSTER_TYPE_FRAGMENT","AssetPageHeader","extra","breadcrumbs","list","href","elem","encodeURIComponent","BreadcrumbsWithSlashes","currentBreadcrumbRenderer","breadcrumbRenderer","BreadcrumbLink","AssetGlobalLineageLink","Breadcrumbs","labels","indexOf","datasets","lineTension","borderColor","pointBorderWidth","pointHoverBorderWidth","pointHoverRadius","pointHoverBorderColor","animation","duration","point","radius","dataset","dataIndex","scales","yAxisLabel","plugins","legend","onHover","_","activeElements","itemIdx","index","AssetWipeDialog","onComplete","requery","useMutation","ASSET_WIPE_MUTATION","refetchQueries","requestWipe","wipe","topBorder","AssetTable","view","assets","actionBarComponents","prefixPath","displayPathForAsset","maxDisplayCount","toWipe","setToWipe","canWipeAssets","usePermissions","groupedByFirstComponent","displayPathKey","stringify","useSelectionReducer","checkedPaths","checkedIds","onToggleFactory","onToggleAll","checkedAssets","checkedPathsOnscreen","pageDisplayPathKeys","pathKey","has","disabled","MoreActionsDropdown","clearSelection","paddingBottom","indeterminate","HTMLInputElement","pathStr","AssetEntryRow","isSelected","onToggleChecked","onWipe","canWipe","AssetEmptyRow","fullPath","paddingRight","nativeEvent","MouseEvent","getModifierState","RepositoryLink","showRefresh","workspacePathFromAddress","TimestampDisplay","AnchorButton","A","Popover","Menu","MenuLink","lineageScope","showBulkWipeDialog","setShowBulkWipeDialog","ASSET_TABLE_DEFINITION_FRAGMENT","ASSET_TABLE_FRAGMENT","AssetsEmptyState","validateSavedAssetView","storedValue","PAGE_SIZE","AssetsCatalogTable","setPrefixPath","setView","useQueryPersistedState","queryKey","cursor","setCursor","search","setSearch","decode","qs","encode","searchGroup","setSearchGroup","searchPath","toLowerCase","assetsQuery","ASSET_CATALOG_TABLE_QUERY","groupQuery","ASSET_CATALOG_GROUP_TABLE_QUERY","error","definitionToAssetTableFragment","assetsOrError","useAllAssets","filtered","groupMatch","buildAssetGroupSelector","pathMatch","cursorValue","cursorIndex","findIndex","ns","prevPageIndex","nextPageIndex","displayed","prevCursor","nextCursor","buildFlatProps","namespaceForAsset","namespaces","filterAssetsByNamespace","buildNamespaceProps","displayedKeys","useMergedRefresh","PythonErrorInfo","paginationProps","hasPrevCursor","hasNextCursor","popCursor","advanceCursor","reset","Wrapper","StickyTableContainer","$top","tooltip","TextInput","AssetGroupSuggest","assetGroups","uniqBy","localeCompare","repoContextNeeded","hasOwnProperty","Suggest","selectedItem","inputProps","rightElement","ClearButton","C","inputValueRenderer","itemPredicate","itemsEqual","itemRenderer","assetGroup","active","handleClick","noResults","onItemSelect","paths","every","part","messageForLaunchBackfillError","launchPartitionBackfill","errors","invalidStepKey","invalidOutputName","showBackfillErrorToast","SharedToaster","message","showBackfillSuccessToast","history","backfillId","action","RunningBackfillsNotice","partitionSetName","RUNNING_BACKFILLS_NOTICE_QUERY","runningBackfillCount","partitionBackfillsOrError","LaunchAssetChoosePartitionsDialog","LaunchAssetChoosePartitionsDialogBody","assetJobName","upstreamAssetKeys","upstreamData","allKeys","mostRecentKey","setSelected","previewCount","setPreviewCount","launching","setLaunching","client","useHistory","launchWithTelemetry","useLaunchWithTelemetry","partitionSetsData","ASSET_JOB_PARTITION_SETS_QUERY","partitionSet","partitionSetsOrError","onLaunch","CONFIG_PARTITION_SELECTION_QUERY","repositorySelector","partitionName","tagAndConfigData","partitionSetOrError","tagsOrError","runConfigOrError","runConfigData","yaml","executionParams","executionParamsForAssetJob","mode","launchPipelineExecution","mutate","mutation","LAUNCH_PARTITION_BACKFILL_MUTATION","backfillParams","selector","assetSelection","partitionNames","fromFailure","launchBackfillData","upstreamUnavailable","statusByPartition","upstreamUnavailableSpans","assembleIntoSpans","small","overflowY","showAssetKey","span","stringForSpan","canLaunchPipelineExecution","state","setState","confirm","useConfirmation","LAUNCH_ASSET_LOADER_QUERY","ridx","forceLaunchpad","stateForLaunchingAssets","upstreamAssetsWithNoMaterializations","missing","sessionPresets","getCommonJob","LAUNCH_ASSET_LOADER_RESOURCE_QUERY","resourceResult","pipeline","pipelineOrError","requiredResourceKeys","requiredResources","resourceKey","resources","modes","anyResourcesHaveRequiredConfig","isRequired","anyAssetsHaveRequiredConfig","getUpstreamAssetKeys","assetOpNames","flattenGraphs","solidSelectionQuery","jobsInCommon","LAUNCH_ASSET_CHECK_UPSTREAM_QUERY","executionMetadata","t","pick","DagsterTag","o","LAUNCH_ASSET_EXECUTION_ASSET_NODE_FRAGMENT","setResult","assetKeyJSONs","missingKeyJSON","loadKey","load","PARTITION_HEALTH_QUERY","materializationCountByPartition","fromPairs","materializationCount","spans","indexToPct","toFixed","assetData","minHeight","highestIndex","endIdx","prev","cur","selectedSpans","populated","startIdx","borderRadius","zIndex","outline","dagsterTypeKind","gqlTypePredicate","DagsterTypeName","typeKind","DagsterTypeSummary","horizontalPadding","tableSchemaEntry","schema","itemHorizontalPadding","GanttChartMode","MIN_SCALE","MAX_SCALE","LEFT_INSET","TOP_INSET","BOTTOM_INSET","FLAT_INSET_FROM_PARENT","BOX_HEIGHT","BOX_MARGIN_Y","BOX_SPACING_X","BOX_WIDTH","BOX_DOT_WIDTH_CUTOFF","BOX_SHOW_LABEL_WIDTH_CUTOFF","BOX_DOT_SIZE","BOX_DOT_MARGIN_Y","LINE_SIZE","CSS_DURATION","DEFAULT_OPTIONS","WATERFALL","hideWaiting","hideTimedMode","zoom","hideUnselectedSteps","isDynamicStep","endsWith","invocationsOfPlannedDynamicStep","plannedStepKey","runtimeStepKeys","replacePlannedIndex","stepKeyWithIndex","match","highlightTimer","GanttChartModeControl","msToMinuteLabel","round","msToSecondLabel","msToSubsecondLabel","TICK_CONFIG","tickIntervalMs","tickLabels","GanttChartTimescale","viewport","nowMs","startMs","highlightedMs","layoutSize","transform","ticks","lines","pxPerMs","tickConfig","pxPerTick","firstTickX","floor","TICK_LABEL_WIDTH","TimescaleContainer","TimescaleTicksContainer","formatElapsedTime","timeX","labelOffset","TimescaleLinesContainer","TICKS_ROW_HEIGHT","ZoomSlider","ZoomSliderContainer","$fillColor","onMouseDown","initialX","rect","currentTarget","getBoundingClientRect","classList","contains","pageX","onUpdate","nextValue","addEventListener","onRelease","removeEventListener","tabIndex","SliderStyles","validateSavedMode","HIGHLIGHT_TIME_EVENT","setHighlightedGanttChartTime","debounced","clearTimeout","setTimeout","CustomEvent","detail","GanttChart","onSetSelection","selection","toolbarActions","setMode","cachedLayout","cachedLayoutParams","graphFiltered","layoutParams","names","buildLayout","updateOptions","changes","onChangeMode","onUpdateQuery","onDoubleClickStep","GanttChartContainer","GanttChartInner","useViewport","containerProps","onMoveToViewport","hoveredStep","setHoveredNodeName","hoveredTime","setHoveredTime","overrideNowTime","Date","now","setNowMs","rootServerURI","AppContext","WebSocketContext","availability","lostWebsocket","WebSocket","CLOSED","minScale","startedPipelineAt","exp","log","exitedAt","renderInterval","timeout","listener","adjustLayoutWithRunMetadata","EMPTY_RUN_METADATA","boxes","boundsForBox","focusedTime","sortedSelectedSteps","steps","firstMeta","lastMeta","end","measurementComplete","GanttChartViewportContents","focusedSteps","onClickStep","GraphQueryInputContainer","WebsocketWarning","FilterInputsBackgroundBox","presets","interestingQueriesFor","axis","GanttStatusPanel","onHighlightStep","intersectsViewport","verticalLinesAtXCoord","box","child","childIdx","boundsForLine","childNotDrawn","childWaiting","overlapAtXCoord","GanttLine","darkened","dotted","depNotDrawn","depIdx","useDot","evt","boxStyleFor","IStepState","truncatedBoxLabel","markers","marker","aCenterY","bIsDot","bCenterY","straight","maxXAvoidingOverlap","borderTop","borderRight","totalPadding","SpinnerWrapper","GanttChartLoadingState","QueuedState","runsPathWithFilters","root","roots","addChildren","deepen","parents","boxesByY","changed","highestYParent","onTargetY","parentX","willCross","willCauseCrossing","bottomY","row","ensureSubtreeAfterParentInArray","parent","parentIdx","boxIdx","splice","added","out","dep","depNode","depBoxIdx","depBox","TextColorForStates","BackgroundColorForStates","positionAndSplitBoxes","positionFor","meta","assign","attempts","runBoxes","runIdx","exitState","WeakMap","nextMarkers","nextBoxes","get","cloneLayout","xForMs","widthForMs","_box","earliestAllowedX","unstarted","visit","minXForUnstartedChildren","shift","positionUntimedBoxes","globalMarkers","entries","stepBox","_run","Error","errorsQuery","slowStepsQuery","rightmostCompletedBox","subsetTitleForRun","stepsTag","RunGroupPanel","runStatusLastChangedAt","RUN_GROUP_PANEL_QUERY","runGroupOrError","runs","unsorted","startTime","RunGroupRun","ThinLine","RunTitle","RootTag","RUN_TIME_FRAGMENT","lineHeight","userSelect","preparing","executing","errored","succeeded","renderStepItem","stepName","StepItem","isFinished","startedProcessAt","EmptyNotice","collapsedByDefault","StepItemContainer","preventOverflow","flip","StepStatusDot","StepLabel","Elapsed","OptionsContainer","CursorControlsContainer","OptionsDivider","OptionsSpacer","toGraphQueryItems","plan","runtimeStepMetadata","keyExpansionMap","kind","StepKind","nodeTable","stepRuntimeKeys","nodeInput","upstreamKeys","upstreamKey","upstreamOutput","EXECUTION_PLAN_TO_GRAPH_FRAGMENT","setOffset","setSize","initialOffset","measureRef","resizeObserver","onApplySize","element","__sized","targetOffset","scrollTop","scrollLeft","clientWidth","clientHeight","observe","console","warn","disconnect","onScroll","cancel","animated","scrollWidth","scrollHeight","onDone","animate","done","setRef","el","PARENT_IN","PARENT_OUT","OpIOBox","jumpTargetOp","highlightedEdges","colorKey","layoutInfo","onHighlightEdges","isHighlighted","OpIOContainer","$colorKey","$highlighted","metadataForCompositeParentIO","parentDefinition","others","inputMappings","mappedInput","outputMappings","mappedOutput","metadataForIO","invocation","TOOLTIP_STYLE","OpNode","preventDefault","handleDoubleClick","handleEnterComposite","onEnterComposite","handleKindClicked","prevProps","dim","composite","NodeContainer","$minified","$secondaryHighlight","$dim","isDynamicMapped","inputDefinitions","outputDefinitions","OpNodeAssociatedAssets","more","OP_NODE_INVOCATION_FRAGMENT","OP_NODE_DEFINITION_FRAGMENT","Border","Background","hueForTag","charCodeAt","OpTags","OpTagsContainer","tag","USED_ATTRIBUTES","attributeURLToBase64Map","makeAttributeValuePortable","attrValue","fetch","makeSVGPortable","svg","nodeIterator","createNodeIterator","NodeFilter","SHOW_ELEMENT","baseStyles","getComputedStyle","nextNode","SVGElement","nodeStyles","attrName","prefix","boxSizing","removeClassesIterator","removeAttribute","fontFaces","querySelectorAll","textContent","styleEl","DETAIL_ZOOM","DEFAULT_ZOOM","MIN_AUTOCENTER_ZOOM","MIN_ZOOM","PanAndZoomInteractor","_animation","getOffsetXY","lastX","lastY","onMove","delta","onUp","onWheel","cursorPosition","altKey","shiftXY","deltaX","deltaY","targetScale","getMaxZoom","adjustZoomRelativeToScreenPoint","render","IconButton","adjusted","EPSILON","Slider","stepSize","labelRenderer","onExportToSVG","NoneInteractor","_viewport","panzoom","_lastWheelTime","_lastWheelDir","Node","onZoomAndCenter","offsetXY","screenToSVGCoords","abs","onKeyDown","nodeName","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","code","unclippedViewport","div","getElementById","ReactDOM","querySelector","XMLSerializer","serializeToString","blob","Blob","setAttribute","URL","createObjectURL","click","remove","passive","RO","forceUpdate","ownerRect","dw","dh","desiredScale","boundedScale","smoothZoom","clientX","clientY","dx","dy","nextScale","centerSVGCoord","newScale","dotsize","SVGViewportStyles","backgroundPosition","backgroundSize","transformOrigin","getViewport","Interactors","PanAndZoom","None","defaultProps","OP_WIDTH","IO_HEIGHT","PORT_INSET_X","PARENT_INVOCATION_PADDING","flattenIO","arrays","array","layoutExternalConnections","links","layoutWidth","insetWidth","inset","baseX","yShift","link","shiftDirection","layoutOp","accY","appendMiniIODots","ios","sortKey","clusteringKey","last","lastKey","layouts","io","_idx","port","centeringAdjustment","appendStackedIOBoxes","inputLayouts","opLayout","OP_BASE_HEIGHT","outputLayouts","_opLayoutCacheKey","ops","parentOp","solidKey","parentKey","getFullOpLayout","memoize","pipelineOps","graphlib","Graph","parentIOPadding","PARENT_DEFINITION_PADDING","opNamesPresent","edgeName","dagreNodes","conn","invocationBoundingBox","mappingLeftEdge","mappingLeftSpacing","boundingBottom","layoutParentGraphOp","asyncGetFullOpLayout","asyncMemoize","staticPathRoot","Promise","resolve","worker","Worker","terminate","postMessage","_assetLayoutCacheKey","getFullAssetLayout","asyncGetFullAssetLayout","reducer","cacheKey","payload","initialState","useOpLayout","dispatch","runAsync","runAsyncLayout","h","isOpHighlighted","isNodeOffscreen","layoutNode","viewportRect","selectedNodeKey","center","score","computeNodeKeyPrefixBoundingBoxes","maxDepth","base","x1","x2","y1","y2","useDocumentTitle","currentTitle","currentQueryString","defaults","raw","inferTypeOfQueryParam","useLocation","ignoreQueryPrefix","qsWithDefaults","qsDecoded","inferTypeOfQueryParams","valueRef","onChangeRef","updated","pathname","arrayFormat","q","copy","delete","lastCheckedId","allIds","indexOfLast","indexOfChecked","BackfillPartitionsRequestedDialog","backfill","fontFamily","BackfillStepStatusDialog","BackfillStepStatusDialogContent","pageSize","setPageSize","runsFilter","usePartitionStepQuery","PartitionStepStatus","BackfillTerminationDialog","CANCEL_BACKFILL_MUTATION","cancelBackfill","isSubmitting","setIsSubmitting","numUnscheduled","numPartitions","numRequested","unfinishedPartitions","partitionStatuses","runStatus","cancelableStatuses","unfinishedMap","BulkActionStatus","TerminationDialog","selectedRuns","BackfillTable","showPartitionSet","allPartitions","backfills","terminationBackfill","setTerminationBackfill","stepStatusBackfill","setStepStatusBackfill","partitionsRequestedBackfill","setPartitionsRequestedBackfill","RESUME_BACKFILL_MUTATION","resumeBackfill","canCancelPartitionBackfill","candidateId","resume","resumePartitionBackfill","BackfillRow","onTerminateBackfill","onResumeBackfill","onShowStepStatus","onShowPartitionsRequested","canLaunchPartitionBackfill","runsUrl","partitionSetBackfillUrl","workspacePipelinePath","repoName","repoLocation","stringFromValue","canCancelRuns","RunStatus","PartitionSetReference","BackfillRequested","onExpand","BackfillStatus","BackfillRunStatus","partitionData","TagButton","Tag","interactive","PartitionStatus","hideStatusTooltip","statuses","inProgressStatuses","partitionRun","splitPartitions","BACKFILL_TABLE_FRAGMENT","RUN_STATUS_COLORS","QUEUED","NOT_STARTED","STARTING","MANAGED","STARTED","SUCCESS","FAILURE","CANCELING","CANCELED","RunStatusPez","Pez","$color","$opacity","RunStatusPezList","fade","interactionKind","RunStatusOverlay","repoAddr","hoverOpenDelay","OverlayContainer","OverlayTitle","RunRow","HorizontalSpace","SectionHeader","JobMenu","job","lastRun","canLaunchPipelineReexecution","useLazyQuery","RUN_RE_EXECUTION_QUERY","fetchHasExecutionPlan","pipelineRunOrError","fetchIfPossible","useJobReExecution","reExecuteAllItem","canRunAllSteps","reExecuteFromFailureItem","canRunFromFailure","onOpened","disabledReason","RunFragments","JobTable","jobs","schedules","sensors","jobKey","makeJobKey","repoAddressString","LegacyPipelineTag","ScheduleOrSensorTag","NextTick","LastRunSummary","StepSummaryForRun","STEP_SUMMARY_FOR_RUN_QUERY","relevantSteps","failedStatuses","stepStats","StepEventStatus","stepCount","endTime","addQueryPrefix","TIME_FORMAT","nextTick","schedule","executionTimezone","futureTicks","scheduleState","InstigationStatus","earliest","earliestOverall","timezone","SCHEDULE_FUTURE_TICKS_FRAGMENT","RepoFilterButton","WorkspaceContext","allRepos","visibleRepos","toggleVisible","onBrowse","onToggle","rightIcon","TickTag","tick","instigationType","InstigationTickStatus","runIds","RunList","runKeys","skipReason","targetTagName","showError","InstigationType","LinkButton","minimal","assertUnreachable","LAUNCHED_RUN_LIST_QUERY","pipelineRunsOrError","FailedRunList","originRunIds","TICK_TAG_FRAGMENT","RUN_TABLE_RUN_FRAGMENT","InstigatedRunStatus","instigationState","RunStatusLink","RUN_STATUS_FRAGMENT","INSTIGATION_STATE_FRAGMENT","StatusTable","UnloadableSensors","sensorStates","UnloadableSensorInfo","sensorState","SensorStateRow","UnloadableSchedules","scheduleStates","UnloadableScheduleInfo","ScheduleStateRow","selectorId","canStopSensor","STOP_SENSOR_MUTATION","onCompleted","displaySensorMutationErrors","stopSensor","toggleOffInFlight","onChangeSwitch","jobOriginId","jobSelectorId","lacksPermission","latestTick","checkbox","instigatorState","canStopRunningSchedule","STOP_SCHEDULE_MUTATION","displayScheduleMutationErrors","stopSchedule","typeSpecificData","cronSchedule","scheduleOriginId","scheduleSelectorId","humanCronString","ConfigEditorConfigPicker","onSaveSession","onSelectPreset","onSelectPartition","partitionSets","configGenerators","PickerContainer","ConfigEditorConfigGeneratorPicker","presetName","partitionsSetName","onSelect","ConfigEditorPartitionPicker","basePath","repoAddressToSelector","CONFIG_PARTITIONS_QUERY","sortOrderKey","sortOrder","setSortOrder","retrieved","partitionsOrError","onClickSort","order","SortButton","Intent","str","defaultSelectedItem","button","shortcutLabel","shortcutFilter","onShortcut","configGenerator","itemListRenderer","itemsParentRef","renderItem","filteredItems","renderedPresetItems","renderedPartitionSetItems","bothTypesPresent","ulRef","solidSelection","CONFIG_EDITOR_GENERATOR_PIPELINE_FRAGMENT","CONFIG_EDITOR_GENERATOR_PARTITION_SETS_FRAGMENT","LaunchButtonStatus","useLaunchButtonCommonState","runCount","starting","setStarting","onConfigSelected","option","forced","Disabled","Ready","Starting","LaunchButton","config","ButtonWithConfiguration","LaunchButtonDropdown","primary","setIsOpen","allOptionsDisabled","popoverDisabled","joined","onInteraction","nextOpen","openOnTargetFocus","LaunchMenuItem","ButtonContainer","role","warning","onClickWithWarning","MaxwidthText","MenuItem","LAUNCH_PIPELINE_EXECUTION_MUTATION","logTelemetry","useTelemetryAction","behavior","opSelection","TelemetryAction","handleLaunchResult","showLaunchError","LaunchRootExecutionButton","getVariables","LaunchpadTransientSessionContainer","launchpadType","initialSessionComplete","createSingleSession","session","setSession","LaunchpadSession","onSave","newSession","LaunchpadStoredSessionsContainer","AssetLaunchpad","LaunchpadAllowedRoot","pipelinePath","JobLaunchpad","useParams","repoPath","useTrackPageView","explorerPathFromString","useJobTitle","useStripSnapshotFromPath","PIPELINE_EXECUTION_ROOT_QUERY","LaunchpadSessionLoading","LaunchpadSessionError","fallback","EXECUTION_SESSION_CONTAINER_PIPELINE_FRAGMENT","EXECUTION_SESSION_CONTAINER_PARTITION_SETS_FRAGMENT","GUTTER_ID","rm","elt","parentNode","showTooltipFor","tt","nodeRect","cloneNode","showTooltip","hide","CodeMirror","poll","setInterval","host","clearInterval","clearMarks","cm","lint","hasGutter","clearGutter","marked","clear","makeMarker","severity","multiple","tooltips","inner","annotationTooltip","ann","tip","messageHTML","innerHTML","createTextNode","updateLinting","annotationsNotSorted","annotations","line","groupByLine","anns","maxSeverity","tipLabel","createDocumentFragment","formatAnnotation","markText","__annotation","setGutterMarker","onUpdateLinting","startLinting","passOptions","getAnnotations","getHelper","waitingFor","abort","off","on","getValue","arg2","operation","lintAsync","then","issues","delay","onMouseOver","srcElement","pos","coordsChar","findMarksAt","docs","getDocs","docsEl","popupTooltip","LintState","ContainerType","parentsAddingChildKeyAtIndent","indent","parentsPoppingItemsDeeperThan","immediateParent","childKeys","parentsAddingChildKeyToLast","RegExps","KEYWORD","RegExp","DICT_COLON","DICT_KEY","QUOTED_STRING","BLOCKSTART_PIPE_OR_ARROW","NUMBER","VARIABLE","findAutocompletionContext","currentIndent","allConfigTypes","rootConfigType","available","fields","closestMappingType","inArray","nextTypeKey","typeParamKeys","parentTypeDef","typeKey","configTypeKey","parentConfigType","innerType","childTypeKey","childEntriesUnique","nonScalarTypeKey","nonScalarType","availableFields","expandAutocompletionContextAtCursor","editor","searchString","hintOptions","getCursor","getTokenAt","prevToken","ch","string","validationErrorToCodemirrorError","yamlDoc","codeMirrorDoc","reason","range","findRangeInDocumentFromPath","posFromIndex","doc","pathPart","contents","nodeAtPath","lineComment","flattenSpans","fold","startState","trailingSpace","escaped","inValue","inBlockLiteral","inBlockLiteralIndentation","inlineContainers","stream","peek","col","column","wasEscaped","wasTrailingSpace","indentMark","eatSpace","sol","skipToEnd","indentation","Dict","List","eol","keyIndent","parentContainer","formatReplacement","field","inList","replacement","postReplacementIndentation","listMarkerPresent","nextLineIndent","repeat","completionHasChildren","innerKey","isCompOrList","buildSuggestion","innerText","substr","isScalarUnionNewLine","searchWithoutQuotes","val","givenName","scalarType","scalarTypeKey","scalarSuggestions","nonScalarSuggestions","f","checkConfig","getDoc","lints","lintingTruncated","fromPos","toPos","lastMarkLocation","nextLineLocation","validationResult","isValid","old","lintOnChange","getWrapperElement","gutters","getOption","hasLintGutter","Function","AUTO_COMPLETE_AFTER_KEY","performLint","debounce","ConfigEditorStyle","createGlobalStyle","ConfigEditor","_editor","moveCursor","scroll","getScrollInfo","cursorCoords","scrollIntoView","moveCursorToPath","configCode","configSchema","performInitialPass","readOnly","onHelpContextChange","theme","lineNumbers","indentUnit","smartIndent","showCursorWhenSelecting","completeSingle","closeOnUnfocus","keyMap","extraKeys","showHint","Tab","foldGutter","editorDidMount","onBeforeChange","onConfigChange","onCursorActivity","getSelection","onBlur","onKeyUp","isHelpContextEqual","ConfigEditorHelp","allInnerTypes","Container","ConfigScrollWrap","AutocompletionsNote","CONFIG_EDITOR_RUN_CONFIG_SCHEMA_FRAGMENT","CONFIG_EDITOR_VALIDATION_FRAGMENT","errorStackToYamlPath","fieldName","listIndex","mapKey","responseToYamlValidationResult","configYaml","response","err","parsed","topLevelKey","ConfigEditorModePicker","resolvedMode","modeName","onModeChange","singleMode","valid","modeError","Select","activeItem","filterable","SOLID_SELECTOR_QUERY","GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT","OpSelector","serverProvidedSubsetError","onFlattenGraphsChange","inputRef","requestScopeHandleID","explodeCompositesInHandleGraph","solidHandles","flattenGraphsEnabled","opsFetchError","queryResultOps","errorMessage","PopoverErrorWrap","ShortcutHandler","nextQuery","onFocus","linkToPreview","setFlattenGraphs","isValidationError","stateToHint","invalid","present","none","RemoveExtraConfigButton","onRemoveExtraPaths","extraNodes","knownKeyExtraPaths","otherPaths","ScaffoldConfigButton","onScaffoldMissingConfig","missingNodes","confirmationMessage","RunPreview","validation","onHighlightPath","runConfigSchema","errorsOnly","setErrorsOnly","rootCompositeChildren","allConfigVersion","errorsAndPaths","fieldNames","solids","rest","hasOps","itemsIn","pathErrors","isPresent","pathExistsInObject","containsMissing","missingNode","isInvalid","isMissing","ItemsEmptyNotice","ErrorListContainer","Section","SectionTitle","ErrorRow","onHighlight","RuntimeAndResourcesSection","ItemSet","RUN_PREVIEW_VALIDATION_FRAGMENT","ErrorRowContainer","hoverable","truncateErrorMessage","object","scaffoldType","typeLookup","isSelector","String","Int","Float","Bool","Any","scaffoldPipelineConfig","createTypeLookup","YAML_SYNTAX_INVALID","previewLoading","preview","previewedDocument","tagEditorOpen","configLoading","editorHelpContext","LaunchButtonContainer","flexGrow","currentSession","mounted","editorSplitPanelContainer","previewCounter","tagsFromSession","configResult","PIPELINE_EXECUTION_CONFIG_SCHEMA_QUERY","configSchemaOrError","runConfigSchemaOrError","launchButtonTitle","launchButtonWarning","currentPreviewCount","configYamlOrEmpty","sanitizeConfigYamlString","PREVIEW_CONFIG_QUERY","isLatestRequest","isPipelineConfigValid","tagsApplyingNewBaseTags","newBaseTags","preservedUserTags","bt","preset","onlyKeyAndValue","runConfigYaml","needsRefresh","sessionSolidSelection","onConfigLoading","onConfigLoaded","onRefreshConfig","matchingPreset","openTagEditor","refreshableSessionBase","LoadingOverlay","isLoading","SessionSettingsBar","SessionSettingsSpacer","TagEditor","tagsFromDefinition","tagDict","toSave","onRequestClose","onRequestEdit","deletePropertyPath","updatedRunConfigData","merge","obj","yamlString","RUN_CONFIG_SCHEMA_OR_ERROR_FRAGMENT","LoadingOverlayContainer","editState","setEditState","toError","onTagEdit","TagList","editable","onRemove","TagContainer","sessionTag","canReloadRepositoryLocation","repoAddressTruncated","RepositoryName","tryReload","reloading","ReloadTooltip","StyledButton","showSwitch","scheduleCount","sensorCount","buttonText","MatchingSchedule","MatchingSensor","sensor","running","OpTypeSignature","inputSide","breakOnUnderscores","outputSide","TypeSignature","OP_TYPE_SIGNATURE_FRAGMENT","DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT","Code","PartitionRangeInput","valueString","setValueString","partitionNameJSON","partitionNameArr","placeholderForPartitions","tryCommit","terms","term","rangeMatch","allStartIdx","allEndIdx","suffix","textToPartitions","keyTestFn","selectionWindowSize","tooltipMessage","currentSelectionRange","setCurrentSelectionRange","toPartitionName","percentage","getRangeSelection","setHoveredSelectionRange","setSelectionRange","currentSelection","newSelected","keyStatus","_partitionsToSpans","showSeparators","_onClick","_onMouseDown","_statusToColor","_statusToText","PartitionRunListForStep","PARTITION_RUN_LIST_FOR_STEP_QUERY","RunTable","additionalColumnHeaders","hovered","setHovered","ceil","BOX_SIZE","BUFFER","PARTITION_STEP_STATUS_PIPELINE_QUERY","useMatrixData","stepQuery","stepRows","partitionColumns","sortPartitionSteps","stepsByName","stepRow","visibleCount","visibleStart","visibleEnd","visibleColumns","minUnix","maxUnix","unix","timeboundsOfPartitions","topLabelHeight","topLabelHeightForLabels","PartitionRunMatrixContainer","stepStatsByRunId","isStepKeyForNode","autoFocus","floating","flexShrink","Divider","PagerControl","$direction","$height","runsLoaded","PartitionStepSquare","PARTITION_MATRIX_SOLID_HANDLE_FRAGMENT","opened","setOpened","StatusSquareFinalColor","onOpening","onClosed","STEP_STATUS_COLORS","SKIPPED","IN_PROGRESS","flatGradient","GridColumn","multiselectFocused","TopLabelTiltedInner","LeftLabel","TopLabel","maxlength","TopLabelTilted","GridFloatingContainer","getStartTime","byStartTimeAsc","dynamicRegex","cachedMatrixData","shallowCompareKeys","solidsFiltered","partitionsByName","blankState","lastRunStepStatus","stats","partitionsWithARun","totalFailures","finalFailures","totalFailurePercent","finalFailurePercent","showFailuresAndGapsOnly","buildMatrixData","PARTITION_MATRIX_STEP_RUN_FRAGMENT","InitialDataState","loadingCursorIdx","skipQuery","version","dataState","setDataState","_serializedRunTags","runTags","stopIdx","nextCursorIdx","sliceNames","partitionSetTag","partitionTag","runTagsFilter","fetchRunsForFilter","fetched","concat","timer","recent","pending","relevant","byName","assemblePartitions","PARTITION_STEP_LOADER_QUERY","explodeComposite","handles","nested","handleID","inmap","compositeInput","interiorTargetName","interiorTarget","interiorTargetInput","outmap","compositeOutput","interiorTargetOutput","removeLeadingSpaces","leadingSpaces","_container","hasMore","expanded","updateHandleState","sel","createRange","selectNodeContents","removeAllRanges","addRange","Mask","ShowMoreHandle","buildSVGPaths","weakmapMemoize","sourceOutput","targetInput","outputIsDynamic","outDef","isDynamic","inputIsDynamicCollect","inputDef","isDynamicCollect","OpEdges","DynamicMarker","PX_TO_UNITS","clipToLength","len","SVGMonospaceText","allowTwoLines","lineChars","line1","line2","line1Y","pointerEvents","dominantBaseline","ExternalConnectionNode","labelAttachment","onDoubleClickLabel","textProps","textSize","intrinsicSizeForProps","textOrigin","BackingRect","cx","cy","rx","ry","strokeWidth","MappingLine","leftEdgeX","strokeLinecap","ParentOpNode","parentLayout","highlightingProps","onClickOp","SVGLabeledParentRect","destination","sourcePort","trgtPort","invocationInput","iidx","invocationOutput","NoOp","OpGraphContents","focusOps","parentHandleID","onDoubleClickOp","onEnterSubgraph","highlightedOps","selectedOp","EmptyHighlightedArray","OpGraph","argToOpLayout","arg","lastName","centerOp","focusOnOp","unfocus","_e","nextOp","cancelAnimations","onClickBackground","OP_GRAPH_OP_FRAGMENT","TypeExplorer","inputSchemaType","outputSchemaType","tableSchema","TableSchema","TYPE_EXPLORER_FRAGMENT","TypeExplorerContainer","typeName","buildPipelineSelector","TYPE_EXPLORER_CONTAINER_QUERY","dagsterTypeName","dagsterTypeOrError","TypeList","types","Custom","isBuiltin","groupTypes","typesForSection","StyledUL","TypeLI","TypeWithTooltip","TYPE_LIST_FRAGMENT","TypeListContainer","useRepositoryOptions","reposWithMatch","findRepoContainingPipeline","optionToRepoAddress","TYPE_LIST_CONTAINER_QUERY","dagsterTypes","StateColors","SidebarOpExecutionGraphs","solidName","highlightedStartTime","setHighlightedStartTime","SIDEBAR_OP_GRAPHS_QUERY","solidHandle","executionTime","SidebarOpInvocation","showInputs","showOutputs","SIDEBAR_OP_INVOCATION_FRAGMENT","SidebarOp","getInvocations","showingSubgraph","pipelineResult","SIDEBAR_PIPELINE_OP_QUERY","graphResult","SIDEBAR_GRAPH_OP_QUERY","solidContainer","graphOrError","useSidebarOpQuery","SidebarOpDefinition","onClickInvocation","SIDEBAR_OP_FRAGMENT","SIDEBAR_OP_DEFINITION_FRAGMENT","SidebarRoot","tab","opHandleID","parentOpHandleID","activeTab","TabDefinitions","Tabs","selectedTabId","TabLink","RightInfoPanelContent","GraphExplorer","parentHandle","nameMatch","setNameMatch","handleQueryChange","handleAdjustPath","fn","handleClickOp","handleEnterCompositeSolid","selectedName","selectedHandle","invalidSelection","invalidParent","solidsQueryEnabled","showAssetRenderingOption","explodeCompositesEnabled","explodeComposites","QueryOverlay","BreadcrumbsOverlay","OptionsOverlay","HighlightOverlay","selectedHandleID","onLeaveSubgraph","RightInfoPanel","GRAPH_EXPLORER_FRAGMENT","GRAPH_EXPLORER_ASSET_NODE_FRAGMENT","Color","toString","LargeDAGNotice","LargeDAGContainer","LargeDAGInstructionBox","EmptyDAGNotice","CenteredContainer","capitalize","EntirelyFilteredDAGNotice","LoadingNotice","LoadingContainer","PipelineExplorerSnapshotRoot","PipelineExplorerContainer","explorerPathToString","parentNames","PIPELINE_EXPLORER_ROOT_QUERY","snapshotPipelineSelector","rootHandleID","displayedHandles","assetNodesPresent","definitionName","truncationThreshold","truncatedName","workspacePipelinePathGuessRepo","ENABLED_FILTERS","PipelineRunsRoot","useQueryPersistedRunFilters","filterTokens","setFilterTokens","permanentTokens","repoToken","allTokens","useCursorPaginatedQuery","PIPELINE_RUNS_ROOT_QUERY","runsFilterForSearchTokens","nextCursorForResult","getResultArray","onAddTag","tokenAsString","tokenToString","enabledFilters","tokens","SidebarSection","CollapsingHeaderBar","SidebarTitle","SectionSmallHeader","SidebarSubhead","SectionItemContainer","SidebarResourcesSection","showModeName","loggers","resource","ContextResourceContainer","ContextResourceHeader","SIDEBAR_RESOURCES_SECTION_FRAGMENT","isLegacy","isPastSnapshot","parentSnapshotId","findRepositoryAmongOptions","repoContainsPipeline","Plugin","isComposite","requirement","outputDef","AssetNodeListItem","InvocationList","invocations","showAll","setShowAll","visible","clipped","ShowAllButton","TypeWrapper","OpLink","Invocation","handlePath","InvocationContainer","DependencyRow","Cell","DependencyHeaderRow","DependencyHeaderCell","ResourceHeader","ResourceContainer","DependencyTable","OpColumnContainer","onOpen","startCase","notebookPath","repoLocName","usePortal","src","sandbox","seamless","sql","ipynb","snowflake","kindMetadata","generic","LogLevel","DefaultLogLevels","Row","level","bgcolorForLevel","StructuredContent","OpColumn","widths","ColumnWidthsContext","OpColumnTooltipStyle","TimestampColumn","runStartTime","stepStartTime","TimezoneContext","canShowTooltip","runElapsedTime","formatElapsedTimeWithMsec","stepElapsedTime","TimestampColumnContainer","canShow","dark","timeNumber","locale","language","main","toLocaleTimeString","hour","minute","hourCycle","timeZone","browserTimezone","fractionalSec","toLocaleString","minimumFractionDigits","maximumFractionDigits","timeString","EventTypeColumn","EventTypeColumnContainer","eventType","OverflowFade","OverflowButtonContainer","OverflowButton","CellTruncationProvider","isOverflowing","contentContainerRef","onView","defaultExpand","detectOverflow","firstElementChild","forceExpandability","LogsRowStructuredContent","FailureContent","failureMetadata","errorSource","StepUpForRetryContent","logCaptureSteps","DefaultContent","currentQuery","updatedQuery","logType","logs","eventColor","eventIntent","typeCheck","success","expectationResult","AssetMetadataContent","operationResult","logKey","rawLogsUrl","rawLogsLink","stepKeys","eventTypeToDisplayType","contextMessage","errorStack","errorCause","ErrorSource","causes","cause","DagsterEventType","assetDashboardLink","styles","Structured","StructuredMemoizedContent","LOGS_ROW_STRUCTURED_FRAGMENT","Unstructured","UnstructuredMemoizedContent","LOGS_ROW_UNSTRUCTURED_FRAGMENT","LogsScrollingTable","filterKey","filterStepKeys","table","onWidthsChanged","didResize","AutoSizer","LogsScrollingTableSized","filteredNodes","logNodeLevel","levels","sinceTime","hasTextFilter","logQuery","textMatchNodes","hideNonMatches","filterLogs","LOGS_SCROLLING_TABLE_MESSAGE_FRAGMENT","cache","CellMeasurerCache","defaultHeight","fixedWidth","keyMapper","rowIndex","clientsideKey","isAtBottomOrZero","scrollToBottomObserver","atTopAndStarting","atBottom","scrollToTime","alignment","iterations","getOffsetForRow","scrollToPosition","rowRenderer","focusedTimeMatch","textMatch","lastRowStyles","noContentRenderer","attachScrollToBottomObserver","recomputeGridSize","clearAll","listEl","lastHeight","MutationObserver","rowgroupEl","attributes","subtree","ListEmptyState","deferredMeasurementCache","rowCount","rowHeight","overscanRowCount","measure","contentRect","ColumnWidthsStorageKey","ColumnWidths","getJSONForKey","ColumnWidthsProvider","onWidthsChangedFromContext","columnWidths","localStorage","setItem","Provider","isDragging","screenX","onMouseMove","onMouseUp","onResize","handleSide","isDraggable","HeaderContainer","HeaderDragHandle","HeaderLabel","Headers","HeadersContainer","NavigationBlock","handler","returnValue","overlap","canBatch","minMultipleWidth","nowLeft","currentStart","currentEnd","nextStart","nextEnd","minStart","maxEnd","ROW_HEIGHT","TIME_HEADER_HEIGHT","ONE_HOUR_MSEC","RunTimeline","bucketByRepo","setWidth","useRepoExpansionState","expandedKeys","observer","containerRef","ResizeObserver","Timeline","NoRunsTimeline","TimeDividers","interval","RunTimelineRow","buckets","repoKey","jobsForRepo","repoOrder","toLocaleLowerCase","nextTop","expandedJobCount","SECTION_HEADER_HEIGHT","duplicateRepoNames","repoNames","uniques","duplicates","findDuplicateRepoNames","repoAddressFromPath","TimelineSection","isDuplicateRepoName","SectionHeaderContainer","RepoSectionHeader","showLocation","RunStatusTags","inProgressCount","failedCount","succeededCount","successStatuses","inProgressText","succeededText","failedText","StatusSpan","timeMarkers","totalTime","firstMarker","markerCount","date","toPrecision","DividerContainer","DividerLabels","DividerLabel","DividerLines","DividerLine","NowMarker","mergeStatusToColor","anyInProgress","anyQueued","anyFailed","anySucceeded","anyScheduled","queuedStatuses","containerWidth","batched","batches","minChunkWidth","rangeLength","consolidated","minLeft","unshift","batchRunsForTimeline","JobName","RunChunks","batch","RunChunk","$multiple","RunHoverContent","BatchCount","sliced","remaining","HoverContentJobName","TimeElapsed","startUnix","endUnix","QueryfulRunTimeline","hourWindow","jobsWithRuns","setJobsWithRuns","loadedWindow","setLoadedWindow","flagRunBucketing","useFeatureFlags","RUN_TIMELINE_QUERY","inProgressFilter","createdBefore","terminatedFilter","doneStatuses","updatedAfter","jobsByKey","unterminated","terminated","workspaceOrError","runsByJob","locationEntries","locationEntry","locationOrLoadError","pipelines","jobTicks","jobRuns","startTimes","SectionHeaderButton","RepoName","RepoLocation","CancelRunButton","canTerminate","showDialog","setShowDialog","closeDialog","terminationState","stepSelectionWithState","stepStates","failed","finished","stepState","executionPlan","RunActionButtons","artifactsPersisted","pipelineError","repoMatch","useRepositoryForRun","matchType","repoForRun","repoLocationForRun","usePipelineAvailabilityErrorForRun","currentRunSelection","stepSelectionFromRunTags","currentRunIsFromFailure","full","scope","same","StepSelectionDescription","fromSelected","selectionAndDownstreamQuery","selectionKeys","fromFailureEnabled","preferredRerun","RunAssetKeyTags","clickableTags","showMore","setShowMore","assetCount","hidden","RunContext","timingStringForStatus","LoadingOrValue","RunDetails","RunConfigDialog","workspacePathFromRunDetails","RUN_DETAILS_FRAGMENT","RUN_FRAGMENT_FOR_REPOSITORY_MATCH","RunFragment","RunDagsterRunEventFragment","RUN_METADATA_PROVIDER_MESSAGE_FRAGMENT","BOX_EXIT_STATES","RETRY_REQUESTED","SUCCEEDED","FAILED","UNKNOWN","firstLogAt","mostRecentLogAt","extractLogCaptureStepsFromLegacySteps","fromTimestamp","ts","stepStatusToStepState","RunMetadataProvider","runMetadata","stepStat","transitions","attempt","extractMetadataFromRun","upsertMarker","upsertState","RUNNING","markerStart","pid","PREPARING","extractMetadataFromLogs","RunStats","RUN_STATS_QUERY","RunStatsDetailsContainer","runPath","stepsSucceeded","stepsFailed","expectations","SCHEDULED","RunStatusWithStats","RunStatusIndicator","RunStatusDot","pulse","pulseAnimation","keyframes","css","statusToIntent","statusToString","RunStatusTag","RunStatusTagWithStats","initializeState","frozenRuns","deletion","completed","deletionDialogReducer","prevState","DeletionDialog","onTerminateInstead","runIDs","terminatableCount","DELETE_MUTATION","destroy","runList","deletePipelineRun","canQuicklyClose","progressContent","errorCount","successCount","completionContent","errorText","reexecution","reexecutionDialogReducer","ReexecutionDialog","reexecutionStrategy","LAUNCH_PIPELINE_REEXECUTION_MUTATION","reexecute","reexecutionParams","parentRunId","strategy","launchPipelineReexecution","ReexecutionStrategy","RunActionsMenu","RunsQueryRefetchContext","visibleDialog","setVisibleDialog","canTerminatePipelineExecution","canDeletePipelineRun","copyConfig","PIPELINE_ENVIRONMENT_YAML_QUERY","loadEnv","called","closeDialogs","pipelineRun","infoReady","OPEN_LAUNCHPAD_UNKNOWN","repositoryLocation","getReexecutionVariables","download","RunBulkActionsMenu","unfinishedRuns","unfinishedIDs","selectedIDs","deletionMap","failedRuns","failedMap","reexecutableRuns","reexecutableMap","nonIdealState","highlightedIds","canTerminateOrDelete","anyFilter","anyPipelines","selectedFragments","additionalColumns","additionalColumnsForRow","pipelineOrJob","assetKeysForRun","RunTags","RunTag","actions","isDagsterTag","Namespace","displayedKey","Backfill","ScheduleName","SensorName","tagElement","TagActions","hoverCloseDelay","ActionContainer","priorityTagSet","renamedTags","canAddTagToFilter","copyAction","addToFilterAction","actionsForTag","displayedTags","priority","copiedTags","__ASSET_JOB_PREFIX","stepKeysToExecute","cb","preserveQuerystring","createHref","getBaseExecutionMetadata","hiddenTagKeys","rootRunId","asset_key","TERMINATE_MUTATION","RunTime","updateTime","RunStateSummary","RUN_PROVIDERS_EMPTY","tokensAsStringArray","tokenizedValuesFromStringArray","RunsFilterInput","RUNS_SEARCH_SPACE_QUERY","performQuery","suggestions","repositoryOptions","pipelineRunTags","pipelineNames","searchSuggestionsForRuns","suggestionProviders","suggestionProvidersFilter","limitedTokens","presentLimitedTokens","provider","mustForce","termination","terminationDialogReducer","policy","TerminateRunPolicy","terminatePolicy","terminatePipelineExecution","onToggleForce","showCheckbox","setEndTime","clearTimers","fontVariantNumeric","typeValues","getRunFilterProviders","stepNames","cursorStack","setCursorStack","queryVars","resultArray","nextStack","RUN_STATUSES","SchedulePartitionStatus","scheduleName","partitionPath","partitionURL","SCHEDULE_PARTITION_STATUS_QUERY","scheduleSelector","retrievePartitionStatus","partitionFragment","scheduleOrError","RetrievedSchedulePartitionStatus","loadable","partitionStatusesOrError","partitionsByType","displayStatus","calculateDisplayStatus","SCHEDULE_PARTITION_STATUS_FRAGMENT","SCHEDULE_FRAGMENT","REPOSITORY_SCHEDULES_FRAGMENT","REPOSITORY_INFO_FRAGMENT","SCHEDULES_ROOT_QUERY","INSTANCE_HEALTH_FRAGMENT","SchedulerInfo","daemonHealth","healthy","schedulerHealths","allDaemonStatuses","daemon","daemonType","schedulerHealth","required","SchedulesNextTicks","repos","nextTicks","futureTickSchedules","minMaxTimestamp","NextTickMenu","tickTimestamp","SCHEDULE_TICK_CONFIG_QUERY","loadTickConfig","evaluationResult","futureTick","menuItems","NextTickMenuItems","onItemOpen","NextTickDialog","runRequests","runRequest","selectedRunRequest","setSelectedRunRequest","close","SkipWrapper","RunRequestBody","runKey","SchedulesTable","partitionStatus","ScheduleRow","errorDisplay","runningScheduleCount","popoverClassName","runningCount","tooltipTimeFormat","userTimezone","TabularNums","timestampToString","TimestampTooltip","DEFAULT_TIME_FORMAT","EditCursorDialog","sensorSelector","setCursorValue","isSaving","setIsSaving","SET_CURSOR_MUTATION","requestSet","setSensorCursor","sensorName","humanizeSensorInterval","minIntervalSeconds","SensorDetails","targets","isCursorEditing","setCursorEditing","pipelinesAndJobs","targetCount","targetNames","pipelineOrJobLabel","lastCursor","PageHeader","SensorSwitch","SENSOR_FRAGMENT","SensorInfo","sensorHealths","sensorHealth","SensorsTable","SensorRow","TypeLink","TypeName","outlined","as","intentToFillColor","$strokeColor","intentToStrokeColor","$textColor","intentToTextColor","placeholderTextForItems","seed","ranked","incount","sum","outcount","example","setActive","pendingValue","setPendingValue","lastClause","lastElementName","solidItem","lastElementLower","buildSuggestions","onConfirmSuggestion","suggestion","preceding","nextIdx","nextText","OpSelectionWrapperDivRef","clickListener","OpSelectionWrapperDivElement","inputElement","shouldWrapperGetFocus","uncomitted","flattenGraphsFlag","opCountInfo","OpCountWrap","$hasWrap","enforceFocus","strokeColor","autoApplyChanges","blur","EnterHint","OpInfoWrap","nextProps","renderError","blankLoading","setBlankLoading","networkError","LoadingSpinner","isPage","grow","StyledMenuLink","iconWithColor","getTabA11yProps","getTabContent","titleText","tabCSS","Remark","remark","use","gfm","toPlainText","markdownCache","LRUCache","md","cached","processSync","validateExpandedKeys","storageKey","setExpandedKeys","nextExpandedKeys","ReloadAllButton","canReloadWorkspace","useRepositoryLocationReload","reloadFn","reloadFnForWorkspace","errorLocationId","onTryReload","onDismiss","origin","snapshotMatches","pipelineNameMatches","possibleMatches","repoAndSnapshotMatch","repoOption","Alert","iconColor","AlertContainer","$borderColor","AlertTitle","AlertDescription","ButtonWrapper","isActive","buttonElement","DagitCodeMirrorStyle","Icons","makeThemeString","StyledReadOnlyCodeMirror","StyledCodeMirror","renderTypeRecursive","innerIndent","DictBlockComment","fieldData","keyDisplay","DictKey","defaultValueAsJson","DictEntry","ConfigContent","Optional","ofTypeKey","keyTypeKey","valueTypeKey","keyLabelName","nonScalarTypeMarkup","scalarTypeMarkup","prettyJsonString","ConfigHeader","ConfigJSON","typeInScope","TypeSchemaContainer","DictComment","CursorPaginationControls","CursorHistoryControls","MainContent","StyledMenu","intentToIconColor","StyledMenuItem","MenuExternalLink","MenuDivider","BlueprintMenuDivider","BlueprintMenu","BlueprintMenuItem","StyledTable","pair","MetadataKey","$dark","MetadataTableWIP","singleContentElement","Page","tabs","PageHeaderContainer","popoverProps","deepmerge","StyledSlider","BlueprintMultiSlider","BlueprintSlider","onChangeSize","getItem","resizing","_size","firstPaneStyles","firstSize","PanelDivider","onSetResizing","parentRect","firstPanelPercent","DividerWrapper","HitArea","DividerHitArea","FirstOrSecondPanelToggle","SecondPanelToggle","prevSize","setPrevSize","initialIsOpen","Count","$size","findProviderByToken","providers","tokenizedValuesFromString","tokenizedValueFromString","colonAt","tokenizeString","TokenizingField","externalValues","maxValues","onChangeBeforeCommit","addOnBlur","fullwidth","suggestionRenderer","typed","setTyped","typedValue","atMaxValues","filteredSuggestionProviders","lastPart","suggestionsArr","matchesTypedText","availableSuggestionsForProvider","suggestionFilter","final","firstPart","nextItem","onConfirmText","menuRef","block","renderSuggestion","shouldDismissPopover","StyledTagInput","inputValue","onInputChange","tokenized","$maxWidth","onAdd","picked","tagProps","alignSelf","TagInput"],"sourceRoot":""}